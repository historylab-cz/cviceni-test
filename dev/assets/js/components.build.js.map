{"version":3,"file":"components.build.js","sources":["../../../../src/js/components/dom-load.js","../../../../src/js/components/component.js","../../../../src/js/components/magnifying-glass.js","../../../../src/js/lib/utils.js","../../../../src/js/components/media/media.js","../../../../src/js/components/media/audio-player.js","../../../../src/js/components/svg-lib/svg-dragndrop.js","../../../../src/js/components/svg-lib/svg-draw.js","../../../../src/js/components/svg-lib/svg-text.js","../../../../src/js/components/svg.js","../../../../src/js/components/sortable.js","../../../../src/js/components/svg-lib/svg-radial-menu.js","../../../../src/js/store/observer.js","../../../../src/js/store/store-constants.js","../../../../src/js/store/store.js","../../../../src/js/store/store-global.js","../../../../src/js/components/editor/editor.js","../../../../src/js/components/analytical-table.js","../../../../src/js/store/store-keywords.js","../../../../src/js/components/keywords.js","../../../../src/js/components/editor-tags-placeholder.js","../../../../src/js/components/test-quiz.js","../../../../src/js/components/generic-table.js","../../../../src/js/components/fullscreen.js","../../../../src/js/components/user-text.js","../../../../src/js/components/media/audio-player-normal.js","../../../../src/js/components/media/audio-player-simple.js","../../../../src/js/components/fake-map.js","../../../../src/js/components/media/video.js","../../../../src/js/components/selectable.js","../../../../src/js/components/new-table.js","../../../../src/js/components/draggable.js","../../../../src/js/components/window-load.js","../../../../src/js/components/components.js","../../../../src/js/lib/unsupported-browsers.js"],"sourcesContent":["\nconst domLoadComponents = () => {\n  console.log('domLoad:components');\n\n  // instantiate\n\n  // run\n\n};\n\nexport default domLoadComponents;\n","export default class Component {\n  constructor($element) {\n    this.target = $element;\n    this.$slide = this.target.closest('.slide');\n    this.lang = document.documentElement.getAttribute('lang');\n\n    if (!HISTORYLAB.import.done) {\n\n      if (this.$slide) {\n        this.$buttonFeedback = this.$slide.querySelector('[data-feedback-button]');\n\n        if (this.$buttonFeedback) {\n          this.$buttonFeedbackText = this.$buttonFeedback.querySelector('span');\n        }\n      }\n\n\n      this.showFeedback = this.showFeedback.bind(this);\n    }\n  }\n\n  showFeedback() {\n    if (this.$buttonFeedback && this.$buttonFeedback.classList.contains('button-hidden')) {\n      this.$buttonFeedback.classList.remove('button-hidden');\n    }\n  }\n\n  hideFeedback() {\n    this.$buttonFeedback.classList.add('button-hidden');\n  }\n}\n","import Component from './component';\n\nexport default class MagnifyingGlass extends Component {\n  // https://www.youtube.com/watch?v=e8IwM3iqnL0\n  constructor($element) {\n    super($element);\n    // SVG lupa a ještě dynamicky měnícího se SVG,\n    // který není na počátku známé?\n    // if (el.nodeName === 'svg') {\n    //   console.log('SVG');\n    //   el.children[0].getAttribute('xlink:href')\n    // }\n    this.$element = document.querySelector('[data-lupa]');\n    this.$canvas = document.querySelector('[data-lupa-canvas]');\n    this.ctx = this.$canvas.getContext('2d');\n\n    this._onStart = this._onStart.bind(this);\n    this._onMove = this._onMove.bind(this);\n    this._onEnd = this._onEnd.bind(this);\n    this._update = this._update.bind(this);\n    this._onResize = this._onResize.bind(this);\n\n    this.zoomGlassSize = 230;\n    this.targetBCR = null;\n    this.zoomed = 0;\n    this.targetZoomed = 0;\n\n    this.x = 0;\n    this.y = 0;\n    this.trackingTouch = false;\n\n    this._addEventListeners();\n    this._initCanvas();\n    this._onResize();\n\n    window.requestAnimationFrame(this._update);\n  }\n\n  _initCanvas() {\n    const width = this.zoomGlassSize;\n    const height = this.zoomGlassSize;\n    // if retina makes canvas more dense\n    const dPR = window.devicePixelRation || 1;\n    this.$canvas.width = width * dPR;\n    this.$canvas.height = height * dPR;\n\n    this.$canvas.style.width = `${width}px`;\n    this.$canvas.style.height = `${height}px`;\n\n    this.ctx.scale(dPR, dPR);\n  }\n\n  _onResize() {\n    this.targetBCR = this.target.getBoundingClientRect();\n  }\n\n  _onStart(event) {\n    if (event.target !== this.target) {\n      return;\n    }\n\n    event.preventDefault();\n\n\n    this.x = event.pageX || event.touches[0].pageX;\n    this.y = event.pageY || event.touches[0].pageY;\n\n    this.trackingTouch = true;\n    this.targetZoomed = 1;\n    this.zoomed = 0;\n\n    window.requestAnimationFrame(this._update);\n  }\n\n  _onMove(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.x = event.pageX || event.touches[0].pageX;\n    this.y = event.pageY || event.touches[0].pageY;\n  }\n\n  _onEnd() {\n    if (this.targetZoomed) {\n      // show OK button or feedback\n      this.showFeedback();\n    }\n\n    this.targetZoomed = 0;\n    this.trackingTouch = false;\n  }\n\n  _update() {\n    const TAU = Math.PI * 2;\n    const MAX_RADIUS = 100;\n    const radius = this.zoomed * MAX_RADIUS;\n\n    this.targetBCR = this.target.getBoundingClientRect();\n\n    // local coordinates (ratio <0,1>)\n    const ratioX =\n      // min. 0\n      Math.max(0,\n        // max. 1\n        Math.min(1, ((this.x - this.targetBCR.left) / this.targetBCR.width))\n      );\n    // console.log(ratioX);\n    const ratioY =\n      // min. 0\n      Math.max(0,\n        // max. 1\n        Math.min(1, ((this.y - this.targetBCR.top) / this.targetBCR.height))\n      );\n    // console.log(ratioY);\n\n    // actual zooming (scaling)\n    const imageScale = 2.5;\n    const scaledTargetWidth = this.targetBCR.width * imageScale;\n    const scaledTargetHeight = this.targetBCR.height * imageScale;\n\n    // Firefox on Windows has a bug because of the shadow\n    if (!(platform.os.family.indexOf('Windows') > -1 && platform.name.indexOf('Firefox') > -1)) {\n      // Shadow.\n      this.ctx.shadowColor = 'rgba(0,0,0,0.4)';\n      this.ctx.shadowBlur = 12;\n      this.ctx.shadowOffsetY = 8;\n    }\n\n    // Background.\n    this.ctx.clearRect(0, 0, this.zoomGlassSize, this.zoomGlassSize);\n    this.ctx.fillStyle = '#fff';\n    this.ctx.beginPath();\n    this.ctx.arc(\n      // x\n      this.zoomGlassSize / 2,\n      // y\n      (this.zoomGlassSize - 10) - radius,\n      // radius, startAngle, endAngle\n      radius, 0, TAU);\n    this.ctx.closePath();\n    this.ctx.fill();\n\n    // save the default state (without image)\n    this.ctx.save();\n\n    // Zoomed image.\n    this.ctx.beginPath();\n    this.ctx.arc(\n      // x\n      this.zoomGlassSize / 2,\n      // y\n      (this.zoomGlassSize - 10) - (radius + 1),\n      // radius, startAngle, endAngle\n      radius * 1.03, 0, TAU);\n    this.ctx.clip();\n    this.ctx.closePath();\n    this.ctx.drawImage(this.target,\n      // dx and dy (left and top)\n      (-ratioX * scaledTargetWidth) + (this.zoomGlassSize / 2),\n      (-ratioY * scaledTargetHeight) + (this.zoomGlassSize / 2),\n      // scaled width and height\n      scaledTargetWidth, scaledTargetHeight);\n\n    // go back to default state (without image)\n    // so next update starts fresh\n    this.ctx.restore();\n\n    // Position the parent $element.\n    this.$element.style.transform = `translate(${this.x}px, ${this.y}px)`;\n\n    // Update the zoom value.\n    this.zoomed += (this.targetZoomed - this.zoomed) / 4;\n\n    // Schedule another update if the zoom is fairly non-zero.\n    if (this.zoomed > 0.001) {\n      // if (this.zoomed > 0.001 && this.zoomed < 0.998) {\n      window.requestAnimationFrame(this._update);\n      // } else if (this.zoomed >= 0.998) {\n      //   this.zoomed = 1;\n    } else {\n      this.zoomed = 0;\n    }\n  }\n\n  _addEventListeners() {\n    // touch events\n    document.addEventListener('touchstart', this._onStart);\n    document.addEventListener('touchmove', this._onMove);\n    document.addEventListener('touchend', this._onEnd);\n    // mouse events\n    document.addEventListener('mousedown', this._onStart);\n    document.addEventListener('mousemove', this._onMove);\n    document.addEventListener('mouseup', this._onEnd);\n    // window events\n    window.addEventListener('resize', this._onResize);\n  }\n}\n","// https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript#3855394\nexport function __getQueryStringParams() {\n  const parameters = window.location.search.substr(1).split('&');\n\n  if (parameters === '') {\n    return {};\n  }\n\n  const b = {};\n\n  for (let i = 0; i < parameters.length; i += 1) {\n    const p = parameters[i].split('=', 2);\n\n    if (p.length === 1) {\n      b[p[0]] = '';\n    } else {\n      b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, ' '));\n    }\n  }\n\n  return b;\n}\n\nexport function __createNewCustomEvent(name, options = {}, data = null) {\n  const defaults = {\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Event_bubbling\n    bubbles: true,\n    // cancelBubble\n    // stopPropagation()\n    // cancelable\n    // composed\n    // currentTarget\n    // defaultPrevented\n    // preventDefault()\n    // eventPhase\n    // returnValue\n    // preventDefault()\n    // defaultPrevented\n    // target\n    // timeStamp\n    // type\n    // isTrusted\n  };\n\n  const properties = Object.assign(defaults, options);\n\n  return new CustomEvent(name, {\n    detail: data,\n    ...properties,\n  });\n}\n\nexport function __dispatchEvent($element, type, options, payload) {\n  const event = __createNewCustomEvent(type, options, payload);\n\n  $element.dispatchEvent(event);\n}\n\n/* https://plainjs.com/javascript/events/trigger-an-event-11/ */\nexport function __triggerEvent(el, type) {\n\n  if ('createEvent' in document) {\n    // modern browsers, IE9+\n    const e = new Event(type);\n    el.dispatchEvent(e);\n  } else {\n    // IE 8\n    const e = document.createEventObject();\n    e.eventType = type;\n    el.fireEvent('on'+e.eventType, e);\n  }\n}\n\nexport function __keycodeIsPrintableCharacter(keycode) {\n\n  const valid =\n    (keycode > 47 && keycode < 58) || // number keys\n    keycode == 32 || keycode == 13 || // spacebar & return key(s) (if you want to allow carriage returns)\n    (keycode > 64 && keycode < 91) || // letter keys\n    (keycode > 95 && keycode < 112) || // numpad keys\n    (keycode > 185 && keycode < 193) || // ;=,-./` (in order)\n    (keycode > 218 && keycode < 223); // [\\]' (in order)\n  // https://stackoverflow.com/questions/12467240/determine-if-javascript-e-keycode-is-a-printable-non-control-character#answer-12467610\n\n  return valid;\n\n}\n\nexport function __isObject(item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}\n\n// https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\n// Maybe use lodash ? https://lodash.com/docs/4.17.10#defaultsDeep\nexport function __mergeDeep(target, source) {\n  const output = Object.assign({}, target);\n  if (__isObject(target) && __isObject(source)) {\n    Object.keys(source).forEach((key) => {\n      if (__isObject(source[key])) {\n        if (!(key in target)) {\n          Object.assign(output, { [key]: source[key] });\n        } else {\n          output[key] = __mergeDeep(target[key], source[key]);\n        }\n      } else {\n        Object.assign(output, { [key]: source[key] });\n      }\n    });\n  }\n  return output;\n}\n\nexport function __isObjectEmpty(object) {\n  return !Object.keys(object).length;\n}\n\nexport function __insertBefore(newNode, referenceNode) {\n  referenceNode.parentNode.insertBefore(newNode, referenceNode);\n}\n\nexport function __insertAfter(newNode, referenceNode) {\n\n  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n\n}\n\nexport function __getRealDimensions(el, translated = true) {\n\n  const clonedElement = el.cloneNode(true);\n\n  clonedElement.style.visibility = 'hidden';\n  clonedElement.style.display = 'block';\n\n  __insertAfter(clonedElement, el);\n\n  const elDimensions = clonedElement.getBoundingClientRect();\n  const elPosition = (translated) ? __positionTranslated(clonedElement) : __position(clonedElement);\n\n\n  __remove(clonedElement);\n\n  return {\n    width: elDimensions.width,\n    height: elDimensions.height,\n    top: elPosition.top,\n    left: elPosition.left,\n  };\n\n}\n\nexport function __remove(el /* :HTMLElement */) {\n\n  el.parentNode.removeChild(el);\n\n}\n\n\nexport function __getHTML(node) {\n\n  if (!node || !node.tagName) { return; }\n  if (node.outerHTML) { return node.outerHTML; }\n\n  // polyfill:\n  const wrapper = document.createElement('div');\n  wrapper.appendChild(node.cloneNode(true));\n  return wrapper.innerHTML;\n\n}\n\nexport function __getText(el) {\n  return el.innerText || el.textContent;\n}\n\nexport function __globalPosition(event) {\n  // d3.event\n  // The current event, if any. This is set during the invocation of an event listener, and is reset after the listener terminates. Use this to access standard event fields such as event.timeStamp and methods such as event.preventDefault. While you can use the native event.pageX and event.pageY, it is often more convenient to transform the event position to the local coordinate system of the container that received the event using d3.mouse, d3.touch or d3.touches.\n  // If you use Babel, Webpack, or another ES6-to-ES5 bundler, be aware that the value of d3.event changes during an event! An import of d3.event must be a live binding, so you may need to configure the bundler to import from D3’s ES6 modules rather than from the generated UMD bundle; not all bundlers observe jsnext:main. Also beware of conflicts with the window.event global.\n  return {\n    x: event.pageX,\n    y: event.pageY,\n  };\n}\n\nexport function __localPosition(container) {\n  // d3.mouse\n  // Returns the x and y coordinates of the current event relative to the specified container. The container may be an HTML or SVG container element, such as a G element or an SVG element. The coordinates are returned as a two-element array of numbers [x, y].\n  // BUG: d3.mouse doesn’t observe CSS transform on Firefox — https://github.com/d3/d3-selection/issues/81\n  // TEMPORARY FIX: https://github.com/d3/d3-selection/issues/191#issuecomment-474987103\n\n  let position = [];\n\n  if (platform.name === 'Firefox' && d3.event.target.closest('.half-slide-active')) {\n    // this works for Firefox even in transformed container\n    // if (platform.name === 'Firefox')\n    // but creates another bug when used on top of another SVG element (with different viewbox?),\n    // so make temporary fix only of .half-slide-active to fix the orginal bug with new bug\n    // console.log(d3.event.target.closest('.half-slide-active'));\n    position = [\n      d3.event.offsetX,\n      d3.event.offsetY,\n    ];\n  } else {\n    // this works for Chrome\n    position = d3.mouse(container);\n  }\n\n  return {\n    x: d3.format('.0f')(position[0]),\n    y: d3.format('.0f')(position[1]),\n  };\n}\n\nexport function __positionTranslated(el) {\n\n\n  const curTransform = new WebKitCSSMatrix(window.getComputedStyle(el).webkitTransform);\n\n  const body = document.body;\n\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n\n  return {\n    left: el.offsetLeft + curTransform.m41,\n    top: el.offsetTop + curTransform.m42,\n  };\n\n}\n\nexport function __position(el) {\n\n  const elAttibutes = el.getBoundingClientRect();\n  const body = document.body;\n\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n\n  return {\n    left: elAttibutes.left + scrollLeft,\n    top: elAttibutes.top + scrollTop,\n    height: elAttibutes.height,\n    width: elAttibutes.width,\n  };\n}\n\n// TODO: check for https://github.com/vladocar/nanoJS/\nexport function __toggleClass(element, cls) {\n  if (__hasClass(element, cls)) {\n    __removeClass(element, cls);\n  } else {\n    __addClass(element, cls);\n  }\n}\n\nexport function __hasClass(element, cls) {\n  // if there are no elements or classes, we're done\n  if (!element || !cls) return false;\n  return (element.classList) ? element.classList.contains(cls) : (`${element.className} `).indexOf(`${cls} `) > -1;\n}\n\nexport function __addClass(elements, classes) {\n  let _elements = elements;\n  let _classes = classes;\n\n  // if there are no elements or classes, we're done\n  if (!_elements || !_classes) { return; }\n\n  if (typeof (_elements) === 'string') {\n    // if we have a selector, get the chosen _elements\n    _elements = document.querySelectorAll(_elements);\n  } else if (_elements.tagName) {\n    // if we have a single DOM element, make it an array to simplify behavior\n    _elements = [_elements];\n  }\n\n  if (typeof (_classes) === 'string') {\n    // make an array from string _classes\n    _classes = _classes.split(' ');\n  } else {\n    console.log('Class argument must be string with spaces in between class names.');\n    return;\n  }\n\n  // add class to all chosen _elements\n  for (let i = 0; i < _elements.length; i += 1) {\n    // check classList support\n    if (_elements[i].classList) {\n      _elements[i].classList.add(..._classes);\n    } else if (!__hasClass(_elements[i], ..._classes)) {\n      for (let j = 0; j < _classes.length; j += 1) {\n        _elements[i].classes += ` ${_classes[j]}`;\n      }\n    }\n  }\n}\n\nexport function __removeClass(elements, classes) {\n  let _elements = elements;\n  let _classes = classes;\n\n  // if there are no elements or classes, we're done\n  if (!_elements || !_classes) { return; }\n\n  if (typeof (_elements) === 'string') {\n    // if we have a selector, get the chosen _elements\n    _elements = document.querySelectorAll(_elements);\n  } else if (_elements.tagName) {\n    // if we have a single DOM element, make it an array to simplify behavior\n    _elements = [_elements];\n  }\n\n  if (typeof (_classes) === 'string') {\n    // make an array from string _classes\n    _classes = _classes.split(' ');\n  } else {\n    console.log('Class argument must be string with spaces in between class names.');\n    return;\n  }\n\n  // remove class from all chosen _elements\n  for (let i = 0; i < _elements.length; i += 1) {\n    // check classList support\n    if (_elements[i].classList) {\n      _elements[i].classList.remove(..._classes);\n    } else {\n      for (let j = 0; j < _classes.length; j += 1) {\n        _elements[i].className = _elements[i].className.replace(new RegExp(`\\\\b${classes[j]}\\\\b`, 'g'), '');\n      }\n    }\n  }\n}\n","import { __createNewCustomEvent } from '../../lib/utils';\n\nconst mediaEvents = {\n  playchange: __createNewCustomEvent('playchange'),\n  timechange: __createNewCustomEvent('timechange'),\n  canplaystart: __createNewCustomEvent('canplaystart'),\n};\n\nfunction stopPlayingVideoPlayers($players) {\n  // pause all other playing media tracks\n  $players.forEach(($player) => {\n    const $media = $player.querySelector('audio') || $player.querySelector('video');\n    if ($media && !$media.paused) {\n      $media.pause();\n      $player\n        .querySelector('[data-player-control]')\n        .setAttribute('data-player-control', 'paused');\n    }\n  });\n}\n\nfunction getSecondsMinutesFormat(seconds) {\n  const duration = {\n    seconds: Math.floor(seconds),\n    minutes: Math.floor(seconds / 60),\n  };\n\n  duration.seconds = (duration.seconds - (duration.minutes * 60)).toString(10);\n\n  return `${duration.minutes}:${(`0${duration.seconds}`).slice(-2)}`;\n}\n\nexport {\n  getSecondsMinutesFormat,\n  stopPlayingVideoPlayers,\n  mediaEvents,\n};\n","import Component from '../component';\nimport { getSecondsMinutesFormat, stopPlayingVideoPlayers } from './media';\n\nexport default class AudioPlayer extends Component {\n  // eslint-disable-next-line no-useless-constructor\n  constructor($element) {\n    super($element);\n  }\n\n  // TODO: move to audio-simple.js\n  static addEventListeners($item, showFeedback) {\n    const $players = document.querySelectorAll('[data-player-audio]');\n    const $audio = $item.querySelector('audio');\n    const $playButton = $item.querySelector('[data-player-control]');\n    const $timeLeft = $item.querySelector('[data-audio-time-left]');\n\n    $playButton.addEventListener('click', (event) => {\n      if ($playButton.getAttribute('data-player-control') === 'paused') {\n        // TODO: abstract\n        stopPlayingVideoPlayers($players);\n        $audio.play();\n        $playButton.setAttribute('data-player-control', 'playing');\n      } else {\n        // TODO: abstract\n        $audio.pause();\n        $playButton.setAttribute('data-player-control', 'paused');\n      }\n\n      showFeedback();\n\n      event.stopPropagation();\n    }, false);\n\n    // do not propagate audio control events higher into the dom\n    $playButton.addEventListener('mousedown', (event) => {\n      event.stopPropagation();\n    }, false);\n\n    $audio.addEventListener('timeupdate', () => {\n      $timeLeft.innerText = getSecondsMinutesFormat($audio.currentTime);\n    });\n\n    $audio.addEventListener('ended', () => {\n      $playButton.setAttribute('data-player-control', 'paused');\n    });\n  }\n}\n","export default class SVGDragNDrop {\n  // static drag(id) {\n  //   d3.drag()\n  //     .on('start', () => {\n  //       SVGDragNDrop.start(id);\n  //     })\n  //     .on('drag', () => {\n  //       SVGDragNDrop.dragged(id);\n  //     })\n  //     .on('end', () => {\n  //       SVGDragNDrop.end(id);\n  //     });\n  // }\n\n  static start(element) {\n    d3.select(element).raise().classed('is-dragged', true);\n  }\n\n  static dragged(element, diff) {\n\n    d3.select(element)\n      .attr('x', (d3.event.x - diff.x).toFixed())\n      .attr('y', (d3.event.y - diff.y).toFixed());\n  }\n\n  static end(element, type, diff) {\n\n    d3.select(element)\n      .attr('x', (d3.event.x - diff.x).toFixed())\n      .attr('y', (d3.event.y - diff.y).toFixed())\n      // neumožňuje v jiných funkcí s tímto objektem dále pracovat,\n      // protože pracují s id\n      // .attr('id', `${type}-${d3.event.x.toFixed()}-${d3.event.y.toFixed()}`)\n      .classed('is-dragged', false);\n  }\n}\n","import { __localPosition, __dispatchEvent } from '../../lib/utils';\n\n// import SVG from '../svg';\nimport SVGDragNDrop from './svg-dragndrop';\nimport SVG from '../svg';\n\nexport default class SVGDraw {\n  // static selectPath(svg) {\n  //   // https://bl.ocks.org/mbostock/8027637\n  // }\n\n  static renderPath($svg, callback) {\n    if (d3.event.sourceEvent.target.nodeName === 'image') {\n\n      const line = d3.line()\n        // removed smooth curve to get rid of loong decimals\n        // see https://github.com/d3/d3-path/issues/10\n        .curve(d3.curveLinear); // _dragStarted\n\n      const format = d3.format('.0f');\n      const d = d3.event.subject;\n      // origin\n      let x0 = format(d3.event.x);\n      let y0 = format(d3.event.y);\n\n      const id = `${$svg.id}_path-${x0}-${y0}`;\n\n      const active = d3.select(`#${$svg.id} .svg-view`).append('svg:path')\n        // .attr('marker-start', 'url('#marker-circle-blue')')\n        // .attr('marker-end', 'url('#marker-arrow-blue')')\n        .attr('data-svg-path', '')\n        .attr('class', 'svg-path')\n        .attr('id', id)\n        .datum(d);\n\n      // github.com/d3/d3-drag#event_on\n      d3.event\n        .on('drag', () => {\n          // current position\n          const x1 = format(d3.event.x);\n          const y1 = format(d3.event.y);\n          // distance from origin\n          const dx = x1 - x0;\n          const dy = y1 - y0;\n\n          // if the distance of drag event is too large, make new origin\n          if ((dx * dx) + (dy * dy) > 300) d.push([x0 = x1, y0 = y1]);\n          // smooth line, correct last point\n          else d[d.length - 1] = [x1, y1];\n\n          active.attr('d', line);\n        })\n        .on('end', () => {\n          const $thisPath = d3.select(`#${id}`);\n          if ($thisPath) {\n            if ($thisPath.attr('d')) {\n              if ($thisPath.attr('d').length < 40) {\n                $thisPath.remove();\n              } else {\n                // dispatch event that svg has changed\n                __dispatchEvent(document, 'svg.change', {}, {\n                  svg: {\n                    id: $svg.id,\n                    task: 'create',\n                    node: $thisPath.node(),\n                    nodeName: $thisPath.node().nodeName,\n                    contextMenu: false,\n                  },\n                });\n              }\n            } else if (!$thisPath.attr('d')) {\n              $thisPath.remove();\n            }\n          }\n\n          callback();\n        });\n\n      // add events to element\n      SVGDraw.pathEventsManager($svg, d3.select(`#${id}`).node());\n    }\n  }\n\n  // Draw a SVG circle on click\n  static createCircle($svg, color = 'blue') {\n    const d3svg = d3.select(`#${$svg.id} .svg-view`);\n    // const canvas = document.querySelector(`#${$svg.id} .svg-view`);\n    const localPosition = __localPosition($svg);\n    const id = `${$svg.id}_circle-${localPosition.x}-${localPosition.y}`;\n\n    // circle wrapper\n    const foreignObject = d3svg.append('svg:foreignObject')\n      .attr('data-svg-circle', '')\n      .attr('id', id)\n      .attr('x', localPosition.x)\n      .attr('y', localPosition.y)\n      .attr('width', 1)\n      .attr('height', 1);\n\n    const circle = foreignObject.append('xhtml:div')\n      .attr('class', 'svg-circle blue');\n\n    const $element = document.querySelector(`#${id}`);\n\n    // add events to element\n    SVGDraw.circleEventsManager($svg, $element);\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: $svg.id,\n        task: 'create',\n        node: $element,\n        nodeName: $element.nodeName,\n        contextMenu: false,\n      },\n    });\n  }\n\n  static pathEventsManager($svg, $element) {\n    d3.select(`#${$element.id}`).on('click', () => {\n      // dispatch event that svg has changed\n      __dispatchEvent(document, 'svg.change', {}, {\n        svg: {\n          id: $svg.id,\n          task: 'remove',\n          node: d3.event.target,\n          nodeName: d3.event.target.nodeName,\n          contextMenu: false,\n        },\n      });\n\n      d3.select(`#${$element.id}`).remove();\n\n      d3.event.preventDefault();\n    }, false);\n  }\n\n  static circleEventsManager($svg, $element) {\n    const $canvas = document.querySelector(`#${$svg.id} .svg-view`);\n\n    // TODO:\n    // standalone function\n    // same for all draggable svg elements\n    let elementPosition = [\n      $element.getAttribute('x'),\n      $element.getAttribute('y'),\n    ];\n    let diff = {};\n\n    const selection = d3.selectAll(`#${$element.id} > div`);\n    d3.select(selection.nodes()[0]).on('click', () => {\n\n      // dispatch event that svg has changed\n      __dispatchEvent(document, 'svg.change', {}, {\n        svg: {\n          id: $svg.id,\n          task: 'remove',\n          node: $element,\n          nodeName: $element.nodeName,\n          contextMenu: false,\n        },\n      });\n\n      // dispatch event that drop item was deleted\n      const idParts = $element.id.split('_');\n      if (idParts[idParts.length - 1] === 'dropItem') {\n        __dispatchEvent(document, 'svg.drop.delete', {}, {\n          item: {\n            id: idParts[1],\n            $object: $element.firstChild,\n          },\n        });\n      }\n\n      d3.event.target.closest('foreignObject').remove();\n    })\n      .call(d3.drag()\n        .container($canvas)\n        .subject($element)\n        .on('start', () => {\n          diff = {\n            x: d3.event.x - elementPosition[0],\n            y: d3.event.y - elementPosition[1],\n          };\n\n          SVGDragNDrop.start($element);\n        })\n        .on('drag', () => {\n          SVGDragNDrop.dragged($element, diff);\n        })\n        .on('end', () => {\n          const oldXCoordinate = elementPosition[0];\n          const oldYCoordinate = elementPosition[1];\n          let taskType = 'move';\n\n          SVGDragNDrop.end($element, 'circle', diff);\n\n          elementPosition = [\n            $element.getAttribute('x'),\n            $element.getAttribute('y'),\n          ];\n\n          // if clone is changed, then dispatch create event\n          if (SVG.removeCloneConnectionManager($element)) taskType = 'create';\n\n          if (elementPosition[0] !== oldXCoordinate || elementPosition[1] !== oldYCoordinate) {\n            // dispatch event that svg has changed\n            __dispatchEvent(document, 'svg.change', {}, {\n              svg: {\n                id: $svg.id,\n                task: taskType,\n                node: $element,\n                nodeName: $element.nodeName,\n                contextMenu: false,\n              },\n            });\n          }\n        }));\n  }\n}\n","import {\n  __addClass,\n  __removeClass,\n  __hasClass,\n  __dispatchEvent,\n} from '../../lib/utils';\n\nimport SVG from '../svg';\nimport SVGDragNDrop from './svg-dragndrop';\n\nexport default class SVGText {\n  static createText(maxLength = 333, minLength = 2) {\n    const $svg = document.querySelector('[data-svg-active=\"true\"]');\n    const svgID = $svg.id;\n    const svgGroup = d3.select($svg).select('.svg-view');\n\n    // const $canvas = $svg.querySelector('.svg-view');\n    const $radialMenu = document.querySelector('[data-radial-menu]');\n    const localPosition = {\n      x: $radialMenu.getAttribute('data-local-x'),\n      y: $radialMenu.getAttribute('data-local-y'),\n    };\n    const id = `${svgID}_svg-text-${localPosition.x}-${localPosition.y}`;\n    const hash = `#${id}`;\n    const orientation = {\n      x: (svgGroup.attr('width') - localPosition.x) > 320 ? 'right' : 'left',\n      y: (svgGroup.attr('height') - localPosition.y) > 60 ? 'bottom' : 'top',\n    };\n    // let firstWrite = true;\n\n    // text wrapper\n    const foreignObject = svgGroup.append('svg:foreignObject')\n      .attr('class', `svg-text orientation-${orientation.x} orientation-${orientation.y}`)\n      .attr('data-svg-text', '')\n      .attr('x', localPosition.x)\n      .attr('y', localPosition.y)\n      .attr('width', 1)\n      .attr('height', 1);\n\n    // create visual point of interest for text input\n    foreignObject.append('xhtml:div')\n      .attr('class', 'svg-circle svg-circle-text');\n    // create text input\n    const textarea = foreignObject.append('xhtml:textarea')\n      .attr('maxlength', maxLength)\n      .attr('tabindex', '-1')\n      .attr('id', id)\n      .attr('class', 'svg-textarea')\n      .attr('data-save', '')\n      .attr('data-svg-textarea-target', svgID);\n\n    // set focus to the new text input\n    $svg.querySelector(hash).focus();\n\n    // add events to element\n    SVGText.textEventsManager($svg, textarea.node(), true, minLength);\n  }\n\n  static textEventsManager($svg, $node, isCreated, minLength = 2) {\n    const $canvas = $svg.querySelector('.svg-view');\n    const hash = `#${$node.id}`;\n    let firstWrite = isCreated;\n    let oldText = $node.value;\n\n    // TODO\n    // standalone function\n    // same for all draggable svg elements\n    const $element = $svg.querySelector(hash).parentElement;\n    let elementPosition = [\n      $element.getAttribute('x'),\n      $element.getAttribute('y'),\n    ];\n    let diff = {};\n\n    d3.select(hash)\n      // drag & drop\n      .call(d3.drag()\n        .container($canvas)\n        .subject($element)\n        .on('start', () => {\n          diff = {\n            x: d3.event.x - elementPosition[0],\n            y: d3.event.y - elementPosition[1],\n          };\n\n          SVGDragNDrop.start($element);\n        })\n        .on('drag', () => {\n          SVGDragNDrop.dragged($element, diff);\n        })\n        .on('end', () => {\n          const oldXCoordinate = elementPosition[0];\n          const oldYCoordinate = elementPosition[1];\n          let taskType = 'move';\n\n          SVGDragNDrop.end($element, 'text', diff);\n\n          elementPosition = [\n            $element.getAttribute('x'),\n            $element.getAttribute('y'),\n          ];\n\n          if (!firstWrite && (elementPosition[0] !== oldXCoordinate || elementPosition[1] !== oldYCoordinate)) {\n            // if clone is changed, then dispatch create event\n            if (SVG.removeCloneConnectionManager($element.childNodes[1])) taskType = 'create';\n\n            // dispatch event that svg has changed\n            __dispatchEvent(document, 'svg.change', {}, {\n              svg: {\n                id: $svg.id,\n                task: taskType,\n                node: $element.childNodes[1],\n                nodeName: $element.childNodes[1].nodeName,\n                contextMenu: false,\n              },\n            });\n          }\n        }))\n      // keystroke\n      // control height of the text input on every key stroke\n      .on('keyup', () => {\n        SVGText.updateTextareaHeight(d3.event.target);\n      })\n      // loss of focus\n      .on('blur', () => {\n        const $target = d3.event.target;\n        const value = $target.value;\n        let taskType;\n        let wrongBool = false;\n\n        if (value.length === 0) {\n          SVG.removeItem(false, hash);\n          return;\n        }\n        if (value.length < minLength) {\n          __addClass($target, 'is-wrong');\n          wrongBool = true;\n        } else if ((value.length >= minLength) && __hasClass($target, 'is-wrong')) {\n          __removeClass($target, 'is-wrong');\n          wrongBool = false;\n        }\n\n        if (oldText !== value) {\n          if (firstWrite) {\n            taskType = 'create';\n            firstWrite = false;\n          } else {\n            taskType = 'change';\n          }\n          oldText = value;\n          // if clone is changed, then dispatch create event\n          if (SVG.removeCloneConnectionManager($target)) taskType = 'create';\n\n          // dispatch event that svg has changed\n          __dispatchEvent(document, 'svg.change', {}, {\n            svg: {\n              id: $svg.id,\n              task: taskType,\n              node: $target,\n              nodeName: $target.nodeName,\n              isWrong: wrongBool,\n              contextMenu: false,\n            },\n          });\n        }\n\n        // update oldText\n        oldText = value;\n      })\n      // gain focus\n      .on('focus', () => {\n        d3.select($element).raise();\n      });\n  }\n\n  static updateTextareaHeight($target) {\n    $target.style.height = '1px';\n    $target.style.height = `${22 + $target.scrollHeight}px`;\n  }\n\n  static comicBubblesEventsManager($svg, $node) {\n    let firstWrite = true;\n    let oldText = $node.value;\n\n    d3.select($node).on('keyup', () => {\n      SVGText.updateTextareaHeight(d3.event.target);\n    })\n      .on('blur', () => {\n        const $target = d3.event.target;\n        const value = $target.value;\n        let taskType;\n\n        if (oldText !== value) {\n          if (firstWrite) {\n            taskType = 'create';\n            firstWrite = false;\n          } else {\n            taskType = 'change';\n            if (value.length === 0) {\n              firstWrite = true;\n            }\n          }\n          oldText = value;\n          // if clone is changed, then dispatch create event\n          if (SVG.removeCloneConnectionManager($target)) taskType = 'create';\n\n          // dispatch event that svg has changed\n          __dispatchEvent(document, 'svg.change', {}, {\n            svg: {\n              id: $svg.id,\n              task: taskType,\n              node: $target,\n              nodeName: $target.nodeName,\n              isBubble: true,\n              contextMenu: false,\n            },\n          });\n        }\n\n        // update oldText\n        oldText = value;\n      });\n  }\n}\n","/**\n * čára:\n *  - nakreslit   ( drag'n'drop )\n *  - smazat      ( left click )\n *  - radial menu ( right click)\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n * textové pole:\n *  - vytvořit    ( right click on svg )\n *    - nic => smaže se\n *    - málo znaků => zčervená\n *    - přes řádek textu => zvětší se\n *  - změnit      ( click on and write )\n *  - smazat      ( right click on textarea )\n *  - přenést     ( drag'n'drop )\n *  - radial menu ( right click on mark )\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n * značka:\n *  - nakreslit   ( left click on svg )\n *  - přenést     ( drag'n'drop )\n *  - smazat      ( left click on mark )\n *  - radial menu ( right click)\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n * komiksová bublina:  ( je již vytvořena předem )\n *  - napsat dovnitř\n *    - nic => zůstane\n *    - přes řádek textu => zvětší se\n */\n/* eslint-disable brace-style */\nimport Component from './component';\nimport { __dispatchEvent, __removeClass, __addClass } from '../lib/utils';\nimport SVGDraw from './svg-lib/svg-draw';\nimport SVGText from './svg-lib/svg-text';\n\nexport default class SVG extends Component {\n  constructor($element) {\n    super($element);\n\n    this.format = d3.format('.0f');\n\n    // fix for IE\n    this._setSize();\n\n    this.init();\n    this._initWhenDone();\n  }\n\n  init() {\n    if (HISTORYLAB.import.done) return;\n\n    // duplicate source of different svg element\n    this.toDuplicate = this.target.getAttribute('data-duplicate-svg');\n\n    // make array from data-attributes (contains what kind of actions can user do on this svg)\n    const svgSpecificActions = this.target.getAttribute('data-svg-target').split(' ');\n    for (let i = 0; i < svgSpecificActions.length; i += 1) {\n      if (svgSpecificActions[i] === 'kresleni') {\n        this._initPath(this.showFeedback);\n      }\n      else if (svgSpecificActions[i] === 'znacky') {\n        this._initCircle(this.showFeedback);\n      }\n      // else if (svgSpecificActions[i] === 'text') {\n      //   this._initText();\n      // }\n    }\n\n    // this._initZoom();\n    // comic bubbles if exists\n    this._initComicBubbles();\n\n    // listen events\n    this._getEvents();\n    this._getDropEvent();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _initWhenDone() {\n    if (!HISTORYLAB.import.done) return;\n\n    d3.selectAll('[data-svg-text] textarea')\n      // local context needed because of `this`\n      // eslint-disable-next-line func-names\n      .on('mouseenter', function () {\n        d3.select(this.closest('foreignObject')).raise();\n      });\n  }\n\n  _setSize() {\n    // NOTE: Cannot set `width` because of change of width when on half slide.\n    // TODO: set size on window resize\n\n    // might not be needed when inside sortable or other higher level module\n    // TODO: add condition for other higher level modules\n    // if (this.target.closest('[data-sortable-target')) return false;\n\n    const viewbox = this.target.getAttribute('viewBox').split(' ');\n    const rect = this.target.getBoundingClientRect(); // max-height: 100vh\n\n    const getHeight = () => {\n      if (!rect.height) return viewbox[3];\n\n      if (rect.height > viewbox[3]) return viewbox[3];\n\n      return rect.height;\n    };\n\n    const scale = getHeight() / viewbox[3];\n    const maxWidth = viewbox[2] * scale;\n\n    const getMaxWidthAbsolute = () => {\n      if (matchMedia('screen and (min-width: 1025px)').matches) {\n        return window.innerWidth * .62; // max-width: 62vw\n      }\n\n      return window.innerWidth;\n    };\n\n    const maxWidthAbsolute = getMaxWidthAbsolute();\n\n    const setMaxWidth = scale ? `${maxWidth < maxWidthAbsolute ? maxWidth : maxWidthAbsolute}px` : '';\n\n    this.target.style.maxWidth = setMaxWidth;\n\n    // fix for svg + draggable/gallery (horizontal layout) in Chrome\n    if (\n      this.target.getAttribute('data-svg-drop')\n      && !this.target.closest('.layout-vertical')\n    ) {\n      this.target.closest('.svgs-container').style.maxWidth = setMaxWidth;\n    }\n  }\n\n  // _initZoom() {\n  //   const view = d3.select(`#${this.target.id} .svg-view`);\n  //   const size = [\n  //     view.attr('width'),\n  //     view.attr('height'),\n  //   ];\n  //   SVGZoom.zoom(this.target, view, size);\n  // }\n\n  _initPath(callback) {\n    d3.select(this.target)\n      .call(d3.drag()\n        .container(() => this.target)\n        .subject(() => {\n          const p = [d3.event.x.toFixed(), d3.event.y.toFixed()];\n\n          return [p, p];\n        })\n        .on('start', () => {\n          SVGDraw.renderPath(this.target, callback);\n        }));\n  }\n  // _initText() {\n  //   d3.select(this.target).on('click', () => {\n  //     SVGText.openTextDialog(this.target);\n  //     d3.event.preventDefault();\n  //   });\n  // }\n\n  _initCircle(callback) {\n    d3.select(this.target).on('click', () => {\n      const item = d3.event.target;\n      const nodeName = item.nodeName;\n      const validPlace = (nodeName === 'image');\n      // const isCircle = (__hasClass(item, 'svg-circle'));\n\n      if (!validPlace) {\n        return;\n      }\n\n      SVGDraw.createCircle(this.target);\n      callback();\n\n      d3.event.preventDefault();\n    }, false);\n  }\n\n  _initComicBubbles() {\n    const $comicBubbles = this.target.querySelectorAll('.svg-komiks .svg-textarea');\n\n    if ($comicBubbles) {\n      $comicBubbles.forEach(($comicBubble) => {\n        SVGText.comicBubblesEventsManager(this.target, $comicBubble);\n      });\n    }\n  }\n\n  _generateNewID(oldID) {\n    const idParts = oldID.split('_');\n    // beware if it's a error, return oldID\n    if (idParts.length < 2) {\n      console.log('Svg ID error!', oldID);\n      return oldID;\n    }\n\n    // solve thirt part of id\n    if (idParts[idParts.length - 1] !== `clone-${idParts[0]}`) {\n      idParts.push(`clone-${idParts[0]}`);\n    }\n\n    // solve first part of id\n    idParts[0] = this.target.id;\n\n    const newID = idParts.join('_');\n    return newID;\n  }\n\n  _getEvents() {\n\n    const svgDuplicateSources = this.toDuplicate ? this.toDuplicate.split(' ') : [];\n\n    if (svgDuplicateSources[0]) {\n\n      document.addEventListener('svg.change', (e) => {\n        if (svgDuplicateSources.includes(e.detail.svg.id)) {\n          const $templateNode = e.detail.svg.node;\n          const nodeName = e.detail.svg.nodeName;\n          const localNodeID = this._generateNewID($templateNode.id);\n          let $localNode = this.target.querySelector(`#${localNodeID}`);\n          let task;\n          // for creating new element or we edit the old one after created one\n          if ($localNode || e.detail.svg.task === 'create') {\n            task = e.detail.svg.task;\n          } else {\n            return;\n          }\n\n          /**\n           * 1. divided by node name\n           * 2. divided by task type\n           * path => svg lines\n           * TEXTAREA => text fields or comic bubbles\n           * foreignObject => svg circles\n           */\n          if (nodeName === 'path') {\n            switch (task) {\n              case 'create':\n                this._clonePath($templateNode, localNodeID);\n                break;\n              case 'color':\n                __removeClass($localNode, 'red blue');\n                __addClass($localNode, e.detail.svg.color);\n                break;\n              case 'remove':\n                $localNode.remove();\n                break;\n              default:\n                console.log('Nondefinated path events task. :(');\n            }\n          } else if (nodeName === 'TEXTAREA') {\n            if (e.detail.svg.isBubble) {\n              switch (task) {\n                case 'create':\n                  this._cloneComicBubbles($templateNode, localNodeID);\n                  break;\n                case 'change':\n                  if ($templateNode.value.length !== 0) {\n                    $localNode.value = $templateNode.value;\n                    // if needs resize\n                    if ($localNode.style.height !== $templateNode.style.height) {\n                      $localNode.style.height = $templateNode.style.height;\n                    }\n                  } else {\n                    $localNode.parentElement.remove();\n                  }\n                  break;\n                default:\n                  console.log('Nondefinated comicBubble events task. :(');\n              }\n            } else {\n              switch (task) {\n                case 'create':\n                  this._cloneTextField(e.detail.svg.isWrong, $templateNode, localNodeID);\n                  break;\n                case 'change':\n                  $localNode.value = $templateNode.value;\n                  // if is now wrong lenght\n                  if (e.detail.svg.isWrong) {\n                    __addClass($localNode, 'is-wrong');\n                  } else {\n                    __removeClass($localNode, 'is-wrong');\n                  }\n                  // if needs resize\n                  if ($localNode.style.height !== $templateNode.style.height) {\n                    $localNode.style.height = $templateNode.style.height;\n                  }\n                  break;\n                case 'color':\n                  $localNode = $localNode.parentElement.childNodes[0];\n                  __removeClass($localNode, 'red blue');\n                  __addClass($localNode, e.detail.svg.color);\n                  break;\n                case 'move':\n                  if ($localNode) {\n                    $localNode.parentElement.remove();\n                  }\n                  this._cloneTextField(e.detail.svg.isWrong, $templateNode, localNodeID);\n                  break;\n                case 'remove':\n                  $localNode.parentElement.remove();\n                  break;\n                default:\n                  console.log('Nondefinated textField events task. :(');\n              }\n            }\n          } else if (nodeName === 'foreignObject') {\n            switch (task) {\n              case 'create':\n                this._cloneCircle($templateNode, localNodeID);\n                break;\n              case 'color':\n                $localNode = $localNode.childNodes[0];\n                __removeClass($localNode, 'red blue');\n                __addClass($localNode, e.detail.svg.color);\n                break;\n              case 'move':\n                if ($localNode) {\n                  $localNode.remove();\n                }\n                this._cloneCircle($templateNode, localNodeID);\n                break;\n              case 'remove':\n                $localNode.remove();\n                break;\n              default:\n                console.log('Nondefinated circle events task. :(');\n            }\n          } else {\n            console.log('Nondefinated events nodeName. :(', nodeName);\n          }\n        }\n      });\n    }\n  }\n\n  _getDropEvent() {\n    // need if we drop more than one same item\n    let idSalt = 0;\n\n    document.addEventListener('svg.drop', (event) => {\n\n      if (event.detail.svg.id === this.target.id) {\n\n        const { $node, position, type, size } = event.detail.svg;\n\n        const getMultiply = () => {\n          // make images smaller when dropped\n          if (type === 'image' || type === 'svg') return .62;\n          // make tags larger when dropped to not jump on more lines\n          if (type === 'tag') return 1.075;\n\n          return 1;\n        }\n        const multiply = getMultiply();\n\n        size.width = size.width * multiply;\n        size.height = size.height * multiply;\n\n        const $d3canvas = d3.select(`#${this.target.id} .svg-view`);\n        const $d3foreignObject = $d3canvas.append('svg:foreignObject')\n          .attr('width', size.width)\n          .attr('height', size.height)\n          .attr('x', this.format(position[0] - (size.width / 2)))\n          .attr('y', this.format(position[1] - (size.height / 2)))\n          .attr('id', `${this.target.id}_${$node.getAttribute('data-id')}_${idSalt}_dropItem`);\n          // _dropItem is important identifier\n\n        const $dropItem = document.createElement('div');\n        $dropItem.classList.add('dropped__item', `dropped__item--${type}`);\n        $dropItem.appendChild($node.firstElementChild.firstElementChild);\n\n        $d3foreignObject.append(() => $dropItem);\n\n        const $foreignObject = $d3foreignObject.node();\n\n        // increment salt\n        idSalt += 1;\n\n        // add events to element\n        SVGDraw.circleEventsManager(this.target, $foreignObject);\n\n        // dispatch event that svg has changed\n        __dispatchEvent(document, 'svg.change', {}, {\n          svg: {\n            id: this.target.id,\n            task: 'create',\n            node: $foreignObject,\n            nodeName: $foreignObject.nodeName,\n            contextMenu: false,\n          },\n        });\n      }\n    });\n  }\n\n  _clonePath($templateNode, localNodeID) {\n    const $localNode = $templateNode.cloneNode(true);\n    $localNode.id = localNodeID;\n    this.target.appendChild($localNode);\n    // add events to element\n    SVGDraw.pathEventsManager(this.target, $localNode);\n  }\n\n  _cloneTextField(isWrong, $templateNode, localNodeID) {\n    const $localNode = $templateNode.parentElement.cloneNode(true);\n    $localNode.childNodes[1].id = localNodeID;\n    this.target.appendChild($localNode);\n    if (isWrong) {\n      __addClass($localNode, 'is-wrong');\n    } else {\n      __removeClass($localNode, 'is-wrong');\n    }\n    // add events to element\n    SVGText.textEventsManager(this.target, $localNode.childNodes[1], false);\n  }\n\n  _cloneCircle($templateNode, localNodeID) {\n    const $localNode = $templateNode.cloneNode(true);\n    $localNode.id = localNodeID;\n    this.target.appendChild($localNode);\n    // add events to element\n    SVGDraw.circleEventsManager(this.target, $localNode);\n  }\n\n  _cloneComicBubbles($templateNode, localNodeID) {\n    const $localNode = $templateNode.parentElement.cloneNode(true);\n    $localNode.childNodes[1].id = localNodeID;\n    this.target.appendChild($localNode);\n    // add events to element\n    SVGText.comicBubblesEventsManager(this.target, $localNode.childNodes[1]);\n  }\n\n  static selectItem(item) {\n    item.setAttribute('data-svg-selected', 'true');\n  }\n\n  // Remove 'selected' classname from element within SVG\n  static deselectItem() {\n    // previously \"selected\" elements\n    const selected = document.querySelectorAll('[data-svg-selected=\"true\"]');\n    // unselect them\n    for (let i = 0; i < selected.length; i += 1) {\n      selected[i].setAttribute('data-svg-selected', 'false');\n    }\n  }\n\n  // Remove element from within SVG\n  // [data-svg-selected=\"true\"] marks selected element in SVG\n  static removeItem(isRadial, element = '[data-svg-selected=\"true\"]') {\n    let $element = document.querySelector(element);\n    let nodeName = $element.nodeName;\n    const $parent = $element.parentElement; // for <foreignObject>\n\n    // TEXTAREA => text field(right click in textarea)\n    // DIV => text field(click in radial menu) or circle\n    switch (nodeName) {\n      case 'path':\n        // $element = $element;\n        break;\n      case 'TEXTAREA':\n        // $element = $element;\n        break;\n      case 'DIV':\n        if ($parent.childNodes[1]) {\n          $element = $parent.childNodes[1];\n        } else {\n          $element = $parent;\n        }\n        nodeName = $element.nodeName;\n        break;\n      default:\n        console.log('Nondefinated node type. :(', nodeName);\n    }\n\n    // get svg id from object id\n    const svgID = $element.id.split('_')[0];\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: svgID,\n        task: 'remove',\n        node: $element,\n        nodeName,\n        contextMenu: isRadial,\n      },\n    });\n\n    if ($parent.nodeName === 'foreignObject') {\n      d3.select($parent).remove();\n\n      // dispatch event that drop item was deleted\n      const idParts = $parent.id.split('_');\n      if (idParts[idParts.length - 1] === 'dropItem') {\n        __dispatchEvent(document, 'svg.drop.delete', {}, {\n          item: {\n            id: idParts[1],\n            $object: $element.firstChild,\n          },\n        });\n      }\n    } else {\n      d3.select($element).remove();\n    }\n  }\n\n  // Unmark all SVGs with 'svg-active' classname\n  static deactivate() {\n    const allActiveSvgs = document.querySelectorAll('[data-svg-active=\"true\"]');\n    for (let i = 0; i < allActiveSvgs.length; i += 1) {\n      allActiveSvgs[i].setAttribute('data-svg-active', 'false');\n    }\n  }\n\n  // Mark active SVG with 'svg-active' classname\n  static activate(svg) {\n    SVG.deactivate();\n    svg.setAttribute('data-svg-active', 'true');\n  }\n\n  // Remove connection between clone and template\n  // Remove third part of id if exists\n  static removeCloneConnectionManager($node) {\n    const idParts = $node.id.split('_');\n    if (idParts[idParts.length - 1].includes('clone')) {\n      idParts.pop();\n      $node.id = idParts.join('_');\n      return true;\n    }\n    return false;\n  }\n}\n","import Component from './component';\nimport AudioPlayer from './media/audio-player';\nimport SVG from './svg';\nimport { stopPlayingVideoPlayers } from './media/media';\nimport { __dispatchEvent } from '../lib/utils';\n\nexport default class Sortable extends Component {\n  constructor($element) {\n    super($element);\n    this.$settings = document.querySelector(\n      `[data-sortable-id-reference=\"${this.target.id}\"]`,\n    );\n    this.feedback = JSON.parse(this.$settings.getAttribute('data-module-zpetnavazba'));\n\n    this.container = this.target;\n    this.$items = this.target.querySelectorAll('[data-sortable-drag]');\n    this.$droppables = this.target.querySelectorAll('[data-sortable-drop]');\n    this.$placeholder = () => document.querySelector('#sortable-placeholder');\n    this.$players = this.container.querySelectorAll('[data-player-audio]');\n\n    // get direction (type of sortable \"horizontalni\" or \"vertikalni\")\n    this.direction = this.target.getAttribute('data-sortable-target');\n    this.trackingTouch = false;\n    this.before = false;\n    this.after = false;\n    this.evaluation = undefined;\n\n    this.mouse = {\n      x: (event) => event.clientX || event.touches[0].clientX,\n      y: (event) => event.clientY || event.touches[0].clientY,\n      x0: 0,\n      y0: 0,\n      x1: 0,\n      y1: 0,\n    };\n\n    this.dragged = {\n      el: null,\n      clone: null,\n      posRel: {},\n      rect: () => this.dragged.el.getBoundingClientRect(),\n      size: {},\n      type: null,\n    };\n\n    this.siblings = {\n      prev: null,\n      next: null,\n    };\n\n    this._onStart = this._onStart.bind(this);\n    this._onMove = this._onMove.bind(this);\n    this._onEnd = this._onEnd.bind(this);\n    this._update = this._update.bind(this);\n\n    this._addEventListeners();\n\n\n    this.cache = {\n      answersCorrect: 0,\n      colors: [],\n    };\n\n    // get colors for all feedback variants\n    if (this.feedback) {\n      this.cache.colors = this.feedback.map((feedback) => feedback.barva);\n    }\n  }\n\n  _onStart(event) {\n    if (!event.target.hasAttribute('data-sortable-drag')) {\n      return;\n    }\n\n    // TODO: zastavit všechno audio on drag start\n    if (this.$players.length > 0) {\n      stopPlayingVideoPlayers(this.$players);\n    }\n\n\n    this.trackingTouch = true;\n\n    this.dragged.el = event.target;\n    this.dragged.type = event.target.getAttribute('data-sortable-drag');\n    this.dragged.clone = this.dragged.el.cloneNode(true);\n    this.dragged.posRel.top = this.dragged.el.offsetTop;\n    this.dragged.posRel.left = this.dragged.el.offsetLeft;\n    this.dragged.size.width = this.dragged.el.offsetWidth;\n    this.dragged.size.height = this.dragged.el.offsetHeight;\n\n    this.dragged.el.style.top = `${this.dragged.posRel.top}px`;\n    this.dragged.el.style.left = `${this.dragged.posRel.left}px`;\n    this.dragged.el.style.width = `${this.dragged.size.width}px`;\n    this.dragged.el.style.height = `${this.dragged.size.height}px`;\n    this.dragged.el.classList.add('is-dragged');\n\n    this.container.classList.add('is-dragged');\n\n    this._addPlaceholder(this.dragged.el);\n    this._onOver();\n\n    this.mouse.x0 = this.mouse.x(event);\n    this.mouse.y0 = this.mouse.y(event);\n\n    event.preventDefault();\n  }\n\n  _onMove(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.mouse.x1 = this.mouse.x(event) - this.mouse.x0;\n    this.mouse.y1 = this.mouse.y(event) - this.mouse.y0;\n\n    window.requestAnimationFrame(this._update);\n\n    this._onOver();\n  }\n\n  _onEnd(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.trackingTouch = false;\n    this.container.classList.remove('is-dragged');\n    this.dragged.el.classList.remove('is-dragged');\n    this.dragged.el.style.top = '';\n    this.dragged.el.style.left = '';\n    this.dragged.el.style.width = '';\n    this.dragged.el.style.height = '';\n    this.dragged.el.style.transform = '';\n\n    const $placeholder = this.$placeholder();\n    const rect = $placeholder.getBoundingClientRect();\n\n    switch (this.direction) {\n      case 'horizontal':\n        if (rect.left <= this.mouse.x(event) <= rect.right) {\n          this._onDrop();\n        }\n        break;\n      case 'vertical':\n        if (rect.top <= this.mouse.y(event) <= rect.bottom) {\n          this._onDrop();\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    this._removePlaceholder();\n    this._dispatchEvent();\n    this._checkAndResolveFeedback();\n  }\n\n  // _onEnter() {}\n\n  _onOver() {\n    this.before = false;\n    this.after = false;\n\n    this._getReference();\n\n    if (\n      this.siblings.next\n      && this.siblings.next.hasAttribute('data-sortable-drop')\n    ) {\n      const next = this.siblings.next.getBoundingClientRect();\n\n      switch (this.direction) {\n        case 'horizontal':\n          if (this.dragged.rect().right > (next.left + (next.width / 1.5))) {\n            this.after = true;\n            this._addPlaceholder(this.siblings.next);\n          }\n          break;\n        case 'vertical':\n          if (this.dragged.rect().bottom > (next.top + (next.height / 1.5))) {\n            this.after = true;\n            this._addPlaceholder(this.siblings.next);\n          }\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    if (\n      this.siblings.prev\n      && this.siblings.prev.hasAttribute('data-sortable-drop')\n    ) {\n      const prev = this.siblings.prev.getBoundingClientRect();\n\n      switch (this.direction) {\n        case 'horizontal':\n          if (this.dragged.rect().left < (prev.right - (prev.width / 1.5))) {\n            this.before = true;\n            this._addPlaceholder(this.siblings.prev);\n          }\n          break;\n        case 'vertical':\n          if (this.dragged.rect().top < (prev.bottom - (prev.height / 1.5))) {\n            this.before = true;\n            this._addPlaceholder(this.siblings.prev);\n          }\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n  // _onLeave() {}\n\n  _onDrop() {\n    const $placeholder = this.$placeholder();\n\n    this._addEventListenerToItem(this.dragged.clone);\n    // TODO: přiřadit eventListenery audio playerům\n    if (this.dragged.clone.querySelector('[data-player-audio]')) {\n      AudioPlayer.addEventListeners(this.dragged.clone, this.showFeedback);\n    }\n\n    this.container.insertBefore(this.dragged.clone, $placeholder);\n    this.dragged.el.parentElement.removeChild(this.dragged.el);\n  }\n\n  _update() {\n    this.dragged.el.style.transform = `translate3d(${this.mouse.x1}px, ${\n      this.mouse.y1\n    }px, 0) rotate(5deg)`;\n  }\n\n  _addPlaceholder(item) {\n    this._removePlaceholder();\n\n    const $placeholder = document.createElement('div');\n    $placeholder.classList.add('sortable-item', 'sortable-placeholder');\n    $placeholder.setAttribute('id', 'sortable-placeholder');\n    $placeholder.style.minHeight = `${this.dragged.size.height}px`;\n\n    if (this.dragged.el.querySelector('img')) {\n      const src = this.dragged.el.querySelector('img').getAttribute('src');\n      const img = document.createElement('img');\n      img.setAttribute('src', src);\n      $placeholder.appendChild(img);\n    }\n\n    if (this.after) {\n      this.container.insertBefore($placeholder, item.nextElementSibling);\n    } else if (this.before) {\n      this.container.insertBefore($placeholder, item);\n    } else {\n      this.container.insertBefore($placeholder, item);\n    }\n  }\n\n  _removePlaceholder() {\n    const $placeholder = this.$placeholder();\n    if ($placeholder) $placeholder.parentElement.removeChild($placeholder);\n  }\n\n  _getReference() {\n    const $placeholder = this.$placeholder();\n    this.siblings.prev = $placeholder.previousElementSibling === this.dragged.el\n      ? this.dragged.el.previousElementSibling\n      : $placeholder.previousElementSibling;\n    this.siblings.next = $placeholder.nextElementSibling === this.dragged.el\n      ? this.dragged.el.nextElementSibling\n      : $placeholder.nextElementSibling;\n  }\n\n  _addEventListenerToItem($item) {\n    // touch events\n    $item.addEventListener('touchstart', this._onStart, false);\n    // mouse events\n    $item.addEventListener('mousedown', this._onStart, false);\n\n    if (this.dragged.type === 'svg') {\n      const svg = new SVG($item.querySelector('[data-svg-target]'));\n    }\n  }\n\n  _addEventListeners() {\n    // touch events\n    document.addEventListener('touchmove', this._onMove);\n    document.addEventListener('touchend', this._onEnd);\n    // mouse events\n    document.addEventListener('mousemove', this._onMove);\n    document.addEventListener('mouseup', this._onEnd);\n\n    this.$items.forEach(($item) => {\n      this._addEventListenerToItem($item);\n    });\n  }\n\n  _checkAndResolveFeedback() {\n    if (this.feedback) {\n      this.cache.answersCorrect = 0;\n\n      this.target.querySelectorAll('[data-sortable-drag]').forEach(($item, index) => {\n        const correctAnswerAttr = $item.getAttribute('data-sortable-spravnaodpoved');\n\n        if (parseInt(correctAnswerAttr, 10) === (index + 1)) {\n          this.cache.answersCorrect += 1;\n        }\n      });\n\n      const feedbackActual = this.feedback.find((feedback) => feedback.podminka.includes(this.cache.answersCorrect));\n      this.$buttonFeedback.classList.remove(...this.cache.colors);\n      this.$buttonFeedback.classList.add(feedbackActual.barva);\n      this.$buttonFeedbackText.innerText = feedbackActual.text;\n      this.evaluation = feedbackActual.splneno;\n    }\n\n    this.showFeedback();\n  }\n\n  _dispatchEvent() {\n    const items = Array.from(this.target.querySelectorAll('[data-sortable-drag]')).map(($item) => ({\n      id: $item.id,\n    }));\n\n    __dispatchEvent(this.target, 'sortable.change', {}, {\n      id: this.target.id,\n      evaluation: this.evaluation,\n      items,\n    });\n  }\n}\n","/* eslint-disable brace-style */\nimport {\n  __addClass,\n  __removeClass,\n  __hasClass,\n  __localPosition,\n  __globalPosition,\n  __dispatchEvent,\n} from '../../lib/utils';\nimport SVG from '../svg';\nimport SVGText from './svg-text';\n\nexport default class SVGRadialMenu {\n\n  constructor($radialMenu, $svgs) {\n    this.$radialMenu = $radialMenu;\n    this.$radialMenuItems = this.$radialMenu.querySelectorAll('[data-radial-menu-item]');\n    this.$colorItems = this.$radialMenu.querySelectorAll('.radial-menu-color');\n    this.$textItems = this.$radialMenu.querySelectorAll('.radial-menu-text');\n    this.$createTextItem = this.$radialMenu.querySelector('#create-text');\n    this.$removeItem = this.$radialMenu.querySelector('#remove-content');\n    this.$tooltip = this.$radialMenu.querySelector('[data-radial-menu-tooltip]');\n    this.$svgs = $svgs;\n\n    this.initialSetUp = true;\n\n    this.menuRadius = parseInt(window.getComputedStyle(this.$radialMenu.querySelector('.radial-menu-wrapper'), null).getPropertyValue('width'), 10) / 2;\n    this.itemRadius = parseInt(window.getComputedStyle(this.$radialMenu.querySelector('.radial-menu-item'), null).getPropertyValue('width'), 10) / 2;\n\n    this.init();\n  }\n\n  init() {\n    this.setUpRadialMenuItems();\n    this.addEventListenersToRadialMenu();\n\n    // activate radial menu when right click on svg\n    this.$svgs.forEach(($svg) => {\n      d3.select($svg).on('contextmenu', () => {\n        // mark this SVG as the active one\n        SVG.activate($svg);\n        // deselect all previously selected items\n        SVG.deselectItem();\n        // show radial menu buttons based on clicked element\n        // and .select appropriate elements based on clicked element\n        this.filterMenuButtons(d3.event.target);\n        this.showRadialMenu($svg, d3.event);\n        // prevent default 'contextmenu' event\n        d3.event.preventDefault();\n      });\n    });\n\n    this.initialSetUp = false;\n  }\n\n  setUpRadialMenuItems() {\n    // this.positionRadialMenuItems(this.$radialMenuItems);\n\n    this.$radialMenuItems.forEach(($item) => {\n      this.addEventListenersToRadialMenuItem($item);\n    });\n  }\n\n  positionRadialMenuItems($items) {\n    const _itemsLength = $items.length;\n    const _menuRadius = this.menuRadius;\n    const _itemRadius = this.itemRadius;\n    const _menuOffset = _menuRadius - _itemRadius;\n    const _interval = 0.6283185307;\n    // if more items center them\n    const _centerOffset = (-_interval / 2) + ((_itemsLength * _interval) / 2);\n\n    // make a \"flower\"\n    $items.forEach(($item, index) => {\n      // Calculate the angle at which the element will be placed.\n      // For a semicircle, we would use (index / _itemsLength) * Math.PI.\n      const angle = (Math.PI + ((index * _interval) * -1)) + _centerOffset;\n\n      // get position\n      const x = (_menuRadius * Math.sin(angle)) + _menuOffset;\n      const y = (_menuRadius * Math.cos(angle)) + _menuOffset;\n\n      // console.log('x: ' + x);\n      // console.log('y: ' + y);\n\n      $item.style.left = `${x.toFixed(1)}px`;\n      $item.style.top = `${y.toFixed(1)}px`;\n\n      // if (this.initialSetUp === true) {\n      //   this.addEventListenersToRadialMenuItem($item);\n      // }\n    });\n  }\n\n  addEventListenersToRadialMenu() {\n    this.onMouseLeave();\n\n    this.$radialMenu.addEventListener('click', (event) => {\n      this.hideRadialMenu(this.$radialMenu);\n      event.preventDefault();\n    });\n\n    this.$radialMenu.addEventListener('contextmenu', (event) => {\n      this.hideRadialMenu(this.$radialMenu);\n      event.preventDefault();\n    });\n  }\n\n  addEventListenersToRadialMenuItem(item) {\n    const $item = item;\n\n    // actions\n    const action = $item.getAttribute('data-radial-menu-item');\n    // remove item\n    if (action === 'remove-content') {\n      $item.addEventListener('click', () => {\n        SVG.removeItem(true);\n        this.hideRadialMenu();\n      }, false);\n    }\n    // create user text\n    else if (action === 'create-text') {\n      d3.select($item).on('click', () => {\n        SVGText.createText();\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit podobnost\n    else if (action === 'color-point-blue') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('blue');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit rozdil\n    else if (action === 'color-point-red') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('red');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit rozdil\n    else if (action === 'color-point-red') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('red');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // přiřadit kategorii\n    // else if (action === 'category') {\n    //   const category = $item.getAttribute('data-category');\n    //   const categoryLabel = $item.getAttribute('data-radial-menu-item-tooltip');\n\n    //   $item.addEventListener('click', () => {\n    //     const $selected = document.querySelector('[data-svg-selected=\"true\"]');\n    //     const $parentForeignObject = $selected.parentElement;\n    //     let $category = $parentForeignObject.querySelector('.svg-category-label');\n\n    //     $selected.setAttribute('data-svg-category', category);\n\n    //     if (!$category) {\n    //       $category = document.createElement('div');\n    //       $category.classList.add('svg-category-label');\n    //       $parentForeignObject.prepend($category);\n    //     }\n\n    //     $category.innerText = categoryLabel;\n\n    //     this.hideRadialMenu();\n    //   }, false);\n    // }\n\n    // tooltip\n    $item.addEventListener('mouseenter', (event) => {\n      this.$tooltip.innerHTML = event.currentTarget.getAttribute('data-radial-menu-item-tooltip');\n      this.$tooltip.style.display = 'block';\n    }, false);\n    $item.addEventListener('mouseleave', () => {\n      this.$tooltip.innerHTML = '';\n      this.$tooltip.style.display = 'none';\n    }, false);\n  }\n\n  // Draw a SVG circle on click\n  static changeColor(color, element = '[data-svg-selected=\"true\"]') {\n    let $element = document.querySelector(element);\n    let nodeName = $element.nodeName;\n    let taskType = 'color';\n\n    __removeClass($element, 'red blue');\n    __addClass($element, color);\n\n    // DIV => text field  or circle\n    switch (nodeName) {\n      case 'path':\n        // $element = $element;\n        break;\n      case 'DIV':\n        if ($element.parentElement.childNodes[1]) {\n          $element = $element.parentElement.childNodes[1];\n        } else {\n          $element = $element.parentElement;\n        }\n        nodeName = $element.nodeName;\n        break;\n      default:\n        console.log('Nondefinated node type. :(', nodeName);\n    }\n\n    // if clone is changed, then dispatch create event\n    if (SVG.removeCloneConnectionManager($element)) taskType = 'create';\n\n    // get svg id from object id\n    const svgID = $element.id.split('_')[0];\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: svgID,\n        task: taskType,\n        node: $element,\n        nodeName,\n        contextMenu: true,\n        color,\n      },\n    });\n  }\n\n  showRadialMenu($activeSVG, event) {\n    const $svg = $activeSVG || document.querySelector('[data-svg-active=\"true\"]');\n    // get global position of the right click event\n    const globalPosition = __globalPosition(event);\n    const localPosition = __localPosition($svg);\n    this.$radialMenu.setAttribute('data-local-x', localPosition.x);\n    this.$radialMenu.setAttribute('data-local-y', localPosition.y);\n    // set position of radial menu\n    // number of 13 is size of #radial-menu\n    this.$radialMenu.style.top = `${globalPosition.y - 7}px`;\n    this.$radialMenu.style.left = `${globalPosition.x - 7}px`;\n\n    // make a flower\n    const $activeRadialMenuItem = this.$radialMenu.querySelectorAll('.is-active');\n    this.positionRadialMenuItems($activeRadialMenuItem);\n\n    // show radial menu\n    __addClass(this.$radialMenu, 'is-active');\n\n    // return {\n    //   localPosition,\n    //   globalPosition,\n    // };\n  }\n\n  hideRadialMenu() {\n    // hide radial menu\n    __removeClass(this.$radialMenu, 'is-active');\n    // deactivate all SVGs\n    SVG.deactivate();\n    // deselect all SVG items\n    SVG.deselectItem();\n\n    // deactivate radial menu items when the menu is hidden\n    setTimeout(() => {\n      if (!__hasClass(this.$radialMenu, 'is-active')) {\n        this.$radialMenuItems.forEach(($item) => {\n          __removeClass($item, 'is-active');\n        });\n      }\n    }, 150);\n  }\n\n  onMouseLeave() {\n    let mouseLeaveDelay;\n\n    this.$radialMenu.addEventListener('mouseleave', () => {\n      mouseLeaveDelay = setTimeout(() => {\n        this.hideRadialMenu(this.$radialMenu);\n      }, 500);\n    });\n\n    this.$radialMenu.addEventListener('mouseenter', () => {\n      clearTimeout(mouseLeaveDelay);\n    });\n  }\n\n  filterMenuButtons(clickedItem) {\n    if (__hasClass(clickedItem, 'svg-path') || clickedItem.nodeName === 'path') {\n      __addClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      this.$colorItems.forEach(($colorItem) => {\n        __addClass($colorItem, 'is-active');\n      });\n\n      this.$textItems.forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (__hasClass(clickedItem, 'svg-circle')) {\n      __addClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      this.$colorItems.forEach(($colorItem) => {\n        __addClass($colorItem, 'is-active');\n      });\n\n      this.$textItems.forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (__hasClass(clickedItem, 'svg-textarea')) {\n      __removeClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      if (!__hasClass(clickedItem, 'do-not-remove')) {\n        this.$colorItems.forEach(($colorItem) => {\n          __removeClass($colorItem, 'is-active');\n        });\n\n        this.$textItems.forEach(($textItem) => {\n          __addClass($textItem, 'is-active');\n        });\n      }\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (clickedItem.nodeName === 'image') {\n      __addClass(this.$createTextItem, 'is-active');\n      __removeClass(this.$removeItem, 'is-active');\n\n      this.$colorItems.forEach(($colorItem) => {\n        __removeClass($colorItem, 'is-active');\n      });\n\n      this.$textItems.forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n    }\n    else {\n      if (__hasClass(clickedItem, 'do-not-remove')) {\n        __removeClass(this.$removeItem, 'is-active');\n      } else {\n        __addClass(this.$createTextItem, 'is-active');\n        __addClass(this.$removeItem, 'is-active');\n      }\n      // mark it as slected\n      SVG.selectItem(clickedItem);\n    }\n  }\n}\n","export default class Observer {\n\n  constructor() {\n    this._events = [];\n  }\n\n  /**\n   * Add event listener\n   *\n   * {String} events - e.g. 'my-event-1 my-event-2'\n   * {Function} fn - event listener\n   */\n  on(events, fn) {\n\n    events = this._split(events);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) {\n        this._events[event] = [];\n      }\n\n      this._events[event].push(fn);\n    });\n\n  }\n\n  off(events, fn) {\n\n    events = this._split(events);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) { return; }\n\n      this.events[event] = this._events[event].filter((current_fn) => {\n        return current_fn !== fn;\n      });\n\n    });\n\n\n  }\n\n  // something like dispatchEvent\n  trigger(events, args) {\n\n    events = this._split(events);\n\n    console.log(events, args);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) { return; }\n\n      this._events[event].forEach((fn) => {\n        fn.call(this, event, args);\n      });\n\n    });\n\n  }\n\n  _split(events) {\n    return events.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n  }\n\n}\n","const actionTypes = {\n  editor: {\n    id: 'editor',\n    ADD_TAG: 'editor:ADD_TAG',\n    DELETE_TAG: 'editor:DELETE_TAG',\n    UPDATE_TAG: 'editor:UPDATE_TAG',\n    CHANGE: 'editor:CHANGE',\n  },\n  keywords: {\n    id: 'keywords',\n    CHANGE: 'keywords:CHANGE',\n  },\n  testQuiz: {\n    id: 'testQuiz',\n    ADD_ANSWER: 'testQuiz:ADD_ANSWER',\n    REMOVE_ANSWER: 'testQuiz:REMOVE_ANSWER',\n    UPDATE_ANSWER: 'testQuiz:UPDATE_ANSWER',\n    CHANGE: 'testQuiz:CHANGE',\n  },\n  textOptions: {\n    id: 'textOptions',\n    ADD: 'textOptions:ADD',\n    DELETE: 'textOptions:DELETE',\n    UPDATE: 'textOptions:UPDATE',\n    CHANGE: 'textOptions:CHANGE',\n  },\n  store: {\n    id: 'store',\n    ADD: 'ADD',\n    DELETE: 'DELETE',\n    UPDATE: 'UPDATE',\n    CHANGE: 'CHANGE',\n  },\n};\n\n\nexport default actionTypes;\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\n/*\nconst tagContainer: Object = {\n  editorId?: number,\n  id: string,\n  tagName: string,\n  tag: HTMLElement,\n  data?: Object\n}\n*/\n\n\nclass Store extends Observer {\n\n  constructor() {\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = {};\n    this._data.tags = [];\n  }\n\n  _checkTagExists(tagId) {\n    let tagExists = false;\n    this._data.tags.forEach((item, i) => {\n\n      if (item.id === tagId) {\n        tagExists = { item, index: i };\n      }\n\n    });\n\n    return tagExists;\n  }\n\n  addTag(tagContainer) {\n\n    if (this._data.tags.length === 0 || !this._checkTagExists(tagContainer.id)) {\n\n      if (undefined === tagContainer.data.userSelectedNodeItems) {\n        tagContainer.data.userSelectedNodeItems = [];\n      }\n\n      this._data.tags.push(tagContainer);\n\n      store.trigger(actionTypes.editor.CHANGE, {\n        action: {\n          id: actionTypes.editor.id,\n          type: actionTypes.editor.ADD_TAG,\n          data: {\n            tagContainer,\n          },\n        },\n\n      });\n\n    } else {\n      throw new Error('Tag already exists! Will not add it.');\n    }\n\n  }\n\n  deleteTag(tagContainer) {\n\n    let tagExists = this._checkTagExists(tagContainer.id);\n\n    if (tagExists !== false) {\n\n      this._data.tags.splice(tagExists.index, 1);\n\n      store.trigger(actionTypes.editor.CHANGE, {\n        action: {\n          id: actionTypes.editor.id,\n          type: actionTypes.editor.DELETE_TAG,\n          data: {\n            tagContainer: {\n              editorId: tagContainer.editorId,\n              id: tagContainer.id,\n              tagName: tagContainer.tagName,\n              data: {},\n            },\n          },\n        },\n\n      });\n\n      return true;\n    }\n\n    throw new Error('Tag does not exist! Will not delete it.');\n  }\n\n  getAllTags(opts) {\n\n\n    if (undefined === opts || !opts.editorId) { return this._data.tags; }\n\n    const selectedTags = this._data.tags.filter((item) => item.editorId === opts.editorId);\n\n    return selectedTags;\n  }\n\n  getTagsBy(opts) {\n\n    const allowedKeys = ['editorId', 'id', 'tagName'];\n\n    if (opts === undefined) { return false; }\n    if (allowedKeys.indexOf(opts.key) === -1) { return false; }\n\n    if (!Array.isArray(opts.value)) {\n      opts.value = [opts.value];\n    }\n\n    // console.log(opts.value);\n    // console.log(this._data.tags);\n\n    const selectedTags = this._data.tags.filter((item) => (item[opts.key] === opts.value[0]) || (item[opts.key] === opts.value[1]));\n\n    return selectedTags;\n  }\n\n  getLastTag(opts) {\n\n    if (undefined === opts || !opts.editorId) {\n      return this._data.tags[this._data.tags.length - 1];\n    }\n\n    const selectedTags = this._data.tags.filter((item) => item.editorId === opts.editorId);\n\n    return selectedTags[selectedTags.length - 1];\n  }\n}\n\nconst store = new Store();\nexport default store;\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\nclass StoreGlobal extends Observer {\n\n  constructor() {\n\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = [];\n\n  }\n\n  _checkExists(id) {\n    let objectExists = false;\n    this._data.forEach((item, i) => {\n\n      if (item.id === id) {\n        objectExists = { item, index: i };\n      }\n\n    });\n\n    return objectExists;\n  }\n\n  add(data) {\n\n    // console.log('add global called');\n\n    if (this._data.length === 0 || !this._checkExists(data.id)) {\n\n      this._data.push(data);\n\n      store.trigger(actionTypes.textOptions.id, {\n        action: {\n          type: actionTypes.textOptions.ADD,\n        },\n        data,\n      });\n\n    } else {\n      throw new Error('Object already exists! Will not add it.');\n    }\n\n  }\n\n  delete(data) {\n\n    const objectExists = this._checkExists(data.id);\n\n    if (objectExists !== false) {\n\n      this._data.splice(objectExists.index, 1);\n\n      store.trigger(actionTypes.textOptions.id, {\n        action: {\n          type: actionTypes.textOptions.DELETE,\n        },\n        data,\n      });\n\n      return true;\n\n    }\n    throw new Error('Tag does not exist! Will not delete it.');\n\n\n  }\n\n  getAll(opts) {\n\n    if (undefined === opts || !opts.editor) { return this._data; }\n\n    const selectedObjs = this._data.filter((item) => item.id === opts.id);\n\n    return selectedObjs;\n  }\n\n  getBy(opts) {\n\n    const allowedKeys = ['id'];\n\n    if ((opts === undefined) || (allowedKeys.indexOf(opts.key) === -1)) {\n      return false;\n    }\n\n    if (!Array.isArray(opts.value)) {\n      opts.value = [opts.value];\n    }\n\n    const selectedObjs = this._data.filter((item) => (item[opts.key] === opts.value[0]) || (item[opts.key] === opts.value[1]));\n\n    return selectedObjs;\n\n  }\n\n  getLast(opts) {\n\n    if (undefined === opts || !opts.editor) {\n      return this._data[this._data.length - 1];\n    }\n\n    const selectedObjs = this._data.filter((item) => item.id === opts.id);\n\n    return selectedObjs[selectedObjs.length - 1];\n  }\n\n}\n\nconst store = new StoreGlobal();\nexport default store;\n","import {\n  __mergeDeep,\n  __hasClass,\n  __addClass,\n  __removeClass,\n  __position,\n  __positionTranslated,\n  __remove,\n  __getRealDimensions,\n  __insertBefore,\n  __keycodeIsPrintableCharacter,\n  __toggleClass,\n  __dispatchEvent,\n} from '../../lib/utils';\nimport store from '../../store/store';\nimport storeGlobal from '../../store/store-global';\nimport Component from '../component';\n// import actionTypes from '../store/store-constants';\n\n\nexport default class Editor extends Component {\n\n  constructor($element) {\n    super($element);\n\n    // TODO: should extend default Component class and use this.target?\n    // this.$editor is better, more readable\n    this.$editor = this.target;\n    this.id = this.$editor.id;\n    // TODO: is DOM element before/after the editor itself.. move it to the editor?\n    this.settings = JSON.parse(document.querySelector(`[data-editor-id-reference=\"${this.id}\"]`).getAttribute('data-module-settings'));\n\n    this.opts = __mergeDeep(Editor.defaults, this.settings);\n\n    this.models = {\n      passive: [\n        'cteni',\n      ],\n      interactive: [\n        'predznaceny', 'zvyraznovani', 'komentáře', 'psani',\n      ],\n      withMenu: [\n        'predznaceny', 'zvyraznovani', 'komentáře',\n      ],\n    };\n\n    this.totalTagId = 0;\n\n    this.hasMenu = true;\n\n    this.selection = null;\n    this.lastSelectionSettings = {};\n    this.isCollapsed = null;\n    this.savedSelectionRange = null;\n    this.selectionAttributes = null;\n    this.dummyRangeElement = null;\n\n    this.selectionMouseDown = false;\n    this.selectionDirection = null;\n\n    this.hasEditableContentChanged = false;\n    this.lastPressedKey = null;\n\n    this.hasToolbar = false;\n    this.toolbar = {};\n\n    this.originalContent = {};\n    this.currentContent = {};\n\n    this._handlers = [];\n\n    this.wrapLastDeletesTimeoutClass = '';\n    this.wrapLastDeletesTimeoutFunction = () => { };\n    this.wrapLastAdditionsTimeoutClass = '';\n    this.wrapLastAdditionsTimeoutFunction = () => { };\n    this.isWrappingLastText = false;\n    this.isWriting = false;\n\n    this.$groupDeleted = null;\n\n    this.cache = {\n      body: document.body,\n      window,\n    };\n\n    this.init();\n  }\n\n  init() {\n    if (Editor._hasMenu(this.opts)) {\n      try {\n        this.$menu = this.$editor.querySelector(`.${this.opts.menuClass}`);\n\n        // TODO: generalize .item class via defaults and opts\n        this.$menuActions = this.$menu.querySelector('.menu').querySelectorAll('.menu-item');\n        this.$menuClose = this.$menu.querySelector('.close');\n      } catch (error) {\n        this.hasMenu = false;\n      }\n    } else {\n      this.hasMenu = false;\n    }\n\n    if (Editor._hasToolbar(this.opts)) {\n      this.hasToolbar = true;\n    }\n\n    this.$canvas = this.$editor.querySelector(`.${this.opts.canvasClass}`);\n\n    // only if the editor is INTERACTIVE\n    if (this.opts.funkce !== 'cteni') {\n      __addClass(this.$menu, 'hidden');\n\n      // only if the editor is for WRITING\n      if (this.opts.funkce === 'psani') {\n        this.originalContent.html = this.$canvas.innerHTML;\n        this.originalContent.text = this.$canvas.innerText;\n        this.currentContent.html = this.$canvas.innerHTML;\n        this.currentContent.text = this.$canvas.innerText;\n\n        this.wrapLastDeletesTimeoutClass = this._generateNewTagGroupClass();\n        this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n      }\n\n      // only if the editor is with extra TOOLBAR\n      if (this.hasToolbar) {\n        this.toolbar.$element = this.$editor.querySelector('.editor-toolbar');\n        this.toolbar.$btnReset = this.toolbar.$element.querySelector('.editor-toolbar-action-reset');\n      }\n\n      this.registerEditableHandlers();\n    }\n\n    // only if the editor is with PREHIGHLIGHTED text\n    if (this.opts.funkce === 'predznaceny') {\n      this.initPreHighlightedTextOptions();\n    }\n\n  }\n\n  _generateNewTagId() {\n    this.totalTagId = this.totalTagId + 1;\n    return `${this.id}-${this.totalTagId}`;\n  }\n\n  _generateNewTagGroupClass() {\n    this.totalTagId = this.totalTagId + 1;\n    return `group-${this.id}-${this.totalTagId}`;\n  }\n\n  // add all eventListeners\n  // TODO: separate special case from universal ones?\n  registerEditableHandlers() {\n\n    this.$canvas.addEventListener('mousedown', this.handlerFocus.bind(this), false);\n    this.$canvas.addEventListener('focusout ', this.handlerFocus.bind(this), false);\n\n    // Necessary when mouseup is outside the $canvas element\n    // therefore we have to capture the event outside the element through body element\n    this.cache.body.addEventListener('mouseup', this.handlerFocus.bind(this), false);\n\n\n    if (this.opts.funkce === 'psani') {\n\n      this.$canvas.addEventListener('keydown', (e) => {\n\n        const selection = window.getSelection();\n        const keyCode = e.which || e.keyCode;\n        let keyName = e.key;\n\n        // show OK button or feedback\n        this.showFeedback();\n\n        // start DELETE\n        if (keyName === 'Backspace' || keyName === 'Delete') {\n          if (selection.rangeCount) {\n            window.clearTimeout(this.wrapLastDeletesTimeoutFunction);\n\n            const range = selection.getRangeAt(0);\n            const cloneRange = range.cloneRange();\n\n            if (this.lastSelectionSettings.isCollapsed) {\n\n              try {\n                cloneRange.setStart(range.startContainer, range.startOffset - 1);\n              } catch (e) {\n                // backspace was pressed at the beginning of the node\n                cloneRange.setStart(range.startContainer, range.startOffset);\n                cloneRange.collapse(true);\n              }\n\n            } else {\n              cloneRange.setStart(range.startContainer, range.startOffset);\n\n            }\n\n            cloneRange.setEnd(range.endContainer, range.endOffset);\n\n            // do nothing when it's space\n            const addedFragment = cloneRange.cloneContents();\n            const addedFragmentString = addedFragment.textContent.trim();\n\n            if ((addedFragmentString !== '' && addedFragmentString !== '&nbsp;') || this.isWrappingLastText) {\n\n              const dummyElementInner = document.createElement('span');\n              dummyElementInner.className = `user-removed-text-inner ${this.wrapLastDeletesTimeoutClass}`;\n\n              cloneRange.surroundContents(dummyElementInner);\n\n              selection.removeAllRanges();\n              selection.addRange(range);\n\n              this.wrapLastDeletesTimeoutFunction = setTimeout(() => {\n\n                this.isWrappingLastText = false;\n\n                // wrap all previous deletes to one element\n                const dummyElement = document.createElement('span');\n                dummyElement.contentEditable = false;\n                dummyElement.className = 'user-removed-text';\n\n                const newGeneratedId = this._generateNewTagId();\n                dummyElement.id = newGeneratedId;\n\n                const $elements = document.querySelectorAll(`.${this.wrapLastDeletesTimeoutClass}`);\n\n                __insertBefore(dummyElement, $elements[0]);\n\n                $elements.forEach((el, i) => {\n                  dummyElement.appendChild(el);\n                });\n\n\n                // create close button\n                const $btnClose = document.createElement('span');\n                $btnClose.className = this.opts.closeBtnClass;\n\n                const clickHandler = (e) => {\n                  const $nodeElement = e.currentTarget.parentNode;\n                  this._removeNodeKeepTextContent($nodeElement);\n                  e.stopPropagation();\n                };\n\n                $btnClose.addEventListener('click', clickHandler.bind(this));\n\n                document.getElementById(newGeneratedId).appendChild($btnClose);\n\n                this.wrapLastDeletesTimeout = true;\n                this.wrapLastDeletesTimeoutClass = this._generateNewTagGroupClass();\n\n              }, 700);\n\n              this.isWrappingLastText = true;\n\n              e.preventDefault();\n\n            } else {\n\n              if (!this.isWrappingLastText) {\n                // we're removing spaces, do nothing use browser's default behaviour, unless the wrapping is going on\n                return;\n              }\n              e.preventDefault();\n            }\n          }\n        }\n        // end DELETE\n\n        // start WRITING\n        else if (__keycodeIsPrintableCharacter(keyCode)) {\n\n          // if nothing is selected (selection is empty)\n          if (this.lastSelectionSettings.isCollapsed) {\n\n            // if \"space\" was written\n            if (keyCode === 32) {\n              if (!this.isWrappingLastText) {\n                // we're adding spaces, do nothing use browser's default behaviour, unless the wrapping is going on\n                return;\n              }\n              // fill a space as the keyname for the spacebar\n              keyName = ' ';\n            }\n\n            // The Selection.rangeCount read-only property returns the number of ranges in the selection.\n            if (selection.rangeCount) {\n\n              window.clearTimeout(this.wrapLastAdditionsTimeoutFunction);\n\n              const range = selection.getRangeAt(0);\n              const cloneRange = range.cloneRange();\n\n              cloneRange.setStart(range.startContainer, range.startOffset);\n              cloneRange.setEnd(range.endContainer, range.endOffset);\n\n              const textToAddElement = document.createElement('span');\n              textToAddElement.contentEditable = false;\n              textToAddElement.className = `user-inserted-text-inner ${this.wrapLastAdditionsTimeoutClass}`;\n              textToAddElement.innerHTML = keyName;\n\n              cloneRange.insertNode(textToAddElement);\n\n              // move the caret after the inserted character\n              range.setStartAfter(textToAddElement);\n\n              selection.removeAllRanges();\n              selection.addRange(range);\n\n              this.wrapLastAdditionsTimeoutFunction = setTimeout(() => {\n\n                this.isWrappingLastText = false;\n\n                // wrap all previous deletes to one element\n                const dummyElement = document.createElement('span');\n                dummyElement.contentEditable = false;\n                dummyElement.className = 'user-inserted-text';\n\n                const newGeneratedId = this._generateNewTagId();\n                dummyElement.id = newGeneratedId;\n\n                const $elements = document.querySelectorAll(`.${this.wrapLastAdditionsTimeoutClass}`);\n\n                __insertBefore(dummyElement, $elements[0]);\n\n                $elements.forEach((el, i) => {\n                  dummyElement.appendChild(el);\n                });\n\n\n                // create close button\n                const $btnClose = document.createElement('span');\n                $btnClose.className = this.opts.closeBtnClass;\n\n                const clickHandler = (e) => {\n                  const $nodeElement = e.currentTarget.parentNode;\n                  __remove($nodeElement);\n                  e.stopPropagation();\n                };\n\n                $btnClose.addEventListener('click', clickHandler.bind(this));\n                document.getElementById(newGeneratedId).appendChild($btnClose);\n\n                this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n\n              }, 700);\n\n              this.isWrappingLastText = true;\n\n            }\n\n\n            if (this.hasEditableContentChanged === false) {\n              this.hasEditableContentChanged = true;\n            }\n\n            e.preventDefault();\n          }\n\n          // writing over existing text is selected\n          else {\n            window.clearTimeout(this.wrapLastAdditionsTimeoutFunction);\n\n            const range = selection.getRangeAt(0);\n            const cloneRange = range.cloneRange();\n\n            cloneRange.setStart(range.startContainer, range.startOffset);\n            cloneRange.setEnd(range.endContainer, range.endOffset);\n\n            // 1. handle deleting the text that was selected when writing started\n            if (this.isWriting === false && selection.toString().length > 0) {\n              // add deleted text node only for the first time and only if there is some selected text\n              this.$groupDeleted = document.createElement('span');\n              this.$groupDeleted.contentEditable = false;\n              this.$groupDeleted.className = 'user-removed-text';\n\n              const groupDeletedId = this._generateNewTagId();\n              this.$groupDeleted.id = groupDeletedId;\n\n              const $groupInnerDeleted = document.createElement('span');\n              $groupInnerDeleted.className = 'user-removed-text-inner';\n\n              this.$groupDeleted.appendChild($groupInnerDeleted);\n\n              cloneRange.surroundContents(this.$groupDeleted);\n\n              // create close button\n              const $btnClose = document.createElement('span');\n              $btnClose.className = this.opts.closeBtnClass;\n\n              const clickHandler = (e) => {\n                const $nodeElement = e.currentTarget.parentNode;\n                this._removeNodeKeepTextContent($nodeElement);\n                e.stopPropagation();\n              };\n\n              $btnClose.addEventListener('click', clickHandler.bind(this));\n              this.$groupDeleted.appendChild($btnClose);\n            }\n\n\n            // 2. adding new text\n            this.isWriting = true;\n\n            const $groupInnerAdded = document.createElement('span');\n            $groupInnerAdded.contentEditable = false;\n            $groupInnerAdded.className = `user-inserted-text-inner ${this.wrapLastAdditionsTimeoutClass}`;\n\n            // add a space so there is a space between the added and removed text\n            $groupInnerAdded.innerHTML = `${keyName}`;\n\n            // TODO: error after deleted selection\n            __insertBefore($groupInnerAdded, this.$groupDeleted);\n            range.setStartAfter($groupInnerAdded);\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n\n            this.wrapLastAdditionsTimeoutFunction = setTimeout(() => {\n              this.isWriting = false;\n\n              // wrap all previous deletes to one element\n              const $groupAdded = document.createElement('span');\n              $groupAdded.contentEditable = false;\n              $groupAdded.className = 'user-inserted-text';\n\n              const newGeneratedId = this._generateNewTagId();\n              $groupAdded.id = newGeneratedId;\n\n              const $elements = document.querySelectorAll(`.${this.wrapLastAdditionsTimeoutClass}`);\n\n              __insertBefore($groupAdded, $elements[0]);\n\n              $elements.forEach((el, i) => {\n                $groupAdded.appendChild(el);\n              });\n\n              const $btnClose = document.createElement('span');\n              $btnClose.className = this.opts.closeBtnClass;\n\n              const clickHandler = (e) => {\n                const $nodeElement = e.currentTarget.parentNode;\n                __remove($nodeElement);\n                e.stopPropagation();\n              };\n\n              $btnClose.addEventListener('click', clickHandler.bind(this));\n              document.getElementById(newGeneratedId).appendChild($btnClose);\n\n              this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n\n            }, 700);\n\n            e.preventDefault();\n          }\n        }\n        // end WRITING\n      });\n    }\n\n\n    if (this.hasMenu) {\n      this.registerMenuHandler();\n    }\n\n    if (this.hasToolbar) {\n      this.toolbar.$btnReset.addEventListener('click', () => {\n\n        const isConfirmed = confirm('Opravdu chcete vrátit text do původní podoby? Vaše změny se tímto ztratí.');\n\n        if (isConfirmed) {\n          this.$canvas.innerHTML = this.originalContent.html;\n        }\n\n      });\n    }\n\n  }\n\n  registerMenuHandler() {\n    for (let i = 0, len = this.$menuActions.length; i < len; i += 1) {\n      this.$menuActions[i].addEventListener('click', this.handlerMenuActions.bind(this), false);\n    }\n\n    this.$menuClose.addEventListener('click', this.handlerMenuClose.bind(this), false);\n  }\n\n  initPreHighlightedTextOptions() {\n    // Example of data from JSON:\n    //\n    // \"predznaceni\": [\n    //     {\n    //       \"vyraz\": \"Obracíme se na vás\",\n    //       \"data\": {\n    //         \"osoba\": \"my\",\n    //         \"slovesnyZpusob\": \"oznamovací\"\n    //       }\n    //     }\n    //   ]\n    // }\n    //\n    // In PUG, object for every item is injected into `data-text-option` so this JS has access to it\n\n    const dataAttr = 'data-text-option';\n\n    // loop over updated DOM via DOM manipulation\n    this.$textOptionsElements = this.$editor.querySelectorAll(`[${dataAttr}]`);\n    this.$textOptionsElements.forEach(($textOption) => {\n\n      $textOption.addEventListener('click', () => {\n        __toggleClass($textOption, this.opts.textOptions.selectedClass);\n        const idForSend = this.id.replace('editor-', '');\n\n        if (__hasClass($textOption, this.opts.textOptions.selectedClass)) {\n          // store !!!\n          storeGlobal.add({\n            editor: this.id,\n            id: $textOption.id,\n            tag: $textOption,\n            tagData: JSON.parse($textOption.getAttribute(dataAttr)),\n          });\n\n          // dispatch event that editor has changed\n          const tagData = JSON.parse($textOption.getAttribute('data-text-option'));\n\n          __dispatchEvent(document, 'editor.change', {}, {\n            text: {\n              id: idForSend,\n              task: 'add',\n              tagData,\n              value: $textOption.cloneNode(true),\n            },\n          });\n        } else {\n          // store !!!\n          storeGlobal.delete({\n            editor: this.id,\n            id: $textOption.id,\n          });\n\n          // dispatch event that editor has changed\n          __dispatchEvent(document, 'editor.change', {}, {\n            text: {\n              id: idForSend,\n              task: 'remove',\n              value: $textOption,\n            },\n          });\n        }\n\n        // show OK button or feedback\n        this.showFeedback();\n      });\n\n    });\n\n  }\n\n  toggleMenu(clickClose = false) {\n\n    if (clickClose === true) {\n      __addClass(this.$menu, 'hidden');\n      return;\n    }\n\n    if (this.selectionMouseDown === true) {\n      __addClass(this.$menu, 'hidden');\n      return;\n    }\n\n    if (__hasClass(this.$menu, 'hidden') && this.selectionMouseDown === false) {\n      this._setmenuDimensions();\n      __removeClass(this.$menu, 'hidden');\n    }\n\n  }\n\n  _setmenuDimensions() {\n    const menuDimensions = __getRealDimensions(this.$menu);\n    const parentTranslatedPosition = __positionTranslated(this.$editor);\n    const parentDimensions = __position(this.$editor);\n\n    // let additionalSize = ( this.selectionDirection === \"right\" ) ?\n\n    const isOverflowAt = {\n      right: (this.selectionAttributes.left + this.selectionAttributes.width + menuDimensions.width + this.opts.menuMargin.x) > (parentTranslatedPosition.left + parentDimensions.width),\n      top: (this.selectionAttributes.top - menuDimensions.height - this.opts.menuMargin.y) < (parentTranslatedPosition.top),\n      bottom: (this.selectionAttributes.top + this.selectionAttributes.height + menuDimensions.height + this.opts.menuMargin.y) > (parentTranslatedPosition.top + parentDimensions.height),\n    };\n\n    let leftDimensions;\n    let topDimensions;\n\n    if (isOverflowAt.right) {\n\n      leftDimensions = this.selectionAttributes.left - menuDimensions.width - this.opts.menuMargin.x;\n\n    } else {\n\n      leftDimensions = this.selectionAttributes.left + this.selectionAttributes.width + this.opts.menuMargin.x;\n\n    }\n\n    if (isOverflowAt.top) {\n\n      topDimensions = this.selectionAttributes.top + menuDimensions.height + this.opts.menuMargin.y;\n\n    } else {\n\n      topDimensions = this.selectionAttributes.top - menuDimensions.height - this.opts.menuMargin.y;\n\n    }\n\n    this.$menu.style.left = `${leftDimensions}px`;\n    this.$menu.style.top = `${topDimensions}px`;\n\n  }\n\n  handlerMenuClose(e) {\n\n    this.toggleMenu(true);\n\n    e.preventDefault();\n\n  }\n\n  handlerMenuActions(e) {\n\n    const $el = e.currentTarget;\n    const command = $el.getAttribute('data-command');\n    const commandName = $el.getAttribute('data-command-name');\n\n    /* :TODO: Cache the options for given element to avoid JSON parsing each time */\n    const options = JSON.parse($el.getAttribute('data-command-options'));\n\n    this.setSelection(command, commandName, options);\n\n    e.preventDefault();\n\n  }\n\n  handlerFocus(e) {\n    const isMouseRightClick = e.which === 3;\n\n    if (isMouseRightClick) { return; }\n\n    if (__hasClass(e.target, 'node-close')) { return; }\n\n    if (__hasClass(e.target, 'node-selected')) { return; }\n\n    if (e.type === 'mousedown') {\n\n      // start tracking the mouse down\n      this.selectionMouseDown = true;\n\n      if (this.hasMenu === true) {\n        this.toggleMenu();\n      }\n\n    }\n\n    if (e.type === 'mouseup' && this.selectionMouseDown) {\n\n      // reset saved last selection settings\n      this.lastSelectionSettings = {};\n\n      this.selection = window.getSelection();\n      this.isCollapsed = this.lastSelectionSettings.isCollapsed = this.selection.isCollapsed;\n      this.savedSelectionRange = this.selection.getRangeAt(0);\n\n      this.selectionMouseDown = false;\n\n      this.lastSelectionSettings.anchorOffset = this.selection.anchorOffset;\n      this.lastSelectionSettings.focusOffset = this.selection.focusOffset;\n      this.lastSelectionSettings.text = this.savedSelectionRange.toString();\n\n      /* https://developer.mozilla.org/en-US/docs/Web/API/Selection/isCollapsed */\n      /* Returns a Boolean indicating whether the selection's start and end points are at the same position. */\n      /* display context menu only if the cursor is NOT at the same position */\n      if (this.selection.isCollapsed === false && this.savedSelectionRange.toString().trim() !== '') {\n\n        this.selectionDirection = (this.selection.anchorOffset <= this.selection.focusOffset) ? 'right' : 'left';\n\n        if (this.hasMenu === true) {\n\n          this._setSelectionPosition(); // :TODO: cannot be used in contentEditable editor yet\n\n          this.toggleMenu();\n        }\n\n      }\n\n    }\n\n  }\n\n  _setSelectionPosition() {\n\n    const dummyElement = document.createElement('span');\n    dummyElement.className = 'dummy-range-element';\n\n    this.savedSelectionRange.surroundContents(dummyElement);\n\n    const selectionPosition = __positionTranslated(dummyElement);\n    const selectionDimension = __position(dummyElement);\n\n    this.selectionAttributes = {\n      left: selectionPosition.left,\n      top: selectionPosition.top,\n      width: selectionDimension.width,\n      height: selectionDimension.height,\n    };\n\n    __removeClass(dummyElement, 'dummy-range-element');\n\n    this._removeNodeKeepTextContent(dummyElement);\n\n  }\n\n  _highlightContents($domEl, newTagId) {\n    $domEl.appendChild(this.savedSelectionRange.extractContents());\n    this.savedSelectionRange.insertNode($domEl);\n\n    $domEl.setAttribute('data-tag-id', newTagId);\n  }\n\n  _storeHighlightedContents($domEl, newTagId) {\n    const tagName = $domEl.getAttribute('data-command-name');\n\n    // store !!!\n    store.addTag({\n      editor: this.id,\n      id: newTagId,\n      tag: $domEl,\n      tagName,\n      data: {},\n    });\n\n    // get tag color\n    const classes = $domEl.getAttribute('class');\n    // const colors = classes.match(/(?<=node-text-)[a-z]*/g);\n    const classesArray = classes.split(' ');\n    let color = '';\n    classesArray.forEach((value) => {\n      if (value.includes('node-text-')) {\n        color = value.replace('node-text-', '');\n      }\n    });\n\n    // dispatch event that editor has changed\n    const idForSend = this.id.replace('editor-', '');\n    __dispatchEvent(document, 'editor.change', {}, {\n      text: {\n        id: idForSend,\n        task: 'add',\n        tagName,\n        value: $domEl.cloneNode(true),\n        tagColor: color,\n      },\n    });\n  }\n\n  _removeNodeKeepTextContent(node) {\n    const text = node.textContent;\n    node.parentNode.insertBefore(document.createTextNode(text), node);\n    __remove(node);\n  }\n\n  _createCloseBtnForElement($parentEl, opts = {}) {\n\n    const $elClose = document.createElement('span');\n    $elClose.innerHTML = '×';\n    $elClose.setAttribute('class', opts.class);\n\n    const classesToToggle = opts.toggleClass.split(' ');\n\n\n    const clickHandler = (e) => {\n\n      const $closeBtn = e.currentTarget;\n      const $nodeElement = $closeBtn.parentNode;\n\n      $closeBtn.removeEventListener('click', clickHandler);\n      $nodeElement.removeChild($closeBtn);\n\n      if (undefined !== $nodeElement.commentRef) {\n\n        /* :TODO: temporary way to save the reference to the DOM element */\n        this.$editor.removeChild($nodeElement.commentRef);\n        $nodeElement.commentRef = null;\n\n      }\n\n      this._removeNodeKeepTextContent($nodeElement);\n\n      const tagName = $nodeElement.getAttribute('data-command-name');\n\n      // store !!!\n      store.deleteTag({\n        editor: this.id,\n        id: $nodeElement.getAttribute('data-tag-id'),\n        tag: $nodeElement,\n        tagName,\n        data: {},\n      });\n\n      // dispatch event that editor has changed\n      const idForSend = this.id.replace('editor-', '');\n      __dispatchEvent(document, 'editor.change', {}, {\n        text: {\n          id: idForSend,\n          task: 'remove',\n          tagName,\n          value: $nodeElement,\n        },\n      });\n\n      e.stopPropagation();\n\n    };\n\n    $elClose.addEventListener('click', clickHandler.bind(this));\n\n    $parentEl.appendChild($elClose);\n\n  }\n\n  _calculateCommentPosition($node) /* : Object */ {\n\n    const nodePosition = __positionTranslated($node);\n\n    return {\n      left: `${nodePosition.left + parseInt($node.offsetWidth, 10) + this.opts.commentMargin.x}px`,\n      top: `${nodePosition.top + this.opts.commentMargin.y}px`,\n    };\n\n  }\n\n  _createCommentForNode($el, opts = {}) {\n\n    const commentTemplate = document.getElementById('comment-template').innerHTML;\n\n    const div = document.createElement('div');\n    div.innerHTML = commentTemplate;\n\n    const commentDiv = div.childNodes[1];\n\n    // attach js reference to the dom element\n    commentDiv.data = {};\n    commentDiv.data.nodeRef = $el;\n\n    const commentNewTextarea = commentDiv.querySelector('.comment-new-text');\n    const commentDivButtonSubmit = commentDiv.querySelector('button');\n    const commentCommentsContainer = commentDiv.querySelector('.comments-container');\n\n    const calculatedCommentPosition = this._calculateCommentPosition($el);\n\n    commentDiv.style.left = calculatedCommentPosition.left;\n    commentDiv.style.top = calculatedCommentPosition.top;\n\n    __addClass(commentDiv, opts.class);\n\n    commentDiv.addEventListener('click', (e) => {\n\n      if (__hasClass(e.target, 'close')) {\n\n        __addClass(commentDiv, 'hidden');\n        __removeClass($el, 'active');\n\n      }\n\n    });\n\n    commentDivButtonSubmit.addEventListener('click', (e) => {\n\n      if (commentNewTextarea.value !== '') {\n\n        const commentItem = document.createElement('div');\n        commentItem.className = 'comment-item';\n\n        commentItem.innerText = commentNewTextarea.value;\n\n        commentCommentsContainer.appendChild(commentItem);\n\n        commentNewTextarea.value = '';\n      }\n\n    });\n\n    this.$editor.append(commentDiv);\n\n    __addClass($el, 'comment-created');\n\n    /* :TODO: Temporary way to save the reference to the DOM element */\n    $el.commentRef = commentDiv;\n\n\n  }\n\n  _addCommentHandlerForElement($el, opts = {}) {\n\n    __addClass($el, 'has-comments');\n\n    function clickHandler(e) {\n\n      if (!__hasClass(e.target, 'node-close')) {\n\n        if (!__hasClass($el, 'comment-created')) {\n\n          this._createCommentForNode($el, opts);\n\n        } else {\n\n          /* recalculate comment div position */\n          const calculatedCommentPosition = this._calculateCommentPosition($el);\n\n          $el.commentRef.style.left = calculatedCommentPosition.left;\n          $el.commentRef.style.top = calculatedCommentPosition.top;\n\n          __removeClass($el.commentRef, 'hidden');\n\n        }\n\n        if (!__hasClass($el, 'active')) {\n\n          __addClass($el, 'active');\n\n        } else {\n\n          __removeClass($el, 'active');\n          __addClass($el.commentRef, 'hidden');\n\n        }\n\n      }\n\n      e.stopPropagation();\n\n    }\n\n    $el.addEventListener('click', clickHandler.bind(this));\n\n  }\n\n  setSelection(command, commandName, opts = {}) {\n\n    if (this.selection) {\n\n      if (command === 'toggle-class') {\n\n        const $el = document.createElement('span');\n        $el.setAttribute('class', opts.toggleClass);\n        $el.setAttribute('data-command-name', commandName);\n\n        const newTagId = this._generateNewTagId();\n\n        this._highlightContents($el, newTagId);\n\n        if (opts.closeBtn === true) {\n          this._createCloseBtnForElement($el, {\n            class: 'node-close',\n            toggleClass: opts.toggleClass,\n          });\n        }\n\n        if (opts.comments === true) {\n          this._addCommentHandlerForElement($el, {\n            class: opts.commentsClass,\n          });\n        }\n\n        this._storeHighlightedContents($el, newTagId);\n\n        if (opts.showCommentsOnInit === true) {\n          $el.click();\n        }\n\n      }\n\n      // hide context menu after selecting the action#\n      this.toggleMenu(true);\n\n      // show OK button or feedback\n      this.showFeedback();\n\n    }\n\n  }\n\n}\n\nEditor.defaults = {\n  menuClass: 'contextual-menu-component',\n  canvasClass: 'canvas',\n  resetBtnClass: 'reset',\n  closeBtnClass: 'node-close',\n  nodeSelectedClass: 'node-selected',\n  commentMargin: {\n    x: 50,\n    y: 0,\n  },\n  menuMargin: {\n    x: 15,\n    y: 15,\n  },\n  textOptions: {\n    enable: false,\n    animatedClass: 'active',\n    selectedClass: 'selected',\n    deselectedClass: 'deselected',\n  },\n\n};\n\nEditor._hasMenu = (opts) => opts.funkce !== 'cteni' && opts.funkce !== 'psani' && (opts.menu !== false && opts.menu !== undefined);\nEditor._hasToolbar = (opts) => opts.funkce === 'psani' || (opts.toolbar !== false && opts.toolbar !== undefined);\n","import { __hasClass, __getHTML, __remove } from '../lib/utils';\nimport store from '../store/store';\nimport actionTypes from '../store/store-constants';\nimport Component from './component';\n\nexport default class AnalyticalTable extends Component {\n\n  constructor(id, element, opts) {\n    super(element);\n    this.id = id;\n\n    this.opts = { ...AnalyticalTable.defaults, ...opts };\n\n    this.isAdvanced = this.opts.isAdvanced;\n\n    this.rowIndex = 0;\n\n    this.tableResult = this.target.querySelector('.table-result');\n    this.tableResultBody = this.tableResult.querySelector('.table-body');\n    this.tableSelectedItems = this.target.querySelector('.table-selected-items');\n    this.tableSelectedItemsBody = this.tableSelectedItems.querySelector('.table-body');\n\n    this.activeDragged = null;\n\n    // choose the HTML for a row according to whether we work with the advanced version of a table\n    this._getRowHTML = (this.isAdvanced) ? AnalyticalTable._getAdvancedRowHTML : AnalyticalTable._getRowHTML;\n  }\n\n  init() {\n    this._registerStoreHandlers(this.tableResultBody, this.tableSelectedItemsBody);\n    this._registerHandlers();\n  }\n\n  _registerStoreHandlers(tableResultBody, tableSelectedItemsBody) {\n\n    store.on(actionTypes.editor.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      let addedTagContainer;\n      let $node;\n      // let deletedItem;\n\n      switch (action.type) {\n\n        case actionTypes.editor.ADD_TAG:\n\n          addedTagContainer = action.data.tagContainer;\n\n          switch (addedTagContainer.tagName) {\n\n            case this.opts.casti[1].sloupce[0].tag:\n\n              tableResultBody.insertAdjacentHTML('beforeend', this._getRowHTML(__getHTML(addedTagContainer.tag), addedTagContainer.id));\n\n\n              // TODO: fix this\n              if (this.opts.letSecondCaseRunIfSame || this.opts.casti[1].sloupce[0].tag === this.opts.casti[1].sloupce[1].tag) {\n\n              } else {\n                break;\n              }\n            // break;\n\n            case this.opts.casti[1].sloupce[1].tag:\n              $node = addedTagContainer.tag.cloneNode(true);\n              $node.setAttribute('draggable', true);\n              $node.addEventListener('click', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('dragstart', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('dragend', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('drag', this._handlerDraggable.bind(this), false);\n              tableSelectedItemsBody.appendChild($node);\n              break;\n            default:\n              break;\n\n          }\n          break;\n        case actionTypes.editor.DELETE_TAG:\n\n          addedTagContainer = action.data.tagContainer;\n\n          // console.log(\"from DELETE_TAG action\", addedTagContainer);\n\n          // simple analytical table tasks\n          // const deletedItems = document.querySelectorAll(`[data-tag-id=\"${addedTagContainer.id}\"]`);\n\n          Array.prototype.forEach.call(document.querySelectorAll(`[data-tag-id=\"${addedTagContainer.id}\"]`), ($node) => {\n\n            if (__hasClass($node.parentNode, 'cell-read-only')) {\n              // we have to remove the whole row from the table\n              // --> cell --> table-row\n              __remove($node.parentNode.parentNode);\n\n            } else {\n              __remove($node);\n            }\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n  _registerHandlers() {\n    this.target.addEventListener('dragover', this._handlerDrop.bind(this), false);\n    this.target.addEventListener('dragleave', this._handlerDrop.bind(this), false);\n    this.target.addEventListener('drop', this._handlerDrop.bind(this), false);\n  }\n\n  _handlerDraggable(e) {\n\n    if (e.type === 'dragstart') {\n      e.dataTransfer.setData('text/plain', 'node');\n      e.dataTransfer.dropEffect = '';\n      e.target.style.opacity = 0.5;\n\n      this.activeDragged = e.target.cloneNode(true);\n    }\n\n    if (e.type === 'dragend') {\n      e.target.style.opacity = 1;\n\n      // show OK button or feedback\n      this.showFeedback();\n    }\n\n    return false;\n  }\n\n  _handlerDrop(e) {\n    if (e.target.localName === 'input') {\n\n      if (e.type === 'dragover') {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      }\n\n      if (e.type === 'drop') {\n        e.preventDefault();\n      }\n    }\n\n    if (__hasClass(e.target, 'dashboard-canvas-widget-content')) {\n      if (e.type === 'dragover') {\n        e.preventDefault();\n\n        e.dataTransfer.dropEffect = '';\n        e.target.style.background = '#eee';\n      }\n\n      if (e.type === 'dragleave') {\n        e.target.style.background = '#fff';\n      }\n\n      if (e.type === 'drop') {\n        e.preventDefault();\n\n        e.target.style.background = '#fff';\n        this.activeDragged.style.opacity = 1;\n\n        this.activeDragged.addEventListener('click', (e) => {\n          if (__hasClass(e.target, 'node-close')) {\n            e.target.parentNode.remove();\n          }\n        });\n\n        e.target.appendChild(this.activeDragged);\n\n      }\n    }\n\n    return false;\n  }\n}\n\nAnalyticalTable.defaults = {\n  isAdvanced: false,\n};\n\n\nAnalyticalTable._getRowHTML = (nodeHTML, index = 0) => {\n\n  const tableRowTemplate = `\n    <div class=\"table-row\">\n      <div class=\"cell cell-read-only cell-border-right\">${nodeHTML}</div>\n      <div class=\"cell dashboard-canvas-widget-content\"></div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n};\n\nAnalyticalTable._getAdvancedRowHTML = (nodeHTML, index = 0) => {\n\n  const tableRowTemplate = `\n    <div class=\"table-row\">\n      <div class=\"cell cell-read-only cell-border-right\">${nodeHTML}</div>\n      <div class=\"cell dashboard-canvas-widget-content cell-border-right\"></div>\n      <div class=\"cell table-input\">\n        <input id=\"table-akteri-vztahy-input-${index}\" data-input-target=\"\" data-save=\"value\" type=\"text\" placeholder=\"Vztah aktérů…\" tabindex=\"-1\">\n      </div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n};\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\n/*\nconst tagContainer: Object = {\n  editorId?: number,\n  id: string,\n  tag: HTMLElement,\n  data?: Object\n}\n*/\n\n\nclass StoreKeywords extends Observer {\n\n  constructor() {\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = {};\n\n  }\n\n\n  change(keywordsId, newItems, newItemsHTML) {\n\n    if (!this._data[keywordsId]) {\n      this._data[keywordsId] = {};\n    }\n\n    this._data[keywordsId].items = newItems;\n    this._data[keywordsId].itemsHTML = newItemsHTML;\n\n    store.trigger(actionTypes.keywords.CHANGE, {\n      action: {\n        id: actionTypes.keywords.id,\n        type: actionTypes.keywords.CHANGE,\n        data: {\n          keywordsId,\n          newItems,\n          newItemsHTML,\n        },\n      },\n\n    });\n\n  }\n\n  export() {\n    return this._data;\n  }\n\n}\n\nconst store = new StoreKeywords();\nexport default store;\n","import { __toggleClass, __getHTML } from '../lib/utils';\nimport Component from './component';\nimport store from '../store/store-keywords';\nimport actionTypes from '../store/store-constants';\n\n// zoom the image\nexport default class Keywords extends Component {\n  constructor($element, opts = {}) {\n    super($element);\n    this.id = this.target.id;\n    this.function = this.target.getAttribute('data-keywords') || 'selekce';\n    this.$controls = this.target.querySelectorAll('[data-keywords-control]');\n\n    this.opts = { ...Keywords.defaults, ...opts };\n\n    this.$itemsContainer = this.target.querySelector(`.${this.opts.itemsContainerClassName}`);\n\n    if (this.opts.inherit && this.opts.inherit.from.length > 0) {\n      // console.log(this.opts.inherit.from);\n      this.isInherited = true;\n    } else {\n      this.$items = this.target.querySelectorAll(`.${this.opts.itemClassName}`);\n    }\n\n  }\n\n  init() {\n    switch (this.function) {\n      case 'selekce':\n        // we have data at the instantiation for importing\n        if (this.opts.import && this.opts.import.length > 0) {\n          this.$itemsContainer.innerHTML = Keywords._getHTMLFromItems(this.opts.import);\n        }\n\n        // save the state of all instances on Init\n        /* :TODO: a possible duplicity when the instance has the isInherited set to TRUE */\n        store.change(\n          this.id,\n          Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n          Keywords._getItemsHTML(this.$itemsContainer),\n        );\n\n        // console.log(this.id, this.isInherited);\n        if (this.isInherited) {\n          // if onInit, we copy the elements\n          // by their ids into the itemsContainer of this object\n          if (this.opts.inherit.onInit) {\n            this._regenerateItemsContainerFromInherited();\n          }\n\n          this._registerStoreHandlers();\n        }\n\n        this._registerHandlers();\n        break;\n\n      case 'wordcloud':\n        this.$items.forEach(($item) => {\n          $item.setAttribute('data-keywords-item', 0);\n        });\n        this._changeSizeOfKeywordItem(this.opts.skala);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _changeSizeOfKeywordItem(maxLevel) {\n    maxLevel = maxLevel ? parseInt(maxLevel, 10) : 4;\n\n    function setNewLevelValue($keyword, number, feedback) {\n      const oldValue = parseInt($keyword.getAttribute('data-keywords-item'), 10);\n      const newValue = oldValue + number;\n      const value = Math.abs(newValue) > maxLevel ? oldValue : newValue;\n      $keyword.setAttribute('data-keywords-item', value);\n\n      feedback();\n    }\n\n    this.$controls.forEach(($control) => {\n      const $keyword = $control.parentElement.parentElement;\n      const controlFunction = $control.getAttribute('data-keywords-control');\n\n      switch (controlFunction) {\n        case 'minus':\n          $control.addEventListener('click', (event) => {\n            setNewLevelValue($keyword, -1, this.showFeedback);\n            event.preventDefault();\n          });\n          break;\n\n        case 'plus':\n          $control.addEventListener('click', (event) => {\n            setNewLevelValue($keyword, 1, this.showFeedback);\n            event.preventDefault();\n          });\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n  _regenerateItemsContainerFromInherited() {\n    let tempContent = '';\n\n    this.opts.inherit.from.forEach((id) => {\n      const temp = document.getElementById(id).querySelector(`.${this.opts.itemsContainerClassName}`).innerHTML;\n      // rename ids of the original items to avoid duplicates in the DOM\n      tempContent += Keywords.renameItemsIds(id, this.id, temp);\n      // console.log(tempContent);\n    });\n\n    this.$itemsContainer.innerHTML = tempContent;\n\n    this.$items = this.target.querySelectorAll(`.${this.opts.itemClassName}`);\n\n    store.change(\n      this.id,\n      Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n      Keywords._getItemsHTML(this.$itemsContainer),\n    );\n\n  }\n\n  _registerHandlers() {\n\n    this.target.querySelectorAll(`.${this.opts.itemClassName}`).forEach(($item) => {\n      $item.addEventListener('click', this._eventHandler.bind(this), true);\n    });\n\n  }\n\n  _registerStoreHandlers() {\n    store.on(actionTypes.keywords.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      const data = payload.action.data;\n\n      switch (action.type) {\n\n        case actionTypes.keywords.CHANGE:\n\n          // if there are other objects this object inherits items from, update the html\n          if (this.opts.inherit.from.indexOf(data.keywordsId) > -1) {\n            this._regenerateItemsContainerFromInherited();\n\n            // regenerate event handlers\n            this._registerHandlers();\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n    });\n\n  }\n\n\n  _eventHandler(e) {\n\n    if (e.type === 'click') {\n      // console.log(e.target, e.currentTarget);\n      __toggleClass(e.currentTarget, 'disabled');\n\n      store.change(\n        this.id,\n        Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n        Keywords._getItemsHTML(this.$itemsContainer),\n      );\n\n      this.showFeedback();\n    }\n\n  }\n\n}\n\n\nKeywords._getItemFromDOMElement = ($item) => ({\n  class: $item.className,\n  id: $item.getAttribute('id'),\n  text: $item.innerText,\n});\n\nKeywords._getItemsHTML = ($itemsContainer) => $itemsContainer.innerHTML;\n\nKeywords._getItemsFromHTML = ($itemsContainer, itemsClassName) => {\n  const $items = $itemsContainer.querySelectorAll(`.${itemsClassName}`);\n  const itemsArray = [];\n\n  $items.forEach(($item) => {\n    itemsArray.push(Keywords._getItemFromDOMElement($item));\n  });\n\n\n  return itemsArray;\n\n};\n\nKeywords._getDOMElementFromItem = (item) => {\n\n  const newDiv = document.createElement('div');\n  newDiv.setAttribute('class', item.class);\n  newDiv.setAttribute('id', item.id);\n  newDiv.innerHTML = item.text;\n\n  return __getHTML(newDiv);\n\n};\n\nKeywords._getHTMLFromItems = (items) => {\n\n  let contentHTML = '';\n\n  items.forEach((item) => {\n\n    contentHTML += Keywords._getDOMElementFromItem(item);\n\n  });\n\n  return contentHTML;\n\n};\n\n\nKeywords.renameItemsIds = (oldId, newId, itemsHTML) => {\n\n  const expString = new RegExp(oldId, 'g');\n\n  return itemsHTML.replace(expString, newId);\n\n};\n\nKeywords.defaults = {\n  itemsContainerClassName: 'keywords-items-container',\n  itemClassName: 'keywords-item',\n};\n","import { __getHTML } from '../lib/utils';\n\nimport store from '../store/store';\nimport actionTypes from '../store/store-constants';\n\n// zoom the image\nexport default class EditorTagsPlaceholder {\n  constructor(element, opts = {}) {\n\n    this.$element = element;\n    this.id = this.$element.getAttribute('id');\n\n    this.opts = { ...EditorTagsPlaceholder.defaults, ...opts };\n\n    this.commandNames = JSON.parse(this.$element.getAttribute(this.opts.itemSubscribeAttributeClassName));\n    this.$itemsContainer = this.$element.querySelector(`.${this.opts.itemsContainerClassName}`);\n\n  }\n\n  init() {\n\n    this._registerStoreHandlers();\n\n  }\n\n\n  _registerStoreHandlers() {\n\n    store.on(actionTypes.editor.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      const data = payload.action.data;\n      const tagContainer = data.tagContainer;\n\n      if (this.commandNames.indexOf(tagContainer.tagName) > -1) {\n\n        const tags = store.getTagsBy({key: 'tagName', value: this.commandNames});\n\n        let content = \"\";\n\n        tags.forEach((tag) => {\n\n          content += __getHTML( tag.tag );\n\n        });\n\n        this.$itemsContainer.innerHTML = content;\n\n      }\n\n  });\n\n  }\n\n\n\n}\n\n\n\n\n\nEditorTagsPlaceholder.defaults = {\n  itemsContainerClassName: \"editor-tags-placeholder-content\",\n  itemSubscribeAttributeClassName: 'data-placeholder-editor-subscribe'\n\n};\n","import { __removeClass, __toggleClass } from '../lib/utils';\nimport Component from './component';\n// import store from '../store/store';\n// import actionTypes from '../store/store-constants';\n\n\nexport default class TestQuiz extends Component {\n\n  constructor(id, element, opts) {\n    super(element);\n\n    this.id = id;\n\n    this.opts = { ...TestQuiz.defaults, ...opts };\n\n    this.$questions = this.target.querySelectorAll(`.${this.opts.itemClass}`);\n    this.cache = {\n      answersCorrect: 0,\n      colors: [],\n      questions: [],\n    };\n\n    // get colors for all feedback variants\n    if (this.opts.zpetnaVazba) {\n      this.cache.colors = this.opts.zpetnaVazba.map((feedback) => feedback.barva);\n    }\n  }\n\n  init() {\n    // this._registerStoreHandlers();\n    this._registerHandlers();\n  }\n\n  _registerHandlers() {\n\n    this.$questions.forEach(($question, questionIndex) => {\n      // all questions are without answer by default\n      this.cache.questions.push({ answered: false });\n\n      const answerCorrect = parseInt($question.getAttribute('data-module-answer'), 10);\n      const $answers = $question.querySelectorAll(`.${this.opts.optionClass}`);\n\n      $answers.forEach(($answer, answerIndex) => {\n        $answer.addEventListener('click', () => {\n          const $answerCurrent = $answer;\n\n          // if already selected do nothing\n          if ($answerCurrent.classList.contains('selected')) {\n            return;\n          }\n\n          // remove the selection\n          $answers.forEach(($answersItem) => __removeClass($answersItem, this.opts.selectedClass));\n          // select the clicked one\n          __toggleClass($answerCurrent, this.opts.selectedClass);\n\n          // get sum of all corect answers\n          if (this.opts.zpetnaVazba) {\n            if (answerIndex === answerCorrect) {\n              this.cache.answersCorrect += 1;\n            } else if (this.cache.answersCorrect !== 0 && this.cache.questions[questionIndex].answered === true) {\n              this.cache.answersCorrect -= 1;\n            }\n            // loop through all \"zpetnaVazba\" to get the one with the fullfilled condition\n            const feedbackActual = this.opts.zpetnaVazba.find((feedback) => feedback.podminka.includes(this.cache.answersCorrect));\n\n            // show the right feedback message\n            this.$buttonFeedback.classList.remove(...this.cache.colors);\n            this.$buttonFeedback.classList.add(feedbackActual.barva);\n            this.$buttonFeedbackText.innerText = feedbackActual.text;\n          }\n\n          // note that this question has been answered (whether true or false)\n          this.cache.questions[questionIndex].answered = true;\n\n          // show OK button with feedback only when all question have been answered\n          if (this.cache.questions.find((question) => !question.answered) === undefined) {\n            this.showFeedback();\n          }\n\n        }, false);\n      });\n    });\n  }\n}\n\nTestQuiz.defaults = {\n  itemClass: 'test-quiz-item',\n  optionClass: 'option',\n  selectedClass: 'selected',\n};\n","import { __remove } from '../lib/utils';\nimport storeGlobal from '../store/store-global';\nimport actionTypes from '../store/store-constants';\nimport Component from './component';\n\nexport default class GenericTable extends Component {\n\n  constructor($element, opts) {\n    super($element);\n\n    this.id = this.target.id;\n    this.opts = { ...GenericTable.defaults, ...opts };\n\n    this.rowIndex = 0;\n\n    this.$tableResultBody = this.target.querySelector('.table-body');\n\n    this.dataSettings = this.opts.data;\n\n    this.cache = {\n      tasksToComplete: 0,\n      tasksCompleted: 0,\n      tasks: [],\n    };\n  }\n\n  init() {\n\n    if (this.dataSettings.source === 'store') {\n      this._registerStoreHandlers();\n    }\n\n    // this._registerHandlers();\n  }\n\n  _registerStoreHandlers() {\n\n    // register store event handler\n    // in tabulkaObecna JSON settings, subscribe is an array, here we need a string of strings separated by spaces\n    storeGlobal.on(this.dataSettings.subscribe.join(' '), (event, payload) => {\n      const action = payload.action;\n      const data = payload.data;\n\n      switch (action.type) {\n\n        case actionTypes[event].ADD: {\n          this.$tableResultBody.insertAdjacentHTML('beforeend', GenericTable._getRowHTML(data));\n\n          const $allRows = this.$tableResultBody.querySelectorAll('.table-row');\n          const $lastRow = $allRows[$allRows.length - 1];\n\n          const $newSelects = $lastRow.querySelectorAll('select');\n\n          this.cache.tasksToComplete += $newSelects.length;\n\n          $newSelects.forEach(($select) => {\n            this.cache.tasks.push({ answered: false });\n            const taskNumber = this.cache.tasks.length - 1;\n\n            $select.addEventListener('change', () => {\n              if (this.cache.tasks[taskNumber].answered === false) {\n                this.cache.tasksCompleted += 1;\n                this.cache.tasks[taskNumber].answered = true;\n              }\n              if (this.cache.tasksToComplete === this.cache.tasksCompleted) {\n                // show OK button or feedback\n                this.showFeedback();\n              }\n            });\n          });\n          break;\n        }\n        case actionTypes[event].DELETE: {\n          const $row = document.getElementById(`${data.id}_table`);\n          __remove($row);\n          this.cache.tasksToComplete -= $row.querySelectorAll('select').length;\n          this.cache.tasksCompleted -= $row.querySelectorAll('select').length;\n\n          if (this.cache.tasksToComplete <= this.cache.tasksCompleted) {\n            // show OK button or feedback\n            this.showFeedback();\n          }\n\n          break;\n        }\n        default:\n          break;\n      }\n    });\n  }\n}\n\nGenericTable.defaults = {};\n\n// data.data.text: editor text name\n// data.data.vyraz selected text option text value\nGenericTable._getRowHTML = (data) => {\n  const tableRowTemplate = `\n    <div class=\"table-row\" id=\"${data.id}_table\">\n      <div class=\"cell\">${data.tagData.nazev}</div>\n      <div class=\"cell\">${data.tagData.vyraz}</div>\n      <div class=\"cell\">\n        <select id=\"${data.id}-select-osoba\" name=\"osoba\" data-save=\"value\">\n          <option>Vyberte osobu</option>\n          <option>já</option>\n          <option>ty</option>\n          <option>on/ona/ono</option>\n          <option>my</option>\n          <option>vy</option>\n          <option>oni/ony/ona</option>\n          <option>infinitiv</option>\n        </select>\n      </div>\n      <div class=\"cell\">\n        <select id=\"${data.id}-select-zpusob\" name=\"zpusob\" data-save=\"value\">\n          <option>Vyberte způsob</option>\n          <option>oznamovací</option>\n          <option>podmiňovací</option>\n          <option>rozkazovací</option>\n          <option id=\"select-zpusob-infinitiv\">infinitiv</option>\n        </select>\n      </div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n};\n","// [data-fullscreen]\nimport Component from './component';\n\nclass Fullscreen extends Component {\n  constructor($element) {\n    super($element);\n\n    this.$fullscreen = document.querySelector('[data-fullscreen=\"target\"]');\n    this.$fullscreenImage = this.$fullscreen.querySelector('[data-fullscreen=\"image\"]');\n\n    this.window = {};\n    this.image = {};\n\n    this.window.width = window.innerWidth;\n    this.window.height = window.innerHeight;\n    this.window.ratio = this.window.width / this.window.height;\n\n    this.$fullscreenImage.onload = () => {\n      this.image.width = this.$fullscreenImage.naturalWidth;\n      this.image.height = this.$fullscreenImage.naturalHeight;\n      this.image.ratio = this.image.width / this.image.height;\n\n      if (this.image.ratio >= this.window.ratio) {\n        this.$fullscreenImage.style.width = '100%';\n        this.$fullscreenImage.style.height = 'auto';\n      } else {\n        this.$fullscreenImage.style.width = 'auto';\n        this.$fullscreenImage.style.height = `${this.window.height}px`;\n      }\n    };\n\n  }\n}\n\nexport default class FullscreenToggle extends Fullscreen {\n  constructor($element) {\n    super($element);\n\n    this.target.addEventListener('click', (event) => {\n      this.$fullscreenImage.src = this.target.nextElementSibling.src;\n      this.$fullscreen.classList.toggle('hidden');\n\n      this.showFeedback();\n\n      event.preventDefault();\n      event.stopPropagation();\n    }, false);\n\n  }\n}\n","import Component from './component';\nimport { __dispatchEvent } from '../lib/utils';\n\nexport default class UserText extends Component {\n  constructor($element) {\n    super($element);\n    this.$userTexts = this.$slide.querySelectorAll('[data-textarea-target]');\n    this.$counter = this.target.nextElementSibling.querySelector('[data-usertext-counter]');\n    this.$wrapper = this.$counter.parentElement;\n\n    this.feedback = JSON.parse(this.target.getAttribute('data-feedback'));\n\n    this.lengthExpected = {\n      min: parseInt(this.target.getAttribute('minlength') === '0' ? 1 : this.target.getAttribute('minlength'), 10),\n      avg: null,\n      max: parseInt(this.target.getAttribute('maxlength') / 2, 10),\n    };\n    this.lengthExpected.avg = Math.floor((this.lengthExpected.max - this.lengthExpected.min) / 4 + this.lengthExpected.min);\n\n    this.cache = {\n      answersCorrect: 0,\n      colors: [\n        'color-red',\n        'color-orange',\n        'color-green',\n      ],\n      questions: [],\n    };\n\n    this.lastValue = '';\n    this.hadData = this.target.value && this.target.value.length > 0;\n    this.wasUsed = false;\n\n    if (this.hadData) {\n      this.updateCharacterCounter();\n    }\n\n    if (!HISTORYLAB.import.done) {\n      // duplicate source of different text element\n      this.toDuplicate = this.target.getAttribute('data-duplicate-text');\n      this.textDuplicateSources = this.toDuplicate ? this.toDuplicate.split(' ') : [];\n\n      // listen events\n      this.getEvents();\n      this.addEventListeners();\n    }\n  }\n\n  updateCharacterCounter(length = this.target.value.length) {\n    this.$wrapper.classList.remove(...this.cache.colors);\n    if (length < this.lengthExpected.min) this.$wrapper.classList.add(this.cache.colors[0]);\n    else if (length <= this.lengthExpected.avg) this.$wrapper.classList.add(this.cache.colors[1]);\n    else if (length > this.lengthExpected.avg) this.$wrapper.classList.add(this.cache.colors[2]);\n\n    this.$counter.innerText = length;\n    this.target.classList.add('is-used', !this.wasUsed);\n    this.wasUsed = true;\n  }\n\n  updateFeedback(length = this.target.value.length) {\n    if (!this.$buttonFeedback) return;\n\n    this.$buttonFeedback.classList.remove(...this.cache.colors);\n    if (length < this.lengthExpected.min) {\n      this.$buttonFeedback.classList.add(this.cache.colors[0]);\n      this.$buttonFeedbackText.innerText = this.feedback.none;\n    } else {\n\n      if (length <= this.lengthExpected.avg) {\n        this.$buttonFeedback.classList.add(this.cache.colors[1]);\n        this.$buttonFeedbackText.innerText = this.feedback.short;\n      }\n      else if (length > this.lengthExpected.avg) {\n        this.$buttonFeedback.classList.add(this.cache.colors[2]);\n        this.$buttonFeedbackText.innerText = this.feedback.ok;\n      }\n\n      this.target.setAttribute('data-textarea-target', 'success');\n      // check if all conditions of the same component on the same slide are met\n      const conditionAll = Array.from(this.$userTexts).find(($userText) => ($userText.getAttribute('data-textarea-target') !== 'success'));\n\n      if (conditionAll === undefined) {\n        // show OK button or feedback\n        this.showFeedback();\n      }\n    }\n  }\n\n  addEventListeners() {\n    // BLUR\n    this.target.addEventListener('blur', (event) => {\n      this.updateCharacterCounter();\n\n      if (event.target.value !== this.lastValue) {\n        const taskName = (this.lastValue === '') ? 'create' : 'change';\n        this.lastValue = event.target.value;\n\n        // dispatch event that text has changed\n        __dispatchEvent(document, 'text.change', {}, {\n          text: {\n            id: event.target.id,\n            task: taskName,\n            text: event.target.value,\n          },\n        });\n\n        // remove connection of any textfields\n        this.textDuplicateSources = [];\n      }\n    });\n\n    // KEYUP\n    this.target.addEventListener('keyup', (event) => {\n      event.stopPropagation();\n\n      const valueLength = this.target.value.length;\n      this.updateCharacterCounter(valueLength);\n      this.updateFeedback(valueLength);\n    });\n  }\n\n  getEvents() {\n    if (this.textDuplicateSources[0]) {\n\n      document.addEventListener('text.change', (e) => {\n        if (this.textDuplicateSources.includes(e.detail.text.id)) {\n\n          const taskName = (this.target.value === '') ? 'create' : 'change';\n          switch (e.detail.text.task) {\n            case 'create':\n            case 'change':\n              // if is something already there\n              if (this.target.value !== '') this.target.value += '\\n';\n\n              // if array length is one it means that can by connection line\n              if (this.textDuplicateSources.length === 1) {\n                this.target.value = e.detail.text.text;\n              } else {\n                this.target.value += `${e.detail.text.text}\\n`;\n              }\n\n              // dispatch event that text has changed\n              __dispatchEvent(document, 'text.change', {}, {\n                text: {\n                  id: this.target.id,\n                  task: taskName,\n                  text: this.target.value,\n                },\n              });\n\n              // make different first value if is need\n              this.lastValue = this.target.value;\n\n              this.updateCharacterCounter();\n              break;\n            default:\n              console.log('Nondefinated text events task. :(');\n          }\n        }\n      });\n    }\n  }\n}\n","import Component from '../component';\n\nexport default class AudioPlayerNormal extends Component {\n\n  constructor($element) {\n    super($element);\n\n    this.$playButton = this.target.querySelector('[data-player-control]');\n    this.$loadWave = this.target.querySelector('[data-audio-wave]');\n    this.$leftTime = this.target.querySelector('[data-audio-time-left]');\n    this.$audioDuration = this.target.querySelector('[data-audio-time-duration]');\n\n    this.wavesurfer = WaveSurfer.create({\n      container: this.$loadWave,\n      waveColor: '#A77977',\n      progressColor: '#FCE4E3',\n      height: 80,\n      responsive: true,\n      barWidth: 2,\n    });\n    this.wavesurfer.load(this.$loadWave.dataset.src);\n\n    this.initWave();\n  }\n\n  initWave() {\n    this.wavesurfer.on('ready', () => {\n      this.$leftTime.textContent = '0:00';\n      const duration = this.wavesurfer.getDuration();\n      const minutes = Math.floor((duration % 3600) / 60);\n      const seconds = (`00${Math.floor(duration % 60)}`).slice(-2);\n      this.$audioDuration.textContent = `${minutes}:${seconds}`;\n\n      this.addListenerAfterReady();\n    });\n  }\n\n  addListenerAfterReady() {\n    this.wavesurfer.on('audioprocess', (time) => {\n      const minutes = Math.floor((time % 3600) / 60);\n      const seconds = (`00${Math.floor(time % 60)}`).slice(-2);\n      this.$leftTime.textContent = `${minutes}:${seconds}`;\n    });\n\n    this.wavesurfer.on('finish', () => {\n      this.$playButton.setAttribute('data-player-control', 'paused');\n    });\n\n    this.$playButton.addEventListener('click', () => {\n      this.wavesurfer.playPause();\n\n      if (this.$playButton.getAttribute('data-player-control') === 'paused') {\n        this.$playButton.setAttribute('data-player-control', 'playing');\n      } else {\n        this.$playButton.setAttribute('data-player-control', 'paused');\n      }\n\n      this.showFeedback();\n    });\n\n    // stop audio prehravac kdyz se zapne dalsi slajd\n    const $nextSlides = document.querySelectorAll('[data-nav-button]');\n    $nextSlides.forEach(($nextSlide) => {\n      $nextSlide.addEventListener('click', () => {\n        if (this.$playButton.getAttribute('data-player-control') === 'playing') {\n          this.wavesurfer.playPause();\n          this.$playButton.setAttribute('data-player-control', 'paused');\n        }\n      });\n    });\n\n  }\n\n}\n","import AudioPlayer from './audio-player';\nimport { getSecondsMinutesFormat } from './media';\n\nexport default class AudioPlayerSimple extends AudioPlayer {\n  constructor($element) {\n    super($element);\n\n    this.$audio = this.target.querySelector('audio');\n    this.$timeLeft = this.target.querySelector('[data-audio-time-left]');\n    this.$duration = this.target.querySelector('[data-audio-time-duration]');\n\n    this.$duration.innerText = `/${getSecondsMinutesFormat(this.$audio.duration)}`;\n\n    AudioPlayer.addEventListeners(this.target, this.showFeedback);\n  }\n}\n","import Component from './component';\n\nexport default class FakeMap extends Component {\n  constructor($element) {\n    super($element);\n\n    this.$buttons = this.target.querySelectorAll('[data-fake-map=\"toggle\"]');\n    this.$maps = this.target.querySelectorAll('[data-fake-map=\"map\"]');\n    this.lastActiveIndex = 0;\n\n    this.addEventListenerToButtons();\n  }\n\n  switchMap($button, index) {\n    this.$maps[this.lastActiveIndex].classList.remove('active');\n    this.$buttons[this.lastActiveIndex].classList.remove('active');\n\n    this.$maps[index].classList.add('active');\n    $button.classList.add('active');\n\n    this.lastActiveIndex = index;\n  }\n\n  addEventListenerToButtons() {\n    this.$buttons.forEach(($button, index) => {\n\n      $button.addEventListener('click', (event) => {\n        this.switchMap($button, index);\n        this.showFeedback();\n\n        event.preventDefault();\n      });\n\n    });\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport Component from '../component';\nimport { getSecondsMinutesFormat, mediaEvents } from './media';\n\nexport default class VideoPlayer extends Component {\n  constructor($element, options) {\n    super($element);\n\n    this.$media = this.target.querySelector('video');\n    this.options = Object(options);\n    this.prefix = this.options.prefix || 'media';\n    this.lang = Object(this.options.lang);\n    // lang.currentTime\n    // lang.play\n    // lang.pause\n    // lang.minutes\n    // lang.seconds\n    // lang.leaveFullscreen\n    // lang.enterFullscreen\n\n    this.paused = null;\n    this.currentTime = null;\n    this.duration = null;\n    this.interval = null;\n\n    this.$document = this.target.ownerDocument;\n    this.$controls = this.target.querySelector('.media-player-controls');\n    // play/pause toggle\n    this.$play = this.$controls.querySelector('[data-player-control]');\n    this.$playSymbol = this.$play.querySelector('.media-play-symbol');\n    this.$pauseSymbol = this.$play.querySelector('.media-pause-symbol');\n    // time slider\n    this.$time = this.$controls.querySelector('[data-video-time-progress]');\n    this.$timeMeter = this.$time.querySelector('.media-meter.media-time-meter');\n    this.$timeRange = this.$time.querySelector('.media-range.media-time-range');\n\n    // current time text\n    this.$currentTimeText = this.$document.createTextNode('');\n    this.$currentTime = this.$controls.querySelector('[data-video-time-left]');\n    this.$currentTime.appendChild(this.$currentTimeText);\n\n    // duration time text\n    this.durationTime = this.$media.duration;\n    this.$durationTime = this.$controls.querySelector('[data-video-time-duration]');\n    this.$durationTime.innerText = getSecondsMinutesFormat(this.durationTime);\n    this.$durationTime.setAttribute(\n      'title',\n      `${VideoPlayer.timeToAural(\n        this.durationTime,\n        this.lang.minutes || 'minutes',\n        this.lang.seconds || 'seconds',\n      )}`,\n    );\n\n    // fullscreen button\n    this.$fullscreen = this.$controls.querySelector(\n      '.fullscreen-toggle',\n    );\n    this.$enterFullscreenSymbol = this.$fullscreen.querySelector(\n      '.media-enterFullscreen-symbol',\n    );\n    this.$leaveFullscreenSymbol = this.$fullscreen.querySelector(\n      '.media-leaveFullscreen-symbol',\n    );\n\n    // fullscreen api\n    this._fullscreenchange = 'onfullscreenchange' in this.target\n      ? 'fullscreenchange'\n      : 'onwebkitfullscreenchange' in this.target\n        ? 'webkitfullscreenchange'\n        : 'onMSFullscreenChange' in this.target\n          ? 'MSFullscreenChange'\n          : 'fullscreenchange';\n\n    this._requestFullscreen = this.target.requestFullscreen\n    || this.target.webkitRequestFullscreen\n    // || this.target.mozRequestFullScreen\n    || this.target.msRequestFullscreen;\n\n    this.onCanPlayStart = this.onCanPlayStart.bind(this);\n    this.onLoadStart = this.onLoadStart.bind(this);\n    this.onLoadedData = this.onLoadedData.bind(this);\n    this.onPlayChange = this.onPlayChange.bind(this);\n    this.onTimeChange = this.onTimeChange.bind(this);\n    this.onPlayClick = this.onPlayClick.bind(this);\n    this.onTimeKeydown = this.onTimeKeydown.bind(this);\n    this.onTimeClick = this.onTimeClick.bind(this);\n    this.onTimeKeydown = this.onTimeKeydown.bind(this);\n    this.onFullscreenClick = this.onFullscreenClick.bind(this);\n    this.onFullscreenChange = this.onFullscreenChange.bind(this);\n\n    // add event listeners\n    this.$media.addEventListener('canplaythrough', this.onCanPlayStart);\n    this.$media.addEventListener('loadstart', this.onLoadStart);\n    this.$media.addEventListener('loadeddata', this.onLoadedData);\n    this.$media.addEventListener('pause', this.onPlayChange);\n    this.$media.addEventListener('play', this.onPlayChange);\n    this.$media.addEventListener('timeupdate', this.onTimeChange);\n    this.$controls.addEventListener('click', this.onPlayClick, false);\n    // this.$play.addEventListener('click', this.onPlayClick, false);\n    this.$play.addEventListener('keydown', this.onTimeKeydown);\n    this.$time.addEventListener('click', this.onTimeClick, false);\n    this.$time.addEventListener('keydown', this.onTimeKeydown);\n    this.$fullscreen.addEventListener('click', this.onFullscreenClick, false);\n    // listen for fullscreen changes\n    document.addEventListener(\n      this._fullscreenchange,\n      this.onFullscreenChange,\n    );\n\n    // pointer events from time control\n    VideoPlayer.onDrag(this.$time, this.$timeRange, (percentage) => {\n      this.$media.currentTime = this.duration * Math.max(0, Math.min(1, percentage));\n\n      this.onTimeChange();\n    });\n\n    this.onLoadStart();\n  }\n\n  static _fullscreenElement() {\n    return document.fullscreenElement\n    || document.webkitFullscreenElement\n    // || document.mozFullScreenElement\n    || document.msFullscreenElement;\n  }\n\n  static _exitFullscreen() {\n    return document.exitFullscreen\n    || document.webkitCancelFullScreen\n    // || document.mozCancelFullScreen\n    || document.msExitFullscreen;\n  }\n\n  // when the play state changes\n  onPlayChange() {\n    if (this.paused !== this.$media.paused) {\n      this.paused = this.$media.paused;\n\n      this.$play.setAttribute(\n        'aria-label',\n        this.paused ? this.lang.play || 'play' : this.lang.pause || 'pause',\n      );\n      this.target.setAttribute(\n        'data-player-state',\n        this.paused ? 'paused' : 'playing',\n      );\n      this.$playSymbol.setAttribute('aria-hidden', !this.paused);\n      this.$pauseSymbol.setAttribute('aria-hidden', this.paused);\n\n      clearInterval(this.interval);\n\n      if (!this.paused) {\n        // listen for time changes every 30th of a second\n        this.interval = setInterval(this.onTimeChange, 34);\n      }\n\n      // dispatch new \"playchange\" event\n      this.$media.dispatchEvent(mediaEvents.playchange);\n    }\n  }\n\n  // when the time changes\n  onTimeChange() {\n    if (\n      this.currentTime !== this.$media.currentTime\n      || this.duration !== this.$media.duration\n    ) {\n      this.currentTime = this.$media.currentTime;\n      this.duration = this.$media.duration || 0;\n\n      const currentTimePercentage = this.currentTime / this.duration;\n      // const currentTimeCode = VideoPlayer.timeToTimecode(this.currentTime);\n      const currentTimeCode = getSecondsMinutesFormat(this.currentTime);\n      // const remainingTimeCode = VideoPlayer.timeToTimecode(\n      //   this.duration - Math.floor(this.currentTime),\n      // );\n\n      if (currentTimeCode !== this.$currentTimeText.nodeValue) {\n        this.$currentTimeText.nodeValue = currentTimeCode;\n\n        this.$currentTime.setAttribute(\n          'title',\n          `${VideoPlayer.timeToAural(\n            this.currentTime,\n            this.lang.minutes || 'minutes',\n            this.lang.seconds || 'seconds',\n          )}`,\n        );\n      }\n\n      // if (remainingTimeCode !== this.$remainingTimeText.nodeValue) {\n      //   this.$remainingTimeText.nodeValue = remainingTimeCode;\n\n      //   $(this.$remainingTime, {\n      //     title: `${VideoPlayer.timeToAural(\n      //       this.duration - this.currentTime,\n      //       this.lang.minutes || 'minutes',\n      //       this.lang.seconds || 'seconds',\n      //     )}`,\n      //   });\n      // }\n\n      this.$time.setAttribute('aria-valuenow', this.currentTime);\n      this.$time.setAttribute('aria-valuemin', 0);\n      this.$time.setAttribute('aria-valuemax', this.duration);\n\n      this.$timeMeter.style.width = `${currentTimePercentage * 100}%`;\n\n      // dispatch new \"timechange\" event\n      this.$media.dispatchEvent(mediaEvents.timechange);\n    }\n  }\n\n  // when media loads for the first time\n  onLoadStart() {\n    this.$media.removeEventListener('canplaythrough', this.onCanPlayStart);\n    this.$media.addEventListener('canplaythrough', this.onCanPlayStart);\n\n    this.onPlayChange();\n    this.onFullscreenChange();\n    this.onTimeChange();\n  }\n\n  // when the immediate current playback position is available\n  onLoadedData() {\n    this.onTimeChange();\n  }\n\n  // when the media can play\n  onCanPlayStart() {\n    this.$media.removeEventListener('canplaythrough', this.nCanPlayStart);\n\n    // dispatch new \"canplaystart\" event\n    this.$media.dispatchEvent(mediaEvents.canplaystart);\n\n\n    if (!this.paused || this.$media.autoplay) {\n      this.$media.play();\n    }\n  }\n\n  onFullscreenChange() {\n    const isFullscreen = this.target === VideoPlayer._fullscreenElement();\n\n    this.$fullscreen.setAttribute(\n      'aria-label',\n      isFullscreen\n        ? this.lang.leaveFullscreen || 'leave full screen'\n        : this.lang.enterFullscreen || 'enter full screen',\n    );\n    this.$enterFullscreenSymbol.setAttribute('aria-hidden', isFullscreen);\n    this.$leaveFullscreenSymbol.setAttribute('aria-hidden', !isFullscreen);\n  }\n\n  // when the play control is clicked\n  onPlayClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.$media[this.$media.paused ? 'play' : 'pause']();\n  }\n\n  // when the time control\n  onTimeClick(event) {\n    event.stopPropagation();\n\n    // handle click if clicked without pointer\n    if (!event.pointerType && !event.detail) {\n      this.onPlayClick(event);\n    }\n  }\n\n  // click from fullscreen control\n  onFullscreenClick(event) {\n    event.stopPropagation();\n\n    if (this._requestFullscreen) {\n      if (this.target === VideoPlayer._fullscreenElement()) {\n        // exit fullscreen\n        VideoPlayer._exitFullscreen().call(document);\n      } else {\n        // enter fullscreen\n        this._requestFullscreen.call(this.target);\n\n        // maintain focus in internet explorer\n        this.$fullscreen.focus();\n\n        // maintain focus in safari\n        setTimeout(() => {\n          this.$fullscreen.focus();\n        }, 200);\n      }\n    } else if (this.$media.webkitSupportsFullscreen) {\n      // iOS allows fullscreen of the video itself\n      if (this.$media.webkitDisplayingFullscreen) {\n        // exit ios fullscreen\n        this.$media.webkitExitFullscreen();\n      } else {\n        // enter ios fullscreen\n        this.$media.webkitEnterFullscreen();\n      }\n\n      this.onFullscreenChange();\n    }\n  }\n\n  // keydown from play control or current time control\n  onTimeKeydown(event) {\n    const { keyCode, shiftKey } = event;\n\n    // 37: LEFT, 38: UP, 39: RIGHT, 40: DOWN\n    if (keyCode >= 37 && keyCode <= 40) {\n      event.preventDefault();\n\n      const offset = keyCode === 37 || keyCode === 39 ? keyCode - 38 : keyCode - 39;\n\n      this.$media.currentTime = Math.max(\n        0,\n        Math.min(\n          this.$media.duration,\n          this.$media.currentTime + offset * (shiftKey ? 10 : 1),\n        ),\n      );\n\n      this.onTimeChange();\n    }\n  }\n\n  // Handle Drag Ranges\n  static onDrag(target, innerTarget, listener) {\n    // eslint-disable-line max-params\n    const hasPointerEvent = undefined !== target.onpointerup;\n    const hasTouchEvent = undefined !== target.ontouchstart;\n    const pointerDown = hasPointerEvent\n      ? 'pointerdown'\n      : hasTouchEvent\n        ? 'touchstart'\n        : 'mousedown';\n    const pointerMove = hasPointerEvent\n      ? 'pointermove'\n      : hasTouchEvent\n        ? 'touchmove'\n        : 'mousemove';\n    const pointerUp = hasPointerEvent\n      ? 'pointerup'\n      : hasTouchEvent\n        ? 'touchend'\n        : 'mouseup';\n\n    // ...\n    const axisProp = 'clientX';\n\n    let window;\n    let start;\n    let end;\n\n    function onpointermove(event) {\n      // prevent browser actions on this event\n      event.preventDefault();\n\n      // the pointer coordinate\n      const position = axisProp in event\n        ? event[axisProp]\n        : (event.touches && event.touches[0] && event.touches[0][axisProp])\n            || 0;\n\n      // the percentage of the pointer along the container\n      const percentage = (position - start) / (end - start);\n\n      // call the listener with percentage\n      listener(percentage);\n    }\n\n    function onpointerdown(event) {\n      // window\n      window = target.ownerDocument.defaultView;\n\n      // client boundaries\n      const rect = innerTarget.getBoundingClientRect();\n\n      // the container start and end coordinates\n      start = rect.left;\n      end = rect.right;\n\n      onpointermove(event);\n\n      window.addEventListener(pointerMove, onpointermove);\n      window.addEventListener(pointerUp, onpointerup);\n    }\n\n    function onpointerup() {\n      window.removeEventListener(pointerMove, onpointermove);\n      window.removeEventListener(pointerUp, onpointerup);\n    }\n\n    // on pointer down\n    target.addEventListener(pointerDown, onpointerdown);\n  }\n\n  // Time To Timecode\n  // DEPRECATED (media.util)\n  // static timeToTimecode(time) {\n  //   return `${`0${Math.floor(time / 60)}`.slice(-2)}:${`0${Math.floor(\n  //     time % 60,\n  //   )}`.slice(-2)}`;\n  // }\n\n  // Time To Aural\n  // DEPRECATED (media.util)\n  static timeToAural(time, langMinutes, langSeconds) {\n    return `${Math.floor(time / 60)} ${langMinutes}, ${Math.floor(\n      time % 60,\n    )} ${langSeconds}`;\n  }\n}\n","/* eslint-disable linebreak-style */\nimport Component from './component';\nimport { __dispatchEvent } from '../lib/utils';\n\nexport default class Selectable extends Component {\n\n  constructor($element) {\n    super($element);\n\n    // TODO: is DOM element before/after the editor itself.. move it to the editor?\n    this.$settings = document.querySelector(`[data-selectable-id-reference=\"${this.target.id}\"]`);\n\n    this.feedback = JSON.parse(this.$settings.getAttribute('data-module-zpetnavazba'));\n    this.settings = JSON.parse(this.$settings.getAttribute('data-module-settings'));\n\n    this.$items = this.target.querySelectorAll('.selectable-item');\n\n    this.$inputs = this.target.querySelectorAll('input');\n    this.$inputs.forEach(($input) => {\n      this._changeClassIfChecked($input);\n      this._addEventListeners($input);\n    });\n\n    this.cache = {\n      answersCorrect: 0,\n      zpetnaVazba: false,\n      colors: [],\n      checkedInput: 0,\n    };\n\n    // get colors for all feedback variants\n    if (this.feedback) {\n      this.cache.zpetnaVazba = true;\n      this.cache.colors = this.feedback.map((feedback) => feedback.barva);\n    }\n\n  }\n\n  _addEventListeners($input) {\n    $input.addEventListener('change', () => {\n      this.$inputs.forEach(($input_) => {\n        this._changeClassIfChecked($input_);\n      });\n      this._checkAndResolveFeedback();\n    }, false);\n  }\n\n  /* eslint class-methods-use-this: [\"error\", { \"exceptMethods\": [\"_changeClassIfChecked\"] }] */\n  // TODO: might be possible with CSS only with `:checked` selector & sibling combinator`+` or `~`\n  _changeClassIfChecked($input) {\n    $input.parentNode.classList.toggle('is-checked', $input.checked === true);\n  }\n\n  _checkAndResolveFeedback() {\n    this.cache.answersCorrect = 0;\n    if (this.settings.viceOdpovedi) {\n      this.$items.forEach(($item, index) => {\n        if (this.$inputs[index].checked) {\n          this.cache.checkedInput += 1;\n        }\n        if (this.$inputs[index].checked && $item.hasAttribute('data-select-spravnaodpoved')) {\n          this.cache.answersCorrect += 1;\n        }\n        if (!this.$inputs[index].checked && !$item.hasAttribute('data-select-spravnaodpoved')) {\n          this.cache.answersCorrect += 1;\n        }\n      });\n    } else {\n      this.$items.forEach(($item, index) => {\n        if (this.$inputs[index].checked) {\n          this.cache.checkedInput += 1;\n        }\n        if (this.$inputs[index].checked && $item.hasAttribute('data-select-spravnaodpoved')) {\n          this.cache.answersCorrect += 1;\n        }\n      });\n    }\n\n    // Display feedback button (if no checkbox is select, the button is hidden)\n    if ((this.cache.checkedInput === 0 && !this.settings.vybrano) || (this.cache.checkedInput === this.$inputs.length && this.settings.vybrano) || this.settings.disableFeedback) {\n      this.hideFeedback();\n    } else {\n\n      if (this.cache.zpetnaVazba) {\n        const feedbackActual = this.feedback.find((feedback) => feedback.podminka.includes(this.cache.answersCorrect));\n        this.$buttonFeedback.classList.remove(...this.cache.colors);\n        this.$buttonFeedback.classList.add(feedbackActual.barva);\n        this.$buttonFeedbackText.innerText = feedbackActual.text;\n      }\n\n      this.showFeedback();\n    }\n\n    this.cache.checkedInput = 0;\n    this._dispatchEvent();\n  }\n\n  _dispatchEvent() {\n    const items = Array.from(this.$inputs).map(($input) => ({\n      checked: $input.checked,\n      id: $input.id,\n    }));\n\n    __dispatchEvent(this.target, 'selection.change', {}, {\n      id: this.target.id,\n      // task: 'change', // TODO: 'select', 'unselect' ?\n      items,\n    });\n  }\n}\n","/* eslint-disable no-case-declarations */\nimport Component from './component';\n\nexport default class NewTable extends Component {\n  constructor($element) {\n    super($element);\n    // duplicate source of different editor elements\n    this.dataFrom = this.target.parentNode.getAttribute('data-from');\n    this.dataSources = this.dataFrom ? this.dataFrom.split(' ') : [];\n\n    this.init();\n\n  }\n\n  init() {\n    const autofill = this.target.parentNode.getAttribute('data-autofill');\n\n    switch (autofill) {\n      case 'columns':\n        this._columnManager();\n        break;\n      case 'rows':\n        this._rowManager();\n        break;\n      case 'cells':\n        const allCells = this.target.querySelectorAll('td');\n\n        allCells.forEach(($cell) => {\n          const columnId = $cell.getAttribute('data-column-id');\n          const rowId = $cell.getAttribute('data-row-id');\n          // add listener\n          this._cellManager($cell, columnId, rowId);\n        });\n        break;\n      default:\n        console.log('NewTableERROR: Undefinated autofill key word!', autofill);\n    }\n  }\n\n  _rowManager() {\n    document.addEventListener('editor.change', (e) => {\n      const data = e.detail.text;\n\n      if (this.dataSources.includes(data.id)) {\n        let $tableRow;\n\n        // get columns header\n        const $header = this.target.previousSibling;\n        const $headerCells = $header.firstChild.childNodes;\n\n        switch (data.task) {\n          case 'add':\n            $tableRow = document.createElement('tr');\n            $tableRow.setAttribute('class', 'table-new__row');\n\n            $headerCells.forEach(($item) => {\n              const $rowCell = document.createElement('td');\n              $rowCell.setAttribute('class', 'table-new__cell');\n\n              const itemType = JSON.parse($item.getAttribute('data-type'));\n\n              // add data to cell\n              NewTable.fillCell(itemType, data, $rowCell);\n\n              $tableRow.appendChild($rowCell);\n            });\n\n            this.target.appendChild($tableRow);\n            break;\n          case 'remove':\n            const tableRows = this.target.childNodes;\n            tableRows.forEach(($row) => {\n              $row.childNodes.forEach(($cell, index) => {\n                const itemType = JSON.parse($headerCells[index].getAttribute('data-type'));\n\n                if (NewTable.isRightToDeleteHelper($cell, data.value, itemType)) {\n                  $tableRow = $row;\n                }\n              });\n            });\n\n            $tableRow.remove();\n            break;\n          default:\n            console.log('NewTableERROR: Undefinated task for new table! (rowManager)');\n        }\n      }\n    });\n  }\n\n  _columnManager() {\n    document.addEventListener('editor.change', (e) => {\n      const data = e.detail.text;\n\n      if (this.dataSources.includes(data.id)) {\n        const $rows = this.target.childNodes;\n\n        switch (data.task) {\n          case 'add':\n            $rows.forEach(($row) => {\n              const $cell = document.createElement('td');\n              $cell.setAttribute('class', 'table-new__cell');\n\n              const $firstCell = $row.firstChild;\n              const itemType = JSON.parse($firstCell.getAttribute('data-type'));\n\n              // add data to cell\n              NewTable.fillCell(itemType, data, $cell);\n\n              $row.appendChild($cell);\n            });\n            break;\n          case 'remove':\n            let columnIndex;\n            $rows.forEach(($row) => {\n              const $firstCell = $row.firstChild;\n              const itemType = JSON.parse($firstCell.getAttribute('data-type'));\n\n              $row.childNodes.forEach(($cell, index) => {\n                if (NewTable.isRightToDeleteHelper($cell, data.value, itemType)) {\n                  columnIndex = index;\n                }\n              });\n            });\n\n            this.target.childNodes.forEach(($row) => {\n              $row.childNodes[columnIndex].remove();\n            });\n            break;\n          default:\n            console.log('NewTableERROR: Undefinated task for new table! (columnManager)');\n        }\n      }\n    });\n  }\n\n  _cellManager($cell, columnId, rowId) {\n    document.addEventListener('editor.change', (e) => {\n      const data = e.detail.text;\n\n      if (this.dataSources.includes(data.id) && (data.id === columnId && data.tagName === rowId) || (data.id === rowId && data.tagName === columnId)) {\n        const itemType = JSON.parse(this._findCellType($cell));\n\n        switch (data.task) {\n          case 'add':\n            const $tag = document.createElement('div');\n            NewTable.fillCell(itemType, data, $cell);\n\n            $cell.appendChild($tag);\n            break;\n          case 'remove':\n            const $tags = $cell.querySelectorAll('div');\n            $tags.forEach(($elm) => {\n              if (NewTable.isRightToDeleteHelper($elm, data.value, itemType)) {\n                $elm.remove();\n              }\n            });\n            break;\n          default:\n            console.log('NewTableERROR: Undefinated task for new table! (cellManager)');\n        }\n      }\n    });\n  }\n\n  static fillCell(itemType, data, $node) {\n    let $innerItem;\n\n    switch (itemType.name) {\n      case 'dup-text':\n        $innerItem = document.createElement('div');\n        if (itemType.type === 'text') {\n          $innerItem.innerHTML = data.value.textContent;\n        } else if (itemType.type === 'tag') {\n          $innerItem.appendChild(data.value);\n        }\n        break;\n      case 'select':\n        $innerItem = document.createElement(itemType.name);\n        itemType.options.forEach((value) => {\n          const $option = document.createElement('option');\n          $option.innerHTML = value;\n          $innerItem.appendChild($option);\n        });\n        break;\n      case 'input':\n        $innerItem = document.createElement(itemType.name);\n        $innerItem.setAttribute('class', 'table-new__cell--input');\n        Object.keys(itemType.attributes).forEach((key) => {\n          $innerItem.setAttribute(key, itemType.attributes[key]);\n        });\n        break;\n      default:\n        $innerItem = document.createElement('div');\n        /*\n          if item Type name is value of data object from delivered cviceni feature\n          then use it and it's value set in table\n          else set empry value and show error\n       */\n        if (data.tagData[itemType.name]) {\n          $innerItem.innerHTML = data.tagData[itemType.name];\n        } else {\n          $innerItem.innerHTML = ' ';\n          console.log('FillCellERROR: Undefinated object name.', itemType);\n        }\n    }\n    $node.appendChild($innerItem);\n  }\n\n  // prepare for more types of duplicate types\n  static isRightToDeleteHelper(elm, deliveredValue, itemType) {\n    let result;\n    if (itemType.name === 'dup-text') {\n      result = elm.textContent === deliveredValue.textContent;\n    }\n    return result;\n  }\n\n  _findCellType($cell) {\n    const rowType = $cell.parentNode.firstChild.getAttribute('data-type');\n    if (rowType) return rowType;\n\n    // if rows header isn´t definated\n    const columnId = $cell.getAttribute('data-column-id');\n    const $columnHeader = this.target.parentNode.querySelector(`th[data-column-id=${columnId}]`);\n    if ($columnHeader) return $columnHeader.getAttribute('data-type');\n\n    return 'empty';\n  }\n}\n","import Component from './component';\nimport { __dispatchEvent } from '../lib/utils';\n\n\nexport default class Draggable extends Component {\n  constructor($element) {\n    super($element);\n\n    this.idPrefix = 'drag-item';\n    // duplicate source of different editor elements\n    this.dataFrom = this.target.parentNode.getAttribute('data-from');\n    this.dataSources = this.dataFrom ? this.dataFrom.split(' ') : [];\n\n    this.position = {\n      x: 0,\n      y: 0,\n      dx: 0,\n      dy: 0,\n    };\n    this.cache = {\n      // to know if draggable item was dropped or not and how many times\n      items: {},\n    };\n\n    this.$targetPrevious = null;\n    this.$targetCurrent = null;\n    this.$draggedItem = null;\n\n    this.objWidth = null;\n    this.objHeight = null;\n\n    this.init();\n  }\n\n  init() {\n    const $dragItems = this.target.querySelectorAll('.draggable__item');\n    $dragItems.forEach(($dragItem) => {\n      // get id\n      const id = $dragItem.getAttribute('data-id');\n      // inicial drop numbers\n      this.cache.items[id] = 0;\n      // use d3 container for $dragItem\n      this.dragAndDropEvents(d3.select($dragItem), id);\n    });\n\n    // initial handler for dropped item to svg\n    this.handleDeleteItemFromSvgDrop();\n  }\n\n  // dropToken is used for handle usecase when user drag from drop-place to drop-place\n  dragAndDropEvents($dragItem, itemId, dropToken = true) {\n    // drag & drop\n    $dragItem.call(d3.drag()\n      .container(this.$slide)\n      .on('start', () => { this.onStart($dragItem); })\n      .on('drag', () => { this.onDrag($dragItem); })\n      .on('end', () => { this.onDrop($dragItem, itemId, dropToken); }));\n  }\n\n  onStart($dragItem) {\n\n    this.$slide.classList.add('is-dragging');\n\n    this.$targetPrevious = d3.event.sourceEvent.target;\n\n    // initial position\n    this.objWidth = $dragItem.node().offsetWidth;\n    this.objHeight = $dragItem.node().offsetHeight;\n    this.position.x = $dragItem.node().offsetLeft;\n    this.position.y = $dragItem.node().offsetTop;\n    this.position.dx = 0;\n    this.position.dy = 0;\n\n    // get dragged node\n    // clone element if from DRAG place\n    if ($dragItem.node().parentNode.hasAttribute('data-drag-place')) {\n      this.$draggedItem = $dragItem.clone(true);\n    }\n    // do not clone if from DROP place\n    else {\n      this.$draggedItem = $dragItem;\n    }\n\n    this.$draggedItem\n      .classed('is-dragged', true)\n      .classed('was-dropped', false)\n      .attr('style', `top:${this.position.y}px; left:${this.position.x}px;`);\n  }\n\n  onDrag($dragItem) {\n    // console.log($dragItem.node());\n    // update position\n    this.position.dx += d3.event.dx;\n    this.position.dy += d3.event.dy;\n\n    // move with dragging element\n    this.$draggedItem.style('transform', `translate3d(${this.position.dx}px, ${this.position.dy}px, 0) rotate(5deg)`);\n\n    this.$targetCurrent = d3.event.sourceEvent.target;\n    // check for make placeholder in drop place\n    if (this.$targetPrevious !== this.$targetCurrent) {\n\n      // remove placeholder in old target\n      const $placeholderOld = this.$targetPrevious.querySelector('.draggable__item--placeholder');\n      if ($placeholderOld) $placeholderOld.remove();\n\n      // create placeholder in new target\n      if (this.$targetCurrent.hasAttribute('data-drop-place')) {\n        // remove this class is important for creating placeholder from dragging item from drop place\n        const $placeholderNew = $dragItem.clone(true)\n          .classed('is-dragged', false)\n          .classed('draggable__item--placeholder', true)\n          .attr('style', 'outline: 0px;')\n          .node();\n\n        this.$targetCurrent.appendChild($placeholderNew);\n      }\n\n      // update target\n      this.$targetPrevious = this.$targetCurrent;\n    }\n  }\n\n  onDrop($dragItem, itemId, dropToken) {\n    this.$targetCurrent = d3.event.sourceEvent.target;\n\n    // when dropping within droppable normal DOM node\n    if (this.$targetCurrent.hasAttribute('data-drop-place')) {\n\n      // get placeholder\n      const $dropItem = this.$targetCurrent.querySelector('.draggable__item--placeholder');\n\n      // remove unneeded classes for dropItem\n      $dropItem.classList.remove('draggable__item--placeholder', 'was-dropped');\n      $dropItem.classList.add('dropped__item');\n\n      // update drops num\n      if (dropToken) {\n        $dragItem.classed('was-dropped', true);\n        this.cache.items[itemId] += 1;\n      }\n\n      // add events to clone for posible dragging back\n      // dropItem has to by in d3 container\n      this.dragAndDropEvents(d3.select($dropItem), itemId, false);\n\n      // remove draggedItem from DOM\n      this.$draggedItem.remove();\n    }\n    // when dropping within SVG\n    else {\n      // get svg\n      const $svg = this.$targetCurrent.closest('svg');\n      // check drop attribute\n      const svgCanDrop = $svg ? $svg.hasAttribute('data-svg-drop') : false;\n\n      // when dropping within droppable svg node\n      if (svgCanDrop) {\n        const position = d3.mouse($svg);\n        const $node = this.$draggedItem.classed('is-dragged', false)\n          .attr('style', 'outline: 0px;')\n          .node();\n\n        // update drops num\n        $dragItem.classed('was-dropped', true);\n        this.cache.items[itemId] += 1;\n\n        // add to svg\n        // dispatch event that svg has changed\n        __dispatchEvent(document, 'svg.drop', {}, {\n          svg: {\n            id: $svg.id,\n            $node,\n            type: $node.getAttribute('data-draggable-item'),\n            position,\n            size: {\n              width: this.objWidth,\n              height: this.objHeight,\n            },\n          },\n        });\n\n        this.$draggedItem.remove();\n\n      }\n      // when dropping outside of droppable area\n      else {\n\n        // if it's last drop then remove drop class\n        if (this.cache.items[itemId] === 1) {\n          const $sameItemFromDragPlace = this.target.querySelector(`div[data-id=${itemId}]`);\n          $sameItemFromDragPlace.classList.remove('was-dropped');\n        }\n\n        // update drop number of concrete item\n        if (!dropToken) {\n          this.cache.items[itemId] -= 1;\n        }\n\n        // remove draggedItem from DOM\n        this.$draggedItem.remove();\n      }\n\n    }\n\n    this.$slide.classList.remove('is-dragging');\n  }\n\n  handleDeleteItemFromSvgDrop() {\n\n    document.addEventListener('svg.drop.delete', (event) => {\n      const { id, $object } = event.detail.item;\n\n      // console.log('smazano', id, $object);\n      const $sameItemFromDragPlace = this.target.querySelector(`div[data-id=${id}]`);\n\n      if ($sameItemFromDragPlace) {\n        // if it's last drop then remove drop class\n        if (this.cache.items[id] === 1) {\n          $sameItemFromDragPlace.classList.remove('was-dropped');\n        }\n\n        // update drop number of concrete item\n        this.cache.items[id] -= 1;\n      }\n    });\n  }\n}\n","/* eslint-disable no-unused-vars */\nimport MagnifyingGlass from './magnifying-glass';\nimport Sortable from './sortable';\nimport SVG from './svg';\nimport SVGRadialMenu from './svg-lib/svg-radial-menu';\nimport Editor from './editor/editor';\nimport AnalyticalTable from './analytical-table';\nimport Keywords from './keywords';\nimport EditorTagsPlaceholder from './editor-tags-placeholder';\nimport TestQuiz from './test-quiz';\nimport GenericTable from './generic-table';\nimport FullscreenToggle from './fullscreen';\nimport UserText from './user-text';\nimport AudioPlayerNormal from './media/audio-player-normal';\nimport AudioPlayerSimple from './media/audio-player-simple';\nimport FakeMap from './fake-map';\nimport { stopPlayingVideoPlayers } from './media/media';\nimport VideoPlayer from './media/video';\nimport Selectable from './selectable';\nimport NewTable from './new-table';\nimport Draggable from './draggable';\n\n// import actionTypes from '../store/store-constants';\n// import storeGlobal from '../store/store-global';\n\nconst windowLoadComponents = () => {\n  console.log('windowLoad:components');\n\n  // Video player - normal\n  const $videoPlayers = document.querySelectorAll('[data-player-video]');\n  if ($videoPlayers.length > 0) {\n    $videoPlayers.forEach(($videoPlayer) => {\n      // console.log('$videoPlayer', $videoPlayer);\n      const videoPlayer = new VideoPlayer($videoPlayer);\n    });\n\n    document.addEventListener('slide.change', () => {\n      stopPlayingVideoPlayers($videoPlayers);\n    });\n  }\n\n  // Audio player - normal\n  const $audioPlayerNormals = document.querySelectorAll('[data-player-audio=\"normal\"]');\n  if ($audioPlayerNormals.length > 0) {\n    $audioPlayerNormals.forEach(($audioPlayerNormal) => {\n      const audioPlayerNormal = new AudioPlayerNormal($audioPlayerNormal);\n    });\n\n    // TODO > audio-player-normal.js#61\n    // document.addEventListener('slide.change', () => {\n    //   stopPlayingVideoPlayers($audioPlayerNormals);\n    // });\n  }\n\n  // Audio player — simple\n  const $audioPlayerSimples = document.querySelectorAll('[data-player-audio=\"simple\"]');\n  if ($audioPlayerSimples.length > 0) {\n    $audioPlayerSimples.forEach(($audioPlayerSimple) => {\n      const audioPlayerSimple = new AudioPlayerSimple($audioPlayerSimple);\n    });\n\n    document.addEventListener('slide.change', () => {\n      stopPlayingVideoPlayers($audioPlayerSimples);\n    });\n  }\n\n  // Fullscreen\n  const $fullscreenToggles = document.querySelectorAll('[data-fullscreen=\"toggle\"]');\n  if ($fullscreenToggles.length > 0) {\n    $fullscreenToggles.forEach(($fullscreenToggle) => {\n      const fullscreenToggle = new FullscreenToggle($fullscreenToggle);\n    });\n  }\n\n  // Magnifying glass\n  const $magnifyingGlass = document.querySelectorAll('[data-lupa-target]');\n  if ($magnifyingGlass.length > 0) {\n    for (let i = 0; i < $magnifyingGlass.length; i += 1) {\n      const magnifyingGlass = new MagnifyingGlass($magnifyingGlass[i]);\n    }\n  }\n\n  // Fake Map\n  const $fakeMaps = document.querySelectorAll('[data-fake-map=\"target\"]');\n  if ($fakeMaps.length > 0) {\n    for (let i = 0; i < $fakeMaps.length; i += 1) {\n      const fakeMap = new FakeMap($fakeMaps[i]);\n    }\n  }\n\n  //\n  // load these below in working mode only\n\n  // User texts\n  // - preview/working mode logic inside the component\n  //  - show\n  const $userTexts = document.querySelectorAll('[data-textarea-target=\"\"]');\n  if ($userTexts.length > 0) {\n    $userTexts.forEach(($userText) => {\n      const userText = new UserText($userText);\n    });\n  }\n\n  // SVG + Radial menu\n  // - preview/working mode logic in side the component\n  //  - to set max-width\n  const $svgs = document.querySelectorAll('[data-svg-target]');\n  if ($svgs.length > 0) {\n\n    if (HISTORYLAB.import.done !== true) {\n      // radial menu\n      const $radialMenu = document.querySelector('[data-radial-menu]');\n      if ($radialMenu) {\n        const radialMenu = new SVGRadialMenu($radialMenu, $svgs);\n      }\n    }\n\n    // svgs\n    // setSize is needed\n    $svgs.forEach(($svg) => {\n      const svg = new SVG($svg);\n    });\n  }\n\n  if (HISTORYLAB.import.done !== true) {\n\n    // Editor\n    const $editors = document.querySelectorAll('[data-editor]');\n    if ($editors.length > 0) {\n      $editors.forEach(($editor) => {\n        const editor = new Editor($editor);\n      });\n    }\n\n    // Test Quizes\n    const $testQuizs = document.querySelectorAll('[data-target-test-quiz]');\n    if ($testQuizs.length > 0) {\n      $testQuizs.forEach(($testQuiz) => {\n        const settings = document.querySelector(\n          `[data-test-quiz-id-reference=\"${$testQuiz.getAttribute(\n            'data-test-quiz-id',\n          )}\"]`,\n        );\n\n        const testQuiz = new TestQuiz(\n          $testQuiz.getAttribute('data-test-quiz-id'),\n          $testQuiz,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        testQuiz.init();\n      });\n    }\n\n    // Analytical tables\n    const $analyticalTables = document.querySelectorAll(\n      '[data-target-analytical-table]',\n    );\n\n    if ($analyticalTables.length > 0) {\n      $analyticalTables.forEach(($analyticalTable) => {\n        const settings = document.querySelector(\n          `[data-analytical-table-id-reference=\"${$analyticalTable.getAttribute(\n            'data-analytical-table-id',\n          )}\"]`,\n        );\n        const analyticalTable = new AnalyticalTable(\n          $analyticalTable.getAttribute('data-analytical-table-id'),\n          $analyticalTable,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        analyticalTable.init();\n      });\n    }\n\n    // Generic tables\n    const $genericTables = document.querySelectorAll(\n      '[data-target-generic-table]',\n    );\n    if ($genericTables.length > 0) {\n      $genericTables.forEach(($genericTable) => {\n        const settings = document.querySelector(\n          `[data-generic-table-id-reference=\"${$genericTable.id}\"]`,\n        );\n        const genericTable = new GenericTable(\n          $genericTable,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        genericTable.init();\n      });\n    }\n\n    // New table\n    const $newTables = document.querySelectorAll('[data-new-table]');\n    if ($newTables.length > 0) {\n      $newTables.forEach(($newTable) => {\n        const newTable = new NewTable($newTable);\n      });\n    }\n\n    // Pretahovani\n    const $draggables = document.querySelectorAll('[data-draggable]');\n    if ($draggables.length > 0) {\n      $draggables.forEach(($draggable) => {\n        const draggable = new Draggable($draggable);\n      });\n    }\n\n    // Sortable\n    const $sortables = document.querySelectorAll('[data-sortable-target]');\n    if ($sortables.length > 0) {\n      $sortables.forEach(($sortable) => {\n        const sortable = new Sortable($sortable);\n      });\n    }\n\n    // Selectable\n    const $selectables = document.querySelectorAll('[data-selectable-target]');\n    if ($selectables.length > 0) {\n      $selectables.forEach(($selectable) => {\n        const selectable = new Selectable($selectable);\n      });\n    }\n\n    // Keywords selection\n    const $keywords = document.querySelectorAll('[data-keywords]');\n    if ($keywords.length > 0) {\n      $keywords.forEach(($keyword) => {\n        const settings = $keyword.hasAttribute('data-module-settings')\n          ? $keyword.getAttribute('data-module-settings')\n          : {};\n        const keywords = new Keywords($keyword, JSON.parse(settings));\n        keywords.init();\n      });\n    }\n\n    // Editor tags placeholders\n    const $editorTagsPlaceholders = document.querySelectorAll(\n      '.editor-tags-placeholder',\n    );\n    if ($editorTagsPlaceholders.length > 0) {\n      $editorTagsPlaceholders.forEach((item) => {\n        const editorTagsPlaceholder = new EditorTagsPlaceholder(item);\n        editorTagsPlaceholder.init();\n      });\n    }\n  }\n};\n\nexport default windowLoadComponents;\n","/* eslint-disable consistent-return */\nimport domLoadComponents from './dom-load';\nimport windowLoadComponents from './window-load';\nimport unsupportedBrowsers from '../lib/unsupported-browsers';\n\n(() => {\n  if (unsupportedBrowsers()) return false;\n\n  // The DOMContentLoaded event fires when parsing of the current page is complete. DOMContentLoaded is a great event to use to hookup UI functionality to complex web pages.\n  document.addEventListener('DOMContentLoaded', domLoadComponents, false);\n\n  // The load event fires when all files have finished loading from all resources, including ads and images.\n  window.addEventListener('load', windowLoadComponents, false);\n})();\n","const unsupportedBrowsers = () => {\n\n  // feature detection for unsupported browsers\n  const isUnsupported = !Array.from\n    || !Element.prototype.matches\n    || !Element.prototype.closest\n    || typeof window.CustomEvent !== 'function'\n    || typeof Object.assign !== 'function';\n\n  if (isUnsupported) {\n    console.warn('Not supported browser.');\n\n    const $unsupported = document.querySelector('#unsupported');\n    $unsupported.querySelector('#unsupported-browser').innerHTML = ` ${platform.name} ${platform.version} `;\n    $unsupported.classList.remove('is-hidden');\n\n    return true;\n  }\n\n  return false;\n};\n\nexport default unsupportedBrowsers;\n"],"names":["domLoadComponents","console","log","Component","$element","target","$slide","this","closest","lang","document","documentElement","getAttribute","HISTORYLAB","done","$buttonFeedback","querySelector","$buttonFeedbackText","showFeedback","bind","classList","contains","remove","add","MagnifyingGlass","$canvas","ctx","_this","getContext","_onStart","_onMove","_onEnd","_update","_onResize","zoomGlassSize","targetBCR","zoomed","targetZoomed","x","y","trackingTouch","_addEventListeners","_initCanvas","window","requestAnimationFrame","width","height","dPR","devicePixelRation","style","scale","getBoundingClientRect","event","preventDefault","pageX","touches","pageY","TAU","Math","PI","radius","ratioX","max","min","left","ratioY","top","scaledTargetWidth","scaledTargetHeight","platform","os","family","indexOf","name","shadowColor","shadowBlur","shadowOffsetY","clearRect","fillStyle","beginPath","arc","closePath","fill","save","clip","drawImage","restore","transform","addEventListener","__createNewCustomEvent","options","data","properties","Object","assign","bubbles","CustomEvent","detail","__dispatchEvent","type","payload","dispatchEvent","__isObject","item","_typeof","Array","isArray","__insertBefore","newNode","referenceNode","parentNode","insertBefore","__remove","el","removeChild","__getHTML","node","tagName","outerHTML","wrapper","createElement","appendChild","cloneNode","innerHTML","__localPosition","container","position","d3","offsetX","offsetY","mouse","format","__positionTranslated","curTransform","WebKitCSSMatrix","getComputedStyle","webkitTransform","body","pageYOffset","scrollTop","pageXOffset","scrollLeft","offsetLeft","m41","offsetTop","m42","__position","elAttibutes","__toggleClass","element","cls","__hasClass","__removeClass","__addClass","className","elements","classes","_elements","_classes","querySelectorAll","split","i","length","j","replace","RegExp","mediaEvents","playchange","timechange","canplaystart","stopPlayingVideoPlayers","$players","forEach","$player","$media","paused","pause","setAttribute","getSecondsMinutesFormat","seconds","duration","floor","minutes","toString","slice","AudioPlayer","$item","$audio","$playButton","$timeLeft","play","stopPropagation","innerText","currentTime","SVGDragNDrop","select","raise","classed","diff","attr","toFixed","SVGDraw","$svg","callback","sourceEvent","nodeName","line","curve","curveLinear","d","subject","x0","y0","id","active","append","datum","on","x1","y1","dx","dy","push","$thisPath","svg","task","contextMenu","pathEventsManager","d3svg","localPosition","circleEventsManager","elementPosition","selection","selectAll","nodes","idParts","$object","firstChild","call","drag","start","dragged","oldXCoordinate","oldYCoordinate","taskType","end","SVG","removeCloneConnectionManager","SVGText","maxLength","minLength","svgID","svgGroup","$radialMenu","hash","orientation","foreignObject","textarea","focus","textEventsManager","$node","isCreated","firstWrite","oldText","value","parentElement","childNodes","updateTextareaHeight","$target","wrongBool","isWrong","removeItem","scrollHeight","isBubble","_setSize","init","_initWhenDone","toDuplicate","svgSpecificActions","_initPath","_initCircle","_initComicBubbles","_getEvents","_getDropEvent","viewbox","rect","maxWidth","maxWidthAbsolute","matchMedia","matches","innerWidth","setMaxWidth","_this2","p","renderPath","createCircle","_this3","$comicBubbles","$comicBubble","comicBubblesEventsManager","_this4","oldID","join","svgDuplicateSources","e","includes","$templateNode","localNodeID","_this5","_generateNewID","$localNode","_clonePath","color","_cloneComicBubbles","_cloneTextField","_cloneCircle","idSalt","_this6","size","multiply","$d3foreignObject","$dropItem","firstElementChild","$foreignObject","selected","isRadial","$parent","allActiveSvgs","deactivate","pop","Sortable","$settings","feedback","JSON","parse","$items","$droppables","$placeholder","direction","before","after","evaluation","undefined","clientX","clientY","clone","posRel","siblings","prev","next","cache","answersCorrect","colors","map","barva","hasAttribute","offsetWidth","offsetHeight","_addPlaceholder","_onOver","right","_onDrop","bottom","_removePlaceholder","_dispatchEvent","_checkAndResolveFeedback","_getReference","_addEventListenerToItem","addEventListeners","minHeight","src","img","nextElementSibling","previousElementSibling","index","correctAnswerAttr","parseInt","feedbackActual","find","podminka","text","splneno","items","from","SVGRadialMenu","$svgs","$radialMenuItems","$colorItems","$textItems","$createTextItem","$removeItem","$tooltip","initialSetUp","menuRadius","getPropertyValue","itemRadius","setUpRadialMenuItems","addEventListenersToRadialMenu","activate","deselectItem","filterMenuButtons","showRadialMenu","addEventListenersToRadialMenuItem","_itemsLength","_menuRadius","_itemRadius","_menuOffset","_centerOffset","angle","sin","cos","onMouseLeave","hideRadialMenu","action","createText","changeColor","currentTarget","display","$activeSVG","globalPosition","__globalPosition","$activeRadialMenuItem","positionRadialMenuItems","setTimeout","mouseLeaveDelay","clearTimeout","clickedItem","$colorItem","$textItem","selectItem","Observer","_events","events","fn","_split","filter","current_fn","args","actionTypes","editor","ADD_TAG","DELETE_TAG","UPDATE_TAG","CHANGE","keywords","testQuiz","ADD_ANSWER","REMOVE_ANSWER","UPDATE_ANSWER","textOptions","ADD","DELETE","UPDATE","store","_data","tags","tagId","tagExists","tagContainer","_checkTagExists","Error","userSelectedNodeItems","trigger","splice","editorId","opts","key","selectedTags","objectExists","_checkExists","selectedObjs","Editor","$editor","settings","__mergeDeep","source","output","keys","defaults","models","passive","interactive","withMenu","totalTagId","hasMenu","lastSelectionSettings","isCollapsed","savedSelectionRange","selectionAttributes","dummyRangeElement","selectionMouseDown","selectionDirection","hasEditableContentChanged","lastPressedKey","hasToolbar","toolbar","originalContent","currentContent","_handlers","wrapLastDeletesTimeoutClass","wrapLastDeletesTimeoutFunction","wrapLastAdditionsTimeoutClass","wrapLastAdditionsTimeoutFunction","isWrappingLastText","isWriting","$groupDeleted","_hasMenu","$menu","menuClass","$menuActions","$menuClose","error","_hasToolbar","canvasClass","funkce","html","_generateNewTagGroupClass","$btnReset","registerEditableHandlers","initPreHighlightedTextOptions","handlerFocus","keycode","getSelection","keyCode","which","keyName","rangeCount","range","getRangeAt","cloneRange","setStart","startContainer","startOffset","collapse","setEnd","endContainer","endOffset","addedFragmentString","cloneContents","textContent","trim","dummyElementInner","surroundContents","removeAllRanges","addRange","dummyElement","contentEditable","newGeneratedId","_generateNewTagId","$elements","$btnClose","closeBtnClass","$nodeElement","_removeNodeKeepTextContent","getElementById","wrapLastDeletesTimeout","textToAddElement","insertNode","setStartAfter","groupDeletedId","$groupInnerDeleted","$groupInnerAdded","$groupAdded","registerMenuHandler","confirm","len","handlerMenuActions","handlerMenuClose","$textOptionsElements","$textOption","selectedClass","idForSend","storeGlobal","tag","tagData","clickClose","_setmenuDimensions","leftDimensions","topDimensions","menuDimensions","translated","clonedElement","visibility","nextSibling","elDimensions","elPosition","__getRealDimensions","parentTranslatedPosition","parentDimensions","isOverflowAt","menuMargin","toggleMenu","$el","command","commandName","setSelection","anchorOffset","focusOffset","_setSelectionPosition","selectionPosition","selectionDimension","$domEl","newTagId","extractContents","addTag","classesArray","tagColor","createTextNode","$parentEl","$elClose","toggleClass","clickHandler","$closeBtn","removeEventListener","commentRef","deleteTag","nodePosition","commentMargin","commentTemplate","div","commentDiv","nodeRef","commentNewTextarea","commentDivButtonSubmit","commentCommentsContainer","calculatedCommentPosition","_calculateCommentPosition","commentItem","_createCommentForNode","_highlightContents","closeBtn","_createCloseBtnForElement","comments","_addCommentHandlerForElement","commentsClass","_storeHighlightedContents","showCommentsOnInit","click","resetBtnClass","nodeSelectedClass","enable","animatedClass","deselectedClass","menu","AnalyticalTable","isAdvanced","rowIndex","tableResult","tableResultBody","tableSelectedItems","tableSelectedItemsBody","activeDragged","_getRowHTML","_getAdvancedRowHTML","_registerStoreHandlers","_registerHandlers","addedTagContainer","casti","sloupce","insertAdjacentHTML","letSecondCaseRunIfSame","_handlerDraggable","prototype","_handlerDrop","dataTransfer","setData","dropEffect","opacity","localName","background","nodeHTML","tableRowTemplate","keywordsId","newItems","newItemsHTML","itemsHTML","Keywords","$controls","$itemsContainer","itemsContainerClassName","inherit","isInherited","itemClassName","_getHTMLFromItems","change","_getItemsFromHTML","_getItemsHTML","onInit","_regenerateItemsContainerFromInherited","_changeSizeOfKeywordItem","skala","maxLevel","setNewLevelValue","$keyword","number","oldValue","newValue","abs","$control","tempContent","temp","renameItemsIds","_eventHandler","_getItemFromDOMElement","itemsClassName","itemsArray","_getDOMElementFromItem","newDiv","contentHTML","oldId","newId","expString","EditorTagsPlaceholder","commandNames","itemSubscribeAttributeClassName","getTagsBy","content","TestQuiz","$questions","itemClass","questions","zpetnaVazba","$question","questionIndex","answered","answerCorrect","$answers","optionClass","$answer","answerIndex","$answerCurrent","$answersItem","question","GenericTable","$tableResultBody","dataSettings","tasksToComplete","tasksCompleted","tasks","subscribe","$allRows","$newSelects","$select","taskNumber","$row","nazev","vyraz","FullscreenToggle","$fullscreenImage","$fullscreen","toggle","image","innerHeight","ratio","onload","naturalWidth","naturalHeight","UserText","$userTexts","$counter","$wrapper","lengthExpected","avg","lastValue","hadData","wasUsed","updateCharacterCounter","textDuplicateSources","getEvents","none","ok","conditionAll","$userText","taskName","valueLength","updateFeedback","AudioPlayerNormal","$loadWave","$leftTime","$audioDuration","wavesurfer","WaveSurfer","create","waveColor","progressColor","responsive","barWidth","load","dataset","initWave","getDuration","addListenerAfterReady","time","playPause","$nextSlide","AudioPlayerSimple","$duration","FakeMap","$buttons","$maps","lastActiveIndex","addEventListenerToButtons","$button","switchMap","VideoPlayer","prefix","interval","$document","ownerDocument","$play","$playSymbol","$pauseSymbol","$time","$timeMeter","$timeRange","$currentTimeText","$currentTime","durationTime","$durationTime","timeToAural","$enterFullscreenSymbol","$leaveFullscreenSymbol","_fullscreenchange","_requestFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","onCanPlayStart","onLoadStart","onLoadedData","onPlayChange","onTimeChange","onPlayClick","onTimeKeydown","onTimeClick","onFullscreenClick","onFullscreenChange","onDrag","percentage","clearInterval","setInterval","currentTimePercentage","currentTimeCode","nodeValue","nCanPlayStart","autoplay","isFullscreen","_fullscreenElement","leaveFullscreen","enterFullscreen","pointerType","_exitFullscreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitExitFullscreen","webkitEnterFullscreen","shiftKey","offset","fullscreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","webkitCancelFullScreen","msExitFullscreen","innerTarget","listener","hasPointerEvent","onpointerup","hasTouchEvent","ontouchstart","pointerDown","pointerMove","pointerUp","axisProp","onpointermove","defaultView","langMinutes","langSeconds","Selectable","$inputs","$input","_changeClassIfChecked","checkedInput","$input_","checked","viceOdpovedi","vybrano","disableFeedback","hideFeedback","NewTable","dataFrom","dataSources","autofill","_columnManager","_rowManager","$cell","columnId","rowId","_cellManager","$tableRow","$headerCells","previousSibling","$rowCell","itemType","fillCell","isRightToDeleteHelper","$rows","$firstCell","columnIndex","_findCellType","$tag","$elm","rowType","$columnHeader","$innerItem","$option","attributes","elm","deliveredValue","result","Draggable","idPrefix","$targetPrevious","$targetCurrent","$draggedItem","objWidth","objHeight","$dragItem","dragAndDropEvents","handleDeleteItemFromSvgDrop","itemId","dropToken","onStart","onDrop","$placeholderOld","$placeholderNew","$sameItemFromDragPlace","windowLoadComponents","$videoPlayers","$videoPlayer","$audioPlayerNormals","$audioPlayerNormal","$audioPlayerSimples","$audioPlayerSimple","$fullscreenToggles","$fullscreenToggle","$magnifyingGlass","$fakeMaps","$editors","$testQuizs","$testQuiz","$analyticalTables","$analyticalTable","$genericTables","$genericTable","$newTables","$newTable","$draggables","$draggable","$sortables","$sortable","$selectables","$selectable","$keywords","$editorTagsPlaceholders","Element","warn","$unsupported","version","unsupportedBrowsers"],"mappings":"yBACA,IAAMA,EAAoB,WACxBC,QAAQC,IAAI,+sECFOC,wBACPC,kBACLC,OAASD,OACTE,OAASC,KAAKF,OAAOG,QAAQ,eAC7BC,KAAOC,SAASC,gBAAgBC,aAAa,QAE7CC,kBAAkBC,OAEjBP,KAAKD,cACFS,gBAAkBR,KAAKD,OAAOU,cAAc,0BAE7CT,KAAKQ,uBACFE,oBAAsBV,KAAKQ,gBAAgBC,cAAc,eAK7DE,aAAeX,KAAKW,aAAaC,KAAKZ,wDAKzCA,KAAKQ,iBAAmBR,KAAKQ,gBAAgBK,UAAUC,SAAS,uBAC7DN,gBAAgBK,UAAUE,OAAO,6DAKnCP,gBAAgBK,UAAUG,IAAI,0BC1BlBC,yBAEPpB,mDACJA,KAODA,SAAWM,SAASM,cAAc,iBAClCS,QAAUf,SAASM,cAAc,wBACjCU,IAAMC,EAAKF,QAAQG,WAAW,QAE9BC,SAAWF,EAAKE,SAASV,aACzBW,QAAUH,EAAKG,QAAQX,aACvBY,OAASJ,EAAKI,OAAOZ,aACrBa,QAAUL,EAAKK,QAAQb,aACvBc,UAAYN,EAAKM,UAAUd,aAE3Be,cAAgB,MAChBC,UAAY,OACZC,OAAS,IACTC,aAAe,IAEfC,EAAI,IACJC,EAAI,IACJC,eAAgB,IAEhBC,uBACAC,gBACAT,YAELU,OAAOC,sBAAsBjB,EAAKK,sEAI5Ba,EAAQtC,KAAK2B,cACbY,EAASvC,KAAK2B,cAEda,EAAMJ,OAAOK,mBAAqB,OACnCvB,QAAQoB,MAAQA,EAAQE,OACxBtB,QAAQqB,OAASA,EAASC,OAE1BtB,QAAQwB,MAAMJ,gBAAWA,aACzBpB,QAAQwB,MAAMH,iBAAYA,aAE1BpB,IAAIwB,MAAMH,EAAKA,4CAIfZ,UAAY5B,KAAKF,OAAO8C,yDAGtBC,GACHA,EAAM/C,SAAWE,KAAKF,SAI1B+C,EAAMC,sBAGDf,EAAIc,EAAME,OAASF,EAAMG,QAAQ,GAAGD,WACpCf,EAAIa,EAAMI,OAASJ,EAAMG,QAAQ,GAAGC,WAEpChB,eAAgB,OAChBH,aAAe,OACfD,OAAS,EAEdO,OAAOC,sBAAsBrC,KAAKyB,0CAG5BoB,GACD7C,KAAKiC,qBAILF,EAAIc,EAAME,OAASF,EAAMG,QAAQ,GAAGD,WACpCf,EAAIa,EAAMI,OAASJ,EAAMG,QAAQ,GAAGC,wCAIrCjD,KAAK8B,mBAEFnB,oBAGFmB,aAAe,OACfG,eAAgB,wCAIfiB,EAAgB,EAAVC,KAAKC,GAEXC,EADa,IACJrD,KAAK6B,YAEfD,UAAY5B,KAAKF,OAAO8C,4BAGvBU,EAEJH,KAAKI,IAAI,EAEPJ,KAAKK,IAAI,GAAKxD,KAAK+B,EAAI/B,KAAK4B,UAAU6B,MAAQzD,KAAK4B,UAAUU,QAG3DoB,EAEJP,KAAKI,IAAI,EAEPJ,KAAKK,IAAI,GAAKxD,KAAKgC,EAAIhC,KAAK4B,UAAU+B,KAAO3D,KAAK4B,UAAUW,SAM1DqB,EADa,IACO5D,KAAK4B,UAAUU,MACnCuB,EAFa,IAEQ7D,KAAK4B,UAAUW,OAGpCuB,SAASC,GAAGC,OAAOC,QAAQ,YAAc,GAAKH,SAASI,KAAKD,QAAQ,YAAc,SAEjF9C,IAAIgD,YAAc,uBAClBhD,IAAIiD,WAAa,QACjBjD,IAAIkD,cAAgB,QAItBlD,IAAImD,UAAU,EAAG,EAAGtE,KAAK2B,cAAe3B,KAAK2B,oBAC7CR,IAAIoD,UAAY,YAChBpD,IAAIqD,iBACJrD,IAAIsD,SAEF9C,cAAgB,OAEfA,cAAgB,GAAM0B,EAE5BA,EAAQ,EAAGH,QACR/B,IAAIuD,iBACJvD,IAAIwD,YAGJxD,IAAIyD,YAGJzD,IAAIqD,iBACJrD,IAAIsD,SAEF9C,cAAgB,OAEfA,cAAgB,IAAO0B,EAAS,GAE7B,KAATA,EAAe,EAAGH,QACf/B,IAAI0D,YACJ1D,IAAIuD,iBACJvD,IAAI2D,UAAU9E,KAAKF,QAEpBwD,EAASM,EAAsB5D,KAAK2B,cAAgB,GACpD+B,EAASG,EAAuB7D,KAAK2B,cAAgB,EAEvDiC,EAAmBC,QAIhB1C,IAAI4D,eAGJlF,SAAS6C,MAAMsC,8BAAyBhF,KAAK+B,iBAAQ/B,KAAKgC,cAG1DH,SAAW7B,KAAK8B,aAAe9B,KAAK6B,QAAU,EAG/C7B,KAAK6B,OAAS,KAEhBO,OAAOC,sBAAsBrC,KAAKyB,cAI7BI,OAAS,+CAMhB1B,SAAS8E,iBAAiB,aAAcjF,KAAKsB,UAC7CnB,SAAS8E,iBAAiB,YAAajF,KAAKuB,SAC5CpB,SAAS8E,iBAAiB,WAAYjF,KAAKwB,QAE3CrB,SAAS8E,iBAAiB,YAAajF,KAAKsB,UAC5CnB,SAAS8E,iBAAiB,YAAajF,KAAKuB,SAC5CpB,SAAS8E,iBAAiB,UAAWjF,KAAKwB,QAE1CY,OAAO6C,iBAAiB,SAAUjF,KAAK0B,kBAjME9B,GCqBtC,SAASsF,EAAuBhB,OAAMiB,yDAAU,GAAIC,yDAAO,KAqB1DC,EAAaC,OAAOC,OApBT,CAEfC,SAAS,GAkBgCL,UAEpC,IAAIM,YAAYvB,KACrBwB,OAAQN,GACLC,IAIA,SAASM,EAAgB9F,EAAU+F,EAAMT,EAASU,OACjDhD,EAAQqC,EAAuBU,EAAMT,EAASU,GAEpDhG,EAASiG,cAAcjD,GAiClB,SAASkD,EAAWC,UACjBA,GAAwB,WAAhBC,EAAOD,KAAsBE,MAAMC,QAAQH,GA2BtD,SAASI,EAAeC,EAASC,GACtCA,EAAcC,WAAWC,aAAaH,EAASC,GAiC1C,SAASG,EAASC,GAEvBA,EAAGH,WAAWI,YAAYD,GAKrB,SAASE,EAAUC,MAEnBA,GAASA,EAAKC,YACfD,EAAKE,iBAAoBF,EAAKE,cAG5BC,EAAU7G,SAAS8G,cAAc,cACvCD,EAAQE,YAAYL,EAAKM,WAAU,IAC5BH,EAAQI,WAkBV,SAASC,EAAgBC,OAM1BC,EAAW,UAQbA,EANoB,YAAlBzD,SAASI,MAAsBsD,GAAG3E,MAAM/C,OAAOG,QAAQ,sBAM9C,CACTuH,GAAG3E,MAAM4E,QACTD,GAAG3E,MAAM6E,SAIAF,GAAGG,MAAML,GAGf,CACLvF,EAAGyF,GAAGI,OAAO,MAAVJ,CAAiBD,EAAS,IAC7BvF,EAAGwF,GAAGI,OAAO,MAAVJ,CAAiBD,EAAS,KAI1B,SAASM,EAAqBnB,OAG7BoB,EAAe,IAAIC,gBAAgB3F,OAAO4F,iBAAiBtB,GAAIuB,iBAE/DC,EAAO/H,SAAS+H,KAEJ9F,OAAO+F,aAAeD,EAAKE,UAC1BhG,OAAOiG,aAAeH,EAAKI,iBAEvC,CACL7E,KAAMiD,EAAG6B,WAAaT,EAAaU,IACnC7E,IAAK+C,EAAG+B,UAAYX,EAAaY,KAK9B,SAASC,EAAWjC,OAEnBkC,EAAclC,EAAG9D,wBACjBsF,EAAO/H,SAAS+H,KAEhBE,EAAYhG,OAAO+F,aAAeD,EAAKE,UACvCE,EAAalG,OAAOiG,aAAeH,EAAKI,iBAEvC,CACL7E,KAAMmF,EAAYnF,KAAO6E,EACzB3E,IAAKiF,EAAYjF,IAAMyE,EACvB7F,OAAQqG,EAAYrG,OACpBD,MAAOsG,EAAYtG,OAKhB,SAASuG,EAAcC,EAASC,GACjCC,EAAWF,EAASC,GACtBE,EAAcH,EAASC,GAEvBG,EAAWJ,EAASC,GAIjB,SAASC,EAAWF,EAASC,YAE7BD,IAAYC,KACTD,EAAQjI,UAAaiI,EAAQjI,UAAUC,SAASiI,GAAO,UAAID,EAAQK,eAAclF,kBAAW8E,SAAW,GAG1G,SAASG,EAAWE,EAAUC,OAC/BC,EAAYF,EACZG,EAAWF,KAGVC,GAAcC,KAEQ,iBAAfD,EAEVA,EAAYnJ,SAASqJ,iBAAiBF,GAC7BA,EAAUxC,UAEnBwC,EAAY,CAACA,IAGW,iBAAdC,GAEVA,EAAWA,EAASE,MAAM,SAOvB,IAAIC,EAAI,EAAGA,EAAIJ,EAAUK,OAAQD,GAAK,EAAG,UAExCJ,EAAUI,GAAG7I,aACfyI,EAAUI,GAAG7I,WAAUG,cAAOuI,SACzB,IAAKP,gBAAWM,EAAUI,aAAOH,SACjC,IAAIK,EAAI,EAAGA,EAAIL,EAASI,OAAQC,GAAK,EACxCN,EAAUI,GAAGL,oBAAeE,EAASK,UAXzClK,QAAQC,IAAI,qEAiBT,SAASsJ,EAAcG,EAAUC,OAClCC,EAAYF,EACZG,EAAWF,KAGVC,GAAcC,KAEQ,iBAAfD,EAEVA,EAAYnJ,SAASqJ,iBAAiBF,GAC7BA,EAAUxC,UAEnBwC,EAAY,CAACA,IAGW,iBAAdC,GAEVA,EAAWA,EAASE,MAAM,SAOvB,IAAIC,EAAI,EAAGA,EAAIJ,EAAUK,OAAQD,GAAK,EAAG,UAExCJ,EAAUI,GAAG7I,aACfyI,EAAUI,GAAG7I,WAAUE,iBAAUwI,aAE5B,IAAIK,EAAI,EAAGA,EAAIL,EAASI,OAAQC,GAAK,EACxCN,EAAUI,GAAGP,UAAYG,EAAUI,GAAGP,UAAUU,QAAQ,IAAIC,oBAAaT,EAAQO,UAAS,KAAM,UAXpGlK,QAAQC,IAAI,yECzTVoK,EAAc,CAClBC,WAAY9E,EAAuB,cACnC+E,WAAY/E,EAAuB,cACnCgF,aAAchF,EAAuB,iBAGvC,SAASiF,EAAwBC,GAE/BA,EAASC,SAAQ,SAACC,OACVC,EAASD,EAAQ7J,cAAc,UAAY6J,EAAQ7J,cAAc,SACnE8J,IAAWA,EAAOC,SACpBD,EAAOE,QACPH,EACG7J,cAAc,yBACdiK,aAAa,sBAAuB,cAK7C,SAASC,EAAwBC,OACzBC,EAAW,CACfD,QAASzH,KAAK2H,MAAMF,GACpBG,QAAS5H,KAAK2H,MAAMF,EAAU,YAGhCC,EAASD,SAAWC,EAASD,QAA8B,GAAnBC,EAASE,SAAeC,SAAS,cAE/DH,EAASE,oBAAW,WAAKF,EAASD,SAAWK,OAAO,QC1B3CC,yBAEPrL,0CACJA,oEAIiBsL,EAAOxK,OACxByJ,EAAWjK,SAASqJ,iBAAiB,uBACrC4B,EAASD,EAAM1K,cAAc,SAC7B4K,EAAcF,EAAM1K,cAAc,yBAClC6K,EAAYH,EAAM1K,cAAc,0BAEtC4K,EAAYpG,iBAAiB,SAAS,SAACpC,GACmB,WAApDwI,EAAYhL,aAAa,wBAE3B8J,EAAwBC,GACxBgB,EAAOG,OACPF,EAAYX,aAAa,sBAAuB,aAGhDU,EAAOX,QACPY,EAAYX,aAAa,sBAAuB,WAGlD/J,IAEAkC,EAAM2I,qBACL,GAGHH,EAAYpG,iBAAiB,aAAa,SAACpC,GACzCA,EAAM2I,qBACL,GAEHJ,EAAOnG,iBAAiB,cAAc,WACpCqG,EAAUG,UAAYd,EAAwBS,EAAOM,gBAGvDN,EAAOnG,iBAAiB,SAAS,WAC/BoG,EAAYX,aAAa,sBAAuB,oBAxCb9K,GCHpB+L,iFAcN7C,GACXtB,GAAGoE,OAAO9C,GAAS+C,QAAQC,QAAQ,cAAc,mCAGpChD,EAASiD,GAEtBvE,GAAGoE,OAAO9C,GACPkD,KAAK,KAAMxE,GAAG3E,MAAMd,EAAIgK,EAAKhK,GAAGkK,WAChCD,KAAK,KAAMxE,GAAG3E,MAAMb,EAAI+J,EAAK/J,GAAGiK,uCAG1BnD,EAASlD,EAAMmG,GAExBvE,GAAGoE,OAAO9C,GACPkD,KAAK,KAAMxE,GAAG3E,MAAMd,EAAIgK,EAAKhK,GAAGkK,WAChCD,KAAK,KAAMxE,GAAG3E,MAAMb,EAAI+J,EAAK/J,GAAGiK,WAIhCH,QAAQ,cAAc,YC3BRI,sFAKDC,EAAMC,MACuB,UAAzC5E,GAAG3E,MAAMwJ,YAAYvM,OAAOwM,SAAsB,KAE9CC,EAAO/E,GAAG+E,OAGbC,MAAMhF,GAAGiF,aAEN7E,EAASJ,GAAGI,OAAO,OACnB8E,EAAIlF,GAAG3E,MAAM8J,QAEfC,EAAKhF,EAAOJ,GAAG3E,MAAMd,GACrB8K,EAAKjF,EAAOJ,GAAG3E,MAAMb,GAEnB8K,YAAQX,EAAKW,oBAAWF,cAAMC,GAE9BE,EAASvF,GAAGoE,kBAAWO,EAAKW,kBAAgBE,OAAO,YAGtDhB,KAAK,gBAAiB,IACtBA,KAAK,QAAS,YACdA,KAAK,KAAMc,GACXG,MAAMP,GAGTlF,GAAG3E,MACAqK,GAAG,QAAQ,eAEJC,EAAKvF,EAAOJ,GAAG3E,MAAMd,GACrBqL,EAAKxF,EAAOJ,GAAG3E,MAAMb,GAErBqL,EAAKF,EAAKP,EACVU,EAAKF,EAAKP,EAGXQ,EAAKA,EAAOC,EAAKA,EAAM,IAAKZ,EAAEa,KAAK,CAACX,EAAKO,EAAIN,EAAKO,IAElDV,EAAEA,EAAE/C,OAAS,GAAK,CAACwD,EAAIC,GAE5BL,EAAOf,KAAK,IAAKO,MAElBW,GAAG,OAAO,eACHM,EAAYhG,GAAGoE,kBAAWkB,IAC5BU,IACEA,EAAUxB,KAAK,KACbwB,EAAUxB,KAAK,KAAKrC,OAAS,GAC/B6D,EAAUzM,SAGV4E,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAM,SACN7G,KAAM2G,EAAU3G,OAChByF,SAAUkB,EAAU3G,OAAOyF,SAC3BqB,aAAa,KAITH,EAAUxB,KAAK,MACzBwB,EAAUzM,UAIdqL,OAIJF,EAAQ0B,kBAAkBzB,EAAM3E,GAAGoE,kBAAWkB,IAAMjG,8CAKpCsF,OACZ0B,EAAQrG,GAAGoE,kBAAWO,EAAKW,kBAE3BgB,EAAgBzG,EAAgB8E,GAChCW,YAAQX,EAAKW,sBAAagB,EAAc/L,cAAK+L,EAAc9L,GAc3DnC,GAXgBgO,EAAMb,OAAO,qBAChChB,KAAK,kBAAmB,IACxBA,KAAK,KAAMc,GACXd,KAAK,IAAK8B,EAAc/L,GACxBiK,KAAK,IAAK8B,EAAc9L,GACxBgK,KAAK,QAAS,GACdA,KAAK,SAAU,GAEWgB,OAAO,aACjChB,KAAK,QAAS,mBAEA7L,SAASM,yBAAkBqM,KAG5CZ,EAAQ6B,oBAAoB5B,EAAMtM,GAGlC8F,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAM,SACN7G,KAAMhH,EACNyM,SAAUzM,EAASyM,SACnBqB,aAAa,+CAKMxB,EAAMtM,GAC7B2H,GAAGoE,kBAAW/L,EAASiN,KAAMI,GAAG,SAAS,WAEvCvH,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAM,SACN7G,KAAMW,GAAG3E,MAAM/C,OACfwM,SAAU9E,GAAG3E,MAAM/C,OAAOwM,SAC1BqB,aAAa,KAIjBnG,GAAGoE,kBAAW/L,EAASiN,KAAM/L,SAE7ByG,GAAG3E,MAAMC,oBACR,+CAGsBqJ,EAAMtM,OACzBqB,EAAUf,SAASM,yBAAkB0L,EAAKW,kBAK5CkB,EAAkB,CACpBnO,EAASQ,aAAa,KACtBR,EAASQ,aAAa,MAEpB0L,EAAO,GAELkC,EAAYzG,GAAG0G,qBAAcrO,EAASiN,cAC5CtF,GAAGoE,OAAOqC,EAAUE,QAAQ,IAAIjB,GAAG,SAAS,WAG1CvH,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAM,SACN7G,KAAMhH,EACNyM,SAAUzM,EAASyM,SACnBqB,aAAa,SAKXS,EAAUvO,EAASiN,GAAGrD,MAAM,KACE,aAAhC2E,EAAQA,EAAQzE,OAAS,IAC3BhE,EAAgBxF,SAAU,kBAAmB,GAAI,CAC/C6F,KAAM,CACJ8G,GAAIsB,EAAQ,GACZC,QAASxO,EAASyO,cAKxB9G,GAAG3E,MAAM/C,OAAOG,QAAQ,iBAAiBc,YAExCwN,KAAK/G,GAAGgH,OACNlH,UAAUpG,GACVyL,QAAQ9M,GACRqN,GAAG,SAAS,WACXnB,EAAO,CACLhK,EAAGyF,GAAG3E,MAAMd,EAAIiM,EAAgB,GAChChM,EAAGwF,GAAG3E,MAAMb,EAAIgM,EAAgB,IAGlCrC,EAAa8C,MAAM5O,MAEpBqN,GAAG,QAAQ,WACVvB,EAAa+C,QAAQ7O,EAAUkM,MAEhCmB,GAAG,OAAO,eACHyB,EAAiBX,EAAgB,GACjCY,EAAiBZ,EAAgB,GACnCa,EAAW,OAEflD,EAAamD,IAAIjP,EAAU,SAAUkM,GAErCiC,EAAkB,CAChBnO,EAASQ,aAAa,KACtBR,EAASQ,aAAa,MAIpB0O,EAAIC,6BAA6BnP,KAAWgP,EAAW,UAEvDb,EAAgB,KAAOW,GAAkBX,EAAgB,KAAOY,GAElEjJ,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAMmB,EACNhI,KAAMhH,EACNyM,SAAUzM,EAASyM,SACnBqB,aAAa,kBC5MRsB,4FACDC,yDAAY,IAAKC,yDAAY,EACvChD,EAAOhM,SAASM,cAAc,4BAC9B2O,EAAQjD,EAAKW,GACbuC,EAAW7H,GAAGoE,OAAOO,GAAMP,OAAO,aAGlC0D,EAAcnP,SAASM,cAAc,sBACrCqN,EAAgB,CACpB/L,EAAGuN,EAAYjP,aAAa,gBAC5B2B,EAAGsN,EAAYjP,aAAa,iBAExByM,YAAQsC,uBAAkBtB,EAAc/L,cAAK+L,EAAc9L,GAC3DuN,aAAWzC,GACX0C,EAAc,CAClBzN,EAAIsN,EAASrD,KAAK,SAAW8B,EAAc/L,EAAK,IAAM,QAAU,OAChEC,EAAIqN,EAASrD,KAAK,UAAY8B,EAAc9L,EAAK,GAAK,SAAW,OAK7DyN,EAAgBJ,EAASrC,OAAO,qBACnChB,KAAK,uCAAiCwD,EAAYzN,0BAAiByN,EAAYxN,IAC/EgK,KAAK,gBAAiB,IACtBA,KAAK,IAAK8B,EAAc/L,GACxBiK,KAAK,IAAK8B,EAAc9L,GACxBgK,KAAK,QAAS,GACdA,KAAK,SAAU,GAGlByD,EAAczC,OAAO,aAClBhB,KAAK,QAAS,kCAEX0D,EAAWD,EAAczC,OAAO,kBACnChB,KAAK,YAAakD,GAClBlD,KAAK,WAAY,MACjBA,KAAK,KAAMc,GACXd,KAAK,QAAS,gBACdA,KAAK,YAAa,IAClBA,KAAK,2BAA4BoD,GAGpCjD,EAAK1L,cAAc8O,GAAMI,QAGzBV,EAAQW,kBAAkBzD,EAAMuD,EAAS7I,QAAQ,EAAMsI,6CAGhChD,EAAM0D,EAAOC,OAAWX,yDAAY,EACrDjO,EAAUiL,EAAK1L,cAAc,aAC7B8O,aAAWM,EAAM/C,IACnBiD,EAAaD,EACbE,EAAUH,EAAMI,MAKdpQ,EAAWsM,EAAK1L,cAAc8O,GAAMW,cACtClC,EAAkB,CACpBnO,EAASQ,aAAa,KACtBR,EAASQ,aAAa,MAEpB0L,EAAO,GAEXvE,GAAGoE,OAAO2D,GAEPhB,KAAK/G,GAAGgH,OACNlH,UAAUpG,GACVyL,QAAQ9M,GACRqN,GAAG,SAAS,WACXnB,EAAO,CACLhK,EAAGyF,GAAG3E,MAAMd,EAAIiM,EAAgB,GAChChM,EAAGwF,GAAG3E,MAAMb,EAAIgM,EAAgB,IAGlCrC,EAAa8C,MAAM5O,MAEpBqN,GAAG,QAAQ,WACVvB,EAAa+C,QAAQ7O,EAAUkM,MAEhCmB,GAAG,OAAO,eACHyB,EAAiBX,EAAgB,GACjCY,EAAiBZ,EAAgB,GACnCa,EAAW,OAEflD,EAAamD,IAAIjP,EAAU,OAAQkM,GAEnCiC,EAAkB,CAChBnO,EAASQ,aAAa,KACtBR,EAASQ,aAAa,MAGnB0P,GAAe/B,EAAgB,KAAOW,GAAkBX,EAAgB,KAAOY,IAE9EG,EAAIC,6BAA6BnP,EAASsQ,WAAW,MAAKtB,EAAW,UAGzElJ,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAMmB,EACNhI,KAAMhH,EAASsQ,WAAW,GAC1B7D,SAAUzM,EAASsQ,WAAW,GAAG7D,SACjCqB,aAAa,UAOtBT,GAAG,SAAS,WACX+B,EAAQmB,qBAAqB5I,GAAG3E,MAAM/C,WAGvCoN,GAAG,QAAQ,eAGN2B,EAFEwB,EAAU7I,GAAG3E,MAAM/C,OACnBmQ,EAAQI,EAAQJ,MAElBK,GAAY,EAEK,IAAjBL,EAAMtG,QAINsG,EAAMtG,OAASwF,GACjBjG,EAAWmH,EAAS,YACpBC,GAAY,GACFL,EAAMtG,QAAUwF,GAAcnG,EAAWqH,EAAS,cAC5DpH,EAAcoH,EAAS,YACvBC,GAAY,GAGVN,IAAYC,IACVF,GACFlB,EAAW,SACXkB,GAAa,GAEblB,EAAW,SAEbmB,EAAUC,EAENlB,EAAIC,6BAA6BqB,KAAUxB,EAAW,UAG1DlJ,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAMmB,EACNhI,KAAMwJ,EACN/D,SAAU+D,EAAQ/D,SAClBiE,QAASD,EACT3C,aAAa,MAMnBqC,EAAUC,GApCRlB,EAAIyB,YAAW,EAAOjB,MAuCzBrC,GAAG,SAAS,WACX1F,GAAGoE,OAAO/L,GAAUgM,wDAIEwE,GAC1BA,EAAQ3N,MAAMH,OAAS,MACvB8N,EAAQ3N,MAAMH,iBAAY,GAAK8N,EAAQI,qEAGRtE,EAAM0D,OACjCE,GAAa,EACbC,EAAUH,EAAMI,MAEpBzI,GAAGoE,OAAOiE,GAAO3C,GAAG,SAAS,WAC3B+B,EAAQmB,qBAAqB5I,GAAG3E,MAAM/C,WAErCoN,GAAG,QAAQ,eAGN2B,EAFEwB,EAAU7I,GAAG3E,MAAM/C,OACnBmQ,EAAQI,EAAQJ,MAGlBD,IAAYC,IACVF,GACFlB,EAAW,SACXkB,GAAa,IAEblB,EAAW,SACU,IAAjBoB,EAAMtG,SACRoG,GAAa,IAGjBC,EAAUC,EAENlB,EAAIC,6BAA6BqB,KAAUxB,EAAW,UAG1DlJ,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIX,EAAKW,GACTY,KAAMmB,EACNhI,KAAMwJ,EACN/D,SAAU+D,EAAQ/D,SAClBoE,UAAU,EACV/C,aAAa,MAMnBqC,EAAUC,cCrLGlB,yBACPlP,mDACJA,KAED+H,OAASJ,GAAGI,OAAO,SAGnB+I,aAEAC,SACAC,sEAIDvQ,kBAAkBC,WAGjBuQ,YAAc9Q,KAAKF,OAAOO,aAAa,8BAGtC0Q,EAAqB/Q,KAAKF,OAAOO,aAAa,mBAAmBoJ,MAAM,KACpEC,EAAI,EAAGA,EAAIqH,EAAmBpH,OAAQD,GAAK,EACpB,aAA1BqH,EAAmBrH,QAChBsH,UAAUhR,KAAKW,cAEa,WAA1BoQ,EAAmBrH,SACrBuH,YAAYjR,KAAKW,mBASrBuQ,yBAGAC,kBACAC,yDAKA9Q,kBAAkBC,MAEvBiH,GAAG0G,UAAU,4BAGVhB,GAAG,cAAc,WAChB1F,GAAGoE,OAAO5L,KAAKC,QAAQ,kBAAkB4L,kDAYvCwF,EAAUrR,KAAKF,OAAOO,aAAa,WAAWoJ,MAAM,KACpD6H,EAAOtR,KAAKF,OAAO8C,wBAUnBD,GAPC2O,EAAK/O,OAEN+O,EAAK/O,OAAS8O,EAAQ,GAAWA,EAAQ,GAEtCC,EAAK/O,OAJa8O,EAAQ,IAOPA,EAAQ,GAC9BE,EAAWF,EAAQ,GAAK1O,EAUxB6O,EAPAC,WAAW,kCAAkCC,QACpB,IAApBtP,OAAOuP,WAGTvP,OAAOuP,WAKVC,EAAcjP,YAAW4O,EAAWC,EAAmBD,EAAWC,QAAuB,QAE1F1R,OAAO4C,MAAM6O,SAAWK,EAI3B5R,KAAKF,OAAOO,aAAa,mBACrBL,KAAKF,OAAOG,QAAQ,2BAEnBH,OAAOG,QAAQ,mBAAmByC,MAAM6O,SAAWK,qCAalDxF,cACR5E,GAAGoE,OAAO5L,KAAKF,QACZyO,KAAK/G,GAAGgH,OACNlH,WAAU,kBAAMuK,EAAK/R,UACrB6M,SAAQ,eACDmF,EAAI,CAACtK,GAAG3E,MAAMd,EAAEkK,UAAWzE,GAAG3E,MAAMb,EAAEiK,iBAErC,CAAC6F,EAAGA,MAEZ5E,GAAG,SAAS,WACXhB,EAAQ6F,WAAWF,EAAK/R,OAAQsM,2CAU5BA,cACV5E,GAAGoE,OAAO5L,KAAKF,QAAQoN,GAAG,SAAS,WAGA,UAFpB1F,GAAG3E,MAAM/C,OACAwM,WAQtBJ,EAAQ8F,aAAaC,EAAKnS,QAC1BsM,IAEA5E,GAAG3E,MAAMC,qBACR,0DAIGoP,EAAgBlS,KAAKF,OAAO0J,iBAAiB,6BAE/C0I,GACFA,EAAc7H,SAAQ,SAAC8H,GACrBlD,EAAQmD,0BAA0BC,EAAKvS,OAAQqS,6CAKtCG,OACPlE,EAAUkE,EAAM7I,MAAM,YAExB2E,EAAQzE,OAAS,GACnBjK,QAAQC,IAAI,gBAAiB2S,GACtBA,IAILlE,EAAQA,EAAQzE,OAAS,qBAAgByE,EAAQ,KACnDA,EAAQb,qBAAca,EAAQ,KAIhCA,EAAQ,GAAKpO,KAAKF,OAAOgN,GAEXsB,EAAQmE,KAAK,sDAMrBC,EAAsBxS,KAAK8Q,YAAc9Q,KAAK8Q,YAAYrH,MAAM,KAAO,GAEzE+I,EAAoB,IAEtBrS,SAAS8E,iBAAiB,cAAc,SAACwN,MACnCD,EAAoBE,SAASD,EAAE/M,OAAO+H,IAAIX,IAAK,KAK7CY,EAJEiF,EAAgBF,EAAE/M,OAAO+H,IAAI5G,KAC7ByF,EAAWmG,EAAE/M,OAAO+H,IAAInB,SACxBsG,EAAcC,EAAKC,eAAeH,EAAc7F,IAClDiG,EAAaF,EAAK/S,OAAOW,yBAAkBmS,QAG3CG,GAAoC,WAAtBN,EAAE/M,OAAO+H,IAAIC,eAC7BA,EAAO+E,EAAE/M,OAAO+H,IAAIC,KAYL,SAAbpB,SACMoB,OACD,SACHmF,EAAKG,WAAWL,EAAeC,aAE5B,QACH3J,EAAc8J,EAAY,YAC1B7J,EAAW6J,EAAYN,EAAE/M,OAAO+H,IAAIwF,iBAEjC,SACHF,EAAWhS,uBAGXrB,QAAQC,IAAI,0CAEX,GAAiB,aAAb2M,KACLmG,EAAE/M,OAAO+H,IAAIiD,gBACPhD,OACD,SACHmF,EAAKK,mBAAmBP,EAAeC,aAEpC,SACgC,IAA/BD,EAAc1C,MAAMtG,QACtBoJ,EAAW9C,MAAQ0C,EAAc1C,MAE7B8C,EAAWrQ,MAAMH,SAAWoQ,EAAcjQ,MAAMH,SAClDwQ,EAAWrQ,MAAMH,OAASoQ,EAAcjQ,MAAMH,SAGhDwQ,EAAW7C,cAAcnP,uBAI3BrB,QAAQC,IAAI,wDAGR+N,OACD,SACHmF,EAAKM,gBAAgBV,EAAE/M,OAAO+H,IAAI8C,QAASoC,EAAeC,aAEvD,SACHG,EAAW9C,MAAQ0C,EAAc1C,MAE7BwC,EAAE/M,OAAO+H,IAAI8C,QACfrH,EAAW6J,EAAY,YAEvB9J,EAAc8J,EAAY,YAGxBA,EAAWrQ,MAAMH,SAAWoQ,EAAcjQ,MAAMH,SAClDwQ,EAAWrQ,MAAMH,OAASoQ,EAAcjQ,MAAMH,kBAG7C,QAEH0G,EADA8J,EAAaA,EAAW7C,cAAcC,WAAW,GACvB,YAC1BjH,EAAW6J,EAAYN,EAAE/M,OAAO+H,IAAIwF,iBAEjC,OACCF,GACFA,EAAW7C,cAAcnP,SAE3B8R,EAAKM,gBAAgBV,EAAE/M,OAAO+H,IAAI8C,QAASoC,EAAeC,aAEvD,SACHG,EAAW7C,cAAcnP,uBAGzBrB,QAAQC,IAAI,+CAGb,GAAiB,kBAAb2M,SACDoB,OACD,SACHmF,EAAKO,aAAaT,EAAeC,aAE9B,QAEH3J,EADA8J,EAAaA,EAAW5C,WAAW,GACT,YAC1BjH,EAAW6J,EAAYN,EAAE/M,OAAO+H,IAAIwF,iBAEjC,OACCF,GACFA,EAAWhS,SAEb8R,EAAKO,aAAaT,EAAeC,aAE9B,SACHG,EAAWhS,uBAGXrB,QAAQC,IAAI,4CAGhBD,QAAQC,IAAI,mCAAoC2M,0DASpD+G,EAAS,EAEblT,SAAS8E,iBAAiB,YAAY,SAACpC,MAEjCA,EAAM6C,OAAO+H,IAAIX,KAAOwG,EAAKxT,OAAOgN,GAAI,OAEFjK,EAAM6C,OAAO+H,IAA7CoC,IAAAA,MAAOtI,IAAAA,SAAU3B,IAAAA,KAAM2N,IAAAA,KAUzBC,EANS,UAAT5N,GAA6B,QAATA,EAAuB,IAElC,QAATA,EAAuB,MAEpB,EAIT2N,EAAKjR,MAAQiR,EAAKjR,MAAQkR,EAC1BD,EAAKhR,OAASgR,EAAKhR,OAASiR,MAGtBC,EADYjM,GAAGoE,kBAAW0H,EAAKxT,OAAOgN,kBACTE,OAAO,qBACvChB,KAAK,QAASuH,EAAKjR,OACnB0J,KAAK,SAAUuH,EAAKhR,QACpByJ,KAAK,IAAKsH,EAAK1L,OAAOL,EAAS,GAAMgM,EAAKjR,MAAQ,IAClD0J,KAAK,IAAKsH,EAAK1L,OAAOL,EAAS,GAAMgM,EAAKhR,OAAS,IACnDyJ,KAAK,eAASsH,EAAKxT,OAAOgN,eAAM+C,EAAMxP,aAAa,uBAAcgT,gBAG9DK,EAAYvT,SAAS8G,cAAc,OACzCyM,EAAU7S,UAAUG,IAAI,yCAAmC4E,IAC3D8N,EAAUxM,YAAY2I,EAAM8D,kBAAkBA,mBAE9CF,EAAiBzG,QAAO,kBAAM0G,SAExBE,EAAiBH,EAAiB5M,OAGxCwM,GAAU,EAGVnH,EAAQ6B,oBAAoBuF,EAAKxT,OAAQ8T,GAGzCjO,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIwG,EAAKxT,OAAOgN,GAChBY,KAAM,SACN7G,KAAM+M,EACNtH,SAAUsH,EAAetH,SACzBqB,aAAa,4CAOZgF,EAAeC,OAClBG,EAAaJ,EAAcxL,WAAU,GAC3C4L,EAAWjG,GAAK8F,OACX9S,OAAOoH,YAAY6L,GAExB7G,EAAQ0B,kBAAkB5N,KAAKF,OAAQiT,2CAGzBxC,EAASoC,EAAeC,OAChCG,EAAaJ,EAAczC,cAAc/I,WAAU,GACzD4L,EAAW5C,WAAW,GAAGrD,GAAK8F,OACzB9S,OAAOoH,YAAY6L,GACpBxC,EACFrH,EAAW6J,EAAY,YAEvB9J,EAAc8J,EAAY,YAG5B9D,EAAQW,kBAAkB5P,KAAKF,OAAQiT,EAAW5C,WAAW,IAAI,wCAGtDwC,EAAeC,OACpBG,EAAaJ,EAAcxL,WAAU,GAC3C4L,EAAWjG,GAAK8F,OACX9S,OAAOoH,YAAY6L,GAExB7G,EAAQ6B,oBAAoB/N,KAAKF,OAAQiT,8CAGxBJ,EAAeC,OAC1BG,EAAaJ,EAAczC,cAAc/I,WAAU,GACzD4L,EAAW5C,WAAW,GAAGrD,GAAK8F,OACzB9S,OAAOoH,YAAY6L,GAExB9D,EAAQmD,0BAA0BpS,KAAKF,OAAQiT,EAAW5C,WAAW,yCAGrDnK,GAChBA,EAAK0E,aAAa,oBAAqB,uDAMjCmJ,EAAW1T,SAASqJ,iBAAiB,8BAElCE,EAAI,EAAGA,EAAImK,EAASlK,OAAQD,GAAK,EACxCmK,EAASnK,GAAGgB,aAAa,oBAAqB,4CAMhCoJ,OAAUhL,yDAAU,6BAChCjJ,EAAWM,SAASM,cAAcqI,GAClCwD,EAAWzM,EAASyM,SAClByH,EAAUlU,EAASqQ,qBAIjB5D,OACD,WAGA,qBAGA,MAMHA,GAJEzM,EADEkU,EAAQ5D,WAAW,GACV4D,EAAQ5D,WAAW,GAEnB4D,GAEOzH,uBAGpB5M,QAAQC,IAAI,6BAA8B2M,OAIxC8C,EAAQvP,EAASiN,GAAGrD,MAAM,KAAK,MAGrC9D,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIsC,EACJ1B,KAAM,SACN7G,KAAMhH,EACNyM,SAAAA,EACAqB,YAAamG,KAIQ,kBAArBC,EAAQzH,SAA8B,CACxC9E,GAAGoE,OAAOmI,GAAShT,aAGbqN,EAAU2F,EAAQjH,GAAGrD,MAAM,KACG,aAAhC2E,EAAQA,EAAQzE,OAAS,IAC3BhE,EAAgBxF,SAAU,kBAAmB,GAAI,CAC/C6F,KAAM,CACJ8G,GAAIsB,EAAQ,GACZC,QAASxO,EAASyO,mBAKxB9G,GAAGoE,OAAO/L,GAAUkB,sDAMhBiT,EAAgB7T,SAASqJ,iBAAiB,4BACvCE,EAAI,EAAGA,EAAIsK,EAAcrK,OAAQD,GAAK,EAC7CsK,EAActK,GAAGgB,aAAa,kBAAmB,0CAKrC+C,GACdsB,EAAIkF,aACJxG,EAAI/C,aAAa,kBAAmB,6DAKFmF,OAC5BzB,EAAUyB,EAAM/C,GAAGrD,MAAM,aAC3B2E,EAAQA,EAAQzE,OAAS,GAAG+I,SAAS,WACvCtE,EAAQ8F,MACRrE,EAAM/C,GAAKsB,EAAQmE,KAAK,MACjB,UAhfoB3S,GCjCZuU,yBACPtU,mDACJA,KACDuU,UAAYjU,SAASM,qDACQW,EAAKtB,OAAOgN,YAEzCuH,SAAWC,KAAKC,MAAMnT,EAAKgT,UAAU/T,aAAa,8BAElDiH,UAAYlG,EAAKtB,SACjB0U,OAASpT,EAAKtB,OAAO0J,iBAAiB,0BACtCiL,YAAcrT,EAAKtB,OAAO0J,iBAAiB,0BAC3CkL,aAAe,kBAAMvU,SAASM,cAAc,4BAC5C2J,SAAWhJ,EAAKkG,UAAUkC,iBAAiB,yBAG3CmL,UAAYvT,EAAKtB,OAAOO,aAAa,0BACrC4B,eAAgB,IAChB2S,QAAS,IACTC,OAAQ,IACRC,gBAAaC,IAEbpN,MAAQ,CACX5F,EAAG,SAACc,UAAUA,EAAMmS,SAAWnS,EAAMG,QAAQ,GAAGgS,SAChDhT,EAAG,SAACa,UAAUA,EAAMoS,SAAWpS,EAAMG,QAAQ,GAAGiS,SAChDrI,GAAI,EACJC,GAAI,EACJM,GAAI,EACJC,GAAI,KAGDsB,QAAU,CACbhI,GAAI,KACJwO,MAAO,KACPC,OAAQ,GACR7D,KAAM,kBAAMlQ,EAAKsN,QAAQhI,GAAG9D,yBAC5B2Q,KAAM,GACN3N,KAAM,QAGHwP,SAAW,CACdC,KAAM,KACNC,KAAM,QAGHhU,SAAWF,EAAKE,SAASV,aACzBW,QAAUH,EAAKG,QAAQX,aACvBY,OAASJ,EAAKI,OAAOZ,aACrBa,QAAUL,EAAKK,QAAQb,aAEvBsB,uBAGAqT,MAAQ,CACXC,eAAgB,EAChBC,OAAQ,IAINrU,EAAKiT,aACFkB,MAAME,OAASrU,EAAKiT,SAASqB,KAAI,SAACrB,UAAaA,EAASsB,8DAIxD9S,GACFA,EAAM/C,OAAO8V,aAAa,wBAK3B5V,KAAKoK,SAAST,OAAS,GACzBQ,EAAwBnK,KAAKoK,eAI1BnI,eAAgB,OAEhByM,QAAQhI,GAAK7D,EAAM/C,YACnB4O,QAAQ9I,KAAO/C,EAAM/C,OAAOO,aAAa,2BACzCqO,QAAQwG,MAAQlV,KAAK0O,QAAQhI,GAAGS,WAAU,QAC1CuH,QAAQyG,OAAOxR,IAAM3D,KAAK0O,QAAQhI,GAAG+B,eACrCiG,QAAQyG,OAAO1R,KAAOzD,KAAK0O,QAAQhI,GAAG6B,gBACtCmG,QAAQ6E,KAAKjR,MAAQtC,KAAK0O,QAAQhI,GAAGmP,iBACrCnH,QAAQ6E,KAAKhR,OAASvC,KAAK0O,QAAQhI,GAAGoP,kBAEtCpH,QAAQhI,GAAGhE,MAAMiB,cAAS3D,KAAK0O,QAAQyG,OAAOxR,eAC9C+K,QAAQhI,GAAGhE,MAAMe,eAAUzD,KAAK0O,QAAQyG,OAAO1R,gBAC/CiL,QAAQhI,GAAGhE,MAAMJ,gBAAWtC,KAAK0O,QAAQ6E,KAAKjR,iBAC9CoM,QAAQhI,GAAGhE,MAAMH,iBAAYvC,KAAK0O,QAAQ6E,KAAKhR,kBAC/CmM,QAAQhI,GAAG7F,UAAUG,IAAI,mBAEzBsG,UAAUzG,UAAUG,IAAI,mBAExB+U,gBAAgB/V,KAAK0O,QAAQhI,SAC7BsP,eAEArO,MAAMiF,GAAK5M,KAAK2H,MAAM5F,EAAEc,QACxB8E,MAAMkF,GAAK7M,KAAK2H,MAAM3F,EAAEa,GAE7BA,EAAMC,kDAGAD,GACD7C,KAAKiC,qBAIL0F,MAAMwF,GAAKnN,KAAK2H,MAAM5F,EAAEc,GAAS7C,KAAK2H,MAAMiF,QAC5CjF,MAAMyF,GAAKpN,KAAK2H,MAAM3F,EAAEa,GAAS7C,KAAK2H,MAAMkF,GAEjDzK,OAAOC,sBAAsBrC,KAAKyB,cAE7BuU,0CAGAnT,MACA7C,KAAKiC,oBAILA,eAAgB,OAChBqF,UAAUzG,UAAUE,OAAO,mBAC3B2N,QAAQhI,GAAG7F,UAAUE,OAAO,mBAC5B2N,QAAQhI,GAAGhE,MAAMiB,IAAM,QACvB+K,QAAQhI,GAAGhE,MAAMe,KAAO,QACxBiL,QAAQhI,GAAGhE,MAAMJ,MAAQ,QACzBoM,QAAQhI,GAAGhE,MAAMH,OAAS,QAC1BmM,QAAQhI,GAAGhE,MAAMsC,UAAY,OAG5BsM,EADetR,KAAK0U,eACA9R,+BAElB5C,KAAK2U,eACN,aACCrD,EAAK7N,MAAQzD,KAAK2H,MAAM5F,EAAEc,IAAUyO,EAAK2E,YACtCC,oBAGJ,WACC5E,EAAK3N,KAAO3D,KAAK2H,MAAM3F,EAAEa,IAAUyO,EAAK6E,aACrCD,eAQNE,0BACAC,sBACAC,sEAMA1B,QAAS,OACTC,OAAQ,OAER0B,gBAGHvW,KAAKoV,SAASE,MACXtV,KAAKoV,SAASE,KAAKM,aAAa,sBACnC,KACMN,EAAOtV,KAAKoV,SAASE,KAAK1S,+BAExB5C,KAAK2U,eACN,aACC3U,KAAK0O,QAAQ4C,OAAO2E,MAASX,EAAK7R,KAAQ6R,EAAKhT,MAAQ,WACpDuS,OAAQ,OACRkB,gBAAgB/V,KAAKoV,SAASE,iBAGlC,WACCtV,KAAK0O,QAAQ4C,OAAO6E,OAAUb,EAAK3R,IAAO2R,EAAK/S,OAAS,WACrDsS,OAAQ,OACRkB,gBAAgB/V,KAAKoV,SAASE,WAUzCtV,KAAKoV,SAASC,MACXrV,KAAKoV,SAASC,KAAKO,aAAa,sBACnC,KACMP,EAAOrV,KAAKoV,SAASC,KAAKzS,+BAExB5C,KAAK2U,eACN,aACC3U,KAAK0O,QAAQ4C,OAAO7N,KAAQ4R,EAAKY,MAASZ,EAAK/S,MAAQ,WACpDsS,QAAS,OACTmB,gBAAgB/V,KAAKoV,SAASC,iBAGlC,WACCrV,KAAK0O,QAAQ4C,OAAO3N,IAAO0R,EAAKc,OAAUd,EAAK9S,OAAS,WACrDqS,QAAS,OACTmB,gBAAgB/V,KAAKoV,SAASC,+CAarCX,EAAe1U,KAAK0U,oBAErB8B,wBAAwBxW,KAAK0O,QAAQwG,OAEtClV,KAAK0O,QAAQwG,MAAMzU,cAAc,wBACnCyK,EAAYuL,kBAAkBzW,KAAK0O,QAAQwG,MAAOlV,KAAKW,mBAGpD2G,UAAUd,aAAaxG,KAAK0O,QAAQwG,MAAOR,QAC3ChG,QAAQhI,GAAGwJ,cAAcvJ,YAAY3G,KAAK0O,QAAQhI,2CAIlDgI,QAAQhI,GAAGhE,MAAMsC,gCAA2BhF,KAAK2H,MAAMwF,kBAC1DnN,KAAK2H,MAAMyF,kEAICpH,QACToQ,yBAEC1B,EAAevU,SAAS8G,cAAc,UAC5CyN,EAAa7T,UAAUG,IAAI,gBAAiB,wBAC5C0T,EAAahK,aAAa,KAAM,wBAChCgK,EAAahS,MAAMgU,oBAAe1W,KAAK0O,QAAQ6E,KAAKhR,aAEhDvC,KAAK0O,QAAQhI,GAAGjG,cAAc,OAAQ,KAClCkW,EAAM3W,KAAK0O,QAAQhI,GAAGjG,cAAc,OAAOJ,aAAa,OACxDuW,EAAMzW,SAAS8G,cAAc,OACnC2P,EAAIlM,aAAa,MAAOiM,GACxBjC,EAAaxN,YAAY0P,GAGvB5W,KAAK6U,WACFvN,UAAUd,aAAakO,EAAc1O,EAAK6Q,qBACtC7W,KAAK4U,YACTtN,UAAUd,aAAakO,EAAc1O,qDAOtC0O,EAAe1U,KAAK0U,eACtBA,GAAcA,EAAaxE,cAAcvJ,YAAY+N,+CAInDA,EAAe1U,KAAK0U,oBACrBU,SAASC,KAAOX,EAAaoC,yBAA2B9W,KAAK0O,QAAQhI,GACtE1G,KAAK0O,QAAQhI,GAAGoQ,uBAChBpC,EAAaoC,4BACZ1B,SAASE,KAAOZ,EAAamC,qBAAuB7W,KAAK0O,QAAQhI,GAClE1G,KAAK0O,QAAQhI,GAAGmQ,mBAChBnC,EAAamC,mEAGK1L,MAEtBA,EAAMlG,iBAAiB,aAAcjF,KAAKsB,UAAU,GAEpD6J,EAAMlG,iBAAiB,YAAajF,KAAKsB,UAAU,GAEzB,QAAtBtB,KAAK0O,QAAQ9I,KACH,IAAImJ,EAAI5D,EAAM1K,cAAc,8EAM1CN,SAAS8E,iBAAiB,YAAajF,KAAKuB,SAC5CpB,SAAS8E,iBAAiB,WAAYjF,KAAKwB,QAE3CrB,SAAS8E,iBAAiB,YAAajF,KAAKuB,SAC5CpB,SAAS8E,iBAAiB,UAAWjF,KAAKwB,aAErCgT,OAAOnK,SAAQ,SAACc,GACnB0G,EAAK2E,wBAAwBrL,uEAK3BnL,KAAKqU,SAAU,YACZkB,MAAMC,eAAiB,OAEvB1V,OAAO0J,iBAAiB,wBAAwBa,SAAQ,SAACc,EAAO4L,OAC7DC,EAAoB7L,EAAM9K,aAAa,gCAEzC4W,SAASD,EAAmB,MAASD,EAAQ,IAC/C9E,EAAKsD,MAAMC,gBAAkB,UAI3B0B,EAAiBlX,KAAKqU,SAAS8C,MAAK,SAAC9C,UAAaA,EAAS+C,SAAS1E,SAAST,EAAKsD,MAAMC,2BACzFhV,gBAAgBK,WAAUE,iBAAUf,KAAKuV,MAAME,cAC/CjV,gBAAgBK,UAAUG,IAAIkW,EAAevB,YAC7CjV,oBAAoB+K,UAAYyL,EAAeG,UAC/CvC,WAAaoC,EAAeI,aAG9B3W,4DAIC4W,EAAQrR,MAAMsR,KAAKxX,KAAKF,OAAO0J,iBAAiB,yBAAyBkM,KAAI,SAACvK,SAAW,CAC7F2B,GAAI3B,EAAM2B,OAGZnH,EAAgB3F,KAAKF,OAAQ,kBAAmB,GAAI,CAClDgN,GAAI9M,KAAKF,OAAOgN,GAChBgI,WAAY9U,KAAK8U,WACjByC,MAAAA,WArUgC3X,GCMjB6X,wBAEPnI,EAAaoI,kBAClBpI,YAAcA,OACdqI,iBAAmB3X,KAAKsP,YAAY9F,iBAAiB,gCACrDoO,YAAc5X,KAAKsP,YAAY9F,iBAAiB,2BAChDqO,WAAa7X,KAAKsP,YAAY9F,iBAAiB,0BAC/CsO,gBAAkB9X,KAAKsP,YAAY7O,cAAc,qBACjDsX,YAAc/X,KAAKsP,YAAY7O,cAAc,wBAC7CuX,SAAWhY,KAAKsP,YAAY7O,cAAc,mCAC1CiX,MAAQA,OAERO,cAAe,OAEfC,WAAajB,SAAS7U,OAAO4F,iBAAiBhI,KAAKsP,YAAY7O,cAAc,wBAAyB,MAAM0X,iBAAiB,SAAU,IAAM,OAC7IC,WAAanB,SAAS7U,OAAO4F,iBAAiBhI,KAAKsP,YAAY7O,cAAc,qBAAsB,MAAM0X,iBAAiB,SAAU,IAAM,OAE1IvH,gEAIAyH,4BACAC,qCAGAZ,MAAMrN,SAAQ,SAAC8B,GAClB3E,GAAGoE,OAAOO,GAAMe,GAAG,eAAe,WAEhC6B,EAAIwJ,SAASpM,GAEb4C,EAAIyJ,eAGJpX,EAAKqX,kBAAkBjR,GAAG3E,MAAM/C,QAChCsB,EAAKsX,eAAevM,EAAM3E,GAAG3E,OAE7B2E,GAAG3E,MAAMC,4BAIRmV,cAAe,iEAMfN,iBAAiBtN,SAAQ,SAACc,GAC7B0G,EAAK8G,kCAAkCxN,sDAInBqJ,OAChBoE,EAAepE,EAAO7K,OACtBkP,EAAc7Y,KAAKkY,WACnBY,EAAc9Y,KAAKoY,WACnBW,EAAcF,EAAcC,EAG5BE,EAFY,YAEyBJ,EAA4B,EAAhD,aAGvBpE,EAAOnK,SAAQ,SAACc,EAAO4L,OAGfkC,EAAS9V,KAAKC,GARJ,YAQW2T,GAAsB,EAAMiC,EAGjDjX,EAAK8W,EAAc1V,KAAK+V,IAAID,GAAUF,EACtC/W,EAAK6W,EAAc1V,KAAKgW,IAAIF,GAAUF,EAK5C5N,EAAMzI,MAAMe,eAAU1B,EAAEkK,QAAQ,SAChCd,EAAMzI,MAAMiB,cAAS3B,EAAEiK,QAAQ,oFAS5BmN,oBAEA9J,YAAYrK,iBAAiB,SAAS,SAACpC,GAC1CoP,EAAKoH,eAAepH,EAAK3C,aACzBzM,EAAMC,yBAGHwM,YAAYrK,iBAAiB,eAAe,SAACpC,GAChDoP,EAAKoH,eAAepH,EAAK3C,aACzBzM,EAAMC,8EAIwBkD,cAC1BmF,EAAQnF,EAGRsT,EAASnO,EAAM9K,aAAa,yBAEnB,mBAAXiZ,EACFnO,EAAMlG,iBAAiB,SAAS,WAC9B8J,EAAIyB,YAAW,GACf6B,EAAKgH,oBACJ,GAGe,gBAAXC,EACP9R,GAAGoE,OAAOT,GAAO+B,GAAG,SAAS,WAC3B+B,EAAQsK,aACRlH,EAAKgH,oBACJ,GAGe,qBAAXC,EACPnO,EAAMlG,iBAAiB,SAAS,WAC9BwS,EAAc+B,YAAY,QAC1BnH,EAAKgH,oBACJ,GAGe,oBAAXC,EACPnO,EAAMlG,iBAAiB,SAAS,WAC9BwS,EAAc+B,YAAY,OAC1BnH,EAAKgH,oBACJ,GAGe,oBAAXC,GACPnO,EAAMlG,iBAAiB,SAAS,WAC9BwS,EAAc+B,YAAY,OAC1BnH,EAAKgH,oBACJ,GA2BLlO,EAAMlG,iBAAiB,cAAc,SAACpC,GACpCwP,EAAK2F,SAAS5Q,UAAYvE,EAAM4W,cAAcpZ,aAAa,iCAC3DgS,EAAK2F,SAAStV,MAAMgX,QAAU,WAC7B,GACHvO,EAAMlG,iBAAiB,cAAc,WACnCoN,EAAK2F,SAAS5Q,UAAY,GAC1BiL,EAAK2F,SAAStV,MAAMgX,QAAU,UAC7B,0CAgDUC,EAAY9W,OACnBsJ,EAAOwN,GAAcxZ,SAASM,cAAc,4BAE5CmZ,ER1DH,SAA0B/W,SAIxB,CACLd,EAAGc,EAAME,MACTf,EAAGa,EAAMI,OQoDc4W,CAAiBhX,GAClCiL,EAAgBzG,EAAgB8E,QACjCmD,YAAY5E,aAAa,eAAgBoD,EAAc/L,QACvDuN,YAAY5E,aAAa,eAAgBoD,EAAc9L,QAGvDsN,YAAY5M,MAAMiB,cAASiW,EAAe5X,EAAI,aAC9CsN,YAAY5M,MAAMe,eAAUmW,EAAe7X,EAAI,YAG9C+X,EAAwB9Z,KAAKsP,YAAY9F,iBAAiB,mBAC3DuQ,wBAAwBD,GAG7B5Q,EAAWlJ,KAAKsP,YAAa,iEAU7BrG,EAAcjJ,KAAKsP,YAAa,aAEhCP,EAAIkF,aAEJlF,EAAIyJ,eAGJwB,YAAW,WACJhR,EAAW6J,EAAKvD,YAAa,cAChCuD,EAAK8E,iBAAiBtN,SAAQ,SAACc,GAC7BlC,EAAckC,EAAO,kBAGxB,gDAIC8O,cAEC3K,YAAYrK,iBAAiB,cAAc,WAC9CgV,EAAkBD,YAAW,WAC3B1G,EAAK+F,eAAe/F,EAAKhE,eACxB,aAGAA,YAAYrK,iBAAiB,cAAc,WAC9CiV,aAAaD,gDAICE,IACZnR,EAAWmR,EAAa,aAAwC,SAAzBA,EAAY7N,YACrDpD,EAAWlJ,KAAK8X,gBAAiB,kBAG5BF,YAAYvN,SAAQ,SAAC+P,GACxBlR,EAAWkR,EAAY,qBAGpBvC,WAAWxN,SAAQ,SAACgQ,GACvBpR,EAAcoR,EAAW,iBAMzBrR,EAAWmR,EAAa,gBAC1BjR,EAAWlJ,KAAK8X,gBAAiB,kBAG5BF,YAAYvN,SAAQ,SAAC+P,GACxBlR,EAAWkR,EAAY,qBAGpBvC,WAAWxN,SAAQ,SAACgQ,GACvBpR,EAAcoR,EAAW,iBAMzBrR,EAAWmR,EAAa,kBAC1BlR,EAAcjJ,KAAK8X,gBAAiB,aAG/B9O,EAAWmR,EAAa,wBACtBvC,YAAYvN,SAAQ,SAAC+P,GACxBnR,EAAcmR,EAAY,qBAGvBvC,WAAWxN,SAAQ,SAACgQ,GACvBnR,EAAWmR,EAAW,kBAOC,UAAzBF,EAAY7N,UACdpD,EAAWlJ,KAAK8X,gBAAiB,aACjC7O,EAAcjJ,KAAK+X,YAAa,kBAE3BH,YAAYvN,SAAQ,SAAC+P,GACxBnR,EAAcmR,EAAY,qBAGvBvC,WAAWxN,SAAQ,SAACgQ,GACvBpR,EAAcoR,EAAW,kBAIvBrR,EAAWmR,EAAa,iBAC1BlR,EAAcjJ,KAAK+X,YAAa,cAEhC7O,EAAWlJ,KAAK8X,gBAAiB,aACjC5O,EAAWlJ,KAAK+X,YAAa,cAG/BhJ,EAAIuL,WAAWH,0CAzKAlH,OAAOnK,yDAAU,6BAC9BjJ,EAAWM,SAASM,cAAcqI,GAClCwD,EAAWzM,EAASyM,SACpBuC,EAAW,eAEf5F,EAAcpJ,EAAU,YACxBqJ,EAAWrJ,EAAUoT,GAGb3G,OACD,iBAGA,MAMHA,GAJEzM,EADEA,EAASqQ,cAAcC,WAAW,GACzBtQ,EAASqQ,cAAcC,WAAW,GAElCtQ,EAASqQ,eAEF5D,uBAGpB5M,QAAQC,IAAI,6BAA8B2M,GAI1CyC,EAAIC,6BAA6BnP,KAAWgP,EAAW,cAGrDO,EAAQvP,EAASiN,GAAGrD,MAAM,KAAK,GAGrC9D,EAAgBxF,SAAU,aAAc,GAAI,CAC1CsN,IAAK,CACHX,GAAIsC,EACJ1B,KAAMmB,EACNhI,KAAMhH,EACNyM,SAAAA,EACAqB,aAAa,EACbsF,MAAAA,cC/NasH,yCAGZC,QAAU,wCASdC,EAAQC,eAETD,EAASza,KAAK2a,OAAOF,IAEdpQ,SAAQ,SAACxH,GAETzB,EAAKoZ,QAAQ3X,KAChBzB,EAAKoZ,QAAQ3X,GAAS,IAGxBzB,EAAKoZ,QAAQ3X,GAAO0K,KAAKmN,kCAKzBD,EAAQC,eAEVD,EAASza,KAAK2a,OAAOF,IAEdpQ,SAAQ,SAACxH,GAETgP,EAAK2I,QAAQ3X,KAElBgP,EAAK4I,OAAO5X,GAASgP,EAAK2I,QAAQ3X,GAAO+X,QAAO,SAACC,UACxCA,IAAeH,yCASpBD,EAAQK,cAEdL,EAASza,KAAK2a,OAAOF,GAErB/a,QAAQC,IAAI8a,EAAQK,GAEpBL,EAAOpQ,SAAQ,SAACxH,GAEToP,EAAKuI,QAAQ3X,IAElBoP,EAAKuI,QAAQ3X,GAAOwH,SAAQ,SAACqQ,GAC3BA,EAAGnM,KAAK0D,EAAMpP,EAAOiY,wCAOpBL,UACEA,EAAO5Q,QAAQ,aAAc,IAAIJ,MAAM,gBChE5CsR,EAAc,CAClBC,OAAQ,CACNlO,GAAI,SACJmO,QAAS,iBACTC,WAAY,oBACZC,WAAY,oBACZC,OAAQ,iBAEVC,SAAU,CACRvO,GAAI,WACJsO,OAAQ,mBAEVE,SAAU,CACRxO,GAAI,WACJyO,WAAY,sBACZC,cAAe,yBACfC,cAAe,yBACfL,OAAQ,mBAEVM,YAAa,CACX5O,GAAI,cACJ6O,IAAK,kBACLC,OAAQ,qBACRC,OAAQ,qBACRT,OAAQ,sBAEVU,MAAO,CACLhP,GAAI,QACJ6O,IAAK,MACLC,OAAQ,SACRC,OAAQ,SACRT,OAAQ,WCwGNU,EAAQ,gFAnHLC,MAAQ,KACRA,MAAMC,KAAO,8DAGJC,OACVC,GAAY,cACXH,MAAMC,KAAK3R,SAAQ,SAACrE,EAAM0D,GAEzB1D,EAAK8G,KAAOmP,IACdC,EAAY,CAAElW,KAAAA,EAAM+Q,MAAOrN,OAKxBwS,iCAGFC,MAE0B,IAA3Bnc,KAAK+b,MAAMC,KAAKrS,QAAiB3J,KAAKoc,gBAAgBD,EAAarP,UAoB/D,IAAIuP,MAAM,6CAlBZtH,IAAcoH,EAAa/W,KAAKkX,wBAClCH,EAAa/W,KAAKkX,sBAAwB,SAGvCP,MAAMC,KAAKzO,KAAK4O,GAErBL,EAAMS,QAAQxB,EAAYC,OAAOI,OAAQ,CACvC9B,OAAQ,CACNxM,GAAIiO,EAAYC,OAAOlO,GACvBlH,KAAMmV,EAAYC,OAAOC,QACzB7V,KAAM,CACJ+W,aAAAA,wCAYAA,OAEJD,EAAYlc,KAAKoc,gBAAgBD,EAAarP,QAEhC,IAAdoP,cAEGH,MAAMC,KAAKQ,OAAON,EAAUnF,MAAO,GAExC+E,EAAMS,QAAQxB,EAAYC,OAAOI,OAAQ,CACvC9B,OAAQ,CACNxM,GAAIiO,EAAYC,OAAOlO,GACvBlH,KAAMmV,EAAYC,OAAOE,WACzB9V,KAAM,CACJ+W,aAAc,CACZM,SAAUN,EAAaM,SACvB3P,GAAIqP,EAAarP,GACjBhG,QAASqV,EAAarV,QACtB1B,KAAM,SAOP,QAGH,IAAIiX,MAAM,8EAGPK,eAGL3H,IAAc2H,GAASA,EAAKD,SAEXzc,KAAK+b,MAAMC,KAAKpB,QAAO,SAAC5U,UAASA,EAAKyW,WAAaC,EAAKD,YAF1Bzc,KAAK+b,MAAMC,uCAOtDU,eAIK3H,IAAT2H,KACmC,IAHnB,CAAC,WAAY,KAAM,WAGvBzY,QAAQyY,EAAKC,OAExBzW,MAAMC,QAAQuW,EAAKzM,SACtByM,EAAKzM,MAAQ,CAACyM,EAAKzM,QAMAjQ,KAAK+b,MAAMC,KAAKpB,QAAO,SAAC5U,UAAUA,EAAK0W,EAAKC,OAASD,EAAKzM,MAAM,IAAQjK,EAAK0W,EAAKC,OAASD,EAAKzM,MAAM,2CAKlHyM,WAEL3H,IAAc2H,IAASA,EAAKD,gBACvBzc,KAAK+b,MAAMC,KAAKhc,KAAK+b,MAAMC,KAAKrS,OAAS,OAG5CiT,EAAe5c,KAAK+b,MAAMC,KAAKpB,QAAO,SAAC5U,UAASA,EAAKyW,WAAaC,EAAKD,mBAEtEG,EAAaA,EAAajT,OAAS,UArH1B4Q,ICiGduB,EAAQ,gFArGLC,MAAQ,2DAIFjP,OACP+P,GAAe,cACdd,MAAM1R,SAAQ,SAACrE,EAAM0D,GAEpB1D,EAAK8G,KAAOA,IACd+P,EAAe,CAAE7W,KAAAA,EAAM+Q,MAAOrN,OAK3BmT,8BAGLzX,MAIwB,IAAtBpF,KAAK+b,MAAMpS,QAAiB3J,KAAK8c,aAAa1X,EAAK0H,UAY/C,IAAIuP,MAAM,gDAVXN,MAAMxO,KAAKnI,GAEhB0W,EAAMS,QAAQxB,EAAYW,YAAY5O,GAAI,CACxCwM,OAAQ,CACN1T,KAAMmV,EAAYW,YAAYC,KAEhCvW,KAAAA,mCASCA,OAECyX,EAAe7c,KAAK8c,aAAa1X,EAAK0H,QAEvB,IAAjB+P,cAEGd,MAAMS,OAAOK,EAAa9F,MAAO,GAEtC+E,EAAMS,QAAQxB,EAAYW,YAAY5O,GAAI,CACxCwM,OAAQ,CACN1T,KAAMmV,EAAYW,YAAYE,QAEhCxW,KAAAA,KAGK,QAGH,IAAIiX,MAAM,0EAKXK,eAED3H,IAAc2H,GAASA,EAAK1B,OAEXhb,KAAK+b,MAAMnB,QAAO,SAAC5U,UAASA,EAAK8G,KAAO4P,EAAK5P,MAFjB9M,KAAK+b,oCAOlDW,eAIU3H,IAAT2H,IAA2D,IAF5C,CAAC,MAEoBzY,QAAQyY,EAAKC,OAIjDzW,MAAMC,QAAQuW,EAAKzM,SACtByM,EAAKzM,MAAQ,CAACyM,EAAKzM,QAGAjQ,KAAK+b,MAAMnB,QAAO,SAAC5U,UAAUA,EAAK0W,EAAKC,OAASD,EAAKzM,MAAM,IAAQjK,EAAK0W,EAAKC,OAASD,EAAKzM,MAAM,uCAMhHyM,WAEF3H,IAAc2H,IAASA,EAAK1B,cACvBhb,KAAK+b,MAAM/b,KAAK+b,MAAMpS,OAAS,OAGlCoT,EAAe/c,KAAK+b,MAAMnB,QAAO,SAAC5U,UAASA,EAAK8G,KAAO4P,EAAK5P,aAE3DiQ,EAAaA,EAAapT,OAAS,UAvGpB4Q,ICiBLyC,yBAEPnd,mDACJA,KAIDod,QAAU7b,EAAKtB,SACfgN,GAAK1L,EAAK6b,QAAQnQ,KAElBoQ,SAAW5I,KAAKC,MAAMpU,SAASM,mDAA4CW,EAAK0L,UAAQzM,aAAa,2BAErGqc,Kb8DF,SAASS,EAAYrd,EAAQsd,OAC5BC,EAAS/X,OAAOC,OAAO,GAAIzF,UAC7BiG,EAAWjG,IAAWiG,EAAWqX,IACnC9X,OAAOgY,KAAKF,GAAQ/S,SAAQ,SAACsS,GACvB5W,EAAWqX,EAAOT,KACdA,KAAO7c,EAGXud,EAAOV,GAAOQ,EAAYrd,EAAO6c,GAAMS,EAAOT,IAGhDrX,OAAOC,OAAO8X,OAAWV,EAAMS,EAAOT,QAIrCU,Ea7EOF,CAAYH,EAAOO,SAAUnc,EAAK8b,YAEzCM,OAAS,CACZC,QAAS,CACP,SAEFC,YAAa,CACX,cAAe,eAAgB,YAAa,SAE9CC,SAAU,CACR,cAAe,eAAgB,gBAI9BC,WAAa,IAEbC,SAAU,IAEV5P,UAAY,OACZ6P,sBAAwB,KACxBC,YAAc,OACdC,oBAAsB,OACtBC,oBAAsB,OACtBC,kBAAoB,OAEpBC,oBAAqB,IACrBC,mBAAqB,OAErBC,2BAA4B,IAC5BC,eAAiB,OAEjBC,YAAa,IACbC,QAAU,KAEVC,gBAAkB,KAClBC,eAAiB,KAEjBC,UAAY,KAEZC,4BAA8B,KAC9BC,+BAAiC,eACjCC,8BAAgC,KAChCC,iCAAmC,eACnCC,oBAAqB,IACrBC,WAAY,IAEZC,cAAgB,OAEhB3J,MAAQ,CACXrN,KAAM/H,SAAS+H,KACf9F,OAAAA,UAGGwO,4DAIDoM,EAAOmC,SAASnf,KAAK0c,eAEhB0C,MAAQpf,KAAKid,QAAQxc,yBAAkBT,KAAK0c,KAAK2C,iBAGjDC,aAAetf,KAAKof,MAAM3e,cAAc,SAAS+I,iBAAiB,mBAClE+V,WAAavf,KAAKof,MAAM3e,cAAc,UAC3C,MAAO+e,QACF3B,SAAU,YAGZA,SAAU,EAGbb,EAAOyC,YAAYzf,KAAK0c,aACrB6B,YAAa,QAGfrd,QAAUlB,KAAKid,QAAQxc,yBAAkBT,KAAK0c,KAAKgD,cAG/B,UAArB1f,KAAK0c,KAAKiD,SACZzW,EAAWlJ,KAAKof,MAAO,UAGE,UAArBpf,KAAK0c,KAAKiD,cACPlB,gBAAgBmB,KAAO5f,KAAKkB,QAAQkG,eACpCqX,gBAAgBpH,KAAOrX,KAAKkB,QAAQuK,eACpCiT,eAAekB,KAAO5f,KAAKkB,QAAQkG,eACnCsX,eAAerH,KAAOrX,KAAKkB,QAAQuK,eAEnCmT,4BAA8B5e,KAAK6f,iCACnCf,8BAAgC9e,KAAK6f,6BAIxC7f,KAAKue,kBACFC,QAAQ3e,SAAWG,KAAKid,QAAQxc,cAAc,wBAC9C+d,QAAQsB,UAAY9f,KAAKwe,QAAQ3e,SAASY,cAAc,sCAG1Dsf,4BAIkB,gBAArB/f,KAAK0c,KAAKiD,aACPK,wFAMFpC,WAAa5d,KAAK4d,WAAa,YAC1B5d,KAAK8M,eAAM9M,KAAK4d,4EAIrBA,WAAa5d,KAAK4d,WAAa,kBACpB5d,KAAK8M,eAAM9M,KAAK4d,+EAO3B1c,QAAQ+D,iBAAiB,YAAajF,KAAKigB,aAAarf,KAAKZ,OAAO,QACpEkB,QAAQ+D,iBAAiB,YAAajF,KAAKigB,aAAarf,KAAKZ,OAAO,QAIpEuV,MAAMrN,KAAKjD,iBAAiB,UAAWjF,KAAKigB,aAAarf,KAAKZ,OAAO,GAGjD,UAArBA,KAAK0c,KAAKiD,aAEPze,QAAQ+D,iBAAiB,WAAW,SAACwN,Ob3FFyN,Ea6FhCjS,EAAY7L,OAAO+d,eACnBC,EAAU3N,EAAE4N,OAAS5N,EAAE2N,QACzBE,EAAU7N,EAAEkK,OAGhB9K,EAAKlR,eAGW,cAAZ2f,GAAuC,WAAZA,MACzBrS,EAAUsS,WAAY,CACxBne,OAAO8X,aAAarI,EAAKgN,oCAEnB2B,EAAQvS,EAAUwS,WAAW,GAC7BC,EAAaF,EAAME,gBAErB7O,EAAKiM,sBAAsBC,gBAG3B2C,EAAWC,SAASH,EAAMI,eAAgBJ,EAAMK,YAAc,GAC9D,MAAOpO,GAEPiO,EAAWC,SAASH,EAAMI,eAAgBJ,EAAMK,aAChDH,EAAWI,UAAS,QAItBJ,EAAWC,SAASH,EAAMI,eAAgBJ,EAAMK,aAIlDH,EAAWK,OAAOP,EAAMQ,aAAcR,EAAMS,eAItCC,EADgBR,EAAWS,gBACSC,YAAYC,UAEzB,KAAxBH,GAAsD,WAAxBA,GAAqCrP,EAAKmN,mBAAoB,KAEzFsC,EAAoBnhB,SAAS8G,cAAc,QACjDqa,EAAkBnY,4CAAuC0I,EAAK+M,6BAE9D8B,EAAWa,iBAAiBD,GAE5BrT,EAAUuT,kBACVvT,EAAUwT,SAASjB,GAEnB3O,EAAKgN,+BAAiC7E,YAAW,WAE/CnI,EAAKmN,oBAAqB,MAGpB0C,EAAevhB,SAAS8G,cAAc,QAC5Cya,EAAaC,iBAAkB,EAC/BD,EAAavY,UAAY,wBAEnByY,EAAiB/P,EAAKgQ,oBAC5BH,EAAa5U,GAAK8U,MAEZE,EAAY3hB,SAASqJ,4BAAqBqI,EAAK+M,8BAErDxY,EAAesb,EAAcI,EAAU,IAEvCA,EAAUzX,SAAQ,SAAC3D,EAAIgD,GACrBgY,EAAaxa,YAAYR,UAKrBqb,EAAY5hB,SAAS8G,cAAc,QACzC8a,EAAU5Y,UAAY0I,EAAK6K,KAAKsF,cAQhCD,EAAU9c,iBAAiB,QANN,SAACwN,OACdwP,EAAexP,EAAEgH,cAAclT,WACrCsL,EAAKqQ,2BAA2BD,GAChCxP,EAAEjH,mBAG6C5K,KAAKiR,IAEtD1R,SAASgiB,eAAeP,GAAgB1a,YAAY6a,GAEpDlQ,EAAKuQ,wBAAyB,EAC9BvQ,EAAK+M,4BAA8B/M,EAAKgO,8BAEvC,KAEHhO,EAAKmN,oBAAqB,EAE1BvM,EAAE3P,qBAEG,KAEA+O,EAAKmN,0BAIVvM,EAAE3P,wBAOH,IbpMiCod,EaoMCE,GbjMhC,IAAMF,EAAU,IAChB,IAAXA,GAA4B,IAAXA,GAChBA,EAAU,IAAMA,EAAU,IAC1BA,EAAU,IAAMA,EAAU,KAC1BA,EAAU,KAAOA,EAAU,KAC3BA,EAAU,KAAOA,EAAU,Oa+LlBrO,EAAKiM,sBAAsBC,YAAa,IAG1B,KAAZqC,EAAgB,KACbvO,EAAKmN,0BAKVsB,EAAU,OAIRrS,EAAUsS,WAAY,CAExBne,OAAO8X,aAAarI,EAAKkN,sCAEnByB,EAAQvS,EAAUwS,WAAW,GAC7BC,EAAaF,EAAME,aAEzBA,EAAWC,SAASH,EAAMI,eAAgBJ,EAAMK,aAChDH,EAAWK,OAAOP,EAAMQ,aAAcR,EAAMS,eAEtCoB,EAAmBliB,SAAS8G,cAAc,QAChDob,EAAiBV,iBAAkB,EACnCU,EAAiBlZ,6CAAwC0I,EAAKiN,+BAC9DuD,EAAiBjb,UAAYkZ,EAE7BI,EAAW4B,WAAWD,GAGtB7B,EAAM+B,cAAcF,GAEpBpU,EAAUuT,kBACVvT,EAAUwT,SAASjB,GAEnB3O,EAAKkN,iCAAmC/E,YAAW,WAEjDnI,EAAKmN,oBAAqB,MAGpB0C,EAAevhB,SAAS8G,cAAc,QAC5Cya,EAAaC,iBAAkB,EAC/BD,EAAavY,UAAY,yBAEnByY,EAAiB/P,EAAKgQ,oBAC5BH,EAAa5U,GAAK8U,MAEZE,EAAY3hB,SAASqJ,4BAAqBqI,EAAKiN,gCAErD1Y,EAAesb,EAAcI,EAAU,IAEvCA,EAAUzX,SAAQ,SAAC3D,EAAIgD,GACrBgY,EAAaxa,YAAYR,UAKrBqb,EAAY5hB,SAAS8G,cAAc,QACzC8a,EAAU5Y,UAAY0I,EAAK6K,KAAKsF,cAQhCD,EAAU9c,iBAAiB,QANN,SAACwN,GAEpBhM,EADqBgM,EAAEgH,cAAclT,YAErCkM,EAAEjH,mBAG6C5K,KAAKiR,IACtD1R,SAASgiB,eAAeP,GAAgB1a,YAAY6a,GAEpDlQ,EAAKiN,8BAAgCjN,EAAKgO,8BAEzC,KAEHhO,EAAKmN,oBAAqB,GAKW,IAAnCnN,EAAKwM,4BACPxM,EAAKwM,2BAA4B,GAGnC5L,EAAE3P,qBAIC,CACHV,OAAO8X,aAAarI,EAAKkN,sCAEnByB,EAAQvS,EAAUwS,WAAW,GAC7BC,EAAaF,EAAME,gBAEzBA,EAAWC,SAASH,EAAMI,eAAgBJ,EAAMK,aAChDH,EAAWK,OAAOP,EAAMQ,aAAcR,EAAMS,YAGrB,IAAnBpP,EAAKoN,WAAuBhR,EAAUjD,WAAWrB,OAAS,EAAG,CAE/DkI,EAAKqN,cAAgB/e,SAAS8G,cAAc,QAC5C4K,EAAKqN,cAAcyC,iBAAkB,EACrC9P,EAAKqN,cAAc/V,UAAY,wBAEzBqZ,EAAiB3Q,EAAKgQ,oBAC5BhQ,EAAKqN,cAAcpS,GAAK0V,MAElBC,EAAqBtiB,SAAS8G,cAAc,QAClDwb,EAAmBtZ,UAAY,0BAE/B0I,EAAKqN,cAAchY,YAAYub,GAE/B/B,EAAWa,iBAAiB1P,EAAKqN,mBAG3B6C,EAAY5hB,SAAS8G,cAAc,QACzC8a,EAAU5Y,UAAY0I,EAAK6K,KAAKsF,cAQhCD,EAAU9c,iBAAiB,QANN,SAACwN,OACdwP,EAAexP,EAAEgH,cAAclT,WACrCsL,EAAKqQ,2BAA2BD,GAChCxP,EAAEjH,mBAG6C5K,KAAKiR,IACtDA,EAAKqN,cAAchY,YAAY6a,GAKjClQ,EAAKoN,WAAY,MAEXyD,EAAmBviB,SAAS8G,cAAc,QAChDyb,EAAiBf,iBAAkB,EACnCe,EAAiBvZ,6CAAwC0I,EAAKiN,+BAG9D4D,EAAiBtb,oBAAekZ,GAGhCla,EAAesc,EAAkB7Q,EAAKqN,eACtCsB,EAAM+B,cAAcG,GAEpBzU,EAAUuT,kBACVvT,EAAUwT,SAASjB,GAEnB3O,EAAKkN,iCAAmC/E,YAAW,WACjDnI,EAAKoN,WAAY,MAGX0D,EAAcxiB,SAAS8G,cAAc,QAC3C0b,EAAYhB,iBAAkB,EAC9BgB,EAAYxZ,UAAY,yBAElByY,EAAiB/P,EAAKgQ,oBAC5Bc,EAAY7V,GAAK8U,MAEXE,EAAY3hB,SAASqJ,4BAAqBqI,EAAKiN,gCAErD1Y,EAAeuc,EAAab,EAAU,IAEtCA,EAAUzX,SAAQ,SAAC3D,EAAIgD,GACrBiZ,EAAYzb,YAAYR,UAGpBqb,EAAY5hB,SAAS8G,cAAc,QACzC8a,EAAU5Y,UAAY0I,EAAK6K,KAAKsF,cAQhCD,EAAU9c,iBAAiB,QANN,SAACwN,GAEpBhM,EADqBgM,EAAEgH,cAAclT,YAErCkM,EAAEjH,mBAG6C5K,KAAKiR,IACtD1R,SAASgiB,eAAeP,GAAgB1a,YAAY6a,GAEpDlQ,EAAKiN,8BAAgCjN,EAAKgO,8BAEzC,KAEHpN,EAAE3P,qBAQN9C,KAAK6d,cACF+E,sBAGH5iB,KAAKue,iBACFC,QAAQsB,UAAU7a,iBAAiB,SAAS,WAE3B4d,QAAQ,+EAG1BhR,EAAK3Q,QAAQkG,UAAYyK,EAAK4M,gBAAgBmB,2DAS/C,IAAIlW,EAAI,EAAGoZ,EAAM9iB,KAAKsf,aAAa3V,OAAQD,EAAIoZ,EAAKpZ,GAAK,OACvD4V,aAAa5V,GAAGzE,iBAAiB,QAASjF,KAAK+iB,mBAAmBniB,KAAKZ,OAAO,QAGhFuf,WAAWta,iBAAiB,QAASjF,KAAKgjB,iBAAiBpiB,KAAKZ,OAAO,2EAsBvEijB,qBAAuBjjB,KAAKid,QAAQzT,4BAHxB,8BAIZyZ,qBAAqB5Y,SAAQ,SAAC6Y,GAEjCA,EAAYje,iBAAiB,SAAS,WACpC4D,EAAcqa,EAAajR,EAAKyK,KAAKhB,YAAYyH,mBAC3CC,EAAYnR,EAAKnF,GAAGjD,QAAQ,UAAW,OAEzCb,EAAWka,EAAajR,EAAKyK,KAAKhB,YAAYyH,eAAgB,CAEhEE,EAAYriB,IAAI,CACdga,OAAQ/I,EAAKnF,GACbA,GAAIoW,EAAYpW,GAChBwW,IAAKJ,EACLK,QAASjP,KAAKC,MAAM2O,EAAY7iB,aAhBvB,2BAoBLkjB,EAAUjP,KAAKC,MAAM2O,EAAY7iB,aAAa,qBAEpDsF,EAAgBxF,SAAU,gBAAiB,GAAI,CAC7CkX,KAAM,CACJvK,GAAIsW,EACJ1V,KAAM,MACN6V,QAAAA,EACAtT,MAAOiT,EAAY/b,WAAU,WAKjCkc,SAAmB,CACjBrI,OAAQ/I,EAAKnF,GACbA,GAAIoW,EAAYpW,KAIlBnH,EAAgBxF,SAAU,gBAAiB,GAAI,CAC7CkX,KAAM,CACJvK,GAAIsW,EACJ1V,KAAM,SACNuC,MAAOiT,KAMbjR,EAAKtR,8DAOA6iB,2DAEU,IAAfA,IAK4B,IAA5BxjB,KAAKme,mBAKLnV,EAAWhJ,KAAKof,MAAO,YAAyC,IAA5Bpf,KAAKme,0BACtCsF,qBACLxa,EAAcjJ,KAAKof,MAAO,WAX1BlW,EAAWlJ,KAAKof,MAAO,2DA6BrBsE,EACAC,EAbEC,EbncH,SAA6Bld,OANNL,EAASC,EAMCud,6DAEhCC,EAAgBpd,EAAGS,WAAU,GAEnC2c,EAAcphB,MAAMqhB,WAAa,SACjCD,EAAcphB,MAAMgX,QAAU,QAXFrT,EAadyd,GAbuBxd,EAaRI,GAXfH,WAAWC,aAAaH,EAASC,EAAc0d,iBAavDC,EAAeH,EAAclhB,wBAC7BshB,EAAcL,EAAchc,EAAqBic,GAAiBnb,EAAWmb,UAGnFrd,EAASqd,GAEF,CACLxhB,MAAO2hB,EAAa3hB,MACpBC,OAAQ0hB,EAAa1hB,OACrBoB,IAAKugB,EAAWvgB,IAChBF,KAAMygB,EAAWzgB,MagbM0gB,CAAoBnkB,KAAKof,OAC1CgF,EAA2Bvc,EAAqB7H,KAAKid,SACrDoH,EAAmB1b,EAAW3I,KAAKid,SAInCqH,EACItkB,KAAKie,oBAAoBxa,KAAOzD,KAAKie,oBAAoB3b,MAAQshB,EAAethB,MAAQtC,KAAK0c,KAAK6H,WAAWxiB,EAAMqiB,EAAyB3gB,KAAO4gB,EAAiB/hB,MADxKgiB,EAEEtkB,KAAKie,oBAAoBta,IAAMigB,EAAerhB,OAASvC,KAAK0c,KAAK6H,WAAWviB,EAAMoiB,EAAyBzgB,IACxG3D,KAAKie,oBAAoBta,IAAM3D,KAAKie,oBAAoB1b,OAASqhB,EAAerhB,OAASvC,KAAK0c,KAAK6H,WAAWviB,EAAMoiB,EAAyBzgB,IAAM0gB,EAAiB9hB,OAQ7KmhB,EAFEY,EAEetkB,KAAKie,oBAAoBxa,KAAOmgB,EAAethB,MAAQtC,KAAK0c,KAAK6H,WAAWxiB,EAI5E/B,KAAKie,oBAAoBxa,KAAOzD,KAAKie,oBAAoB3b,MAAQtC,KAAK0c,KAAK6H,WAAWxiB,EAMvG4hB,EAFEW,EAEctkB,KAAKie,oBAAoBta,IAAMigB,EAAerhB,OAASvC,KAAK0c,KAAK6H,WAAWviB,EAI5EhC,KAAKie,oBAAoBta,IAAMigB,EAAerhB,OAASvC,KAAK0c,KAAK6H,WAAWviB,OAIzFod,MAAM1c,MAAMe,eAAUigB,aACtBtE,MAAM1c,MAAMiB,cAASggB,iDAIXlR,QAEV+R,YAAW,GAEhB/R,EAAE3P,4DAIe2P,OAEXgS,EAAMhS,EAAEgH,cACRiL,EAAUD,EAAIpkB,aAAa,gBAC3BskB,EAAcF,EAAIpkB,aAAa,qBAG/B8E,EAAUmP,KAAKC,MAAMkQ,EAAIpkB,aAAa,8BAEvCukB,aAAaF,EAASC,EAAaxf,GAExCsN,EAAE3P,sDAIS2P,GAC2B,IAAZA,EAAE4N,OAIxBrX,EAAWyJ,EAAE3S,OAAQ,eAErBkJ,EAAWyJ,EAAE3S,OAAQ,mBAEV,cAAX2S,EAAE7M,YAGCuY,oBAAqB,GAEL,IAAjBne,KAAK6d,cACF2G,cAKM,YAAX/R,EAAE7M,MAAsB5F,KAAKme,0BAG1BL,sBAAwB,QAExB7P,UAAY7L,OAAO+d,oBACnBpC,YAAc/d,KAAK8d,sBAAsBC,YAAc/d,KAAKiO,UAAU8P,iBACtEC,oBAAsBhe,KAAKiO,UAAUwS,WAAW,QAEhDtC,oBAAqB,OAErBL,sBAAsB+G,aAAe7kB,KAAKiO,UAAU4W,kBACpD/G,sBAAsBgH,YAAc9kB,KAAKiO,UAAU6W,iBACnDhH,sBAAsBzG,KAAOrX,KAAKge,oBAAoBhT,YAKxB,IAA/BhL,KAAKiO,UAAU8P,aAAwE,KAA/C/d,KAAKge,oBAAoBhT,WAAWqW,cAEzEjD,mBAAsBpe,KAAKiO,UAAU4W,cAAgB7kB,KAAKiO,UAAU6W,YAAe,QAAU,QAE7E,IAAjB9kB,KAAK6d,eAEFkH,6BAEAP,qEAWL9C,EAAevhB,SAAS8G,cAAc,QAC5Cya,EAAavY,UAAY,2BAEpB6U,oBAAoBuD,iBAAiBG,OAEpCsD,EAAoBnd,EAAqB6Z,GACzCuD,EAAqBtc,EAAW+Y,QAEjCzD,oBAAsB,CACzBxa,KAAMuhB,EAAkBvhB,KACxBE,IAAKqhB,EAAkBrhB,IACvBrB,MAAO2iB,EAAmB3iB,MAC1BC,OAAQ0iB,EAAmB1iB,QAG7B0G,EAAcyY,EAAc,4BAEvBQ,2BAA2BR,8CAIfwD,EAAQC,GACzBD,EAAOhe,YAAYlH,KAAKge,oBAAoBoH,wBACvCpH,oBAAoBsE,WAAW4C,GAEpCA,EAAOxa,aAAa,cAAeya,qDAGXD,EAAQC,OAC1Bre,EAAUoe,EAAO7kB,aAAa,qBAGpCyb,EAAMuJ,OAAO,CACXrK,OAAQhb,KAAK8M,GACbA,GAAIqY,EACJ7B,IAAK4B,EACLpe,QAAAA,EACA1B,KAAM,SAMFkgB,EAFUJ,EAAO7kB,aAAa,SAEPoJ,MAAM,KAC/BwJ,EAAQ,GACZqS,EAAajb,SAAQ,SAAC4F,GAChBA,EAAMyC,SAAS,gBACjBO,EAAQhD,EAAMpG,QAAQ,aAAc,YAKlCuZ,EAAYpjB,KAAK8M,GAAGjD,QAAQ,UAAW,IAC7ClE,EAAgBxF,SAAU,gBAAiB,GAAI,CAC7CkX,KAAM,CACJvK,GAAIsW,EACJ1V,KAAM,MACN5G,QAAAA,EACAmJ,MAAOiV,EAAO/d,WAAU,GACxBoe,SAAUtS,wDAKWpM,OACnBwQ,EAAOxQ,EAAKua,YAClBva,EAAKN,WAAWC,aAAarG,SAASqlB,eAAenO,GAAOxQ,GAC5DJ,EAASI,qDAGe4e,cAAW/I,yDAAO,GAEpCgJ,EAAWvlB,SAAS8G,cAAc,QACxCye,EAASte,UAAY,IACrBse,EAAShb,aAAa,QAASgS,SAEPA,EAAKiJ,YAAYlc,MAAM,SAGzCmc,EAAe,SAAfA,EAAgBnT,OAEdoT,EAAYpT,EAAEgH,cACdwI,EAAe4D,EAAUtf,WAE/Bsf,EAAUC,oBAAoB,QAASF,GACvC3D,EAAatb,YAAYkf,QAErB9Q,IAAckN,EAAa8D,aAG7B1T,EAAK4K,QAAQtW,YAAYsb,EAAa8D,YACtC9D,EAAa8D,WAAa,MAI5B1T,EAAK6P,2BAA2BD,OAE1Bnb,EAAUmb,EAAa5hB,aAAa,qBAG1Cyb,EAAMkK,UAAU,CACdhL,OAAQ3I,EAAKvF,GACbA,GAAImV,EAAa5hB,aAAa,eAC9BijB,IAAKrB,EACLnb,QAAAA,EACA1B,KAAM,SAIFge,EAAY/Q,EAAKvF,GAAGjD,QAAQ,UAAW,IAC7ClE,EAAgBxF,SAAU,gBAAiB,GAAI,CAC7CkX,KAAM,CACJvK,GAAIsW,EACJ1V,KAAM,SACN5G,QAAAA,EACAmJ,MAAOgS,KAIXxP,EAAEjH,mBAIJka,EAASzgB,iBAAiB,QAAS2gB,EAAahlB,KAAKZ,OAErDylB,EAAUve,YAAYwe,qDAIE7V,OAElBoW,EAAepe,EAAqBgI,SAEnC,CACLpM,eAASwiB,EAAaxiB,KAAOwT,SAASpH,EAAMgG,YAAa,IAAM7V,KAAK0c,KAAKwJ,cAAcnkB,QACvF4B,cAAQsiB,EAAatiB,IAAM3D,KAAK0c,KAAKwJ,cAAclkB,uDAKjCyiB,OAAK/H,yDAAO,GAE1ByJ,EAAkBhmB,SAASgiB,eAAe,oBAAoB/a,UAE9Dgf,EAAMjmB,SAAS8G,cAAc,OACnCmf,EAAIhf,UAAY+e,MAEVE,EAAaD,EAAIjW,WAAW,GAGlCkW,EAAWjhB,KAAO,GAClBihB,EAAWjhB,KAAKkhB,QAAU7B,MAEpB8B,EAAqBF,EAAW5lB,cAAc,qBAC9C+lB,EAAyBH,EAAW5lB,cAAc,UAClDgmB,EAA2BJ,EAAW5lB,cAAc,uBAEpDimB,EAA4B1mB,KAAK2mB,0BAA0BlC,GAEjE4B,EAAW3jB,MAAMe,KAAOijB,EAA0BjjB,KAClD4iB,EAAW3jB,MAAMiB,IAAM+iB,EAA0B/iB,IAEjDuF,EAAWmd,EAAY3J,SAEvB2J,EAAWphB,iBAAiB,SAAS,SAACwN,GAEhCzJ,EAAWyJ,EAAE3S,OAAQ,WAEvBoJ,EAAWmd,EAAY,UACvBpd,EAAcwb,EAAK,cAMvB+B,EAAuBvhB,iBAAiB,SAAS,SAACwN,MAEf,KAA7B8T,EAAmBtW,MAAc,KAE7B2W,EAAczmB,SAAS8G,cAAc,OAC3C2f,EAAYzd,UAAY,eAExByd,EAAYnb,UAAY8a,EAAmBtW,MAE3CwW,EAAyBvf,YAAY0f,GAErCL,EAAmBtW,MAAQ,YAK1BgN,QAAQjQ,OAAOqZ,GAEpBnd,EAAWub,EAAK,mBAGhBA,EAAIsB,WAAaM,uDAKU5B,OAAK/H,yDAAO,YAI9BkJ,EAAanT,OAEfzJ,EAAWyJ,EAAE3S,OAAQ,cAAe,IAElCkJ,EAAWyb,EAAK,mBAId,KAGCiC,EAA4B1mB,KAAK2mB,0BAA0BlC,GAEjEA,EAAIsB,WAAWrjB,MAAMe,KAAOijB,EAA0BjjB,KACtDghB,EAAIsB,WAAWrjB,MAAMiB,IAAM+iB,EAA0B/iB,IAErDsF,EAAcwb,EAAIsB,WAAY,oBAVzBc,sBAAsBpC,EAAK/H,GAc7B1T,EAAWyb,EAAK,WAMnBxb,EAAcwb,EAAK,UACnBvb,EAAWub,EAAIsB,WAAY,WAL3B7c,EAAWub,EAAK,UAWpBhS,EAAEjH,kBAnCJtC,EAAWub,EAAK,gBAuChBA,EAAIxf,iBAAiB,QAAS2gB,EAAahlB,KAAKZ,4CAIrC0kB,EAASC,OAAajI,yDAAO,MAEpC1c,KAAKiO,UAAW,IAEF,iBAAZyW,EAA4B,KAExBD,EAAMtkB,SAAS8G,cAAc,QACnCwd,EAAI/Z,aAAa,QAASgS,EAAKiJ,aAC/BlB,EAAI/Z,aAAa,oBAAqBia,OAEhCQ,EAAWnlB,KAAK6hB,yBAEjBiF,mBAAmBrC,EAAKU,IAEP,IAAlBzI,EAAKqK,eACFC,0BAA0BvC,EAAK,OAC3B,aACPkB,YAAajJ,EAAKiJ,eAIA,IAAlBjJ,EAAKuK,eACFC,6BAA6BzC,EAAK,OAC9B/H,EAAKyK,qBAIXC,0BAA0B3C,EAAKU,IAEJ,IAA5BzI,EAAK2K,oBACP5C,EAAI6C,aAMH9C,YAAW,QAGX7jB,uBAl8ByBf,GA08BpCod,EAAOO,SAAW,CAChB8B,UAAW,4BACXK,YAAa,SACb6H,cAAe,QACfvF,cAAe,aACfwF,kBAAmB,gBACnBtB,cAAe,CACbnkB,EAAG,GACHC,EAAG,GAELuiB,WAAY,CACVxiB,EAAG,GACHC,EAAG,IAEL0Z,YAAa,CACX+L,QAAQ,EACRC,cAAe,SACfvE,cAAe,WACfwE,gBAAiB,eAKrB3K,EAAOmC,SAAW,SAACzC,SAAyB,UAAhBA,EAAKiD,QAAsC,UAAhBjD,EAAKiD,SAAqC,IAAdjD,EAAKkL,WAAgC7S,IAAd2H,EAAKkL,MAC/G5K,EAAOyC,YAAc,SAAC/C,SAAyB,UAAhBA,EAAKiD,SAAwC,IAAjBjD,EAAK8B,cAAsCzJ,IAAjB2H,EAAK8B,aCj/BrEqJ,yBAEP/a,EAAIhE,EAAS4T,mDACjB5T,KACDgE,GAAKA,IAEL4P,UAAYmL,EAAgBtK,YAAab,KAEzCoL,WAAa1mB,EAAKsb,KAAKoL,aAEvBC,SAAW,IAEXC,YAAc5mB,EAAKtB,OAAOW,cAAc,mBACxCwnB,gBAAkB7mB,EAAK4mB,YAAYvnB,cAAc,iBACjDynB,mBAAqB9mB,EAAKtB,OAAOW,cAAc,2BAC/C0nB,uBAAyB/mB,EAAK8mB,mBAAmBznB,cAAc,iBAE/D2nB,cAAgB,OAGhBC,YAAejnB,EAAK0mB,WAAcD,EAAgBS,oBAAsBT,EAAgBQ,mEAIxFE,uBAAuBvoB,KAAKioB,gBAAiBjoB,KAAKmoB,6BAClDK,mEAGgBP,EAAiBE,cAEtCrM,EAAM5O,GAAG6N,EAAYC,OAAOI,QAAQ,SAACvY,EAAOgD,OAGtC4iB,EACA5Y,EAFEyJ,EAASzT,EAAQyT,cAKfA,EAAO1T,WAERmV,EAAYC,OAAOC,gBAEtBwN,EAAoBnP,EAAOlU,KAAK+W,cAENrV,cAEnB+K,EAAK6K,KAAKgM,MAAM,GAAGC,QAAQ,GAAGrF,OAEjC2E,EAAgBW,mBAAmB,YAAa/W,EAAKwW,YAAYzhB,EAAU6hB,EAAkBnF,KAAMmF,EAAkB3b,MAIjH+E,EAAK6K,KAAKmM,wBAA0BhX,EAAK6K,KAAKgM,MAAM,GAAGC,QAAQ,GAAGrF,MAAQzR,EAAK6K,KAAKgM,MAAM,GAAGC,QAAQ,GAAGrF,eAOzGzR,EAAK6K,KAAKgM,MAAM,GAAGC,QAAQ,GAAGrF,KACjCzT,EAAQ4Y,EAAkBnF,IAAInc,WAAU,IAClCuD,aAAa,aAAa,GAChCmF,EAAM5K,iBAAiB,QAAS4M,EAAKiX,kBAAkBloB,KAAKiR,IAAO,GACnEhC,EAAM5K,iBAAiB,YAAa4M,EAAKiX,kBAAkBloB,KAAKiR,IAAO,GACvEhC,EAAM5K,iBAAiB,UAAW4M,EAAKiX,kBAAkBloB,KAAKiR,IAAO,GACrEhC,EAAM5K,iBAAiB,OAAQ4M,EAAKiX,kBAAkBloB,KAAKiR,IAAO,GAClEsW,EAAuBjhB,YAAY2I,cAOpCkL,EAAYC,OAAOE,WAEtBuN,EAAoBnP,EAAOlU,KAAK+W,aAOhCjW,MAAM6iB,UAAU1e,QAAQkE,KAAKpO,SAASqJ,yCAAkCif,EAAkB3b,WAAS,SAAC+C,GAE9F7G,EAAW6G,EAAMtJ,WAAY,kBAG/BE,EAASoJ,EAAMtJ,WAAWA,YAG1BE,EAASoJ,2DAad/P,OAAOmF,iBAAiB,WAAYjF,KAAKgpB,aAAapoB,KAAKZ,OAAO,QAClEF,OAAOmF,iBAAiB,YAAajF,KAAKgpB,aAAapoB,KAAKZ,OAAO,QACnEF,OAAOmF,iBAAiB,OAAQjF,KAAKgpB,aAAapoB,KAAKZ,OAAO,6CAGnDyS,SAED,cAAXA,EAAE7M,OACJ6M,EAAEwW,aAAaC,QAAQ,aAAc,QACrCzW,EAAEwW,aAAaE,WAAa,GAC5B1W,EAAE3S,OAAO4C,MAAM0mB,QAAU,QAEpBhB,cAAgB3V,EAAE3S,OAAOqH,WAAU,IAG3B,YAAXsL,EAAE7M,OACJ6M,EAAE3S,OAAO4C,MAAM0mB,QAAU,OAGpBzoB,iBAGA,uCAGI8R,SACgB,UAAvBA,EAAE3S,OAAOupB,YAEI,aAAX5W,EAAE7M,OACJ6M,EAAE3P,iBACF2P,EAAEwW,aAAaE,WAAa,QAGf,SAAX1W,EAAE7M,MACJ6M,EAAE3P,kBAIFkG,EAAWyJ,EAAE3S,OAAQ,qCACR,aAAX2S,EAAE7M,OACJ6M,EAAE3P,iBAEF2P,EAAEwW,aAAaE,WAAa,GAC5B1W,EAAE3S,OAAO4C,MAAM4mB,WAAa,QAGf,cAAX7W,EAAE7M,OACJ6M,EAAE3S,OAAO4C,MAAM4mB,WAAa,QAGf,SAAX7W,EAAE7M,OACJ6M,EAAE3P,iBAEF2P,EAAE3S,OAAO4C,MAAM4mB,WAAa,YACvBlB,cAAc1lB,MAAM0mB,QAAU,OAE9BhB,cAAcnjB,iBAAiB,SAAS,SAACwN,GACxCzJ,EAAWyJ,EAAE3S,OAAQ,eACvB2S,EAAE3S,OAAOyG,WAAWxF,YAIxB0R,EAAE3S,OAAOoH,YAAYlH,KAAKooB,kBAKvB,SAzKkCxoB,GA6K7CioB,EAAgBtK,SAAW,CACzBuK,YAAY,GAIdD,EAAgBQ,YAAc,SAACkB,2GAI4BA,6FAQ3D1B,EAAgBS,oBAAsB,SAACiB,OAAUxS,yDAAQ,EAEjDyS,oGAEmDD,0LAGZxS,0IAKtCyS,OCzJH1N,EAAQ,gFAnCLC,MAAQ,qDAKR0N,EAAYC,EAAUC,GAEtB3pB,KAAK+b,MAAM0N,UACT1N,MAAM0N,GAAc,SAGtB1N,MAAM0N,GAAYlS,MAAQmS,OAC1B3N,MAAM0N,GAAYG,UAAYD,EAEnC7N,EAAMS,QAAQxB,EAAYM,SAASD,OAAQ,CACzC9B,OAAQ,CACNxM,GAAIiO,EAAYM,SAASvO,GACzBlH,KAAMmV,EAAYM,SAASD,OAC3BhW,KAAM,CACJqkB,WAAAA,EACAC,SAAAA,EACAC,aAAAA,8CASC3pB,KAAK+b,aApCYxB,ICPPsP,yBACPhqB,SAAU6c,yDAAO,6CACrB7c,KACDiN,GAAK1L,EAAKtB,OAAOgN,cACN1L,EAAKtB,OAAOO,aAAa,kBAAoB,YACxDypB,UAAY1oB,EAAKtB,OAAO0J,iBAAiB,6BAEzCkT,UAAYmN,EAAStM,YAAab,KAElCqN,gBAAkB3oB,EAAKtB,OAAOW,yBAAkBW,EAAKsb,KAAKsN,0BAE3D5oB,EAAKsb,KAAKuN,SAAW7oB,EAAKsb,KAAKuN,QAAQzS,KAAK7N,OAAS,IAElDugB,aAAc,IAEd1V,OAASpT,EAAKtB,OAAO0J,4BAAqBpI,EAAKsb,KAAKyN,yEAMnDnqB,mBACD,UAECA,KAAK0c,aAAe1c,KAAK0c,YAAY/S,OAAS,SAC3CogB,gBAAgB3iB,UAAYyiB,EAASO,kBAAkBpqB,KAAK0c,cAKnEZ,EAAMuO,OACJrqB,KAAK8M,GACL+c,EAASS,kBAAkBtqB,KAAK+pB,gBAAiB/pB,KAAK0c,KAAKyN,eAC3DN,EAASU,cAAcvqB,KAAK+pB,kBAI1B/pB,KAAKkqB,cAGHlqB,KAAK0c,KAAKuN,QAAQO,aACfC,8CAGFlC,+BAGFC,8BAGF,iBACEhU,OAAOnK,SAAQ,SAACc,GACnBA,EAAMT,aAAa,qBAAsB,WAEtCggB,yBAAyB1qB,KAAK0c,KAAKiO,yDAQrBC,uBAGdC,EAAiBC,EAAUC,EAAQ1W,OACpC2W,EAAW/T,SAAS6T,EAASzqB,aAAa,sBAAuB,IACjE4qB,EAAWD,EAAWD,EACtB9a,EAAQ9M,KAAK+nB,IAAID,GAAYL,EAAWI,EAAWC,EACzDH,EAASpgB,aAAa,qBAAsBuF,GAE5CoE,IARFuW,EAAWA,EAAW3T,SAAS2T,EAAU,IAAM,OAW1Cd,UAAUzf,SAAQ,SAAC8gB,OAChBL,EAAWK,EAASjb,cAAcA,qBAChBib,EAAS9qB,aAAa,8BAGvC,QACH8qB,EAASlmB,iBAAiB,SAAS,SAACpC,GAClCgoB,EAAiBC,GAAW,EAAGjZ,EAAKlR,cACpCkC,EAAMC,8BAIL,OACHqoB,EAASlmB,iBAAiB,SAAS,SAACpC,GAClCgoB,EAAiBC,EAAU,EAAGjZ,EAAKlR,cACnCkC,EAAMC,oGAWVsoB,EAAc,QAEb1O,KAAKuN,QAAQzS,KAAKnN,SAAQ,SAACyC,OACxBue,EAAOlrB,SAASgiB,eAAerV,GAAIrM,yBAAkBwR,EAAKyK,KAAKsN,0BAA2B5iB,UAEhGgkB,GAAevB,EAASyB,eAAexe,EAAImF,EAAKnF,GAAIue,WAIjDtB,gBAAgB3iB,UAAYgkB,OAE5B5W,OAASxU,KAAKF,OAAO0J,4BAAqBxJ,KAAK0c,KAAKyN,gBAEzDrO,EAAMuO,OACJrqB,KAAK8M,GACL+c,EAASS,kBAAkBtqB,KAAK+pB,gBAAiB/pB,KAAK0c,KAAKyN,eAC3DN,EAASU,cAAcvqB,KAAK+pB,8EAOzBjqB,OAAO0J,4BAAqBxJ,KAAK0c,KAAKyN,gBAAiB9f,SAAQ,SAACc,GACnEA,EAAMlG,iBAAiB,QAASoN,EAAKkZ,cAAc3qB,KAAKyR,IAAO,kEAMjEyJ,EAAM5O,GAAG6N,EAAYM,SAASD,QAAQ,SAACvY,EAAOgD,OAEtCyT,EAASzT,EAAQyT,OACjBlU,EAAOS,EAAQyT,OAAOlU,YAEpBkU,EAAO1T,WAERmV,EAAYM,SAASD,OAGpBvI,EAAK6J,KAAKuN,QAAQzS,KAAKvT,QAAQmB,EAAKqkB,aAAe,IACrD5W,EAAK4X,yCAGL5X,EAAK2V,+DAcD/V,GAEG,UAAXA,EAAE7M,OAEJiD,EAAc4J,EAAEgH,cAAe,YAE/BqC,EAAMuO,OACJrqB,KAAK8M,GACL+c,EAASS,kBAAkBtqB,KAAK+pB,gBAAiB/pB,KAAK0c,KAAKyN,eAC3DN,EAASU,cAAcvqB,KAAK+pB,uBAGzBppB,uBA1K2Bf,GAkLtCiqB,EAAS2B,uBAAyB,SAACrgB,SAAW,OACrCA,EAAMhC,UACb2D,GAAI3B,EAAM9K,aAAa,MACvBgX,KAAMlM,EAAMM,YAGdoe,EAASU,cAAgB,SAACR,UAAoBA,EAAgB3iB,WAE9DyiB,EAASS,kBAAoB,SAACP,EAAiB0B,OACvCjX,EAASuV,EAAgBvgB,4BAAqBiiB,IAC9CC,EAAa,UAEnBlX,EAAOnK,SAAQ,SAACc,GACdugB,EAAWne,KAAKsc,EAAS2B,uBAAuBrgB,OAI3CugB,GAIT7B,EAAS8B,uBAAyB,SAAC3lB,OAE3B4lB,EAASzrB,SAAS8G,cAAc,cACtC2kB,EAAOlhB,aAAa,QAAS1E,SAC7B4lB,EAAOlhB,aAAa,KAAM1E,EAAK8G,IAC/B8e,EAAOxkB,UAAYpB,EAAKqR,KAEjBzQ,EAAUglB,IAInB/B,EAASO,kBAAoB,SAAC7S,OAExBsU,EAAc,UAElBtU,EAAMlN,SAAQ,SAACrE,GAEb6lB,GAAehC,EAAS8B,uBAAuB3lB,MAI1C6lB,GAKThC,EAASyB,eAAiB,SAACQ,EAAOC,EAAOnC,OAEjCoC,EAAY,IAAIliB,OAAOgiB,EAAO,YAE7BlC,EAAU/f,QAAQmiB,EAAWD,IAItClC,EAAStM,SAAW,CAClByM,wBAAyB,2BACzBG,cAAe,qBC3OI8B,wBACPnjB,OAAS4T,yDAAO,kBAErB7c,SAAWiJ,OACXgE,GAAK9M,KAAKH,SAASQ,aAAa,WAEhCqc,UAAYuP,EAAsB1O,YAAab,QAE/CwP,aAAe5X,KAAKC,MAAMvU,KAAKH,SAASQ,aAAaL,KAAK0c,KAAKyP,uCAC/DpC,gBAAkB/pB,KAAKH,SAASY,yBAAkBT,KAAK0c,KAAKsN,wEAM5DzB,qFAOLzM,EAAM5O,GAAG6N,EAAYC,OAAOI,QAAQ,SAACvY,EAAOgD,GAE3BA,EAAQyT,WAEjB6C,EADOtW,EAAQyT,OAAOlU,KACF+W,gBAEtB/a,EAAK8qB,aAAajoB,QAAQkY,EAAarV,UAAY,EAAG,KAElDkV,EAAOF,EAAMsQ,UAAU,CAACzP,IAAK,UAAW1M,MAAO7O,EAAK8qB,eAEtDG,EAAU,GAEdrQ,EAAK3R,SAAQ,SAACiZ,GAEZ+I,GAAWzlB,EAAW0c,EAAIA,QAI5BliB,EAAK2oB,gBAAgB3iB,UAAYilB,eAgBzCJ,EAAsB1O,SAAW,CAC/ByM,wBAAyB,kCACzBmC,gCAAiC,yCC1DdG,yBAEPxf,EAAIhE,EAAS4T,mDACjB5T,KAEDgE,GAAKA,IAEL4P,UAAY4P,EAAS/O,YAAab,KAElC6P,WAAanrB,EAAKtB,OAAO0J,4BAAqBpI,EAAKsb,KAAK8P,cACxDjX,MAAQ,CACXC,eAAgB,EAChBC,OAAQ,GACRgX,UAAW,IAITrrB,EAAKsb,KAAKgQ,gBACPnX,MAAME,OAASrU,EAAKsb,KAAKgQ,YAAYhX,KAAI,SAACrB,UAAaA,EAASsB,iEAMlE6S,gFAKA+D,WAAWliB,SAAQ,SAACsiB,EAAWC,GAElC/a,EAAK0D,MAAMkX,UAAUlf,KAAK,CAAEsf,UAAU,QAEhCC,EAAgB7V,SAAS0V,EAAUtsB,aAAa,sBAAuB,IACvE0sB,EAAWJ,EAAUnjB,4BAAqBqI,EAAK6K,KAAKsQ,cAE1DD,EAAS1iB,SAAQ,SAAC4iB,EAASC,GACzBD,EAAQhoB,iBAAiB,SAAS,eAC1BkoB,EAAiBF,MAGnBE,EAAetsB,UAAUC,SAAS,gBAKtCisB,EAAS1iB,SAAQ,SAAC+iB,UAAiBnkB,EAAcmkB,EAAcvb,EAAK6K,KAAKyG,kBAEzEta,EAAcskB,EAAgBtb,EAAK6K,KAAKyG,eAGpCtR,EAAK6K,KAAKgQ,YAAa,OACrBQ,IAAgBJ,EAClBjb,EAAK0D,MAAMC,gBAAkB,EACU,IAA9B3D,EAAK0D,MAAMC,iBAAyE,IAAjD3D,EAAK0D,MAAMkX,UAAUG,GAAeC,WAChFhb,EAAK0D,MAAMC,gBAAkB,OAGzB0B,EAAiBrF,EAAK6K,KAAKgQ,YAAYvV,MAAK,SAAC9C,UAAaA,EAAS+C,SAAS1E,SAASb,EAAK0D,MAAMC,sBAGtG3D,EAAKrR,gBAAgBK,WAAUE,iBAAU8Q,EAAK0D,MAAME,SACpD5D,EAAKrR,gBAAgBK,UAAUG,IAAIkW,EAAevB,OAClD9D,EAAKnR,oBAAoB+K,UAAYyL,EAAeG,KAItDxF,EAAK0D,MAAMkX,UAAUG,GAAeC,UAAW,OAGqB9X,IAAhElD,EAAK0D,MAAMkX,UAAUtV,MAAK,SAACkW,UAAcA,EAASR,aACpDhb,EAAKlR,mBAGN,gBA1E2Bf,GAgFtC0sB,EAAS/O,SAAW,CAClBiP,UAAW,iBACXQ,YAAa,SACb7J,cAAe,gBCpFImK,yBAEPztB,EAAU6c,mDACd7c,KAEDiN,GAAK1L,EAAKtB,OAAOgN,KACjB4P,UAAY4Q,EAAa/P,YAAab,KAEtCqL,SAAW,IAEXwF,iBAAmBnsB,EAAKtB,OAAOW,cAAc,iBAE7C+sB,aAAepsB,EAAKsb,KAAKtX,OAEzBmQ,MAAQ,CACXkY,gBAAiB,EACjBC,eAAgB,EAChBC,MAAO,sDAMwB,UAA7B3tB,KAAKwtB,aAAapQ,aACfmL,qFAUPlF,EAAYnW,GAAGlN,KAAKwtB,aAAaI,UAAUrb,KAAK,MAAM,SAAC1P,EAAOgD,OACtDyT,EAASzT,EAAQyT,OACjBlU,EAAOS,EAAQT,YAEbkU,EAAO1T,WAERmV,EAAYlY,GAAO8Y,IACtB9J,EAAK0b,iBAAiB3E,mBAAmB,YAAa0E,EAAajF,YAAYjjB,QAEzEyoB,EAAWhc,EAAK0b,iBAAiB/jB,iBAAiB,cAGlDskB,EAFWD,EAASA,EAASlkB,OAAS,GAEfH,iBAAiB,UAE9CqI,EAAK0D,MAAMkY,iBAAmBK,EAAYnkB,OAE1CmkB,EAAYzjB,SAAQ,SAAC0jB,GACnBlc,EAAK0D,MAAMoY,MAAMpgB,KAAK,CAAEsf,UAAU,QAC5BmB,EAAanc,EAAK0D,MAAMoY,MAAMhkB,OAAS,EAE7CokB,EAAQ9oB,iBAAiB,UAAU,YACa,IAA1C4M,EAAK0D,MAAMoY,MAAMK,GAAYnB,WAC/Bhb,EAAK0D,MAAMmY,gBAAkB,EAC7B7b,EAAK0D,MAAMoY,MAAMK,GAAYnB,UAAW,GAEtChb,EAAK0D,MAAMkY,kBAAoB5b,EAAK0D,MAAMmY,gBAE5C7b,EAAKlR,gCAMRoa,EAAYlY,GAAO+Y,WAChBqS,EAAO9tB,SAASgiB,yBAAkB/c,EAAK0H,cAC7CrG,EAASwnB,GACTpc,EAAK0D,MAAMkY,iBAAmBQ,EAAKzkB,iBAAiB,UAAUG,OAC9DkI,EAAK0D,MAAMmY,gBAAkBO,EAAKzkB,iBAAiB,UAAUG,OAEzDkI,EAAK0D,MAAMkY,iBAAmB5b,EAAK0D,MAAMmY,gBAE3C7b,EAAKlR,0BA3EyBf,GAuF1C0tB,EAAa/P,SAAW,GAIxB+P,EAAajF,YAAc,SAACjjB,oDAEKA,EAAK0H,gDACZ1H,EAAKme,QAAQ2K,iDACb9oB,EAAKme,QAAQ4K,uEAEjB/oB,EAAK0H,waAYL1H,EAAK0H,kVChFNshB,yBACPvuB,mDACJA,KAEDC,OAAOmF,iBAAiB,SAAS,SAACpC,KAChCwrB,iBAAiB1X,IAAM9E,EAAK/R,OAAO+W,mBAAmBF,MACtD2X,YAAYztB,UAAU0tB,OAAO,YAE7B5tB,eAELkC,EAAMC,iBACND,EAAM2I,qBACL,6CA1CO3L,mDACJA,KAEDyuB,YAAcnuB,SAASM,cAAc,gCACrC4tB,iBAAmBjtB,EAAKktB,YAAY7tB,cAAc,+BAElD2B,OAAS,KACTosB,MAAQ,KAERpsB,OAAOE,MAAQF,OAAOuP,aACtBvP,OAAOG,OAASH,OAAOqsB,cACvBrsB,OAAOssB,MAAQttB,EAAKgB,OAAOE,MAAQlB,EAAKgB,OAAOG,SAE/C8rB,iBAAiBM,OAAS,aACxBH,MAAMlsB,MAAQlB,EAAKitB,iBAAiBO,eACpCJ,MAAMjsB,OAASnB,EAAKitB,iBAAiBQ,gBACrCL,MAAME,MAAQttB,EAAKotB,MAAMlsB,MAAQlB,EAAKotB,MAAMjsB,OAE7CnB,EAAKotB,MAAME,OAASttB,EAAKgB,OAAOssB,SAC7BL,iBAAiB3rB,MAAMJ,MAAQ,SAC/B+rB,iBAAiB3rB,MAAMH,OAAS,WAEhC8rB,iBAAiB3rB,MAAMJ,MAAQ,SAC/B+rB,iBAAiB3rB,MAAMH,iBAAYnB,EAAKgB,OAAOG,kCAxBnC3C,ICAJkvB,yBACPjvB,mDACJA,KACDkvB,WAAa3tB,EAAKrB,OAAOyJ,iBAAiB,4BAC1CwlB,SAAW5tB,EAAKtB,OAAO+W,mBAAmBpW,cAAc,6BACxDwuB,SAAW7tB,EAAK4tB,SAAS9e,gBAEzBmE,SAAWC,KAAKC,MAAMnT,EAAKtB,OAAOO,aAAa,oBAE/C6uB,eAAiB,CACpB1rB,IAAKyT,SAAmD,MAA1C7V,EAAKtB,OAAOO,aAAa,aAAuB,EAAIe,EAAKtB,OAAOO,aAAa,aAAc,IACzG8uB,IAAK,KACL5rB,IAAK0T,SAAS7V,EAAKtB,OAAOO,aAAa,aAAe,EAAG,OAEtD6uB,eAAeC,IAAMhsB,KAAK2H,OAAO1J,EAAK8tB,eAAe3rB,IAAMnC,EAAK8tB,eAAe1rB,KAAO,EAAIpC,EAAK8tB,eAAe1rB,OAE9G+R,MAAQ,CACXC,eAAgB,EAChBC,OAAQ,CACN,YACA,eACA,eAEFgX,UAAW,MAGR2C,UAAY,KACZC,QAAUjuB,EAAKtB,OAAOmQ,OAAS7O,EAAKtB,OAAOmQ,MAAMtG,OAAS,IAC1D2lB,SAAU,EAEXluB,EAAKiuB,WACFE,yBAGFjvB,kBAAkBC,SAEhBuQ,YAAc1P,EAAKtB,OAAOO,aAAa,yBACvCmvB,qBAAuBpuB,EAAK0P,YAAc1P,EAAK0P,YAAYrH,MAAM,KAAO,KAGxEgmB,cACAhZ,+FAIc9M,yDAAS3J,KAAKF,OAAOmQ,MAAMtG,eAC3CslB,SAASpuB,WAAUE,iBAAUf,KAAKuV,MAAME,SACzC9L,EAAS3J,KAAKkvB,eAAe1rB,IAAKxD,KAAKivB,SAASpuB,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,IAC3E9L,GAAU3J,KAAKkvB,eAAeC,IAAKnvB,KAAKivB,SAASpuB,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,IACjF9L,EAAS3J,KAAKkvB,eAAeC,KAAKnvB,KAAKivB,SAASpuB,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,SAEpFuZ,SAASvjB,UAAY9B,OACrB7J,OAAOe,UAAUG,IAAI,WAAYhB,KAAKsvB,cACtCA,SAAU,iDAGF3lB,yDAAS3J,KAAKF,OAAOmQ,MAAMtG,UACnC3J,KAAKQ,2BAELA,gBAAgBK,WAAUE,iBAAUf,KAAKuV,MAAME,SAChD9L,EAAS3J,KAAKkvB,eAAe1rB,SAC1BhD,gBAAgBK,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,SAChD/U,oBAAoB+K,UAAYzL,KAAKqU,SAASqb,SAC9C,CAED/lB,GAAU3J,KAAKkvB,eAAeC,UAC3B3uB,gBAAgBK,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,SAChD/U,oBAAoB+K,UAAYzL,KAAKqU,gBAEnC1K,EAAS3J,KAAKkvB,eAAeC,WAC/B3uB,gBAAgBK,UAAUG,IAAIhB,KAAKuV,MAAME,OAAO,SAChD/U,oBAAoB+K,UAAYzL,KAAKqU,SAASsb,SAGhD7vB,OAAO4K,aAAa,uBAAwB,eAE3CklB,EAAe1pB,MAAMsR,KAAKxX,KAAK+uB,YAAY5X,MAAK,SAAC0Y,SAAkE,YAAnDA,EAAUxvB,aAAa,gCAExE0U,IAAjB6a,QAEGjvB,4EAOJb,OAAOmF,iBAAiB,QAAQ,SAACpC,MACpCgP,EAAK0d,yBAED1sB,EAAM/C,OAAOmQ,QAAU4B,EAAKud,UAAW,KACnCU,EAA+B,KAAnBje,EAAKud,UAAoB,SAAW,SACtDvd,EAAKud,UAAYvsB,EAAM/C,OAAOmQ,MAG9BtK,EAAgBxF,SAAU,cAAe,GAAI,CAC3CkX,KAAM,CACJvK,GAAIjK,EAAM/C,OAAOgN,GACjBY,KAAMoiB,EACNzY,KAAMxU,EAAM/C,OAAOmQ,SAKvB4B,EAAK2d,qBAAuB,YAK3B1vB,OAAOmF,iBAAiB,SAAS,SAACpC,GACrCA,EAAM2I,sBAEAukB,EAAcle,EAAK/R,OAAOmQ,MAAMtG,OACtCkI,EAAK0d,uBAAuBQ,GAC5Ble,EAAKme,eAAeD,qDAKlB/vB,KAAKwvB,qBAAqB,IAE5BrvB,SAAS8E,iBAAiB,eAAe,SAACwN,MACpCR,EAAKud,qBAAqB9c,SAASD,EAAE/M,OAAO2R,KAAKvK,IAAK,KAElDgjB,EAAkC,KAAtB7d,EAAKnS,OAAOmQ,MAAgB,SAAW,gBACjDwC,EAAE/M,OAAO2R,KAAK3J,UACf,aACA,SAEuB,KAAtBuE,EAAKnS,OAAOmQ,QAAcgC,EAAKnS,OAAOmQ,OAAS,MAGV,IAArCgC,EAAKud,qBAAqB7lB,OAC5BsI,EAAKnS,OAAOmQ,MAAQwC,EAAE/M,OAAO2R,KAAKA,KAElCpF,EAAKnS,OAAOmQ,iBAAYwC,EAAE/M,OAAO2R,KAAKA,WAIxC1R,EAAgBxF,SAAU,cAAe,GAAI,CAC3CkX,KAAM,CACJvK,GAAImF,EAAKnS,OAAOgN,GAChBY,KAAMoiB,EACNzY,KAAMpF,EAAKnS,OAAOmQ,SAKtBgC,EAAKmd,UAAYnd,EAAKnS,OAAOmQ,MAE7BgC,EAAKsd,uCAGL7vB,QAAQC,IAAI,iDAzJYC,GCDjBqwB,yBAEPpwB,mDACJA,KAEDwL,YAAcjK,EAAKtB,OAAOW,cAAc,2BACxCyvB,UAAY9uB,EAAKtB,OAAOW,cAAc,uBACtC0vB,UAAY/uB,EAAKtB,OAAOW,cAAc,4BACtC2vB,eAAiBhvB,EAAKtB,OAAOW,cAAc,gCAE3C4vB,WAAaC,WAAWC,OAAO,CAClCjpB,UAAWlG,EAAK8uB,UAChBM,UAAW,UACXC,cAAe,UACfluB,OAAQ,GACRmuB,YAAY,EACZC,SAAU,MAEPN,WAAWO,KAAKxvB,EAAK8uB,UAAUW,QAAQla,OAEvCma,iFAIAT,WAAWnjB,GAAG,SAAS,WAC1B2E,EAAKse,UAAU/O,YAAc,WACvBvW,EAAWgH,EAAKwe,WAAWU,cAC3BhmB,EAAU5H,KAAK2H,MAAOD,EAAW,KAAQ,IACzCD,EAAU,YAAMzH,KAAK2H,MAAMD,EAAW,KAAOI,OAAO,GAC1D4G,EAAKue,eAAehP,sBAAiBrW,cAAWH,GAEhDiH,EAAKmf,2FAKFX,WAAWnjB,GAAG,gBAAgB,SAAC+jB,OAC5BlmB,EAAU5H,KAAK2H,MAAOmmB,EAAO,KAAQ,IACrCrmB,EAAU,YAAMzH,KAAK2H,MAAMmmB,EAAO,KAAOhmB,OAAO,GACtDgH,EAAKke,UAAU/O,sBAAiBrW,cAAWH,WAGxCylB,WAAWnjB,GAAG,UAAU,WAC3B+E,EAAK5G,YAAYX,aAAa,sBAAuB,kBAGlDW,YAAYpG,iBAAiB,SAAS,WACzCgN,EAAKoe,WAAWa,YAE6C,WAAzDjf,EAAK5G,YAAYhL,aAAa,uBAChC4R,EAAK5G,YAAYX,aAAa,sBAAuB,WAErDuH,EAAK5G,YAAYX,aAAa,sBAAuB,UAGvDuH,EAAKtR,kBAIaR,SAASqJ,iBAAiB,qBAClCa,SAAQ,SAAC8mB,GACnBA,EAAWlsB,iBAAiB,SAAS,WAC0B,YAAzDgN,EAAK5G,YAAYhL,aAAa,yBAChC4R,EAAKoe,WAAWa,YAChBjf,EAAK5G,YAAYX,aAAa,sBAAuB,wBAhEhB9K,GCC1BwxB,yBACPvxB,mDACJA,KAEDuL,OAAShK,EAAKtB,OAAOW,cAAc,WACnC6K,UAAYlK,EAAKtB,OAAOW,cAAc,4BACtC4wB,UAAYjwB,EAAKtB,OAAOW,cAAc,gCAEtC4wB,UAAU5lB,qBAAgBd,EAAwBvJ,EAAKgK,OAAOP,WAEnEK,EAAYuL,kBAAkBrV,EAAKtB,OAAQsB,EAAKT,iCAVLuK,GCD1BomB,0BACPzxB,mDACJA,KAED0xB,SAAWnwB,EAAKtB,OAAO0J,iBAAiB,8BACxCgoB,MAAQpwB,EAAKtB,OAAO0J,iBAAiB,2BACrCioB,gBAAkB,IAElBC,iFAGGC,EAAS5a,QACZya,MAAMxxB,KAAKyxB,iBAAiB5wB,UAAUE,OAAO,eAC7CwwB,SAASvxB,KAAKyxB,iBAAiB5wB,UAAUE,OAAO,eAEhDywB,MAAMza,GAAOlW,UAAUG,IAAI,UAChC2wB,EAAQ9wB,UAAUG,IAAI,eAEjBywB,gBAAkB1a,sEAIlBwa,SAASlnB,SAAQ,SAACsnB,EAAS5a,GAE9B4a,EAAQ1sB,iBAAiB,SAAS,SAACpC,GACjCgP,EAAK+f,UAAUD,EAAS5a,GACxBlF,EAAKlR,eAELkC,EAAMC,8BA5BuBlD,GCEhBiyB,0BACPhyB,EAAUsF,mDACdtF,KAED0K,OAASnJ,EAAKtB,OAAOW,cAAc,WACnC0E,QAAUG,OAAOH,KACjB2sB,OAAS1wB,EAAK+D,QAAQ2sB,QAAU,UAChC5xB,KAAOoF,OAAOlE,EAAK+D,QAAQjF,QAS3BsK,OAAS,OACTkB,YAAc,OACdb,SAAW,OACXknB,SAAW,OAEXC,UAAY5wB,EAAKtB,OAAOmyB,gBACxBnI,UAAY1oB,EAAKtB,OAAOW,cAAc,4BAEtCyxB,MAAQ9wB,EAAK0oB,UAAUrpB,cAAc,2BACrC0xB,YAAc/wB,EAAK8wB,MAAMzxB,cAAc,wBACvC2xB,aAAehxB,EAAK8wB,MAAMzxB,cAAc,yBAExC4xB,MAAQjxB,EAAK0oB,UAAUrpB,cAAc,gCACrC6xB,WAAalxB,EAAKixB,MAAM5xB,cAAc,mCACtC8xB,WAAanxB,EAAKixB,MAAM5xB,cAAc,mCAGtC+xB,iBAAmBpxB,EAAK4wB,UAAUxM,eAAe,MACjDiN,aAAerxB,EAAK0oB,UAAUrpB,cAAc,4BAC5CgyB,aAAavrB,YAAY9F,EAAKoxB,oBAG9BE,aAAetxB,EAAKmJ,OAAOM,WAC3B8nB,cAAgBvxB,EAAK0oB,UAAUrpB,cAAc,gCAC7CkyB,cAAclnB,UAAYd,EAAwBvJ,EAAKsxB,gBACvDC,cAAcjoB,aACjB,kBACGmnB,EAAYe,YACbxxB,EAAKsxB,aACLtxB,EAAKlB,KAAK6K,SAAW,UACrB3J,EAAKlB,KAAK0K,SAAW,eAKpB0jB,YAAcltB,EAAK0oB,UAAUrpB,cAChC,wBAEGoyB,uBAAyBzxB,EAAKktB,YAAY7tB,cAC7C,mCAEGqyB,uBAAyB1xB,EAAKktB,YAAY7tB,cAC7C,mCAIGsyB,kBAAoB,uBAAwB3xB,EAAKtB,OAClD,mBACA,6BAA8BsB,EAAKtB,OACjC,yBACA,yBAA0BsB,EAAKtB,OAC7B,qBACA,qBAEHkzB,mBAAqB5xB,EAAKtB,OAAOmzB,mBACnC7xB,EAAKtB,OAAOozB,yBAEZ9xB,EAAKtB,OAAOqzB,sBAEVC,eAAiBhyB,EAAKgyB,eAAexyB,aACrCyyB,YAAcjyB,EAAKiyB,YAAYzyB,aAC/B0yB,aAAelyB,EAAKkyB,aAAa1yB,aACjC2yB,aAAenyB,EAAKmyB,aAAa3yB,aACjC4yB,aAAepyB,EAAKoyB,aAAa5yB,aACjC6yB,YAAcryB,EAAKqyB,YAAY7yB,aAC/B8yB,cAAgBtyB,EAAKsyB,cAAc9yB,aACnC+yB,YAAcvyB,EAAKuyB,YAAY/yB,aAC/B8yB,cAAgBtyB,EAAKsyB,cAAc9yB,aACnCgzB,kBAAoBxyB,EAAKwyB,kBAAkBhzB,aAC3CizB,mBAAqBzyB,EAAKyyB,mBAAmBjzB,aAG7C2J,OAAOtF,iBAAiB,iBAAkB7D,EAAKgyB,kBAC/C7oB,OAAOtF,iBAAiB,YAAa7D,EAAKiyB,eAC1C9oB,OAAOtF,iBAAiB,aAAc7D,EAAKkyB,gBAC3C/oB,OAAOtF,iBAAiB,QAAS7D,EAAKmyB,gBACtChpB,OAAOtF,iBAAiB,OAAQ7D,EAAKmyB,gBACrChpB,OAAOtF,iBAAiB,aAAc7D,EAAKoyB,gBAC3C1J,UAAU7kB,iBAAiB,QAAS7D,EAAKqyB,aAAa,KAEtDvB,MAAMjtB,iBAAiB,UAAW7D,EAAKsyB,iBACvCrB,MAAMptB,iBAAiB,QAAS7D,EAAKuyB,aAAa,KAClDtB,MAAMptB,iBAAiB,UAAW7D,EAAKsyB,iBACvCpF,YAAYrpB,iBAAiB,QAAS7D,EAAKwyB,mBAAmB,GAEnEzzB,SAAS8E,iBACP7D,EAAK2xB,kBACL3xB,EAAKyyB,oBAIPhC,EAAYiC,OAAO1yB,EAAKixB,MAAOjxB,EAAKmxB,YAAY,SAACwB,KAC1CxpB,OAAOmB,YAActK,EAAKyJ,SAAW1H,KAAKI,IAAI,EAAGJ,KAAKK,IAAI,EAAGuwB,MAE7DP,oBAGFH,wEAmBDrzB,KAAKwK,SAAWxK,KAAKuK,OAAOC,cACzBA,OAASxK,KAAKuK,OAAOC,YAErB0nB,MAAMxnB,aACT,aACA1K,KAAKwK,OAASxK,KAAKE,KAAKqL,MAAQ,OAASvL,KAAKE,KAAKuK,OAAS,cAEzD3K,OAAO4K,aACV,oBACA1K,KAAKwK,OAAS,SAAW,gBAEtB2nB,YAAYznB,aAAa,eAAgB1K,KAAKwK,aAC9C4nB,aAAa1nB,aAAa,cAAe1K,KAAKwK,QAEnDwpB,cAAch0B,KAAK+xB,UAEd/xB,KAAKwK,cAEHunB,SAAWkC,YAAYj0B,KAAKwzB,aAAc,UAI5CjpB,OAAOzE,cAAciE,EAAYC,uDAOtChK,KAAK0L,cAAgB1L,KAAKuK,OAAOmB,aAC9B1L,KAAK6K,WAAa7K,KAAKuK,OAAOM,SACjC,MACKa,YAAc1L,KAAKuK,OAAOmB,iBAC1Bb,SAAW7K,KAAKuK,OAAOM,UAAY,MAElCqpB,EAAwBl0B,KAAK0L,YAAc1L,KAAK6K,SAEhDspB,EAAkBxpB,EAAwB3K,KAAK0L,aAKjDyoB,IAAoBn0B,KAAKwyB,iBAAiB4B,iBACvC5B,iBAAiB4B,UAAYD,OAE7B1B,aAAa/nB,aAChB,kBACGmnB,EAAYe,YACb5yB,KAAK0L,YACL1L,KAAKE,KAAK6K,SAAW,UACrB/K,KAAKE,KAAK0K,SAAW,mBAiBtBynB,MAAM3nB,aAAa,gBAAiB1K,KAAK0L,kBACzC2mB,MAAM3nB,aAAa,gBAAiB,QACpC2nB,MAAM3nB,aAAa,gBAAiB1K,KAAK6K,eAEzCynB,WAAW5vB,MAAMJ,gBAAmC,IAAxB4xB,YAG5B3pB,OAAOzE,cAAciE,EAAYE,wDAMnCM,OAAOub,oBAAoB,iBAAkB9lB,KAAKozB,qBAClD7oB,OAAOtF,iBAAiB,iBAAkBjF,KAAKozB,qBAE/CG,oBACAM,0BACAL,2DAKAA,6DAKAjpB,OAAOub,oBAAoB,iBAAkB9lB,KAAKq0B,oBAGlD9pB,OAAOzE,cAAciE,EAAYG,cAGjClK,KAAKwK,SAAUxK,KAAKuK,OAAO+pB,eACzB/pB,OAAOgB,wDAKRgpB,EAAev0B,KAAKF,SAAW+xB,EAAY2C,0BAE5ClG,YAAY5jB,aACf,aACA6pB,EACIv0B,KAAKE,KAAKu0B,iBAAmB,oBAC7Bz0B,KAAKE,KAAKw0B,iBAAmB,0BAE9B7B,uBAAuBnoB,aAAa,cAAe6pB,QACnDzB,uBAAuBpoB,aAAa,eAAgB6pB,uCAI/C1xB,GACVA,EAAMC,iBACND,EAAM2I,uBAEDjB,OAAOvK,KAAKuK,OAAOC,OAAS,OAAS,+CAIhC3H,GACVA,EAAM2I,kBAGD3I,EAAM8xB,aAAgB9xB,EAAM6C,aAC1B+tB,YAAY5wB,6CAKHA,cAChBA,EAAM2I,kBAEFxL,KAAKgzB,mBACHhzB,KAAKF,SAAW+xB,EAAY2C,qBAE9B3C,EAAY+C,kBAAkBrmB,KAAKpO,gBAG9B6yB,mBAAmBzkB,KAAKvO,KAAKF,aAG7BwuB,YAAY3e,QAGjBqK,YAAW,WACTnI,EAAKyc,YAAY3e,UAChB,MAEI3P,KAAKuK,OAAOsqB,2BAEjB70B,KAAKuK,OAAOuqB,gCAETvqB,OAAOwqB,4BAGPxqB,OAAOyqB,6BAGTnB,4DAKKhxB,OACJud,EAAsBvd,EAAtBud,QAAS6U,EAAapyB,EAAboyB,YAGb7U,GAAW,IAAMA,GAAW,GAAI,CAClCvd,EAAMC,qBAEAoyB,EAAqB,KAAZ9U,GAA8B,KAAZA,EAAiBA,EAAU,GAAKA,EAAU,QAEtE7V,OAAOmB,YAAcvI,KAAKI,IAC7B,EACAJ,KAAKK,IACHxD,KAAKuK,OAAOM,SACZ7K,KAAKuK,OAAOmB,YAAcwpB,GAAUD,EAAW,GAAK,UAInDzB,sEA5MArzB,SAASg1B,mBACbh1B,SAASi1B,yBAETj1B,SAASk1B,qEAILl1B,SAASm1B,gBACbn1B,SAASo1B,wBAETp1B,SAASq1B,gDAuMA11B,EAAQ21B,EAAaC,OAuB7BtzB,EACAqM,EACAK,EAvBE6mB,OAAkB5gB,IAAcjV,EAAO81B,YACvCC,OAAgB9gB,IAAcjV,EAAOg2B,aACrCC,EAAcJ,EAChB,cACAE,EACE,aACA,YACAG,EAAcL,EAChB,cACAE,EACE,YACA,YACAI,EAAYN,EACd,YACAE,EACE,WACA,UAGAK,EAAW,mBAMRC,EAActzB,GAErBA,EAAMC,qBAGAyE,EAAW2uB,KAAYrzB,EACzBA,EAAMqzB,GACLrzB,EAAMG,SAAWH,EAAMG,QAAQ,IAAMH,EAAMG,QAAQ,GAAGkzB,IAClD,EAMTR,GAHoBnuB,EAAWkH,IAAUK,EAAML,aAuBxCmnB,IACPxzB,EAAO0jB,oBAAoBkQ,EAAaG,GACxC/zB,EAAO0jB,oBAAoBmQ,EAAWL,GAIxC91B,EAAOmF,iBAAiB8wB,YAvBDlzB,GAErBT,EAAStC,EAAOmyB,cAAcmE,gBAGxB9kB,EAAOmkB,EAAY7yB,wBAGzB6L,EAAQ6C,EAAK7N,KACbqL,EAAMwC,EAAK2E,MAEXkgB,EAActzB,GAEdT,EAAO6C,iBAAiB+wB,EAAaG,GACrC/zB,EAAO6C,iBAAiBgxB,EAAWL,0CAsBpB3E,EAAMoF,EAAaC,mBAC1BnzB,KAAK2H,MAAMmmB,EAAO,gBAAOoF,eAAgBlzB,KAAK2H,MACtDmmB,EAAO,gBACJqF,UAzZgC12B,GCApB22B,0BAEP12B,mDACJA,KAGDuU,UAAYjU,SAASM,uDAAgDW,EAAKtB,OAAOgN,YAEjFuH,SAAWC,KAAKC,MAAMnT,EAAKgT,UAAU/T,aAAa,8BAClD6c,SAAW5I,KAAKC,MAAMnT,EAAKgT,UAAU/T,aAAa,2BAElDmU,OAASpT,EAAKtB,OAAO0J,iBAAiB,sBAEtCgtB,QAAUp1B,EAAKtB,OAAO0J,iBAAiB,WACvCgtB,QAAQnsB,SAAQ,SAACosB,KACfC,sBAAsBD,KACtBv0B,mBAAmBu0B,QAGrBlhB,MAAQ,CACXC,eAAgB,EAChBkX,aAAa,EACbjX,OAAQ,GACRkhB,aAAc,GAIZv1B,EAAKiT,aACFkB,MAAMmX,aAAc,IACpBnX,MAAME,OAASrU,EAAKiT,SAASqB,KAAI,SAACrB,UAAaA,EAASsB,wEAK9C8gB,cACjBA,EAAOxxB,iBAAiB,UAAU,WAChC4M,EAAK2kB,QAAQnsB,SAAQ,SAACusB,GACpB/kB,EAAK6kB,sBAAsBE,MAE7B/kB,EAAKyE,8BACJ,iDAKiBmgB,GACpBA,EAAOlwB,WAAW1F,UAAU0tB,OAAO,cAAiC,IAAnBkI,EAAOI,+EAInDthB,MAAMC,eAAiB,EACxBxV,KAAKkd,SAAS4Z,kBACXtiB,OAAOnK,SAAQ,SAACc,EAAO4L,GACtB9E,EAAKukB,QAAQzf,GAAO8f,UACtB5kB,EAAKsD,MAAMohB,cAAgB,GAEzB1kB,EAAKukB,QAAQzf,GAAO8f,SAAW1rB,EAAMyK,aAAa,gCACpD3D,EAAKsD,MAAMC,gBAAkB,GAE1BvD,EAAKukB,QAAQzf,GAAO8f,SAAY1rB,EAAMyK,aAAa,gCACtD3D,EAAKsD,MAAMC,gBAAkB,WAI5BhB,OAAOnK,SAAQ,SAACc,EAAO4L,GACtB9E,EAAKukB,QAAQzf,GAAO8f,UACtB5kB,EAAKsD,MAAMohB,cAAgB,GAEzB1kB,EAAKukB,QAAQzf,GAAO8f,SAAW1rB,EAAMyK,aAAa,gCACpD3D,EAAKsD,MAAMC,gBAAkB,MAMF,IAA5BxV,KAAKuV,MAAMohB,eAAuB32B,KAAKkd,SAAS6Z,SAAa/2B,KAAKuV,MAAMohB,eAAiB32B,KAAKw2B,QAAQ7sB,QAAU3J,KAAKkd,SAAS6Z,SAAY/2B,KAAKkd,SAAS8Z,qBACtJC,mBACA,IAEDj3B,KAAKuV,MAAMmX,YAAa,OACpBxV,EAAiBlX,KAAKqU,SAAS8C,MAAK,SAAC9C,UAAaA,EAAS+C,SAAS1E,SAAST,EAAKsD,MAAMC,2BACzFhV,gBAAgBK,WAAUE,iBAAUf,KAAKuV,MAAME,cAC/CjV,gBAAgBK,UAAUG,IAAIkW,EAAevB,YAC7CjV,oBAAoB+K,UAAYyL,EAAeG,UAGjD1W,oBAGF4U,MAAMohB,aAAe,OACrBtgB,8DAICkB,EAAQrR,MAAMsR,KAAKxX,KAAKw2B,SAAS9gB,KAAI,SAAC+gB,SAAY,CACtDI,QAASJ,EAAOI,QAChB/pB,GAAI2pB,EAAO3pB,OAGbnH,EAAgB3F,KAAKF,OAAQ,mBAAoB,GAAI,CACnDgN,GAAI9M,KAAKF,OAAOgN,GAEhByK,MAAAA,WAtGkC3X,GCDnBs3B,0BACPr3B,mDACJA,KAEDs3B,SAAW/1B,EAAKtB,OAAOyG,WAAWlG,aAAa,eAC/C+2B,YAAch2B,EAAK+1B,SAAW/1B,EAAK+1B,SAAS1tB,MAAM,KAAO,KAEzDmH,oEAKCymB,EAAWr3B,KAAKF,OAAOyG,WAAWlG,aAAa,wBAE7Cg3B,OACD,eACEC,2BAEF,YACEC,wBAEF,QACcv3B,KAAKF,OAAO0J,iBAAiB,MAErCa,SAAQ,SAACmtB,OACVC,EAAWD,EAAMn3B,aAAa,kBAC9Bq3B,EAAQF,EAAMn3B,aAAa,eAEjCwR,EAAK8lB,aAAaH,EAAOC,EAAUC,oBAIrCh4B,QAAQC,IAAI,gDAAiD03B,qDAKjEl3B,SAAS8E,iBAAiB,iBAAiB,SAACwN,OACpCrN,EAAOqN,EAAE/M,OAAO2R,QAElBpF,EAAKmlB,YAAY1kB,SAAStN,EAAK0H,IAAK,KAClC8qB,EAIEC,EADU5lB,EAAKnS,OAAOg4B,gBACCxpB,WAAW6B,kBAEhC/K,EAAKsI,UACN,OACHkqB,EAAYz3B,SAAS8G,cAAc,OACzByD,aAAa,QAAS,kBAEhCmtB,EAAaxtB,SAAQ,SAACc,OACd4sB,EAAW53B,SAAS8G,cAAc,MACxC8wB,EAASrtB,aAAa,QAAS,uBAEzBstB,EAAW1jB,KAAKC,MAAMpJ,EAAM9K,aAAa,cAG/C62B,EAASe,SAASD,EAAU5yB,EAAM2yB,GAElCH,EAAU1wB,YAAY6wB,MAGxB9lB,EAAKnS,OAAOoH,YAAY0wB,aAErB,SACe3lB,EAAKnS,OAAOqQ,WACpB9F,SAAQ,SAAC4jB,GACjBA,EAAK9d,WAAW9F,SAAQ,SAACmtB,EAAOzgB,OACxBihB,EAAW1jB,KAAKC,MAAMsjB,EAAa9gB,GAAO1W,aAAa,cAEzD62B,EAASgB,sBAAsBV,EAAOpyB,EAAK6K,MAAO+nB,KACpDJ,EAAY3J,SAKlB2J,EAAU72B,uBAGVrB,QAAQC,IAAI,wHAOpBQ,SAAS8E,iBAAiB,iBAAiB,SAACwN,OACpCrN,EAAOqN,EAAE/M,OAAO2R,QAElBhF,EAAK+kB,YAAY1kB,SAAStN,EAAK0H,IAAK,KAChCqrB,EAAQ9lB,EAAKvS,OAAOqQ,kBAElB/K,EAAKsI,UACN,MACHyqB,EAAM9tB,SAAQ,SAAC4jB,OACPuJ,EAAQr3B,SAAS8G,cAAc,MACrCuwB,EAAM9sB,aAAa,QAAS,uBAEtB0tB,EAAanK,EAAK3f,WAClB0pB,EAAW1jB,KAAKC,MAAM6jB,EAAW/3B,aAAa,cAGpD62B,EAASe,SAASD,EAAU5yB,EAAMoyB,GAElCvJ,EAAK/mB,YAAYswB,gBAGhB,aACCa,EACJF,EAAM9tB,SAAQ,SAAC4jB,OACPmK,EAAanK,EAAK3f,WAClB0pB,EAAW1jB,KAAKC,MAAM6jB,EAAW/3B,aAAa,cAEpD4tB,EAAK9d,WAAW9F,SAAQ,SAACmtB,EAAOzgB,GAC1BmgB,EAASgB,sBAAsBV,EAAOpyB,EAAK6K,MAAO+nB,KACpDK,EAActhB,SAKpB1E,EAAKvS,OAAOqQ,WAAW9F,SAAQ,SAAC4jB,GAC9BA,EAAK9d,WAAWkoB,GAAat3B,0BAI/BrB,QAAQC,IAAI,4GAMT63B,EAAOC,EAAUC,cAC5Bv3B,SAAS8E,iBAAiB,iBAAiB,SAACwN,OACpCrN,EAAOqN,EAAE/M,OAAO2R,QAElBxE,EAAKukB,YAAY1kB,SAAStN,EAAK0H,KAAQ1H,EAAK0H,KAAO2qB,GAAYryB,EAAK0B,UAAY4wB,GAAWtyB,EAAK0H,KAAO4qB,GAAStyB,EAAK0B,UAAY2wB,EAAW,KACxIO,EAAW1jB,KAAKC,MAAM1B,EAAKylB,cAAcd,WAEvCpyB,EAAKsI,UACN,UACG6qB,EAAOp4B,SAAS8G,cAAc,OACpCiwB,EAASe,SAASD,EAAU5yB,EAAMoyB,GAElCA,EAAMtwB,YAAYqxB,aAEf,SACWf,EAAMhuB,iBAAiB,OAC/Ba,SAAQ,SAACmuB,GACTtB,EAASgB,sBAAsBM,EAAMpzB,EAAK6K,MAAO+nB,IACnDQ,EAAKz3B,0BAKTrB,QAAQC,IAAI,2GA2DR63B,OACNiB,EAAUjB,EAAMjxB,WAAW+H,WAAWjO,aAAa,gBACrDo4B,EAAS,OAAOA,MAGdhB,EAAWD,EAAMn3B,aAAa,kBAC9Bq4B,EAAgB14B,KAAKF,OAAOyG,WAAW9F,0CAAmCg3B,eAC5EiB,EAAsBA,EAAcr4B,aAAa,aAE9C,2CA9DO23B,EAAU5yB,EAAMyK,OAC1B8oB,SAEIX,EAAS9zB,UACV,WACHy0B,EAAax4B,SAAS8G,cAAc,OACd,SAAlB+wB,EAASpyB,KACX+yB,EAAWvxB,UAAYhC,EAAK6K,MAAMmR,YACP,QAAlB4W,EAASpyB,MAClB+yB,EAAWzxB,YAAY9B,EAAK6K,iBAG3B,SACH0oB,EAAax4B,SAAS8G,cAAc+wB,EAAS9zB,MAC7C8zB,EAAS7yB,QAAQkF,SAAQ,SAAC4F,OAClB2oB,EAAUz4B,SAAS8G,cAAc,UACvC2xB,EAAQxxB,UAAY6I,EACpB0oB,EAAWzxB,YAAY0xB,gBAGtB,SACHD,EAAax4B,SAAS8G,cAAc+wB,EAAS9zB,OAClCwG,aAAa,QAAS,0BACjCpF,OAAOgY,KAAK0a,EAASa,YAAYxuB,SAAQ,SAACsS,GACxCgc,EAAWjuB,aAAaiS,EAAKqb,EAASa,WAAWlc,qBAInDgc,EAAax4B,SAAS8G,cAAc,OAMhC7B,EAAKme,QAAQyU,EAAS9zB,MACxBy0B,EAAWvxB,UAAYhC,EAAKme,QAAQyU,EAAS9zB,OAE7Cy0B,EAAWvxB,UAAY,IACvB1H,QAAQC,IAAI,0CAA2Cq4B,IAG7DnoB,EAAM3I,YAAYyxB,iDAISG,EAAKC,EAAgBf,OAC5CgB,QACkB,aAAlBhB,EAAS9zB,OACX80B,EAASF,EAAI1X,cAAgB2X,EAAe3X,aAEvC4X,SApN2Bp5B,GCCjBq5B,0BACPp5B,mDACJA,KAEDq5B,SAAW,cAEX/B,SAAW/1B,EAAKtB,OAAOyG,WAAWlG,aAAa,eAC/C+2B,YAAch2B,EAAK+1B,SAAW/1B,EAAK+1B,SAAS1tB,MAAM,KAAO,KAEzDlC,SAAW,CACdxF,EAAG,EACHC,EAAG,EACHqL,GAAI,EACJC,GAAI,KAEDiI,MAAQ,CAEXgC,MAAO,MAGJ4hB,gBAAkB,OAClBC,eAAiB,OACjBC,aAAe,OAEfC,SAAW,OACXC,UAAY,OAEZ3oB,oEAIc5Q,KAAKF,OAAO0J,iBAAiB,oBACrCa,SAAQ,SAACmvB,OAEZ1sB,EAAK0sB,EAAUn5B,aAAa,WAElCwR,EAAK0D,MAAMgC,MAAMzK,GAAM,EAEvB+E,EAAK4nB,kBAAkBjyB,GAAGoE,OAAO4tB,GAAY1sB,WAI1C4sB,wEAIWF,EAAWG,cAAQC,6DAEnCJ,EAAUjrB,KAAK/G,GAAGgH,OACflH,UAAUtH,KAAKD,QACfmN,GAAG,SAAS,WAAQ+E,EAAK4nB,QAAQL,MACjCtsB,GAAG,QAAQ,WAAQ+E,EAAK6hB,OAAO0F,MAC/BtsB,GAAG,OAAO,WAAQ+E,EAAK6nB,OAAON,EAAWG,EAAQC,uCAG9CJ,QAEDz5B,OAAOc,UAAUG,IAAI,oBAErBm4B,gBAAkB3xB,GAAG3E,MAAMwJ,YAAYvM,YAGvCw5B,SAAWE,EAAU3yB,OAAOgP,iBAC5B0jB,UAAYC,EAAU3yB,OAAOiP,kBAC7BvO,SAASxF,EAAIy3B,EAAU3yB,OAAO0B,gBAC9BhB,SAASvF,EAAIw3B,EAAU3yB,OAAO4B,eAC9BlB,SAAS8F,GAAK,OACd9F,SAAS+F,GAAK,EAIfksB,EAAU3yB,OAAON,WAAWqP,aAAa,wBACtCyjB,aAAeG,EAAUtkB,OAAM,QAI/BmkB,aAAeG,OAGjBH,aACFvtB,QAAQ,cAAc,GACtBA,QAAQ,eAAe,GACvBE,KAAK,sBAAgBhM,KAAKuH,SAASvF,sBAAahC,KAAKuH,SAASxF,yCAG5Dy3B,WAGAjyB,SAAS8F,IAAM7F,GAAG3E,MAAMwK,QACxB9F,SAAS+F,IAAM9F,GAAG3E,MAAMyK,QAGxB+rB,aAAa32B,MAAM,kCAA4B1C,KAAKuH,SAAS8F,kBAASrN,KAAKuH,SAAS+F,gCAEpF8rB,eAAiB5xB,GAAG3E,MAAMwJ,YAAYvM,OAEvCE,KAAKm5B,kBAAoBn5B,KAAKo5B,eAAgB,KAG1CW,EAAkB/5B,KAAKm5B,gBAAgB14B,cAAc,oCACvDs5B,GAAiBA,EAAgBh5B,SAGjCf,KAAKo5B,eAAexjB,aAAa,mBAAoB,KAEjDokB,EAAkBR,EAAUtkB,OAAM,GACrCpJ,QAAQ,cAAc,GACtBA,QAAQ,gCAAgC,GACxCE,KAAK,QAAS,iBACdnF,YAEEuyB,eAAelyB,YAAY8yB,QAI7Bb,gBAAkBn5B,KAAKo5B,+CAIzBI,EAAWG,EAAQC,WACnBR,eAAiB5xB,GAAG3E,MAAMwJ,YAAYvM,OAGvCE,KAAKo5B,eAAexjB,aAAa,mBAAoB,KAGjDlC,EAAY1T,KAAKo5B,eAAe34B,cAAc,iCAGpDiT,EAAU7S,UAAUE,OAAO,+BAAgC,eAC3D2S,EAAU7S,UAAUG,IAAI,iBAGpB44B,IACFJ,EAAU1tB,QAAQ,eAAe,QAC5ByJ,MAAMgC,MAAMoiB,IAAW,QAKzBF,kBAAkBjyB,GAAGoE,OAAO8H,GAAYimB,GAAQ,QAGhDN,aAAat4B,aAGf,KAEGoL,EAAOnM,KAAKo5B,eAAen5B,QAAQ,YAEtBkM,GAAOA,EAAKyJ,aAAa,iBAG5B,KACRrO,EAAWC,GAAGG,MAAMwE,GACpB0D,EAAQ7P,KAAKq5B,aAAavtB,QAAQ,cAAc,GACnDE,KAAK,QAAS,iBACdnF,OAGH2yB,EAAU1tB,QAAQ,eAAe,QAC5ByJ,MAAMgC,MAAMoiB,IAAW,EAI5Bh0B,EAAgBxF,SAAU,WAAY,GAAI,CACxCsN,IAAK,CACHX,GAAIX,EAAKW,GACT+C,MAAAA,EACAjK,KAAMiK,EAAMxP,aAAa,uBACzBkH,SAAAA,EACAgM,KAAM,CACJjR,MAAOtC,KAAKs5B,SACZ/2B,OAAQvC,KAAKu5B,mBAKdF,aAAat4B,aAIf,IAG8B,IAA7Bf,KAAKuV,MAAMgC,MAAMoiB,GACY35B,KAAKF,OAAOW,oCAA6Bk5B,QACjD94B,UAAUE,OAAO,eAIrC64B,SACErkB,MAAMgC,MAAMoiB,IAAW,QAIzBN,aAAat4B,eAKjBhB,OAAOc,UAAUE,OAAO,gFAK7BZ,SAAS8E,iBAAiB,mBAAmB,SAACpC,SACpBA,EAAM6C,OAAOM,KAA7B8G,IAAAA,GAGFmtB,KAHM5rB,QAGmBgE,EAAKvS,OAAOW,oCAA6BqM,SAEpEmtB,IAE2B,IAAzB5nB,EAAKkD,MAAMgC,MAAMzK,IACnBmtB,EAAuBp5B,UAAUE,OAAO,eAI1CsR,EAAKkD,MAAMgC,MAAMzK,IAAO,aA3NOlN,GCqBjCs6B,GAAuB,WAC3Bx6B,QAAQC,IAAI,6BAGNw6B,EAAgBh6B,SAASqJ,iBAAiB,uBAC5C2wB,EAAcxwB,OAAS,IACzBwwB,EAAc9vB,SAAQ,SAAC+vB,GAED,IAAIvI,GAAYuI,MAGtCj6B,SAAS8E,iBAAiB,gBAAgB,WACxCkF,EAAwBgwB,WAKtBE,EAAsBl6B,SAASqJ,iBAAiB,gCAClD6wB,EAAoB1wB,OAAS,GAC/B0wB,EAAoBhwB,SAAQ,SAACiwB,GACD,IAAIrK,EAAkBqK,UAU9CC,EAAsBp6B,SAASqJ,iBAAiB,gCAClD+wB,EAAoB5wB,OAAS,IAC/B4wB,EAAoBlwB,SAAQ,SAACmwB,GACD,IAAIpJ,EAAkBoJ,MAGlDr6B,SAAS8E,iBAAiB,gBAAgB,WACxCkF,EAAwBowB,WAKtBE,EAAqBt6B,SAASqJ,iBAAiB,8BACjDixB,EAAmB9wB,OAAS,GAC9B8wB,EAAmBpwB,SAAQ,SAACqwB,GACD,IAAItM,EAAiBsM,UAK5CC,EAAmBx6B,SAASqJ,iBAAiB,yBAC/CmxB,EAAiBhxB,OAAS,MACvB,IAAID,EAAI,EAAGA,EAAIixB,EAAiBhxB,OAAQD,GAAK,EACxB,IAAIzI,EAAgB05B,EAAiBjxB,QAK3DkxB,EAAYz6B,SAASqJ,iBAAiB,+BACxCoxB,EAAUjxB,OAAS,MAChB,IAAID,EAAI,EAAGA,EAAIkxB,EAAUjxB,OAAQD,GAAK,EACzB,IAAI4nB,GAAQsJ,EAAUlxB,QAUpCqlB,EAAa5uB,SAASqJ,iBAAiB,6BACzCulB,EAAWplB,OAAS,GACtBolB,EAAW1kB,SAAQ,SAACwlB,GACD,IAAIf,EAASe,UAO5BnY,EAAQvX,SAASqJ,iBAAiB,wBACpCkO,EAAM/N,OAAS,EAAG,KAEW,IAA3BrJ,kBAAkBC,KAAe,KAE7B+O,EAAcnP,SAASM,cAAc,yBACvC6O,EACiB,IAAImI,EAAcnI,EAAaoI,GAMtDA,EAAMrN,SAAQ,SAAC8B,GACD,IAAI4C,EAAI5C,UAIO,IAA3B7L,kBAAkBC,KAAe,KAG7Bs6B,EAAW16B,SAASqJ,iBAAiB,iBACvCqxB,EAASlxB,OAAS,GACpBkxB,EAASxwB,SAAQ,SAAC4S,GACD,IAAID,EAAOC,UAKxB6d,EAAa36B,SAASqJ,iBAAiB,2BACzCsxB,EAAWnxB,OAAS,GACtBmxB,EAAWzwB,SAAQ,SAAC0wB,OACZ7d,EAAW/c,SAASM,sDACSs6B,EAAU16B,aACzC,4BAIa,IAAIisB,EACnByO,EAAU16B,aAAa,qBACvB06B,EACAzmB,KAAKC,MAAM2I,EAAS7c,aAAa,0BAE1BuQ,cAKPoqB,EAAoB76B,SAASqJ,iBACjC,kCAGEwxB,EAAkBrxB,OAAS,GAC7BqxB,EAAkB3wB,SAAQ,SAAC4wB,OACnB/d,EAAW/c,SAASM,6DACgBw6B,EAAiB56B,aACvD,mCAGoB,IAAIwnB,EAC1BoT,EAAiB56B,aAAa,4BAC9B46B,EACA3mB,KAAKC,MAAM2I,EAAS7c,aAAa,0BAEnBuQ,cAKdsqB,EAAiB/6B,SAASqJ,iBAC9B,+BAEE0xB,EAAevxB,OAAS,GAC1BuxB,EAAe7wB,SAAQ,SAAC8wB,OAChBje,EAAW/c,SAASM,0DACa06B,EAAcruB,UAEhC,IAAIwgB,EACvB6N,EACA7mB,KAAKC,MAAM2I,EAAS7c,aAAa,0BAEtBuQ,cAKXwqB,EAAaj7B,SAASqJ,iBAAiB,oBACzC4xB,EAAWzxB,OAAS,GACtByxB,EAAW/wB,SAAQ,SAACgxB,GACD,IAAInE,GAASmE,UAK5BC,EAAcn7B,SAASqJ,iBAAiB,oBAC1C8xB,EAAY3xB,OAAS,GACvB2xB,EAAYjxB,SAAQ,SAACkxB,GACD,IAAItC,GAAUsC,UAK9BC,EAAar7B,SAASqJ,iBAAiB,0BACzCgyB,EAAW7xB,OAAS,GACtB6xB,EAAWnxB,SAAQ,SAACoxB,GACD,IAAItnB,EAASsnB,UAK5BC,EAAev7B,SAASqJ,iBAAiB,4BAC3CkyB,EAAa/xB,OAAS,GACxB+xB,EAAarxB,SAAQ,SAACsxB,GACD,IAAIpF,GAAWoF,UAKhCC,EAAYz7B,SAASqJ,iBAAiB,mBACxCoyB,EAAUjyB,OAAS,GACrBiyB,EAAUvxB,SAAQ,SAACygB,OACX5N,EAAW4N,EAASlV,aAAa,wBACnCkV,EAASzqB,aAAa,wBACtB,GACa,IAAIwpB,EAASiB,EAAUxW,KAAKC,MAAM2I,IAC1CtM,cAKPirB,EAA0B17B,SAASqJ,iBACvC,4BAEEqyB,EAAwBlyB,OAAS,GACnCkyB,EAAwBxxB,SAAQ,SAACrE,GACD,IAAIimB,EAAsBjmB,GAClC4K,aC7O9B,cCL4B,eAGH1K,MAAMsR,OACvBskB,QAAQ/S,UAAUrX,UAClBoqB,QAAQ/S,UAAU9oB,SACW,mBAAvBmC,OAAOqD,aACW,mBAAlBH,OAAOC,OAEA,CACjB7F,QAAQq8B,KAAK,8BAEPC,EAAe77B,SAASM,cAAc,uBAC5Cu7B,EAAav7B,cAAc,wBAAwB2G,qBAAgBtD,SAASI,iBAAQJ,SAASm4B,aAC7FD,EAAan7B,UAAUE,OAAO,cAEvB,SAGF,EDbHm7B,GAAuB,OAAO,EAGlC/7B,SAAS8E,iBAAiB,mBAAoBxF,GAAmB,GAGjE2C,OAAO6C,iBAAiB,OAAQi1B,IAAsB,GAPxD"}