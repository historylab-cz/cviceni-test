{"version":3,"file":"components.build.js","sources":["../../../../src/js/components/component.js","../../../../src/js/components/magnifying-glass.js","../../../../src/js/lib/utils.js","../../../../src/js/components/photo-detail.js","../../../../src/js/components/media/media.js","../../../../src/js/components/media/audio-player.js","../../../../src/js/components/sortable.js","../../../../src/js/components/svg-lib/svg-dragndrop.js","../../../../src/js/components/svg-lib/svg-draw.js","../../../../src/js/components/svg-lib/svg-text.js","../../../../src/js/components/svg.js","../../../../src/js/components/svg-lib/svg-radial-menu.js","../../../../src/js/store/observer.js","../../../../src/js/store/store-constants.js","../../../../src/js/store/store.js","../../../../src/js/store/store-global.js","../../../../src/js/components/editor/editor.js","../../../../src/js/components/analytical-table.js","../../../../src/js/store/store-keywords.js","../../../../src/js/components/keywords.js","../../../../src/js/components/editor-tags-placeholder.js","../../../../src/js/components/test-quiz.js","../../../../src/js/components/generic-table.js","../../../../src/js/components/fullscreen.js","../../../../src/js/components/user-text.js","../../../../src/js/components/media/audio-player-normal.js","../../../../src/js/components/media/audio-player-simple.js","../../../../src/js/components/fake-map.js","../../../../src/js/components/media/video.js","../../../../src/js/components/components.js","../../../../src/js/components/dom-load.js","../../../../src/js/components/window-load.js"],"sourcesContent":["export default class Component {\n  constructor($element) {\n    this.target = $element;\n    this.$slide = this.target.closest('.slide');\n\n    if (this.$slide) {\n      this.$buttonFeedback = this.$slide.querySelector('[data-feedback-button]');\n      this.$buttonFeedbackText = this.$buttonFeedback.querySelector('span');\n    }\n\n    this.showFeedback = this.showFeedback.bind(this);\n  }\n\n  showFeedback() {\n    if (this.$buttonFeedback && this.$buttonFeedback.classList.contains('button-hidden')) {\n      this.$buttonFeedback.classList.remove('button-hidden');\n    }\n  }\n}\n","import Component from './component';\n\nexport default class MagnifyingGlass extends Component {\n  // https://www.youtube.com/watch?v=e8IwM3iqnL0\n  constructor($element) {\n    super($element);\n    // SVG lupa a ještě dynamicky měnícího se SVG,\n    // který není na počátku známé?\n    // if (el.nodeName === 'svg') {\n    //   console.log('SVG');\n    //   el.children[0].getAttribute('xlink:href')\n    // }\n    this.$element = document.querySelector('[data-lupa]');\n    this.$canvas = document.querySelector('[data-lupa-canvas]');\n    this.ctx = this.$canvas.getContext('2d');\n\n    this._onStart = this._onStart.bind(this);\n    this._onMove = this._onMove.bind(this);\n    this._onEnd = this._onEnd.bind(this);\n    this._update = this._update.bind(this);\n    this._onResize = this._onResize.bind(this);\n\n    this.zoomGlassSize = 230;\n    this.targetBCR = null;\n    this.zoomed = 0;\n    this.targetZoomed = 0;\n\n    this.x = 0;\n    this.y = 0;\n    this.trackingTouch = false;\n\n    this._addEventListeners();\n    this._initCanvas();\n    this._onResize();\n\n    window.requestAnimationFrame(this._update);\n  }\n\n  _initCanvas() {\n    const width = this.zoomGlassSize;\n    const height = this.zoomGlassSize;\n    // if retina makes canvas more dense\n    const dPR = window.devicePixelRation || 1;\n    this.$canvas.width = width * dPR;\n    this.$canvas.height = height * dPR;\n\n    this.$canvas.style.width = `${width}px`;\n    this.$canvas.style.height = `${height}px`;\n\n    this.ctx.scale(dPR, dPR);\n  }\n\n  _onResize() {\n    this.targetBCR = this.target.getBoundingClientRect();\n  }\n\n  _onStart(event) {\n    if (event.target !== this.target) {\n      return;\n    }\n\n    event.preventDefault();\n\n\n    this.x = event.pageX || event.touches[0].pageX;\n    this.y = event.pageY || event.touches[0].pageY;\n\n    this.trackingTouch = true;\n    this.targetZoomed = 1;\n    this.zoomed = 0;\n\n    window.requestAnimationFrame(this._update);\n  }\n\n  _onMove(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.x = event.pageX || event.touches[0].pageX;\n    this.y = event.pageY || event.touches[0].pageY;\n  }\n\n  _onEnd() {\n    if (this.targetZoomed) {\n      // show OK button or feedback\n      this.showFeedback();\n    }\n\n    this.targetZoomed = 0;\n    this.trackingTouch = false;\n  }\n\n  _update() {\n    const TAU = Math.PI * 2;\n    const MAX_RADIUS = 100;\n    const radius = this.zoomed * MAX_RADIUS;\n\n    this.targetBCR = this.target.getBoundingClientRect();\n\n    // local coordinates (ratio <0,1>)\n    const ratioX =\n      // min. 0\n      Math.max(0,\n        // max. 1\n        Math.min(1, ((this.x - this.targetBCR.left) / this.targetBCR.width))\n      );\n    // console.log(ratioX);\n    const ratioY =\n      // min. 0\n      Math.max(0,\n        // max. 1\n        Math.min(1, ((this.y - this.targetBCR.top) / this.targetBCR.height))\n      );\n    // console.log(ratioY);\n\n    // actual zooming (scaling)\n    const imageScale = 2.5;\n    const scaledTargetWidth = this.targetBCR.width * imageScale;\n    const scaledTargetHeight = this.targetBCR.height * imageScale;\n\n    // Firefox on Windows has a bug because of the shadow\n    if (!(platform.os.family.indexOf('Windows') > -1 && platform.name.indexOf('Firefox') > -1)) {\n      // Shadow.\n      this.ctx.shadowColor = 'rgba(0,0,0,0.4)';\n      this.ctx.shadowBlur = 12;\n      this.ctx.shadowOffsetY = 8;\n    }\n\n    // Background.\n    this.ctx.clearRect(0, 0, this.zoomGlassSize, this.zoomGlassSize);\n    this.ctx.fillStyle = '#fff';\n    this.ctx.beginPath();\n    this.ctx.arc(\n      // x\n      this.zoomGlassSize / 2,\n      // y\n      (this.zoomGlassSize - 10) - radius,\n      // radius, startAngle, endAngle\n      radius, 0, TAU);\n    this.ctx.closePath();\n    this.ctx.fill();\n\n    // save the default state (without image)\n    this.ctx.save();\n\n    // Zoomed image.\n    this.ctx.beginPath();\n    this.ctx.arc(\n      // x\n      this.zoomGlassSize / 2,\n      // y\n      (this.zoomGlassSize - 10) - (radius + 1),\n      // radius, startAngle, endAngle\n      radius * 1.03, 0, TAU);\n    this.ctx.clip();\n    this.ctx.closePath();\n    this.ctx.drawImage(this.target,\n      // dx and dy (left and top)\n      (-ratioX * scaledTargetWidth) + (this.zoomGlassSize / 2),\n      (-ratioY * scaledTargetHeight) + (this.zoomGlassSize / 2),\n      // scaled width and height\n      scaledTargetWidth, scaledTargetHeight);\n\n    // go back to default state (without image)\n    // so next update starts fresh\n    this.ctx.restore();\n\n    // Position the parent $element.\n    this.$element.style.transform = `translate(${this.x}px, ${this.y}px)`;\n\n    // Update the zoom value.\n    this.zoomed += (this.targetZoomed - this.zoomed) / 4;\n\n    // Schedule another update if the zoom is fairly non-zero.\n    if (this.zoomed > 0.001) {\n      // if (this.zoomed > 0.001 && this.zoomed < 0.998) {\n      window.requestAnimationFrame(this._update);\n      // } else if (this.zoomed >= 0.998) {\n      //   this.zoomed = 1;\n    } else {\n      this.zoomed = 0;\n    }\n  }\n\n  _addEventListeners() {\n    // touch events\n    document.addEventListener('touchstart', this._onStart);\n    document.addEventListener('touchmove', this._onMove);\n    document.addEventListener('touchend', this._onEnd);\n    // mouse events\n    document.addEventListener('mousedown', this._onStart);\n    document.addEventListener('mousemove', this._onMove);\n    document.addEventListener('mouseup', this._onEnd);\n    // window events\n    window.addEventListener('resize', this._onResize);\n  }\n}\n","// https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript#3855394\nexport function __getQueryStringParams() {\n  const parameters = window.location.search.substr(1).split('&');\n\n  if (parameters === '') {\n    return {};\n  }\n\n  const b = {};\n\n  for (let i = 0; i < parameters.length; i += 1) {\n    const p = parameters[i].split('=', 2);\n\n    if (p.length === 1) {\n      b[p[0]] = '';\n    } else {\n      b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, ' '));\n    }\n  }\n\n  return b;\n}\n\nexport function __createNewCustomEvent(name, options = {}, data = null) {\n  const defaults = {\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Event_bubbling\n    bubbles: true,\n    // cancelBubble\n    // stopPropagation()\n    // cancelable\n    // composed\n    // currentTarget\n    // defaultPrevented\n    // preventDefault()\n    // eventPhase\n    // returnValue\n    // preventDefault()\n    // defaultPrevented\n    // target\n    // timeStamp\n    // type\n    // isTrusted\n  };\n\n  const properties = Object.assign(defaults, options);\n\n  return new CustomEvent(name, {\n    detail: data,\n    ...properties,\n  });\n}\n\nexport function __dispatchEvent($element, type, options, payload) {\n  const event = __createNewCustomEvent(type, options, payload);\n\n  /* if (type === 'svg.change') {\n    console.log(event.detail.svg);\n  } */\n\n  $element.dispatchEvent(event);\n}\n\n/* https://plainjs.com/javascript/events/trigger-an-event-11/ */\nexport function __triggerEvent(el, type) {\n\n  if ('createEvent' in document) {\n    // modern browsers, IE9+\n    const e = new Event(type);\n    el.dispatchEvent(e);\n  } else {\n    // IE 8\n    const e = document.createEventObject();\n    e.eventType = type;\n    el.fireEvent('on'+e.eventType, e);\n  }\n}\n\nexport function __keycodeIsPrintableCharacter(keycode) {\n\n  const valid =\n    (keycode > 47 && keycode < 58) || // number keys\n    keycode == 32 || keycode == 13 || // spacebar & return key(s) (if you want to allow carriage returns)\n    (keycode > 64 && keycode < 91) || // letter keys\n    (keycode > 95 && keycode < 112) || // numpad keys\n    (keycode > 185 && keycode < 193) || // ;=,-./` (in order)\n    (keycode > 218 && keycode < 223); // [\\]' (in order)\n  // https://stackoverflow.com/questions/12467240/determine-if-javascript-e-keycode-is-a-printable-non-control-character#answer-12467610\n\n  return valid;\n\n}\n\nexport function __isObject(item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}\n\n// https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\n// Maybe use lodash ? https://lodash.com/docs/4.17.10#defaultsDeep\nexport function __mergeDeep(target, source) {\n  const output = Object.assign({}, target);\n  if (__isObject(target) && __isObject(source)) {\n    Object.keys(source).forEach((key) => {\n      if (__isObject(source[key])) {\n        if (!(key in target)) {\n          Object.assign(output, { [key]: source[key] });\n        } else {\n          output[key] = __mergeDeep(target[key], source[key]);\n        }\n      } else {\n        Object.assign(output, { [key]: source[key] });\n      }\n    });\n  }\n  return output;\n}\n\nexport function __isObjectEmpty(object) {\n  return !Object.keys(object).length;\n}\n\nexport function __insertBefore(newNode, referenceNode) {\n  referenceNode.parentNode.insertBefore(newNode, referenceNode);\n}\n\nexport function __insertAfter(newNode, referenceNode) {\n\n  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n\n}\n\nexport function __getRealDimensions(el, translated = true) {\n\n  const clonedElement = el.cloneNode(true);\n\n  clonedElement.style.visibility = 'hidden';\n  clonedElement.style.display = 'block';\n\n  __insertAfter(clonedElement, el);\n\n  const elDimensions = clonedElement.getBoundingClientRect();\n  const elPosition = (translated) ? __positionTranslated(clonedElement) : __position(clonedElement);\n\n\n  __remove(clonedElement);\n\n  return {\n    width: elDimensions.width,\n    height: elDimensions.height,\n    top: elPosition.top,\n    left: elPosition.left,\n  };\n\n}\n\nexport function __remove(el /* :HTMLElement */) {\n\n  el.parentNode.removeChild(el);\n\n}\n\n\nexport function __getHTML(node) {\n\n  if (!node || !node.tagName) { return; }\n  if (node.outerHTML) { return node.outerHTML; }\n\n  // polyfill:\n  const wrapper = document.createElement('div');\n  wrapper.appendChild(node.cloneNode(true));\n  return wrapper.innerHTML;\n\n}\n\nexport function __getText(el) {\n  return el.innerText || el.textContent;\n}\n\nexport function __globalPosition(event) {\n  // d3.event\n  // The current event, if any. This is set during the invocation of an event listener, and is reset after the listener terminates. Use this to access standard event fields such as event.timeStamp and methods such as event.preventDefault. While you can use the native event.pageX and event.pageY, it is often more convenient to transform the event position to the local coordinate system of the container that received the event using d3.mouse, d3.touch or d3.touches.\n  // If you use Babel, Webpack, or another ES6-to-ES5 bundler, be aware that the value of d3.event changes during an event! An import of d3.event must be a live binding, so you may need to configure the bundler to import from D3’s ES6 modules rather than from the generated UMD bundle; not all bundlers observe jsnext:main. Also beware of conflicts with the window.event global.\n  return {\n    x: event.pageX,\n    y: event.pageY,\n  };\n}\n\nexport function __localPosition(container) {\n  // d3.mouse\n  // Returns the x and y coordinates of the current event relative to the specified container. The container may be an HTML or SVG container element, such as a G element or an SVG element. The coordinates are returned as a two-element array of numbers [x, y].\n  // BUG: d3.mouse doesn’t observe CSS transform on Firefox — https://github.com/d3/d3-selection/issues/81\n  const pos = d3.mouse(container);\n  return {\n    x: d3.format('.0f')(pos[0]),\n    y: d3.format('.0f')(pos[1]),\n  };\n}\n\nexport function __positionTranslated(el) {\n\n\n  const curTransform = new WebKitCSSMatrix(window.getComputedStyle(el).webkitTransform);\n\n  const body = document.body;\n\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n\n  return {\n    left: el.offsetLeft + curTransform.m41,\n    top: el.offsetTop + curTransform.m42,\n  };\n\n}\n\nexport function __position(el) {\n\n  const elAttibutes = el.getBoundingClientRect();\n  const body = document.body;\n\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n\n  return {\n    left: elAttibutes.left + scrollLeft,\n    top: elAttibutes.top + scrollTop,\n    height: elAttibutes.height,\n    width: elAttibutes.width,\n  };\n}\n\n// TODO: check for https://github.com/vladocar/nanoJS/\nexport function __toggleClass(element, cls) {\n  if (__hasClass(element, cls)) {\n    __removeClass(element, cls);\n  } else {\n    __addClass(element, cls);\n  }\n}\n\nexport function __hasClass(element, cls) {\n  // if there are no elements or classes, we're done\n  if (!element || !cls) return false;\n  return (element.classList) ? element.classList.contains(cls) : (`${element.className} `).indexOf(`${cls} `) > -1;\n}\n\nexport function __addClass(elements, classes) {\n  let _elements = elements;\n  let _classes = classes;\n\n  // if there are no elements or classes, we're done\n  if (!_elements || !_classes) { return; }\n\n  if (typeof (_elements) === 'string') {\n    // if we have a selector, get the chosen _elements\n    _elements = document.querySelectorAll(_elements);\n  } else if (_elements.tagName) {\n    // if we have a single DOM element, make it an array to simplify behavior\n    _elements = [_elements];\n  }\n\n  if (typeof (_classes) === 'string') {\n    // make an array from string _classes\n    _classes = _classes.split(' ');\n  } else {\n    console.log('Class argument must be string with spaces in between class names.');\n    return;\n  }\n\n  // add class to all chosen _elements\n  for (let i = 0; i < _elements.length; i += 1) {\n    // check classList support\n    if (_elements[i].classList) {\n      _elements[i].classList.add(..._classes);\n    } else if (!__hasClass(_elements[i], ..._classes)) {\n      for (let j = 0; j < _classes.length; j += 1) {\n        _elements[i].classes += ` ${_classes[j]}`;\n      }\n    }\n  }\n}\n\nexport function __removeClass(elements, classes) {\n  let _elements = elements;\n  let _classes = classes;\n\n  // if there are no elements or classes, we're done\n  if (!_elements || !_classes) { return; }\n\n  if (typeof (_elements) === 'string') {\n    // if we have a selector, get the chosen _elements\n    _elements = document.querySelectorAll(_elements);\n  } else if (_elements.tagName) {\n    // if we have a single DOM element, make it an array to simplify behavior\n    _elements = [_elements];\n  }\n\n  if (typeof (_classes) === 'string') {\n    // make an array from string _classes\n    _classes = _classes.split(' ');\n  } else {\n    console.log('Class argument must be string with spaces in between class names.');\n    return;\n  }\n\n  // remove class from all chosen _elements\n  for (let i = 0; i < _elements.length; i += 1) {\n    // check classList support\n    if (_elements[i].classList) {\n      _elements[i].classList.remove(..._classes);\n    } else {\n      for (let j = 0; j < _classes.length; j += 1) {\n        _elements[i].className = _elements[i].className.replace(new RegExp(`\\\\b${classes[j]}\\\\b`, 'g'), '');\n      }\n    }\n  }\n}\n","import { __addClass, __removeClass, __hasClass } from '../lib/utils';\nimport Component from './component';\n\n// zoom the image\nexport default class PhotoDetail extends Component {\n  constructor(element) {\n    super(element);\n    this.zoomIntensity = 3;\n    this.targetContainer = this.target.parentElement;\n\n    this._onClick = this._onClick.bind(this);\n    this._onMove = this._onMove.bind(this);\n    // TODO: if window size has changed\n    this._onResize = this._onResize.bind(this);\n\n    this._getImageDimensions();\n    this._addEventListeners();\n  }\n\n  _getImageDimensions() {\n    // returns the size of the scaled image\n    // and its position relative to the viewport\n    this.targetBCR = this.target.getBoundingClientRect();\n\n    // we just need to set the height of the container\n    // only for on window load and on window resize\n    // width is 100% of its container\n    this.targetContainer.style.height = `${this.targetBCR.height}px`;\n\n    // TODO: count image side ratio\n  }\n\n  _onResize() {\n    // returns the size of the scaled image\n    // and its position relative to the viewport\n    this.targetBCR = this.target.getBoundingClientRect();\n  }\n\n  _onClick(event) {\n    if (event.target !== this.target) {\n      return;\n    }\n\n    // Cancels the event if it is cancelable, without stopping further propagation of the event.\n    event.preventDefault();\n\n    // to zoom\n    if (!__hasClass(this.target, 'enlarged')) {\n\n      this._onResize();\n\n      // add state class\n      __addClass(this.target, 'enlarged');\n\n      // get mouse event position\n      this.x = event.clientX || event.touches[0].pageX;\n      this.y = event.clientY || event.touches[0].pageY;\n\n      // set position\n      this.target.style.top = `${this.positionY}%`;\n      this.target.style.left = `${this.positionX}%`;\n    } else {\n      // to unzoom\n      // remove move state class if present\n      if (__hasClass(this.target, 'detail-move')) {\n        __removeClass(this.target, 'detail-move');\n      }\n\n      // remove zoom state class\n      __removeClass(this.target, 'enlarged');\n\n      // remove zoomed position\n      this.target.style.left = '';\n      this.target.style.top = '';\n    }\n  }\n\n  _onMove(event) {\n    if (event.target !== this.target || !__hasClass(this.target, 'enlarged')) {\n      return;\n    }\n\n    // run only it was zoomed already\n    if (__hasClass(this.target, 'enlarged')) {\n\n      // add state class\n      if (!__hasClass(this.target, 'detail-move')) {\n        __addClass(this.target, 'detail-move');\n      }\n\n      // track mouse event position\n      this.x = event.clientX || event.touches[0].pageX;\n      this.y = event.clientY || event.touches[0].pageY;\n\n      // get position\n      this.target.style.top = `${this.positionY}%`;\n      this.target.style.left = `${this.positionX}%`;\n    }\n\n  }\n\n  static get positionY() {\n    return (((this.y - this.targetBCR.top) / this.targetBCR.height) * -100) * (this.zoomIntensity - 1);\n  }\n  static get positionX() {\n    return (((this.x - this.targetBCR.left) / this.targetBCR.width) * -100) * (this.zoomIntensity - 1);\n  }\n\n  _addEventListeners() {\n    // touch events\n    document.addEventListener('touchstart', this._onClick);\n    document.addEventListener('touchmove', this._onMove);\n    // mouse events\n    document.addEventListener('mousedown', this._onClick);\n    document.addEventListener('mousemove', this._onMove);\n    // window events\n    // window.addEventListener('resize', this._onResize);\n  }\n}\n","import { __createNewCustomEvent } from '../../lib/utils';\n\nconst mediaEvents = {\n  playchange: __createNewCustomEvent('playchange'),\n  timechange: __createNewCustomEvent('timechange'),\n  canplaystart: __createNewCustomEvent('canplaystart'),\n};\n\nfunction stopPlayingVideoPlayers($players) {\n  // pause all other playing media tracks\n  $players.forEach(($player) => {\n    const $media = $player.querySelector('audio') || $player.querySelector('video');\n    if ($media && !$media.paused) {\n      $media.pause();\n      $player\n        .querySelector('[data-player-control]')\n        .setAttribute('data-player-control', 'paused');\n    }\n  });\n}\n\nfunction getSecondsMinutesFormat(seconds) {\n  const duration = {\n    seconds: Math.floor(seconds),\n    minutes: Math.floor(seconds / 60),\n  };\n\n  duration.seconds = (duration.seconds - (duration.minutes * 60)).toString(10);\n\n  return `${duration.minutes}:${(`0${duration.seconds}`).slice(-2)}`;\n}\n\nexport {\n  getSecondsMinutesFormat,\n  stopPlayingVideoPlayers,\n  mediaEvents,\n};\n","import Component from '../component';\nimport { getSecondsMinutesFormat, stopPlayingVideoPlayers } from './media';\n\nexport default class AudioPlayer extends Component {\n  // eslint-disable-next-line no-useless-constructor\n  constructor($element) {\n    super($element);\n  }\n\n  // TODO: move to audio-simple.js\n  static addEventListeners($item, showFeedback) {\n    const $players = document.querySelectorAll('[data-player-audio]');\n    const $audio = $item.querySelector('audio');\n    const $playButton = $item.querySelector('[data-player-control]');\n    const $timeLeft = $item.querySelector('[data-audio-time-left]');\n\n    $playButton.addEventListener('click', (event) => {\n      if ($playButton.getAttribute('data-player-control') === 'paused') {\n        // TODO: abstract\n        stopPlayingVideoPlayers(Array.from($players));\n        $audio.play();\n        $playButton.setAttribute('data-player-control', 'playing');\n      } else {\n        // TODO: abstract\n        $audio.pause();\n        $playButton.setAttribute('data-player-control', 'paused');\n      }\n\n      showFeedback();\n\n      event.stopPropagation();\n    }, false);\n\n    // do not propagate audio control events higher into the dom\n    $playButton.addEventListener('mousedown', (event) => {\n      event.stopPropagation();\n    }, false);\n\n    $audio.addEventListener('timeupdate', () => {\n      $timeLeft.innerText = getSecondsMinutesFormat($audio.currentTime);\n    });\n\n    $audio.addEventListener('ended', () => {\n      $playButton.setAttribute('data-player-control', 'paused');\n    });\n  }\n}\n","import Component from './component';\nimport AudioPlayer from './media/audio-player';\nimport { stopPlayingVideoPlayers } from './media/media';\n\nexport default class Sortable extends Component {\n  constructor($element) {\n    super($element);\n\n    this.container = this.target;\n    this.items = $element.querySelectorAll('[data-sortable-drag]');\n    this.droppables = $element.querySelectorAll('[data-sortable-drop]');\n    this.placeholder = () => document.querySelector('#sortable-placeholder');\n    this.$players = this.container.querySelectorAll('[data-player-audio]');\n\n    // get direction (type of sortable \"horizontalni\" or \"vertikalni\")\n    this.direction = this.target.getAttribute('data-sortable-target');\n    this.trackingTouch = false;\n    this.before = false;\n    this.after = false;\n\n    this.mouse = {\n      x: event => event.clientX || event.touches[0].clientX,\n      y: event => event.clientY || event.touches[0].clientY,\n      x0: 0,\n      y0: 0,\n      x1: 0,\n      y1: 0,\n    };\n\n    this.dragged = {\n      el: null,\n      clone: null,\n      posRel: {},\n      rect: () => this.dragged.el.getBoundingClientRect(),\n      size: {},\n    };\n\n    this.siblings = {\n      prev: null,\n      next: null,\n    };\n\n    this._onStart = this._onStart.bind(this);\n    this._onMove = this._onMove.bind(this);\n    this._onEnd = this._onEnd.bind(this);\n    this._update = this._update.bind(this);\n\n    this._addEventListeners();\n  }\n\n  _onStart(event) {\n    if (!event.target.hasAttribute('data-sortable-drag')) {\n      return;\n    }\n\n    // TODO: zastavit všechno audio on drag start\n    if (this.$players.length > 0) {\n      stopPlayingVideoPlayers(this.$players);\n    }\n\n\n    this.trackingTouch = true;\n\n    this.dragged.el = event.target;\n    this.dragged.clone = this.dragged.el.cloneNode(true);\n    this.dragged.posRel.top = this.dragged.el.offsetTop;\n    this.dragged.posRel.left = this.dragged.el.offsetLeft;\n    this.dragged.size.width = this.dragged.el.offsetWidth;\n    this.dragged.size.height = this.dragged.el.offsetHeight;\n\n    this.dragged.el.style.top = `${this.dragged.posRel.top}px`;\n    this.dragged.el.style.left = `${this.dragged.posRel.left}px`;\n    this.dragged.el.style.width = `${this.dragged.size.width}px`;\n    this.dragged.el.style.height = `${this.dragged.size.height}px`;\n    this.dragged.el.classList.add('is-dragged');\n\n    this.container.classList.add('is-dragged');\n\n    this._addPlaceholder(this.dragged.el);\n    this._onOver(event);\n\n    this.mouse.x0 = this.mouse.x(event);\n    this.mouse.y0 = this.mouse.y(event);\n\n    event.preventDefault();\n  }\n\n  _onMove(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.mouse.x1 = this.mouse.x(event) - this.mouse.x0;\n    this.mouse.y1 = this.mouse.y(event) - this.mouse.y0;\n\n    window.requestAnimationFrame(this._update);\n\n    this._onOver(event);\n  }\n\n  _onEnd(event) {\n    if (!this.trackingTouch) {\n      return;\n    }\n\n    this.trackingTouch = false;\n    this.container.classList.remove('is-dragged');\n    this.dragged.el.classList.remove('is-dragged');\n    this.dragged.el.style.top = '';\n    this.dragged.el.style.left = '';\n    this.dragged.el.style.width = '';\n    this.dragged.el.style.height = '';\n    this.dragged.el.style.transform = '';\n\n    const placeholder = this.placeholder();\n    const rect = placeholder.getBoundingClientRect();\n\n    switch (this.direction) {\n      case 'horizontal':\n        if (rect.left <= this.mouse.x(event) <= rect.right) {\n          this._onDrop();\n        }\n        break;\n      case 'vertical':\n        if (rect.top <= this.mouse.y(event) <= rect.bottom) {\n          this._onDrop();\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    this._removePlaceholder();\n  }\n\n  // _onEnter() {}\n\n  _onOver(event) {\n    this.before = false;\n    this.after = false;\n\n    this._getReference();\n\n    if (\n      this.siblings.next\n      && this.siblings.next.hasAttribute('data-sortable-drop')\n    ) {\n      const next = this.siblings.next.getBoundingClientRect();\n\n      switch (this.direction) {\n        case 'horizontal':\n          if (this.dragged.rect().right > (next.left + (next.width / 1.5))) {\n            this.after = true;\n            this._addPlaceholder(this.siblings.next);\n          }\n          break;\n        case 'vertical':\n          if (this.dragged.rect().bottom > (next.top + (next.height / 1.5))) {\n            this.after = true;\n            this._addPlaceholder(this.siblings.next);\n          }\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    if (\n      this.siblings.prev\n      && this.siblings.prev.hasAttribute('data-sortable-drop')\n    ) {\n      const prev = this.siblings.prev.getBoundingClientRect();\n\n      switch (this.direction) {\n        case 'horizontal':\n          if (this.dragged.rect().left < (prev.right - (prev.width / 1.5))) {\n            this.before = true;\n            this._addPlaceholder(this.siblings.prev);\n          }\n          break;\n        case 'vertical':\n          if (this.dragged.rect().top < (prev.bottom - (prev.height / 1.5))) {\n            this.before = true;\n            this._addPlaceholder(this.siblings.prev);\n          }\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n  // _onLeave() {}\n\n  _onDrop() {\n    const placeholder = this.placeholder();\n\n    this._addEventListenerToItem(this.dragged.clone);\n    // TODO: přiřadit eventListenery audio playerům\n    if (this.dragged.clone.querySelector('[data-player-audio]')) {\n      AudioPlayer.addEventListeners(this.dragged.clone, this.showFeedback);\n    }\n\n    this.container.insertBefore(this.dragged.clone, placeholder);\n    this.dragged.el.parentNode.removeChild(this.dragged.el);\n\n    // show OK button or feedback\n    this.showFeedback();\n  }\n\n  _update() {\n    this.dragged.el.style.transform = `translate3d(${this.mouse.x1}px, ${\n      this.mouse.y1\n    }px, 0) rotate(5deg)`;\n  }\n\n  _addPlaceholder(item) {\n    this._removePlaceholder();\n\n    const placeholder = document.createElement('div');\n    placeholder.classList.add('sortable-item', 'sortable-placeholder');\n    placeholder.setAttribute('id', 'sortable-placeholder');\n    placeholder.style.minHeight = `${this.dragged.size.height}px`;\n\n    if (this.dragged.el.querySelector('img')) {\n      const src = this.dragged.el.querySelector('img').getAttribute('src');\n      const img = document.createElement('img');\n      img.setAttribute('src', src);\n      placeholder.appendChild(img);\n    }\n\n    if (this.after) {\n      this.container.insertBefore(placeholder, item.nextElementSibling);\n    } else if (this.before) {\n      this.container.insertBefore(placeholder, item);\n    } else {\n      this.container.insertBefore(placeholder, item);\n    }\n  }\n\n  _removePlaceholder() {\n    const placeholder = this.placeholder();\n    if (placeholder) placeholder.parentNode.removeChild(placeholder);\n  }\n\n  _getReference() {\n    const placeholder = this.placeholder();\n    this.siblings.prev = placeholder.previousElementSibling === this.dragged.el\n      ? this.dragged.el.previousElementSibling\n      : placeholder.previousElementSibling;\n    this.siblings.next = placeholder.nextElementSibling === this.dragged.el\n      ? this.dragged.el.nextElementSibling\n      : placeholder.nextElementSibling;\n  }\n\n  _addEventListenerToItem($item) {\n    // touch events\n    $item.addEventListener('touchstart', this._onStart, false);\n    // mouse events\n    $item.addEventListener('mousedown', this._onStart, false);\n  }\n\n  _addEventListeners() {\n    // touch events\n    document.addEventListener('touchmove', this._onMove);\n    document.addEventListener('touchend', this._onEnd);\n    // mouse events\n    document.addEventListener('mousemove', this._onMove);\n    document.addEventListener('mouseup', this._onEnd);\n\n    for (let i = 0; i < this.items.length; i += 1) {\n      this._addEventListenerToItem(this.items[i]);\n    }\n  }\n}\n","export default class SVGDragNDrop {\n  // static drag(id) {\n  //   d3.drag()\n  //     .on('start', () => {\n  //       SVGDragNDrop.start(id);\n  //     })\n  //     .on('drag', () => {\n  //       SVGDragNDrop.dragged(id);\n  //     })\n  //     .on('end', () => {\n  //       SVGDragNDrop.end(id);\n  //     });\n  // }\n\n  static start(element) {\n    d3.select(element).raise().classed('is-dragged', true);\n  }\n\n  static dragged(element, diff) {\n\n    d3.select(element)\n      .attr('x', (d3.event.x - diff.x).toFixed())\n      .attr('y', (d3.event.y - diff.y).toFixed());\n  }\n\n  static end(element, type, diff) {\n\n    d3.select(element)\n      .attr('x', (d3.event.x - diff.x).toFixed())\n      .attr('y', (d3.event.y - diff.y).toFixed())\n      // neumožňuje v jiných funkcí s tímto objektem dále pracovat,\n      // protože pracují s id\n      // .attr('id', `${type}-${d3.event.x.toFixed()}-${d3.event.y.toFixed()}`)\n      .classed('is-dragged', false);\n  }\n}\n","import { __localPosition, __dispatchEvent } from '../../lib/utils';\n\n// import SVG from '../svg';\nimport SVGDragNDrop from './svg-dragndrop';\nimport SVG from '../svg';\n\nexport default class SVGDraw {\n  // static selectPath(svg) {\n  //   // https://bl.ocks.org/mbostock/8027637\n  // }\n\n  static renderPath($svg, callback) {\n    if (d3.event.sourceEvent.target.nodeName === 'image') {\n\n      const line = d3.line()\n        // removed smooth curve to get rid of loong decimals\n        // see https://github.com/d3/d3-path/issues/10\n        .curve(d3.curveLinear); // _dragStarted\n\n      const format = d3.format('.0f');\n      const d = d3.event.subject;\n      // origin\n      let x0 = format(d3.event.x);\n      let y0 = format(d3.event.y);\n\n      const id = `${$svg.id}_path-${x0}-${y0}`;\n\n      const active = d3.select(`#${$svg.id} .svg-view`).append('svg:path')\n        // .attr('marker-start', 'url('#marker-circle-blue')')\n        // .attr('marker-end', 'url('#marker-arrow-blue')')\n        .attr('data-svg-path', '')\n        .attr('class', 'svg-path')\n        .attr('id', id)\n        .datum(d);\n\n      // github.com/d3/d3-drag#event_on\n      d3.event\n        .on('drag', () => {\n          // current position\n          const x1 = format(d3.event.x);\n          const y1 = format(d3.event.y);\n          // distance from origin\n          const dx = x1 - x0;\n          const dy = y1 - y0;\n\n          // if the distance of drag event is too large, make new origin\n          if ((dx * dx) + (dy * dy) > 300) d.push([x0 = x1, y0 = y1]);\n          // smooth line, correct last point\n          else d[d.length - 1] = [x1, y1];\n\n          active.attr('d', line);\n        })\n        .on('end', () => {\n          const $thisPath = d3.select(`#${id}`);\n          if ($thisPath) {\n            if ($thisPath.attr('d')) {\n              if ($thisPath.attr('d').length < 40) {\n                $thisPath.remove();\n              } else {\n                // dispatch event that svg has changed\n                __dispatchEvent(document, 'svg.change', {}, {\n                  svg: {\n                    id: $svg.id,\n                    task: 'create',\n                    node: $thisPath.node(),\n                    nodeName: $thisPath.node().nodeName,\n                    contextMenu: false,\n                  },\n                });\n              }\n            } else if (!$thisPath.attr('d')) {\n              $thisPath.remove();\n            }\n          }\n\n          callback();\n        });\n\n      // add events to element\n      SVGDraw.pathEventsManager($svg, d3.select(`#${id}`).node());\n    }\n  }\n\n  // Draw a SVG circle on click\n  static createCircle($svg, color = 'blue') {\n    const d3svg = d3.select(`#${$svg.id} .svg-view`);\n    // const canvas = document.querySelector(`#${$svg.id} .svg-view`);\n    const localPosition = __localPosition($svg);\n    const id = `${$svg.id}_circle-${localPosition.x}-${localPosition.y}`;\n\n    // circle wrapper\n    const foreignObject = d3svg.append('svg:foreignObject')\n      .attr('data-svg-circle', '')\n      .attr('id', id)\n      .attr('x', localPosition.x)\n      .attr('y', localPosition.y)\n      .attr('width', 1)\n      .attr('height', 1);\n\n    const circle = foreignObject.append('xhtml:div')\n      .attr('class', 'svg-circle');\n\n    const $element = document.querySelector(`#${id}`);\n\n    // add events to element\n    SVGDraw.circleEventsManager($svg, $element);\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: $svg.id,\n        task: 'create',\n        node: $element,\n        nodeName: $element.nodeName,\n        contextMenu: false,\n      },\n    });\n  }\n\n  static pathEventsManager($svg, $element) {\n    d3.select(`#${$element.id}`).on('click', () => {\n      // dispatch event that svg has changed\n      __dispatchEvent(document, 'svg.change', {}, {\n        svg: {\n          id: $svg.id,\n          task: 'remove',\n          node: d3.event.target,\n          nodeName: d3.event.target.nodeName,\n          contextMenu: false,\n        },\n      });\n\n      d3.select(`#${$element.id}`).remove();\n\n      d3.event.preventDefault();\n    }, false);\n  }\n\n  static circleEventsManager($svg, $element) {\n    const $canvas = document.querySelector(`#${$svg.id} .svg-view`);\n\n    // TODO:\n    // standalone function\n    // same for all draggable svg elements\n    let elementPosition = [\n      $element.getAttribute('x'),\n      $element.getAttribute('y'),\n    ];\n    let diff = {};\n\n    const selection = d3.selectAll(`#${$element.id} > div`);\n    d3.select(selection.nodes()[0]).on('click', () => {\n\n      // dispatch event that svg has changed\n      __dispatchEvent(document, 'svg.change', {}, {\n        svg: {\n          id: $svg.id,\n          task: 'remove',\n          node: $element,\n          nodeName: $element.nodeName,\n          contextMenu: false,\n        },\n      });\n\n      d3.select(d3.event.target.parentNode).remove();\n    })\n      .call(d3.drag()\n        .container($canvas)\n        .subject($element)\n        .on('start', () => {\n          diff = {\n            x: d3.event.x - elementPosition[0],\n            y: d3.event.y - elementPosition[1],\n          };\n\n          SVGDragNDrop.start($element);\n        })\n        .on('drag', () => {\n          SVGDragNDrop.dragged($element, diff);\n        })\n        .on('end', () => {\n          const oldXCoordinate = elementPosition[0];\n          const oldYCoordinate = elementPosition[1];\n          let taskType = 'move';\n\n          SVGDragNDrop.end($element, 'circle', diff);\n\n          elementPosition = [\n            $element.getAttribute('x'),\n            $element.getAttribute('y'),\n          ];\n\n          // if clone is changed, then dispatch create event\n          if (SVG.removeCloneConnectionManager($element)) taskType = 'create';\n\n          if (elementPosition[0] !== oldXCoordinate || elementPosition[1] !== oldYCoordinate) {\n            // dispatch event that svg has changed\n            __dispatchEvent(document, 'svg.change', {}, {\n              svg: {\n                id: $svg.id,\n                task: taskType,\n                node: $element,\n                nodeName: $element.nodeName,\n                contextMenu: false,\n              },\n            });\n          }\n        }));\n  }\n}\n","import {\n  __addClass,\n  __removeClass,\n  __hasClass,\n  __dispatchEvent,\n} from '../../lib/utils';\n\nimport SVG from '../svg';\nimport SVGDragNDrop from './svg-dragndrop';\n\nexport default class SVGText {\n  static createText(maxLength = 333, minLength = 2) {\n    const $svg = document.querySelector('[data-svg-active=\"true\"]');\n    const svgID = $svg.id;\n    const svgGroup = d3.select($svg).select('.svg-view');\n\n    // const $canvas = $svg.querySelector('.svg-view');\n    const $radialMenu = document.querySelector('[data-radial-menu]');\n    const localPosition = {\n      x: $radialMenu.getAttribute('data-local-x'),\n      y: $radialMenu.getAttribute('data-local-y'),\n    };\n    const id = `${svgID}_svg-text-${localPosition.x}-${localPosition.y}`;\n    const hash = `#${id}`;\n    const orientation = {\n      x: (svgGroup.attr('width') - localPosition.x) > 320 ? 'right' : 'left',\n      y: (svgGroup.attr('height') - localPosition.y) > 60 ? 'bottom' : 'top',\n    };\n    // let firstWrite = true;\n\n    // text wrapper\n    const foreignObject = svgGroup.append('svg:foreignObject')\n      .attr('class', `svg-text orientation-${orientation.x} orientation-${orientation.y}`)\n      .attr('data-svg-text', '')\n      .attr('x', localPosition.x)\n      .attr('y', localPosition.y)\n      .attr('width', 1)\n      .attr('height', 1);\n\n    // create visual point of interest for text input\n    foreignObject.append('xhtml:div')\n      .attr('class', 'svg-circle svg-circle-text');\n    // create text input\n    const textarea = foreignObject.append('xhtml:textarea')\n      .attr('maxlength', maxLength)\n      .attr('tabindex', '-1')\n      .attr('id', id)\n      .attr('class', 'svg-textarea')\n      .attr('data-save', '')\n      .attr('data-svg-textarea-target', svgID);\n\n    // set focus to the new text input\n    document.querySelector(`${hash}`).focus();\n\n    // add events to element\n    SVGText.textEventsManager($svg, textarea.node(), true, minLength);\n  }\n\n  static textEventsManager($svg, $node, isCreated, minLength = 2) {\n    const $canvas = $svg.querySelector('.svg-view');\n    const hash = `#${$node.id}`;\n    let firstWrite = isCreated;\n    let oldText = $node.value;\n\n    // TODO\n    // standalone function\n    // same for all draggable svg elements\n    const $element = document.querySelector(hash).parentNode;\n    let elementPosition = [\n      $element.getAttribute('x'),\n      $element.getAttribute('y'),\n    ];\n    let diff = {};\n\n    d3.select(`${hash}`)\n      // drag & drop\n      .call(d3.drag()\n        .container($canvas)\n        .subject($element)\n        .on('start', () => {\n          diff = {\n            x: d3.event.x - elementPosition[0],\n            y: d3.event.y - elementPosition[1],\n          };\n\n          SVGDragNDrop.start($element);\n        })\n        .on('drag', () => {\n          SVGDragNDrop.dragged($element, diff);\n        })\n        .on('end', () => {\n          const oldXCoordinate = elementPosition[0];\n          const oldYCoordinate = elementPosition[1];\n          let taskType = 'move';\n\n          SVGDragNDrop.end($element, 'text', diff);\n\n          elementPosition = [\n            $element.getAttribute('x'),\n            $element.getAttribute('y'),\n          ];\n\n          if (!firstWrite && (elementPosition[0] !== oldXCoordinate || elementPosition[1] !== oldYCoordinate)) {\n            // if clone is changed, then dispatch create event\n            if (SVG.removeCloneConnectionManager($element.childNodes[1])) taskType = 'create';\n\n            // dispatch event that svg has changed\n            __dispatchEvent(document, 'svg.change', {}, {\n              svg: {\n                id: $svg.id,\n                task: taskType,\n                node: $element.childNodes[1],\n                nodeName: $element.childNodes[1].nodeName,\n                contextMenu: false,\n              },\n            });\n          }\n        }))\n      // keystroke\n      // control height of the text input on every key stroke\n      .on('keyup', () => {\n        SVGText.updateTextareaHeight(d3.event.target);\n      })\n      // loss of focus\n      .on('blur', () => {\n        const $target = d3.event.target;\n        const value = $target.value;\n        let taskType;\n        let wrongBool = false;\n\n        if (value.length === 0) {\n          SVG.removeItem(false, hash);\n          return;\n        }\n        if (value.length < minLength) {\n          __addClass($target, 'is-wrong');\n          wrongBool = true;\n        } else if ((value.length >= minLength) && __hasClass($target, 'is-wrong')) {\n          __removeClass($target, 'is-wrong');\n          wrongBool = false;\n        }\n\n        if (oldText !== value) {\n          if (firstWrite) {\n            taskType = 'create';\n            firstWrite = false;\n          } else {\n            taskType = 'change';\n          }\n          oldText = value;\n          // if clone is changed, then dispatch create event\n          if (SVG.removeCloneConnectionManager($target)) taskType = 'create';\n\n          // dispatch event that svg has changed\n          __dispatchEvent(document, 'svg.change', {}, {\n            svg: {\n              id: $svg.id,\n              task: taskType,\n              node: $target,\n              nodeName: $target.nodeName,\n              isWrong: wrongBool,\n              contextMenu: false,\n            },\n          });\n        }\n\n        // update oldText\n        oldText = value;\n      })\n      // gain focus\n      .on('focus', () => {\n        d3.select($element).raise();\n      });\n  }\n\n  static updateTextareaHeight($target) {\n    $target.style.height = '1px';\n    $target.style.height = `${22 + $target.scrollHeight}px`;\n  }\n}\n","/**\n * čára:\n *  - nakreslit   ( drag'n'drop )\n *  - smazat      ( left click )\n *  - radial menu ( right click)\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n * textové pole:\n *  - vytvořit    ( right click on svg )\n *    - nic => smaže se\n *    - málo znaků => zčervená\n *    - přes řádek textu => zvětší se\n *  - změnit      ( click on and write )\n *  - smazat      ( right click on textarea )\n *  - přenést     ( drag'n'drop )\n *  - radial menu ( right click on mark )\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n * značka:\n *  - nakreslit   ( left click on svg )\n *  - přenést     ( drag'n'drop )\n *  - smazat      ( left click on mark )\n *  - radial menu ( right click)\n *    - změnit barvu\n *    - smazaní\n *    - textový komentář\n */\n/* eslint-disable brace-style */\nimport Component from './component';\nimport { __dispatchEvent, __removeClass, __addClass } from '../lib/utils';\nimport SVGDraw from './svg-lib/svg-draw';\nimport SVGText from './svg-lib/svg-text';\n\nexport default class SVG extends Component {\n  constructor($element) {\n    super($element);\n\n    // duplicate source of different svg element\n    this.toDuplicate = this.target.getAttribute('data-duplicate-svg');\n\n    this.init();\n  }\n\n  init() {\n    // make array from data-attributes (contains what kind of actions can user do on this svg)\n    const svgSpecificActions = this.target.getAttribute('data-svg-target').split(' ');\n    for (let i = 0; i < svgSpecificActions.length; i += 1) {\n      if (svgSpecificActions[i] === 'kresleni') {\n        this._initPath(this.showFeedback);\n      }\n      else if (svgSpecificActions[i] === 'znacky') {\n        this._initCircle(this.showFeedback);\n      }\n      // else if (svgSpecificActions[i] === 'text') {\n      //   this._initText();\n      // }\n    }\n\n    // this._initZoom();\n    // fix for IE\n    this._setSize();\n    // comic bubbles if exists\n    this._initComicBubbles();\n\n    // listen events\n    this._getEvents();\n  }\n\n  _setSize() {\n    // TODO: set size on window resize\n    const viewbox = this.target.getAttribute('viewBox').split(' ');\n    const height = this.target.getBoundingClientRect().height;\n    const scale = height / viewbox[3];\n\n    this.target.style.maxWidth = scale ? `${viewbox[2] * scale}px` : '';\n\n    if (!height) {\n      console.warning('Wrong `max-width` SVG calculation;');\n    }\n  }\n\n  // _initZoom() {\n  //   const view = d3.select(`#${this.target.id} .svg-view`);\n  //   const size = [\n  //     view.attr('width'),\n  //     view.attr('height'),\n  //   ];\n  //   SVGZoom.zoom(this.target, view, size);\n  // }\n\n  _initPath(callback) {\n    d3.select(this.target)\n      .call(d3.drag()\n        .container(() => this.target)\n        .subject(() => {\n          const p = [d3.event.x.toFixed(), d3.event.y.toFixed()];\n\n          return [p, p];\n        })\n        .on('start', () => {\n          SVGDraw.renderPath(this.target, callback);\n        }));\n  }\n  // _initText() {\n  //   d3.select(this.target).on('click', () => {\n  //     SVGText.openTextDialog(this.target);\n  //     d3.event.preventDefault();\n  //   });\n  // }\n\n  _initCircle(callback) {\n    d3.select(this.target).on('click', () => {\n      const item = d3.event.target;\n      const nodeName = item.nodeName;\n      const validPlace = (nodeName === 'image');\n      // const isCircle = (__hasClass(item, 'svg-circle'));\n\n      if (!validPlace) {\n        return;\n      }\n\n      SVGDraw.createCircle(this.target);\n      callback();\n\n      d3.event.preventDefault();\n    }, false);\n  }\n\n  _initComicBubbles() {\n    const comicBubbles = this.target.querySelectorAll('.svg-komiks .svg-textarea');\n\n    if (comicBubbles) {\n      d3.selectAll(comicBubbles).on('keyup', () => {\n        SVGText.updateTextareaHeight(d3.event.target);\n      });\n    }\n  }\n\n  _generateNewID(oldID) {\n    const idParts = oldID.split('_');\n    // beware if it's a error, return oldID\n    if (idParts.length < 2) {\n      console.log('Svg ID error!', oldID);\n      return oldID;\n    }\n\n    // solve thirt part of id\n    if (idParts[idParts.length - 1] !== `clone-${idParts[0]}`) {\n      idParts.push(`clone-${idParts[0]}`);\n    }\n\n    // solve first part of id\n    idParts[0] = this.target.id;\n\n    const newID = idParts.join('_');\n    return newID;\n  }\n\n  _getEvents() {\n\n    const svgDuplicateSources = this.toDuplicate ? this.toDuplicate.split(' ') : [];\n\n    if (svgDuplicateSources[0]) {\n\n      document.addEventListener('svg.change', (e) => {\n        if (svgDuplicateSources.includes(e.detail.svg.id)) {\n          const $templateNode = e.detail.svg.node;\n          const nodeName = e.detail.svg.nodeName;\n          const localNodeID = this._generateNewID($templateNode.id);\n          let $localNode = this.target.querySelector(`#${localNodeID}`);\n          let task;\n          // for creating new element or we edit the old one after created one\n          if ($localNode || e.detail.svg.task === 'create') {\n            task = e.detail.svg.task;\n          } else {\n            return;\n          }\n\n          /**\n           * 1. divided by node name\n           * 2. divided by task type\n           * path => svg lines\n           * TEXTAREA => text fields\n           * foreignObject => svg circles\n           */\n          if (nodeName === 'path') {\n            switch (task) {\n              case 'create':\n                this._clonePath($templateNode, localNodeID);\n                break;\n              case 'color':\n                __removeClass($localNode, 'red blue');\n                __addClass($localNode, e.detail.svg.color);\n                break;\n              case 'remove':\n                $localNode.remove();\n                break;\n              default:\n                console.log('Nondefinated path events task. :(');\n            }\n          } else if (nodeName === 'TEXTAREA') {\n            switch (task) {\n              case 'create':\n                this._cloneTextField(e.detail.svg.isWrong, $templateNode, localNodeID);\n                break;\n              case 'change':\n                $localNode.value = $templateNode.value;\n                // if is now wrong lenght\n                if (e.detail.svg.isWrong) {\n                  __addClass($localNode, 'is-wrong');\n                } else {\n                  __removeClass($localNode, 'is-wrong');\n                }\n                // if needs resize\n                if ($localNode.style.height !== $templateNode.style.height) {\n                  $localNode.style.height = $templateNode.style.height;\n                }\n                break;\n              case 'color':\n                $localNode = $localNode.parentNode.childNodes[0];\n                __removeClass($localNode, 'red blue');\n                __addClass($localNode, e.detail.svg.color);\n                break;\n              case 'move':\n                if ($localNode) {\n                  $localNode.parentNode.remove();\n                }\n                this._cloneTextField(e.detail.svg.isWrong, $templateNode, localNodeID);\n                break;\n              case 'remove':\n                $localNode.parentNode.remove();\n                break;\n              default:\n                console.log('Nondefinated textField events task. :(');\n            }\n          } else if (nodeName === 'foreignObject') {\n            switch (task) {\n              case 'create':\n                this._cloneCircle($templateNode, localNodeID);\n                break;\n              case 'color':\n                $localNode = $localNode.childNodes[0];\n                __removeClass($localNode, 'red blue');\n                __addClass($localNode, e.detail.svg.color);\n                break;\n              case 'move':\n                if ($localNode) {\n                  $localNode.remove();\n                }\n                this._cloneCircle($templateNode, localNodeID);\n                break;\n              case 'remove':\n                $localNode.remove();\n                break;\n              default:\n                console.log('Nondefinated circle events task. :(');\n            }\n          } else {\n            console.log('Nondefinated events nodeName. :(');\n          }\n        }\n      });\n\n    }\n\n  }\n\n  _clonePath($templateNode, localNodeID) {\n    const $localNode = $templateNode.cloneNode(true);\n    $localNode.id = localNodeID;\n    this.target.appendChild($localNode);\n    // add events to element\n    SVGDraw.pathEventsManager(this.target, $localNode);\n  }\n\n  _cloneTextField(isWrong, $templateNode, localNodeID) {\n    const $localNode = $templateNode.parentNode.cloneNode(true);\n    $localNode.childNodes[1].id = localNodeID;\n    this.target.appendChild($localNode);\n    if (isWrong) {\n      __addClass($localNode, 'is-wrong');\n    } else {\n      __removeClass($localNode, 'is-wrong');\n    }\n    // add events to element\n    SVGText.textEventsManager(this.target, $localNode.childNodes[1], false);\n  }\n\n  _cloneCircle($templateNode, localNodeID) {\n    const $localNode = $templateNode.cloneNode(true);\n    $localNode.id = localNodeID;\n    this.target.appendChild($localNode);\n    // add events to element\n    SVGDraw.circleEventsManager(this.target, $localNode);\n  }\n\n\n  static selectItem(item) {\n    item.setAttribute('data-svg-selected', 'true');\n  }\n\n  // Remove 'selected' classname from element within SVG\n  static deselectItem() {\n    // previously \"selected\" elements\n    const selected = document.querySelectorAll('[data-svg-selected=\"true\"]');\n    // unselect them\n    for (let i = 0; i < selected.length; i += 1) {\n      selected[i].setAttribute('data-svg-selected', 'false');\n    }\n  }\n\n  // Remove element from within SVG\n  // [data-svg-selected=\"true\"] marks selected object in SVG\n  static removeItem(isRadial, item = '[data-svg-selected=\"true\"]') {\n    const $svg = document.querySelector('div[class~=active-slide] svg[class~=svg]');\n    const $element = document.querySelector(item);\n    const $parent = $element.parentNode; // <foreignObject>\n    const taskType = 'remove';\n    let $localNode;\n\n    // TEXTAREA => text field(right click in textarea)\n    // DIV => text field(click in radial menu) or circle\n    switch ($element.nodeName) {\n      case 'path':\n        $localNode = $element;\n        break;\n      case 'TEXTAREA':\n        $localNode = $element;\n        break;\n      case 'DIV':\n        if ($element.parentNode.childNodes[1]) {\n          $localNode = $element.parentNode.childNodes[1];\n        } else {\n          $localNode = $element.parentNode;\n        }\n        break;\n      default:\n        console.log('Nondefinated node type. :(');\n    }\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: $svg.id,\n        task: taskType,\n        node: $localNode,\n        nodeName: $localNode.nodeName,\n        contextMenu: isRadial,\n      },\n    });\n\n    if ($parent.nodeName === 'foreignObject') {\n      d3.select($parent).remove();\n    } else {\n      d3.select(item).remove();\n    }\n  }\n\n  // Unmark all SVGs with 'svg-active' classname\n  static deactivate() {\n    const allActiveSvgs = document.querySelectorAll('[data-svg-active=\"true\"]');\n    for (let i = 0; i < allActiveSvgs.length; i += 1) {\n      allActiveSvgs[i].setAttribute('data-svg-active', 'false');\n    }\n  }\n\n  // Mark active SVG with 'svg-active' classname\n  static activate(svg) {\n    SVG.deactivate();\n    svg.setAttribute('data-svg-active', 'true');\n  }\n\n  // Remove connection between clone and template\n  // Remove third part of id if exists\n  static removeCloneConnectionManager($node) {\n    const idParts = $node.id.split('_');\n    if (idParts[idParts.length - 1].includes('clone')) {\n      idParts.pop();\n      $node.id = idParts.join('_');\n      return true;\n    }\n    return false;\n  }\n}\n","/* eslint-disable brace-style */\nimport {\n  __addClass,\n  __removeClass,\n  __hasClass,\n  __localPosition,\n  __globalPosition,\n  __dispatchEvent,\n} from '../../lib/utils';\nimport SVG from '../svg';\nimport SVGText from './svg-text';\n\nexport default class SVGRadialMenu {\n\n  constructor($radialMenu, $svgs) {\n    this.$radialMenu = $radialMenu;\n    this.$radialMenuItems = this.$radialMenu.querySelectorAll('[data-radial-menu-item]');\n    this.$colorItems = this.$radialMenu.querySelectorAll('.radial-menu-color');\n    this.$textItems = this.$radialMenu.querySelectorAll('.radial-menu-text');\n    this.$createTextItem = this.$radialMenu.querySelector('#create-text');\n    this.$removeItem = this.$radialMenu.querySelector('#remove-content');\n    this.$tooltip = this.$radialMenu.querySelector('[data-radial-menu-tooltip]');\n    this.$svgs = $svgs;\n\n    this.initialSetUp = true;\n\n    this.menuRadius = parseInt(window.getComputedStyle(this.$radialMenu.querySelector('.radial-menu-wrapper'), null).getPropertyValue('width'), 10) / 2;\n    this.itemRadius = parseInt(window.getComputedStyle(this.$radialMenu.querySelector('.radial-menu-item'), null).getPropertyValue('width'), 10) / 2;\n\n    this.init();\n  }\n\n  init() {\n    this.setUpRadialMenuItems();\n    this.addEventListenersToRadialMenu();\n\n    // activate radial menu when right click on svg\n    Array.from(this.$svgs).forEach(($svg) => {\n      d3.select($svg).on('contextmenu', () => {\n        // mark this SVG as the active one\n        SVG.activate($svg);\n        // deselect all previously selected items\n        SVG.deselectItem();\n        // show radial menu buttons based on clicked element\n        // and .select appropriate elements based on clicked element\n        this.filterMenuButtons(d3.event.target);\n        this.showRadialMenu($svg, d3.event);\n        // prevent default 'contextmenu' event\n        d3.event.preventDefault();\n      });\n    });\n\n    this.initialSetUp = false;\n  }\n\n  setUpRadialMenuItems() {\n    // this.positionRadialMenuItems(this.$radialMenuItems);\n\n    Array.from(this.$radialMenuItems).forEach(($item) => {\n      this.addEventListenersToRadialMenuItem($item);\n    });\n  }\n\n  positionRadialMenuItems($items) {\n    const _itemsLength = $items.length;\n    const _menuRadius = this.menuRadius;\n    const _itemRadius = this.itemRadius;\n    const _menuOffset = _menuRadius - _itemRadius;\n    const _interval = 0.6283185307;\n    // if more items center them\n    const _centerOffset = (-_interval / 2) + ((_itemsLength * _interval) / 2);\n\n    // make a \"flower\"\n    Array.from($items).forEach(($item, index) => {\n      // Calculate the angle at which the element will be placed.\n      // For a semicircle, we would use (index / _itemsLength) * Math.PI.\n      const angle = (Math.PI + ((index * _interval) * -1)) + _centerOffset;\n\n      // get position\n      const x = (_menuRadius * Math.sin(angle)) + _menuOffset;\n      const y = (_menuRadius * Math.cos(angle)) + _menuOffset;\n\n      // console.log('x: ' + x);\n      // console.log('y: ' + y);\n\n      $item.style.left = `${x.toFixed(1)}px`;\n      $item.style.top = `${y.toFixed(1)}px`;\n\n      // if (this.initialSetUp === true) {\n      //   this.addEventListenersToRadialMenuItem($item);\n      // }\n    });\n  }\n\n  addEventListenersToRadialMenu() {\n    this.onMouseLeave();\n\n    this.$radialMenu.addEventListener('click', (event) => {\n      this.hideRadialMenu(this.$radialMenu);\n      event.preventDefault();\n    });\n\n    this.$radialMenu.addEventListener('contextmenu', (event) => {\n      this.hideRadialMenu(this.$radialMenu);\n      event.preventDefault();\n    });\n  }\n\n  addEventListenersToRadialMenuItem(item) {\n    const $item = item;\n\n    // actions\n    const action = $item.getAttribute('data-radial-menu-item');\n    // remove item\n    if (action === 'remove-content') {\n      $item.addEventListener('click', () => {\n        SVG.removeItem(true);\n        this.hideRadialMenu();\n      }, false);\n    }\n    // create user text\n    else if (action === 'create-text') {\n      d3.select($item).on('click', () => {\n        SVGText.createText();\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit podobnost\n    else if (action === 'color-point-blue') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('blue');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit rozdil\n    else if (action === 'color-point-red') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('red');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // označit rozdil\n    else if (action === 'color-point-red') {\n      $item.addEventListener('click', () => {\n        SVGRadialMenu.changeColor('red');\n        this.hideRadialMenu();\n      }, false);\n    }\n    // přiřadit kategorii\n    // else if (action === 'category') {\n    //   const category = $item.getAttribute('data-category');\n    //   const categoryLabel = $item.getAttribute('data-radial-menu-item-tooltip');\n\n    //   $item.addEventListener('click', () => {\n    //     const $selected = document.querySelector('[data-svg-selected=\"true\"]');\n    //     const $parentForeignObject = $selected.parentNode;\n    //     let $category = $parentForeignObject.querySelector('.svg-category-label');\n\n    //     $selected.setAttribute('data-svg-category', category);\n\n    //     if (!$category) {\n    //       $category = document.createElement('div');\n    //       $category.classList.add('svg-category-label');\n    //       $parentForeignObject.prepend($category);\n    //     }\n\n    //     $category.innerText = categoryLabel;\n\n    //     this.hideRadialMenu();\n    //   }, false);\n    // }\n\n    // tooltip\n    $item.addEventListener('mouseenter', (event) => {\n      this.$tooltip.innerHTML = event.currentTarget.getAttribute('data-radial-menu-item-tooltip');\n      this.$tooltip.style.display = 'block';\n    }, false);\n    $item.addEventListener('mouseleave', () => {\n      this.$tooltip.innerHTML = '';\n      this.$tooltip.style.display = 'none';\n    }, false);\n  }\n\n  // Draw a SVG circle on click\n  static changeColor(color) {\n    const $svg = document.querySelector('div[class~=active-slide] svg[class~=svg]');\n    const $selected = document.querySelector('[data-svg-selected=\"true\"]');\n    let taskType = 'color';\n    let $localNode;\n\n    __removeClass($selected, 'red blue');\n    __addClass($selected, color);\n\n    // DIV => text field  or circle\n    switch ($selected.nodeName) {\n      case 'path':\n        $localNode = $selected;\n        break;\n      case 'DIV':\n        if ($selected.parentNode.childNodes[1]) {\n          $localNode = $selected.parentNode.childNodes[1];\n        } else {\n          $localNode = $selected.parentNode;\n        }\n        break;\n      default:\n        console.log('Nondefinated node type. :(');\n    }\n\n    // if clone is changed, then dispatch create event\n    if (SVG.removeCloneConnectionManager($localNode)) taskType = 'create';\n\n    // dispatch event that svg has changed\n    __dispatchEvent(document, 'svg.change', {}, {\n      svg: {\n        id: $svg.id,\n        task: taskType,\n        node: $localNode,\n        nodeName: $localNode.nodeName,\n        contextMenu: true,\n        color,\n      },\n    });\n  }\n\n  showRadialMenu($activeSVG, event) {\n    const $svg = $activeSVG || document.querySelector('[data-svg-active=\"true\"]');\n    // get global position of the right click event\n    const globalPosition = __globalPosition(event);\n    const localPosition = __localPosition($svg);\n    this.$radialMenu.setAttribute('data-local-x', localPosition.x);\n    this.$radialMenu.setAttribute('data-local-y', localPosition.y);\n    // set position of radial menu\n    // number of 13 is size of #radial-menu\n    this.$radialMenu.style.top = `${globalPosition.y - 7}px`;\n    this.$radialMenu.style.left = `${globalPosition.x - 7}px`;\n\n    // make a flower\n    const $activeRadialMenuItem = this.$radialMenu.querySelectorAll('.is-active');\n    this.positionRadialMenuItems($activeRadialMenuItem);\n\n    // show radial menu\n    __addClass(this.$radialMenu, 'is-active');\n\n    // return {\n    //   localPosition,\n    //   globalPosition,\n    // };\n  }\n\n  hideRadialMenu() {\n    // hide radial menu\n    __removeClass(this.$radialMenu, 'is-active');\n    // deactivate all SVGs\n    SVG.deactivate();\n    // deselect all SVG items\n    SVG.deselectItem();\n\n    // deactivate radial menu items when the menu is hidden\n    setTimeout(() => {\n      if (!__hasClass(this.$radialMenu, 'is-active')) {\n        Array.from(this.$radialMenuItems).forEach(($item) => {\n          __removeClass($item, 'is-active');\n        });\n      }\n    }, 150);\n  }\n\n  onMouseLeave() {\n    let mouseLeaveDelay;\n\n    this.$radialMenu.addEventListener('mouseleave', () => {\n      mouseLeaveDelay = setTimeout(() => {\n        this.hideRadialMenu(this.$radialMenu);\n      }, 500);\n    });\n\n    this.$radialMenu.addEventListener('mouseenter', () => {\n      clearTimeout(mouseLeaveDelay);\n    });\n  }\n\n  filterMenuButtons(clickedItem) {\n    if (__hasClass(clickedItem, 'svg-path') || clickedItem.nodeName === 'path') {\n      __addClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      Array.from(this.$colorItems).forEach(($colorItem) => {\n        __addClass($colorItem, 'is-active');\n      });\n\n      Array.from(this.$textItems).forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (__hasClass(clickedItem, 'svg-circle')) {\n      __addClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      Array.from(this.$colorItems).forEach(($colorItem) => {\n        __addClass($colorItem, 'is-active');\n      });\n\n      Array.from(this.$textItems).forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (__hasClass(clickedItem, 'svg-textarea')) {\n      __removeClass(this.$createTextItem, 'is-active');\n      // __addClass(this.$removeItem, 'is-active');\n\n      if (!__hasClass(clickedItem, 'do-not-remove')) {\n        Array.from(this.$colorItems).forEach(($colorItem) => {\n          __removeClass($colorItem, 'is-active');\n        });\n\n        Array.from(this.$textItems).forEach(($textItem) => {\n          __addClass($textItem, 'is-active');\n        });\n      }\n\n      // mark it as slected\n      // SVG.selectItem(clickedItem);\n    }\n    if (clickedItem.nodeName === 'image') {\n      __addClass(this.$createTextItem, 'is-active');\n      __removeClass(this.$removeItem, 'is-active');\n\n      Array.from(this.$colorItems).forEach(($colorItem) => {\n        __removeClass($colorItem, 'is-active');\n      });\n\n      Array.from(this.$textItems).forEach(($textItem) => {\n        __removeClass($textItem, 'is-active');\n      });\n    }\n    else {\n      if (__hasClass(clickedItem, 'do-not-remove')) {\n        __removeClass(this.$removeItem, 'is-active');\n      } else {\n        __addClass(this.$removeItem, 'is-active');\n      }\n      // mark it as slected\n      SVG.selectItem(clickedItem);\n    }\n  }\n}\n","export default class Observer {\n\n  constructor() {\n    this._events = [];\n  }\n\n  /**\n   * Add event listener\n   *\n   * {String} events - e.g. 'my-event-1 my-event-2'\n   * {Function} fn - event listener\n   */\n  on(events, fn) {\n\n    events = this._split(events);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) {\n        this._events[event] = [];\n      }\n\n      this._events[event].push(fn);\n    });\n\n  }\n\n  off(events, fn) {\n\n    events = this._split(events);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) { return; }\n\n      this.events[event] = this._events[event].filter((current_fn) => {\n        return current_fn !== fn;\n      });\n\n    });\n\n\n  }\n\n  // something like dispatchEvent\n  trigger(events, args) {\n\n    events = this._split(events);\n\n    // console.log(events);\n\n    events.forEach((event) => {\n\n      if (!this._events[event]) { return; }\n\n      this._events[event].forEach((fn) => {\n        fn.call(this, event, args);\n      });\n\n    });\n\n  }\n\n  _split(events) {\n    return events.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n  }\n\n}\n","const actionTypes = {\n  editor: {\n    id: 'editor',\n    ADD_TAG: 'editor:ADD_TAG',\n    DELETE_TAG: 'editor:DELETE_TAG',\n    UPDATE_TAG: 'editor:UPDATE_TAG',\n    CHANGE: 'editor:CHANGE',\n  },\n  keywords: {\n    id: 'keywords',\n    CHANGE: 'keywords:CHANGE'\n  },\n  testQuiz: {\n    id: 'testQuiz',\n    ADD_ANSWER: 'testQuiz:ADD_ANSWER',\n    REMOVE_ANSWER: 'testQuiz:REMOVE_ANSWER',\n    UPDATE_ANSWER: 'testQuiz:UPDATE_ANSWER',\n    CHANGE: 'testQuiz:CHANGE',\n  },\n  textOptions: {\n    id: 'textOptions',\n    ADD: 'textOptions:ADD',\n    DELETE: 'textOptions:DELETE',\n    UPDATE: 'textOptions:UPDATE',\n    CHANGE: 'textOptions:CHANGE'\n  },\n  store: {\n    id: 'store',\n    ADD: 'ADD',\n    DELETE: 'DELETE',\n    UPDATE: 'UPDATE',\n    CHANGE: 'CHANGE',\n  }\n};\n\n\nexport default actionTypes;\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\n/*\nconst tagContainer: Object = {\n  editorId?: number,\n  id: string,\n  tagName: string,\n  tag: HTMLElement,\n  data?: Object\n}\n*/\n\n\nclass Store extends Observer {\n\n  constructor() {\n\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = {};\n    this._data.tags = [];\n  }\n\n  _checkTagExists(tagId) {\n    let tagExists = false;\n    this._data.tags.forEach((item, i) => {\n\n      if (item.id === tagId) {\n        tagExists = { item, index: i };\n      }\n\n    });\n\n    return tagExists;\n  }\n\n  addTag(tagContainer) {\n\n    if (this._data.tags.length === 0 || !this._checkTagExists(tagContainer.id)) {\n\n      if (undefined === tagContainer.data.userSelectedNodeItems) {\n        tagContainer.data.userSelectedNodeItems = [];\n      }\n\n      this._data.tags.push(tagContainer);\n\n      store.trigger(actionTypes.editor.CHANGE, {\n        action: {\n          id: actionTypes.editor.id,\n          type: actionTypes.editor.ADD_TAG,\n          data: {\n            tagContainer,\n          },\n        },\n\n      });\n\n    } else {\n      throw new Error('Tag already exists! Will not add it.');\n    }\n\n  }\n\n  deleteTag(tagContainer) {\n\n    let tagExists = this._checkTagExists(tagContainer.id);\n\n    if (false !== tagExists) {\n\n      this._data.tags.splice(tagExists.index, 1);\n\n      store.trigger(actionTypes.editor.CHANGE, {\n        action: {\n          id: actionTypes.editor.id,\n          type: actionTypes.editor.DELETE_TAG,\n          data: {\n            tagContainer: { editorId: tagContainer.editorId, id: tagContainer.id, tagName: tagContainer.tagName, data: {} },\n          },\n        },\n\n      });\n\n      return true;\n\n    } else {\n      throw new Error('Tag does not exist! Will not delete it.');\n    }\n\n  }\n\n  getAllTags(opts) {\n\n\n    if (undefined === opts || !opts.editorId) { return this._data.tags }\n\n    const selectedTags = this._data.tags.filter((item) => {\n      return item.editorId === opts.editorId;\n    });\n\n    return selectedTags;\n  }\n\n  getTagsBy(opts) {\n\n    const allowedKeys = ['editorId', 'id', 'tagName'];\n\n    if (opts === undefined) { return false}\n    if ( allowedKeys.indexOf( opts.key ) === -1 ) {return false}\n\n    if (!Array.isArray(opts.value)) {\n      opts.value = [opts.value];\n    }\n\n    // console.log(opts.value);\n    // console.log(this._data.tags);\n\n    const selectedTags = this._data.tags.filter((item) => {\n\n      return ( item[opts.key] === opts.value[0] ) || ( item[opts.key] === opts.value[1] );\n\n    });\n\n    return selectedTags;\n\n  }\n\n  getLastTag(opts) {\n\n    if (undefined === opts || !opts.editorId) {\n      return this._data.tags[this._data.tags.length - 1];\n    }\n\n    const selectedTags = this._data.tags.filter((item) => {\n      return item.editorId === opts.editorId;\n    });\n\n    return selectedTags[selectedTags.length - 1];\n  }\n\n}\n\nconst store = new Store();\nexport default store;\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\nclass StoreGlobal extends Observer {\n\n  constructor() {\n\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = [];\n\n  }\n\n  _checkExists(id) {\n    let objectExists = false;\n    this._data.forEach((item, i) => {\n\n      if (item.id === id) {\n        objectExists = { item, index: i };\n      }\n\n    });\n\n    return objectExists;\n  }\n\n  add(data) {\n\n    // console.log('add global called');\n\n    if (this._data.length === 0 || !this._checkExists(data.id)) {\n\n      this._data.push(data);\n\n      store.trigger(actionTypes.textOptions.id, {\n        action: {\n          type: actionTypes.textOptions.ADD,\n        },\n        data,\n      });\n\n    } else {\n      throw new Error('Object already exists! Will not add it.');\n    }\n\n  }\n\n  delete(data) {\n\n    const objectExists = this._checkExists(data.id);\n\n    if (objectExists !== false) {\n\n      this._data.splice(objectExists.index, 1);\n\n      store.trigger(actionTypes.textOptions.id, {\n        action: {\n          type: actionTypes.textOptions.DELETE,\n        },\n        data,\n      });\n\n      return true;\n\n    }\n    throw new Error('Tag does not exist! Will not delete it.');\n\n\n  }\n\n  getAll(opts) {\n\n    if (undefined === opts || !opts.editor) { return this._data; }\n\n    const selectedObjs = this._data.filter(item => item.id === opts.id);\n\n    return selectedObjs;\n  }\n\n  getBy(opts) {\n\n    const allowedKeys = ['id'];\n\n    if ((opts === undefined) || (allowedKeys.indexOf(opts.key) === -1)) {\n      return false;\n    }\n\n    if (!Array.isArray(opts.value)) {\n      opts.value = [opts.value];\n    }\n\n    const selectedObjs = this._data.filter(item => (item[opts.key] === opts.value[0]) || (item[opts.key] === opts.value[1]));\n\n    return selectedObjs;\n\n  }\n\n  getLast(opts) {\n\n    if (undefined === opts || !opts.editor) {\n      return this._data[this._data.length - 1];\n    }\n\n    const selectedObjs = this._data.filter(item => item.id === opts.id);\n\n    return selectedObjs[selectedObjs.length - 1];\n  }\n\n}\n\nconst store = new StoreGlobal();\nexport default store;\n","import {\n  __mergeDeep, __hasClass, __addClass, __removeClass, __position, __positionTranslated, __remove, __getRealDimensions, __insertBefore, __keycodeIsPrintableCharacter, __toggleClass,\n} from '../../lib/utils';\nimport store from '../../store/store';\nimport storeGlobal from '../../store/store-global';\nimport Component from '../component';\n// import actionTypes from '../store/store-constants';\n\n\nexport default class Editor extends Component {\n\n  constructor(element) {\n    super(element);\n\n    // TODO: should extend default Component class and use this.target?\n    // this.$editor is better, more readable\n    this.$editor = this.target;\n    this.id = this.$editor.id;\n    // TODO: is DOM element before/after the editor itself.. move it to the editor?\n    this.settings = JSON.parse(document.querySelector(`[data-editor-id-reference=\"${this.id}\"]`).getAttribute('data-module-settings'));\n\n    this.opts = __mergeDeep(Editor.defaults, this.settings);\n\n    this.models = {\n      passive: [\n        'cteni',\n      ],\n      interactive: [\n        'predznaceny', 'zvyraznovani', 'komentáře', 'psani',\n      ],\n      withMenu: [\n        'predznaceny', 'zvyraznovani', 'komentáře',\n      ],\n    };\n\n    this.totalTagId = 0;\n\n    this.hasMenu = true;\n\n    this.selection = null;\n    this.lastSelectionSettings = {};\n    this.isCollapsed = null;\n    this.savedSelectionRange = null;\n    this.selectionAttributes = null;\n    this.dummyRangeElement = null;\n\n    this.selectionMouseDown = false;\n    this.selectionDirection = null;\n\n    this.hasEditableContentChanged = false;\n    this.lastPressedKey = null;\n\n    this.hasToolbar = false;\n    this.toolbar = {};\n\n    this.originalContent = {};\n    this.currentContent = {};\n\n    this._handlers = [];\n\n    this.wrapLastDeletesTimeoutClass = '';\n    this.wrapLastDeletesTimeoutFunction = () => { };\n    this.wrapLastAdditionsTimeoutClass = '';\n    this.wrapLastAdditionsTimeoutFunction = () => { };\n    this.isWrappingLastText = false;\n    this.isWriting = false;\n\n    this.$groupDeleted = null;\n\n    this.cache = {\n      body: document.body,\n      window,\n    };\n\n    this.init();\n  }\n\n  init() {\n    if (Editor._hasMenu(this.opts)) {\n      try {\n        this.$menu = this.$editor.getElementsByClassName(this.opts.menuClass)[0];\n\n        // TODO: generalize .item class via defaults and opts\n        this.$menuActions = this.$menu.getElementsByClassName('menu')[0].getElementsByClassName('menu-item');\n        this.$menuClose = this.$menu.getElementsByClassName('close')[0];\n      } catch (error) {\n        this.hasMenu = false;\n      }\n    } else {\n      this.hasMenu = false;\n    }\n\n    if (Editor._hasToolbar(this.opts)) {\n      this.hasToolbar = true;\n    }\n\n    this.$canvas = this.$editor.getElementsByClassName(this.opts.canvasClass)[0];\n\n    // only if the editor is INTERACTIVE\n    if (this.opts.funkce !== 'cteni') {\n      __addClass(this.$menu, 'hidden');\n\n      // only if the editor is for WRITING\n      if (this.opts.funkce === 'psani') {\n        this.originalContent.html = this.$canvas.innerHTML;\n        this.originalContent.text = this.$canvas.innerText;\n        this.currentContent.html = this.$canvas.innerHTML;\n        this.currentContent.text = this.$canvas.innerText;\n\n        this.wrapLastDeletesTimeoutClass = this._generateNewTagGroupClass();\n        this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n      }\n\n      // only if the editor is with extra TOOLBAR\n      if (this.hasToolbar) {\n        this.toolbar.$element = this.$editor.getElementsByClassName('editor-toolbar')[0];\n        this.toolbar.$btnReset = this.toolbar.$element.getElementsByClassName('editor-toolbar-action-reset')[0];\n      }\n\n      this.registerEditableHandlers();\n    }\n\n    // only if the editor is with PREHIGHLIGHTED text\n    if (this.opts.funkce === 'predznaceny') {\n      this.initPreHighlightedTextOptions();\n    }\n\n  }\n\n  _generateNewTagId() {\n    this.totalTagId = this.totalTagId + 1;\n    return `${this.id}-${this.totalTagId}`;\n  }\n\n  _generateNewTagGroupClass() {\n    this.totalTagId = this.totalTagId + 1;\n    return `group-${this.id}-${this.totalTagId}`;\n  }\n\n  // add all eventListeners\n  // TODO: separate special case from universal ones?\n  registerEditableHandlers() {\n\n    this.$canvas.addEventListener('mousedown', this.handlerFocus.bind(this), false);\n    this.$canvas.addEventListener('focusout ', this.handlerFocus.bind(this), false);\n\n    // Necessary when mouseup is outside the $canvas element\n    // therefore we have to capture the event outside the element through body element\n    this.cache.body.addEventListener('mouseup', this.handlerFocus.bind(this), false);\n\n\n    if (this.opts.funkce === 'psani') {\n\n      this.$canvas.addEventListener('keydown', (e) => {\n\n        const selection = window.getSelection();\n        const keyCode = e.which || e.keyCode;\n        let keyName = e.key;\n\n        // show OK button or feedback\n        this.showFeedback();\n\n        // start DELETE\n        if (keyName === 'Backspace' || keyName === 'Delete') {\n          if (selection.rangeCount) {\n            window.clearTimeout(this.wrapLastDeletesTimeoutFunction);\n\n            const range = selection.getRangeAt(0);\n            const cloneRange = range.cloneRange();\n\n            if (this.lastSelectionSettings.isCollapsed) {\n\n              try {\n                cloneRange.setStart(range.startContainer, range.startOffset - 1);\n              } catch (e) {\n                // backspace was pressed at the beginning of the node\n                cloneRange.setStart(range.startContainer, range.startOffset);\n                cloneRange.collapse(true);\n              }\n\n            } else {\n              cloneRange.setStart(range.startContainer, range.startOffset);\n\n            }\n\n            cloneRange.setEnd(range.endContainer, range.endOffset);\n\n            // do nothing when it's space\n            const addedFragment = cloneRange.cloneContents();\n            const addedFragmentString = addedFragment.textContent.trim();\n\n            if ((addedFragmentString !== '' && addedFragmentString !== '&nbsp;') || this.isWrappingLastText) {\n\n              const dummyElementInner = document.createElement('span');\n              dummyElementInner.className = `user-removed-text-inner ${this.wrapLastDeletesTimeoutClass}`;\n\n              cloneRange.surroundContents(dummyElementInner);\n\n              selection.removeAllRanges();\n              selection.addRange(range);\n\n              this.wrapLastDeletesTimeoutFunction = setTimeout(() => {\n\n                this.isWrappingLastText = false;\n\n                // wrap all previous deletes to one element\n                const dummyElement = document.createElement('span');\n                dummyElement.contentEditable = false;\n                dummyElement.className = 'user-removed-text';\n\n                const newGeneratedId = this._generateNewTagId();\n                dummyElement.id = newGeneratedId;\n\n                const elements = Array.from(document.getElementsByClassName(this.wrapLastDeletesTimeoutClass));\n\n                __insertBefore(dummyElement, elements[0]);\n\n                elements.forEach((el, i) => {\n                  dummyElement.appendChild(el);\n                });\n\n\n                // create close button\n                const $btnClose = document.createElement('span');\n                $btnClose.className = this.opts.closeBtnClass;\n\n                const clickHandler = (e) => {\n                  const $nodeElement = e.currentTarget.parentNode;\n                  this._removeNodeKeepTextContent($nodeElement);\n                  e.stopPropagation();\n                };\n\n                $btnClose.addEventListener('click', clickHandler.bind(this));\n\n                document.getElementById(newGeneratedId).appendChild($btnClose);\n\n                this.wrapLastDeletesTimeout = true;\n                this.wrapLastDeletesTimeoutClass = this._generateNewTagGroupClass();\n\n              }, 700);\n\n              this.isWrappingLastText = true;\n\n              e.preventDefault();\n\n            } else {\n\n              if (!this.isWrappingLastText) {\n                // we're removing spaces, do nothing use browser's default behaviour, unless the wrapping is going on\n                return;\n              }\n              e.preventDefault();\n            }\n          }\n        }\n        // end DELETE\n\n        // start WRITING\n        else if (__keycodeIsPrintableCharacter(keyCode)) {\n\n          // if nothing is selected (selection is empty)\n          if (this.lastSelectionSettings.isCollapsed) {\n\n            // if \"space\" was written\n            if (keyCode === 32) {\n              if (!this.isWrappingLastText) {\n                // we're adding spaces, do nothing use browser's default behaviour, unless the wrapping is going on\n                return;\n              }\n              // fill a space as the keyname for the spacebar\n              keyName = ' ';\n            }\n\n            // The Selection.rangeCount read-only property returns the number of ranges in the selection.\n            if (selection.rangeCount) {\n\n              window.clearTimeout(this.wrapLastAdditionsTimeoutFunction);\n\n              const range = selection.getRangeAt(0);\n              const cloneRange = range.cloneRange();\n\n              cloneRange.setStart(range.startContainer, range.startOffset);\n              cloneRange.setEnd(range.endContainer, range.endOffset);\n\n              const textToAddElement = document.createElement('span');\n              textToAddElement.contentEditable = false;\n              textToAddElement.className = `user-inserted-text-inner ${this.wrapLastAdditionsTimeoutClass}`;\n              textToAddElement.innerHTML = keyName;\n\n              cloneRange.insertNode(textToAddElement);\n\n              // move the caret after the inserted character\n              range.setStartAfter(textToAddElement);\n\n              selection.removeAllRanges();\n              selection.addRange(range);\n\n              this.wrapLastAdditionsTimeoutFunction = setTimeout(() => {\n\n                this.isWrappingLastText = false;\n\n                // wrap all previous deletes to one element\n                const dummyElement = document.createElement('span');\n                dummyElement.contentEditable = false;\n                dummyElement.className = 'user-inserted-text';\n\n                const newGeneratedId = this._generateNewTagId();\n                dummyElement.id = newGeneratedId;\n\n                const elements = Array.from(document.getElementsByClassName(this.wrapLastAdditionsTimeoutClass));\n\n                __insertBefore(dummyElement, elements[0]);\n\n                elements.forEach((el, i) => {\n                  dummyElement.appendChild(el);\n                });\n\n\n                // create close button\n                const $btnClose = document.createElement('span');\n                $btnClose.className = this.opts.closeBtnClass;\n\n                const clickHandler = (e) => {\n                  const $nodeElement = e.currentTarget.parentNode;\n                  __remove($nodeElement);\n                  e.stopPropagation();\n                };\n\n                $btnClose.addEventListener('click', clickHandler.bind(this));\n                document.getElementById(newGeneratedId).appendChild($btnClose);\n\n                this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n\n              }, 700);\n\n              this.isWrappingLastText = true;\n\n            }\n\n\n            if (this.hasEditableContentChanged === false) {\n              this.hasEditableContentChanged = true;\n            }\n\n            e.preventDefault();\n          }\n\n          // writing over existing text is selected\n          else {\n            window.clearTimeout(this.wrapLastAdditionsTimeoutFunction);\n\n            const range = selection.getRangeAt(0);\n            const cloneRange = range.cloneRange();\n\n            cloneRange.setStart(range.startContainer, range.startOffset);\n            cloneRange.setEnd(range.endContainer, range.endOffset);\n\n            // 1. handle deleting the text that was selected when writing started\n            if (this.isWriting === false && selection.toString().length > 0) {\n              // add deleted text node only for the first time and only if there is some selected text\n              this.$groupDeleted = document.createElement('span');\n              this.$groupDeleted.contentEditable = false;\n              this.$groupDeleted.className = 'user-removed-text';\n\n              const groupDeletedId = this._generateNewTagId();\n              this.$groupDeleted.id = groupDeletedId;\n\n              const $groupInnerDeleted = document.createElement('span');\n              $groupInnerDeleted.className = 'user-removed-text-inner';\n\n              this.$groupDeleted.appendChild($groupInnerDeleted);\n\n              cloneRange.surroundContents(this.$groupDeleted);\n\n              // create close button\n              const $btnClose = document.createElement('span');\n              $btnClose.className = this.opts.closeBtnClass;\n\n              const clickHandler = (e) => {\n                const $nodeElement = e.currentTarget.parentNode;\n                this._removeNodeKeepTextContent($nodeElement);\n                e.stopPropagation();\n              };\n\n              $btnClose.addEventListener('click', clickHandler.bind(this));\n              this.$groupDeleted.appendChild($btnClose);\n            }\n\n\n            // 2. adding new text\n            this.isWriting = true;\n\n            const $groupInnerAdded = document.createElement('span');\n            $groupInnerAdded.contentEditable = false;\n            $groupInnerAdded.className = `user-inserted-text-inner ${this.wrapLastAdditionsTimeoutClass}`;\n\n            // add a space so there is a space between the added and removed text\n            $groupInnerAdded.innerHTML = `${keyName}`;\n\n            // TODO: error after deleted selection\n            __insertBefore($groupInnerAdded, this.$groupDeleted);\n            range.setStartAfter($groupInnerAdded);\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n\n            this.wrapLastAdditionsTimeoutFunction = setTimeout(() => {\n              this.isWriting = false;\n\n              // wrap all previous deletes to one element\n              const $groupAdded = document.createElement('span');\n              $groupAdded.contentEditable = false;\n              $groupAdded.className = 'user-inserted-text';\n\n              const newGeneratedId = this._generateNewTagId();\n              $groupAdded.id = newGeneratedId;\n\n              const elements = Array.from(document.getElementsByClassName(this.wrapLastAdditionsTimeoutClass));\n\n              __insertBefore($groupAdded, elements[0]);\n\n              elements.forEach((el, i) => {\n                $groupAdded.appendChild(el);\n              });\n\n              const $btnClose = document.createElement('span');\n              $btnClose.className = this.opts.closeBtnClass;\n\n              const clickHandler = (e) => {\n                const $nodeElement = e.currentTarget.parentNode;\n                __remove($nodeElement);\n                e.stopPropagation();\n              };\n\n              $btnClose.addEventListener('click', clickHandler.bind(this));\n              document.getElementById(newGeneratedId).appendChild($btnClose);\n\n              this.wrapLastAdditionsTimeoutClass = this._generateNewTagGroupClass();\n\n            }, 700);\n\n            e.preventDefault();\n          }\n        }\n        // end WRITING\n      });\n    }\n\n\n    if (this.hasMenu) {\n      this.registerMenuHandler();\n    }\n\n    if (this.hasToolbar) {\n      this.toolbar.$btnReset.addEventListener('click', () => {\n\n        const isConfirmed = confirm('Opravdu chcete vrátit text do původní podoby? Vaše změny se tímto ztratí.');\n\n        if (isConfirmed) {\n          this.$canvas.innerHTML = this.originalContent.html;\n        }\n\n      });\n    }\n\n  }\n\n  registerMenuHandler() {\n    for (let i = 0, len = this.$menuActions.length; i < len; i += 1) {\n      this.$menuActions[i].addEventListener('click', this.handlerMenuActions.bind(this), false);\n    }\n\n    this.$menuClose.addEventListener('click', this.handlerMenuClose.bind(this), false);\n  }\n\n  initPreHighlightedTextOptions() {\n    const dataAttr = 'data-text-option';\n\n    // loop over updated DOM via DOM manipulation\n    this.$textOptionsElements = this.$editor.querySelectorAll(`[${dataAttr}]`);\n    Array.from(this.$textOptionsElements).forEach(($textOption) => {\n\n      $textOption.addEventListener('click', () => {\n        __toggleClass($textOption, this.opts.textOptions.selectedClass);\n\n        if (__hasClass($textOption, this.opts.textOptions.selectedClass)) {\n          storeGlobal.add({\n            editor: this.id,\n            id: $textOption.id,\n            tag: $textOption,\n            data: JSON.parse($textOption.getAttribute(dataAttr)),\n          });\n        } else {\n          storeGlobal.delete({\n            editor: this.id,\n            id: $textOption.id,\n          });\n        }\n\n        // show OK button or feedback\n        this.showFeedback();\n      });\n\n    });\n\n  }\n\n  toggleMenu(clickClose = false) {\n\n    if (clickClose === true) {\n      __addClass(this.$menu, 'hidden');\n      return;\n    }\n\n    if (this.selectionMouseDown === true) {\n      __addClass(this.$menu, 'hidden');\n      return;\n    }\n\n    if (__hasClass(this.$menu, 'hidden') && this.selectionMouseDown === false) {\n      this._setmenuDimensions();\n      __removeClass(this.$menu, 'hidden');\n    }\n\n  }\n\n  _setmenuDimensions() {\n    const menuDimensions = __getRealDimensions(this.$menu);\n    const parentTranslatedPosition = __positionTranslated(this.$editor);\n    const parentDimensions = __position(this.$editor);\n\n    // let additionalSize = ( this.selectionDirection === \"right\" ) ?\n\n    const isOverflowAt = {\n      right: (this.selectionAttributes.left + this.selectionAttributes.width + menuDimensions.width + this.opts.menuMargin.x) > (parentTranslatedPosition.left + parentDimensions.width),\n      top: (this.selectionAttributes.top - menuDimensions.height - this.opts.menuMargin.y) < (parentTranslatedPosition.top),\n      bottom: (this.selectionAttributes.top + this.selectionAttributes.height + menuDimensions.height + this.opts.menuMargin.y) > (parentTranslatedPosition.top + parentDimensions.height),\n    };\n\n    let leftDimensions;\n    let topDimensions;\n\n    if (isOverflowAt.right) {\n\n      leftDimensions = this.selectionAttributes.left - menuDimensions.width - this.opts.menuMargin.x;\n\n    } else {\n\n      leftDimensions = this.selectionAttributes.left + this.selectionAttributes.width + this.opts.menuMargin.x;\n\n    }\n\n    if (isOverflowAt.top) {\n\n      topDimensions = this.selectionAttributes.top + menuDimensions.height + this.opts.menuMargin.y;\n\n    } else {\n\n      topDimensions = this.selectionAttributes.top - menuDimensions.height - this.opts.menuMargin.y;\n\n    }\n\n    this.$menu.style.left = `${leftDimensions}px`;\n    this.$menu.style.top = `${topDimensions}px`;\n\n  }\n\n  handlerMenuClose(e) {\n\n    this.toggleMenu(true);\n\n    e.preventDefault();\n\n  }\n\n  handlerMenuActions(e) {\n\n    const $el = e.currentTarget;\n    const command = $el.getAttribute('data-command');\n    const commandName = $el.getAttribute('data-command-name');\n\n    /* :TODO: Cache the options for given element to avoid JSON parsing each time */\n    const options = JSON.parse($el.getAttribute('data-command-options'));\n\n    this.setSelection(command, commandName, options);\n\n    e.preventDefault();\n\n  }\n\n  handlerFocus(e) {\n    const isMouseRightClick = e.which === 3;\n\n    if (isMouseRightClick) { return; }\n\n    if (__hasClass(e.target, 'node-close')) { return; }\n\n    if (__hasClass(e.target, 'node-selected')) { return; }\n\n    if (e.type === 'mousedown') {\n\n      // start tracking the mouse down\n      this.selectionMouseDown = true;\n\n      if (this.hasMenu === true) {\n        this.toggleMenu();\n      }\n\n    }\n\n    if (e.type === 'mouseup' && this.selectionMouseDown) {\n\n      // reset saved last selection settings\n      this.lastSelectionSettings = {};\n\n      this.selection = window.getSelection();\n      this.isCollapsed = this.lastSelectionSettings.isCollapsed = this.selection.isCollapsed;\n      this.savedSelectionRange = this.selection.getRangeAt(0);\n\n      this.selectionMouseDown = false;\n\n      this.lastSelectionSettings.anchorOffset = this.selection.anchorOffset;\n      this.lastSelectionSettings.focusOffset = this.selection.focusOffset;\n      this.lastSelectionSettings.text = this.savedSelectionRange.toString();\n\n      /* https://developer.mozilla.org/en-US/docs/Web/API/Selection/isCollapsed */\n      /* Returns a Boolean indicating whether the selection's start and end points are at the same position. */\n      /* display context menu only if the cursor is NOT at the same position */\n      if (this.selection.isCollapsed === false && this.savedSelectionRange.toString().trim() !== '') {\n\n        this.selectionDirection = (this.selection.anchorOffset <= this.selection.focusOffset) ? 'right' : 'left';\n\n        if (this.hasMenu === true) {\n\n          this._setSelectionPosition(); // :TODO: cannot be used in contentEditable editor yet\n\n          this.toggleMenu();\n        }\n\n      }\n\n    }\n\n  }\n\n  _setSelectionPosition() {\n\n    const dummyElement = document.createElement('span');\n    dummyElement.className = 'dummy-range-element';\n\n    this.savedSelectionRange.surroundContents(dummyElement);\n\n    const selectionPosition = __positionTranslated(dummyElement);\n    const selectionDimension = __position(dummyElement);\n\n    this.selectionAttributes = {\n      left: selectionPosition.left,\n      top: selectionPosition.top,\n      width: selectionDimension.width,\n      height: selectionDimension.height,\n    };\n\n    __removeClass(dummyElement, 'dummy-range-element');\n\n    this._removeNodeKeepTextContent(dummyElement);\n\n  }\n\n  _extractAndSaveContents($domEl) {\n    $domEl.appendChild(this.savedSelectionRange.extractContents());\n    this.savedSelectionRange.insertNode($domEl);\n\n    const tagName = $domEl.getAttribute('data-command-name');\n    const newTagId = this._generateNewTagId();\n\n    $domEl.setAttribute('data-tag-id', newTagId);\n\n    store.addTag({\n      editor: this.id,\n      id: newTagId,\n      tag: $domEl,\n      tagName,\n      data: {},\n    });\n\n  }\n\n  _removeNodeKeepTextContent(node) {\n    const text = node.textContent;\n    node.parentNode.insertBefore(document.createTextNode(text), node);\n    __remove(node);\n  }\n\n  _createCloseBtnForElement(parentEl, opts = {}) {\n\n    const $elClose = document.createElement('span');\n    $elClose.setAttribute('class', opts.class);\n\n    const classesToToggle = opts.toggleClass.split(' ');\n\n\n    const clickHandler = (e) => {\n\n      const $closeBtn = e.currentTarget;\n      const $nodeElement = $closeBtn.parentNode;\n\n      $closeBtn.removeEventListener('click', clickHandler);\n      $nodeElement.removeChild($closeBtn);\n\n      if (undefined !== $nodeElement.commentRef) {\n\n        /* :TODO: temporary way to save the reference to the DOM element */\n        this.$editor.removeChild($nodeElement.commentRef);\n        $nodeElement.commentRef = null;\n\n      }\n\n      this._removeNodeKeepTextContent($nodeElement);\n\n      const tagName = $nodeElement.getAttribute('data-command-name');\n\n      store.deleteTag({\n        editor: this.id,\n        id: $nodeElement.getAttribute('data-tag-id'),\n        tag: $nodeElement,\n        tagName,\n        data: {},\n      });\n\n      e.stopPropagation();\n\n    };\n\n    $elClose.addEventListener('click', clickHandler.bind(this));\n\n    parentEl.appendChild($elClose);\n\n  }\n\n  _calculateCommentPosition($node) /* : Object */ {\n\n    const nodePosition = __positionTranslated($node);\n\n    return {\n      left: `${nodePosition.left + parseInt($node.offsetWidth, 10) + this.opts.commentMargin.x}px`,\n      top: `${nodePosition.top + this.opts.commentMargin.y}px`,\n    };\n\n  }\n\n  _createCommentForNode($el, opts = {}) {\n\n    const commentTemplate = document.getElementById('comment-template').innerHTML;\n\n    const div = document.createElement('div');\n    div.innerHTML = commentTemplate;\n\n    const commentDiv = div.childNodes[1];\n\n    // attach js reference to the dom element\n    commentDiv.data = {};\n    commentDiv.data.nodeRef = $el;\n\n    const commentNewTextarea = commentDiv.getElementsByClassName('comment-new-text')[0];\n    const commentDivButtonSubmit = commentDiv.getElementsByTagName('button')[0];\n    const commentCommentsContainer = commentDiv.getElementsByClassName('comments-container')[0];\n\n    const calculatedCommentPosition = this._calculateCommentPosition($el);\n\n    commentDiv.style.left = calculatedCommentPosition.left;\n    commentDiv.style.top = calculatedCommentPosition.top;\n\n    __addClass(commentDiv, opts.class);\n\n    commentDiv.addEventListener('click', (e) => {\n\n      if (__hasClass(e.target, 'close')) {\n\n        __addClass(commentDiv, 'hidden');\n        __removeClass($el, 'active');\n\n      }\n\n    });\n\n    commentDivButtonSubmit.addEventListener('click', (e) => {\n\n      if (commentNewTextarea.value !== '') {\n\n        const commentItem = document.createElement('div');\n        commentItem.className = 'comment-item';\n\n        commentItem.innerText = commentNewTextarea.value;\n\n        commentCommentsContainer.appendChild(commentItem);\n\n        commentNewTextarea.value = '';\n      }\n\n    });\n\n    this.$editor.append(commentDiv);\n\n    __addClass($el, 'comment-created');\n\n    /* :TODO: Temporary way to save the reference to the DOM element */\n    $el.commentRef = commentDiv;\n\n\n  }\n\n  _addCommentHandlerForElement($el, opts = {}) {\n\n    __addClass($el, 'has-comments');\n\n    function clickHandler(e) {\n\n      if (!__hasClass(e.target, 'node-close')) {\n\n        if (!__hasClass($el, 'comment-created')) {\n\n          this._createCommentForNode($el, opts);\n\n        } else {\n\n          /* recalculate comment div position */\n          const calculatedCommentPosition = this._calculateCommentPosition($el);\n\n          $el.commentRef.style.left = calculatedCommentPosition.left;\n          $el.commentRef.style.top = calculatedCommentPosition.top;\n\n          __removeClass($el.commentRef, 'hidden');\n\n        }\n\n        if (!__hasClass($el, 'active')) {\n\n          __addClass($el, 'active');\n\n        } else {\n\n          __removeClass($el, 'active');\n          __addClass($el.commentRef, 'hidden');\n\n        }\n\n      }\n\n      e.stopPropagation();\n\n    }\n\n    $el.addEventListener('click', clickHandler.bind(this));\n\n  }\n\n  setSelection(command, commandName, opts = {}) {\n\n    if (this.selection) {\n\n      if (command === 'toggle-class') {\n\n        const $el = document.createElement('span');\n        $el.setAttribute('class', opts.toggleClass);\n        $el.setAttribute('data-command-name', commandName);\n\n        if (opts.closeBtn === true) {\n          this._createCloseBtnForElement($el, {\n            class: 'node-close',\n            toggleClass: opts.toggleClass,\n          });\n        }\n\n        if (opts.comments === true) {\n          this._addCommentHandlerForElement($el, {\n            class: opts.commentsClass,\n          });\n        }\n\n        this._extractAndSaveContents($el);\n\n        if (opts.showCommentsOnInit === true) {\n          $el.click();\n        }\n\n      }\n\n      // hide context menu after selecting the action#\n      this.toggleMenu(true);\n\n      // show OK button or feedback\n      this.showFeedback();\n\n    }\n\n  }\n\n}\n\nEditor.defaults = {\n  menuClass: 'contextual-menu-component',\n  canvasClass: 'canvas',\n  resetBtnClass: 'reset',\n  closeBtnClass: 'node-close',\n  nodeSelectedClass: 'node-selected',\n  commentMargin: {\n    x: 50,\n    y: 0,\n  },\n  menuMargin: {\n    x: 15,\n    y: 15,\n  },\n  textOptions: {\n    enable: false,\n    animatedClass: 'active',\n    selectedClass: 'selected',\n    deselectedClass: 'deselected',\n  },\n\n};\n\nEditor._hasMenu = opts => opts.funkce !== 'cteni' && opts.funkce !== 'psani' && (opts.menu !== false && opts.menu !== undefined);\nEditor._hasToolbar = opts => opts.funkce === 'psani' || (opts.toolbar !== false && opts.toolbar !== undefined);\n","import { __hasClass, __getHTML, __remove } from '../lib/utils';\nimport store from '../store/store';\nimport actionTypes from '../store/store-constants';\nimport Component from './component';\n\n\nexport default class AnalyticalTable extends Component {\n\n  constructor(id, element, opts) {\n    super(element);\n\n    this.id = id;\n\n    this.opts = Object.assign({}, AnalyticalTable.defaults, opts);\n\n    this.isAdvanced = this.opts.isAdvanced;\n\n    this.rowIndex = 0;\n\n    this.tableResult = this.target.getElementsByClassName('table-result')[0];\n    this.tableResultBody = this.tableResult.getElementsByClassName('table-body')[0];\n    this.tableSelectedItems = this.target.getElementsByClassName('table-selected-items')[0];\n    this.tableSelectedItemsBody = this.tableSelectedItems.getElementsByClassName('table-body')[0];\n\n    this.activeDragged = null;\n\n    // choose the HTML for a row according to whether we work with the advanced version of a table\n    this._getRowHTML = (this.isAdvanced) ? AnalyticalTable._getAdvancedRowHTML : AnalyticalTable._getRowHTML;\n\n  }\n\n  init() {\n    this._registerStoreHandlers(this.tableResultBody, this.tableSelectedItemsBody);\n    this._registerHandlers();\n  }\n\n  _registerStoreHandlers(tableResultBody, tableSelectedItemsBody) {\n\n    store.on(actionTypes.editor.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      let addedTagContainer;\n      let $node;\n      // let deletedItem;\n\n      switch (action.type) {\n\n        case actionTypes.editor.ADD_TAG:\n\n          addedTagContainer = action.data.tagContainer;\n\n          switch (addedTagContainer.tagName) {\n\n            case this.opts.casti[1].sloupce[0].tag:\n\n              tableResultBody.insertAdjacentHTML('beforeend', this._getRowHTML(__getHTML(addedTagContainer.tag), addedTagContainer.id));\n\n\n              // TODO: fix this\n              if (this.opts.letSecondCaseRunIfSame || this.opts.casti[1].sloupce[0].tag === this.opts.casti[1].sloupce[1].tag) {\n\n              } else {\n                break;\n              }\n            // break;\n\n            case this.opts.casti[1].sloupce[1].tag:\n\n\n              $node = addedTagContainer.tag.cloneNode(true);\n              $node.setAttribute('draggable', true);\n              $node.addEventListener('click', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('dragstart', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('dragend', this._handlerDraggable.bind(this), false);\n              $node.addEventListener('drag', this._handlerDraggable.bind(this), false);\n\n              tableSelectedItemsBody.appendChild($node);\n\n\n              break;\n\n            default:\n              break;\n\n          }\n          break;\n\n        case actionTypes.editor.DELETE_TAG:\n\n          addedTagContainer = action.data.tagContainer;\n\n          // console.log(\"from DELETE_TAG action\", addedTagContainer);\n\n          // simple analytical table tasks\n          // const deletedItems = document.querySelectorAll(`[data-tag-id=\"${addedTagContainer.id}\"]`);\n\n          Array.prototype.forEach.call(document.querySelectorAll(`[data-tag-id=\"${addedTagContainer.id}\"]`), ($node) => {\n\n            if (__hasClass($node.parentNode, 'cell-read-only')) {\n              // we have to remove the whole row from the table\n              // --> cell --> table-row\n              __remove($node.parentNode.parentNode);\n\n            } else {\n              __remove($node);\n            }\n\n          });\n\n          break;\n\n        default:\n          break;\n      }\n\n\n    });\n\n  }\n\n  _registerHandlers() {\n\n    this.target.addEventListener('dragover', this._handlerDrop.bind(this), false);\n    this.target.addEventListener('dragleave', this._handlerDrop.bind(this), false);\n    this.target.addEventListener('drop', this._handlerDrop.bind(this), false);\n\n  }\n\n\n  _handlerDraggable(e) {\n\n    if (e.type === 'dragstart') {\n      e.dataTransfer.setData('text/plain', 'node');\n      e.dataTransfer.dropEffect = '';\n      e.target.style.opacity = 0.5;\n\n      this.activeDragged = e.target.cloneNode(true);\n    }\n\n    if (e.type === 'dragend') {\n      e.target.style.opacity = 1;\n\n      // show OK button or feedback\n      this.showFeedback();\n    }\n\n    return false;\n\n  }\n\n  _handlerDrop(e) {\n    if (e.target.localName == \"input\") {\n\n      if (e.type === 'dragover') {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      }\n\n      if (e.type === 'drop') {\n        e.preventDefault();\n      }\n    }\n\n    if (__hasClass(e.target, 'dashboard-canvas-widget-content')) {\n      if (e.type === 'dragover') {\n\n        e.preventDefault();\n        e.dataTransfer.dropEffect = '';\n        e.target.style.background = '#eee';\n      }\n\n      if (e.type === 'dragleave') {\n\n        e.target.style.background = '#fff';\n\n      }\n\n      if (e.type === 'drop') {\n\n\n        e.preventDefault();\n\n        e.target.style.background = '#fff';\n        this.activeDragged.style.opacity = 1;\n\n\n        this.activeDragged.addEventListener('click', (e) => {\n\n          if (__hasClass(e.target, 'node-close')) {\n\n            e.target.parentNode.remove();\n\n          }\n\n        });\n\n        e.target.appendChild(this.activeDragged);\n\n\n      }\n\n\n    }\n\n\n    return false;\n\n  }\n\n\n}\n\nAnalyticalTable.defaults = {\n  isAdvanced: false,\n};\n\n\nAnalyticalTable._getRowHTML = (nodeHTML, index = 0) => {\n\n  const tableRowTemplate = `\n    <div class=\"table-row\">\n      <div class=\"cell cell-read-only cell-border-right\">${nodeHTML}</div>\n      <div class=\"cell dashboard-canvas-widget-content\"></div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n\n};\n\nAnalyticalTable._getAdvancedRowHTML = (nodeHTML, index = 0) => {\n\n  const tableRowTemplate = `\n    <div class=\"table-row\">\n      <div class=\"cell cell-read-only cell-border-right\">${nodeHTML}</div>\n      <div class=\"cell dashboard-canvas-widget-content cell-border-right\"></div>\n      <div class=\"cell table-input\">\n        <input id=\"table-akteri-vztahy-input-${index}\" data-input-target=\"\" data-save=\"value\" type=\"text\" placeholder=\"Vztah aktérů…\" tabindex=\"-1\">\n      </div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n\n};\n","import Observer from './observer';\nimport actionTypes from './store-constants';\n\n/*\nconst tagContainer: Object = {\n  editorId?: number,\n  id: string,\n  tag: HTMLElement,\n  data?: Object\n}\n*/\n\n\nclass StoreKeywords extends Observer {\n\n  constructor() {\n\n    super();\n\n    /* here the global space for storing objects and data */\n    this._data = {};\n\n  }\n\n\n  change(keywordsId, newItems, newItemsHTML) {\n\n    if (!this._data[keywordsId]) {\n      this._data[keywordsId] = {};\n    }\n\n    this._data[keywordsId].items = newItems;\n    this._data[keywordsId].itemsHTML = newItemsHTML;\n\n    store.trigger(actionTypes.keywords.CHANGE, {\n      action: {\n        id: actionTypes.keywords.id,\n        type: actionTypes.keywords.CHANGE,\n        data: {\n          keywordsId: keywordsId,\n          newItems: newItems,\n          newItemsHTML: newItemsHTML\n        },\n      },\n\n    });\n\n  }\n\n  export() {\n    return this._data;\n  }\n\n}\n\nconst store = new StoreKeywords();\nexport default store;\n","import { __toggleClass, __getHTML } from '../lib/utils';\nimport Component from './component';\nimport store from '../store/store-keywords';\nimport actionTypes from '../store/store-constants';\n\n// zoom the image\nexport default class Keywords extends Component {\n  constructor($element, opts = {}) {\n    super($element);\n    this.id = this.target.id;\n    this.function = this.target.getAttribute('data-keywords') || 'selekce';\n    this.$controls = Array.from(this.target.querySelectorAll('[data-keywords-control]'));\n\n    this.opts = Object.assign({}, Keywords.defaults, opts);\n\n    this.$itemsContainer = this.target.getElementsByClassName(this.opts.itemsContainerClassName)[0];\n\n    if (this.opts.inherit && this.opts.inherit.from.length > 0) {\n      // console.log(this.opts.inherit.from);\n      this.isInherited = true;\n    } else {\n      this.$items = this.target.getElementsByClassName(this.opts.itemClassName);\n    }\n\n  }\n\n  init() {\n    switch (this.function) {\n      case 'selekce':\n        // we have data at the instantiation for importing\n        if (this.opts.import && this.opts.import.length > 0) {\n          this.$itemsContainer.innerHTML = Keywords._getHTMLFromItems(this.opts.import);\n        }\n\n        // save the state of all instances on Init\n        /* :TODO: a possible duplicity when the instance has the isInherited set to TRUE */\n        store.change(\n          this.id,\n          Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n          Keywords._getItemsHTML(this.$itemsContainer),\n        );\n\n        // console.log(this.id, this.isInherited);\n        if (this.isInherited) {\n          // if onInit, we copy the elements\n          // by their ids into the itemsContainer of this object\n          if (this.opts.inherit.onInit) {\n            this._regenerateItemsContainerFromInherited();\n          }\n\n          this._registerStoreHandlers();\n        }\n\n        this._registerHandlers();\n        break;\n\n      case 'wordcloud':\n        Array.from(this.$items).forEach(($item) => {\n          $item.setAttribute('data-keywords-item', 0);\n        });\n        this._changeSizeOfKeywordItem(this.opts.skala);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _changeSizeOfKeywordItem(maxLevel) {\n    maxLevel = maxLevel ? parseInt(maxLevel, 10) : 4;\n\n    function setNewLevelValue($keyword, number, feedback) {\n      const oldValue = parseInt($keyword.getAttribute('data-keywords-item'), 10);\n      const newValue = oldValue + number;\n      const value = Math.abs(newValue) > maxLevel ? oldValue : newValue;\n      $keyword.setAttribute('data-keywords-item', value);\n\n      feedback();\n    }\n\n    this.$controls.forEach(($control) => {\n      const $keyword = $control.parentElement.parentElement;\n      const controlFunction = $control.getAttribute('data-keywords-control');\n\n      switch (controlFunction) {\n        case 'minus':\n          $control.addEventListener('click', (event) => {\n            setNewLevelValue($keyword, -1, this.showFeedback);\n            event.preventDefault();\n          });\n          break;\n\n        case 'plus':\n          $control.addEventListener('click', (event) => {\n            setNewLevelValue($keyword, 1, this.showFeedback);\n            event.preventDefault();\n          });\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n  _regenerateItemsContainerFromInherited() {\n    let tempContent = '';\n\n    this.opts.inherit.from.forEach((id) => {\n      const temp = document.getElementById(id).getElementsByClassName(this.opts.itemsContainerClassName)[0].innerHTML;\n      // rename ids of the original items to avoid duplicates in the DOM\n      tempContent += Keywords.renameItemsIds(id, this.id, temp);\n      // console.log(tempContent);\n    });\n\n    this.$itemsContainer.innerHTML = tempContent;\n\n    this.$items = this.target.getElementsByClassName(this.opts.itemClassName);\n\n    store.change(\n      this.id,\n      Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n      Keywords._getItemsHTML(this.$itemsContainer),\n    );\n\n  }\n\n  _registerHandlers() {\n\n    Array.from(this.target.getElementsByClassName(this.opts.itemClassName)).forEach(($item) => {\n      $item.addEventListener('click', this._eventHandler.bind(this), true);\n    });\n\n  }\n\n  _registerStoreHandlers() {\n    store.on(actionTypes.keywords.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      const data = payload.action.data;\n\n      switch (action.type) {\n\n        case actionTypes.keywords.CHANGE:\n\n          // if there are other objects this object inherits items from, update the html\n          if (this.opts.inherit.from.indexOf(data.keywordsId) > -1) {\n            this._regenerateItemsContainerFromInherited();\n\n            // regenerate event handlers\n            this._registerHandlers();\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n    });\n\n  }\n\n\n  _eventHandler(e) {\n\n    if (e.type === 'click') {\n      // console.log(e.target, e.currentTarget);\n      __toggleClass(e.currentTarget, 'disabled');\n\n      store.change(\n        this.id,\n        Keywords._getItemsFromHTML(this.$itemsContainer, this.opts.itemClassName),\n        Keywords._getItemsHTML(this.$itemsContainer),\n      );\n\n      this.showFeedback();\n    }\n\n  }\n\n}\n\n\nKeywords._getItemFromDOMElement = $item => ({\n  class: $item.className,\n  id: $item.getAttribute('id'),\n  text: $item.innerText,\n});\n\nKeywords._getItemsHTML = $itemsContainer => $itemsContainer.innerHTML;\n\nKeywords._getItemsFromHTML = ($itemsContainer, itemsClassName) => {\n  const $items = $itemsContainer.getElementsByClassName(itemsClassName);\n  const itemsArray = [];\n\n  Array.from($items).forEach(($item) => {\n    itemsArray.push(Keywords._getItemFromDOMElement($item));\n  });\n\n\n  return itemsArray;\n\n};\n\nKeywords._getDOMElementFromItem = (item) => {\n\n  const newDiv = document.createElement('div');\n  newDiv.setAttribute('class', item.class);\n  newDiv.setAttribute('id', item.id);\n  newDiv.innerHTML = item.text;\n\n  return __getHTML(newDiv);\n\n};\n\nKeywords._getHTMLFromItems = (items) => {\n\n  let contentHTML = '';\n\n  items.forEach((item) => {\n\n    contentHTML += Keywords._getDOMElementFromItem(item);\n\n  });\n\n  return contentHTML;\n\n};\n\n\nKeywords.renameItemsIds = (oldId, newId, itemsHTML) => {\n\n  const expString = new RegExp(oldId, 'g');\n\n  return itemsHTML.replace(expString, newId);\n\n};\n\nKeywords.defaults = {\n  itemsContainerClassName: 'keywords-items-container',\n  itemClassName: 'keywords-item',\n};\n","import { __getHTML } from '../lib/utils';\n\nimport store from '../store/store';\nimport actionTypes from '../store/store-constants';\n\n// zoom the image\nexport default class EditorTagsPlaceholder {\n  constructor(element, opts = {}) {\n\n    this.$element = element;\n    this.id = this.$element.getAttribute('id');\n\n    this.opts = Object.assign({}, EditorTagsPlaceholder.defaults, opts);\n\n    this.commandNames = JSON.parse(this.$element.getAttribute(this.opts.itemSubscribeAttributeClassName));\n    this.$itemsContainer = this.$element.getElementsByClassName(this.opts.itemsContainerClassName)[0];\n\n  }\n\n  init() {\n\n    this._registerStoreHandlers();\n\n  }\n\n\n  _registerStoreHandlers() {\n\n    store.on(actionTypes.editor.CHANGE, (event, payload) => {\n\n      const action = payload.action;\n      const data = payload.action.data;\n      const tagContainer = data.tagContainer;\n\n      if (this.commandNames.indexOf(tagContainer.tagName) > -1) {\n\n        const tags = store.getTagsBy({key: 'tagName', value: this.commandNames});\n\n        let content = \"\";\n\n        tags.forEach((tag) => {\n\n          content += __getHTML( tag.tag );\n\n        });\n\n        this.$itemsContainer.innerHTML = content;\n\n      }\n\n  });\n\n  }\n\n\n\n}\n\n\n\n\n\nEditorTagsPlaceholder.defaults = {\n  itemsContainerClassName: \"editor-tags-placeholder-content\",\n  itemSubscribeAttributeClassName: 'data-placeholder-editor-subscribe'\n\n};\n","import { __removeClass, __toggleClass } from '../lib/utils';\nimport Component from './component';\n// import store from '../store/store';\n// import actionTypes from '../store/store-constants';\n\n\nexport default class TestQuiz extends Component {\n\n  constructor(id, element, opts) {\n    super(element);\n\n    this.id = id;\n\n    this.opts = Object.assign({}, TestQuiz.defaults, opts);\n\n    this.$questions = this.target.getElementsByClassName(this.opts.itemClass);\n    this.cache = {\n      answersCorrect: 0,\n      colors: [],\n      questions: [],\n    };\n\n    // get colors for all feedback variants\n    if (this.opts.zpetnaVazba) {\n      this.cache.colors = this.opts.zpetnaVazba.map(feedback => feedback.barva);\n    }\n  }\n\n  init() {\n    // this._registerStoreHandlers();\n    this._registerHandlers();\n  }\n\n  _registerHandlers() {\n\n    Array.from(this.$questions).forEach(($question, questionIndex) => {\n      // all questions are without answer by default\n      this.cache.questions.push({ answered: false });\n\n      const answerCorrect = parseInt($question.getAttribute('data-module-answer'), 10);\n      const $answers = Array.from($question.getElementsByClassName(this.opts.optionClass));\n\n      $answers.forEach(($answer, answerIndex) => {\n        $answer.addEventListener('click', () => {\n          const $answerCurrent = $answer;\n\n          // if already selected do nothing\n          if ($answerCurrent.classList.contains('selected')) {\n            return;\n          }\n\n          // remove the selection\n          $answers.forEach($answersItem => __removeClass($answersItem, this.opts.selectedClass));\n          // select the clicked one\n          __toggleClass($answerCurrent, this.opts.selectedClass);\n\n          // get sum of all corect answers\n          if (this.opts.zpetnaVazba) {\n            if (answerIndex === answerCorrect) {\n              this.cache.answersCorrect += 1;\n            } else if (this.cache.answersCorrect !== 0 && this.cache.questions[questionIndex].answered === true) {\n              this.cache.answersCorrect -= 1;\n            }\n            // loop through all \"zpetnaVazba\" to get the one with the fullfilled condition\n            const feedbackActual = this.opts.zpetnaVazba.find(feedback => feedback.podminka.includes(this.cache.answersCorrect));\n\n            // show the right feedback message\n            this.$buttonFeedback.classList.remove(...this.cache.colors);\n            this.$buttonFeedback.classList.add(feedbackActual.barva);\n            this.$buttonFeedbackText.innerText = feedbackActual.text;\n          }\n\n          // note that this question has been answered (whether true or false)\n          this.cache.questions[questionIndex].answered = true;\n\n          // show OK button with feedback only when all question have been answered\n          if (this.cache.questions.find(question => !question.answered) === undefined) {\n            this.showFeedback();\n          }\n\n        }, false);\n      });\n    });\n  }\n}\n\nTestQuiz.defaults = {\n  itemClass: 'test-quiz-item',\n  optionClass: 'option',\n  selectedClass: 'selected',\n};\n","import { __remove } from '../lib/utils';\nimport storeGlobal from '../store/store-global';\nimport actionTypes from '../store/store-constants';\nimport Component from './component';\n\n\nexport default class GenericTable extends Component {\n\n  constructor($element, opts) {\n    super($element);\n\n    this.id = this.target.id;\n    this.opts = Object.assign({}, GenericTable.defaults, opts);\n\n    this.rowIndex = 0;\n\n    this.$tableResultBody = this.target.getElementsByClassName('table-body')[0];\n\n    this.dataSettings = this.opts.data;\n\n    this.cache = {\n      tasksToComplete: 0,\n      tasksCompleted: 0,\n      tasks: [],\n    };\n  }\n\n  init() {\n\n    if (this.dataSettings.source === 'store') {\n      this._registerStoreHandlers();\n    }\n\n    // this._registerHandlers();\n  }\n\n  _registerStoreHandlers() {\n\n    // register store event handler\n    // in tabulkaObecna JSON settings, subscribe is an array, here we need a string of strings separated by spaces\n    storeGlobal.on(this.dataSettings.subscribe.join(' '), (event, payload) => {\n      const action = payload.action;\n      const data = payload.data;\n\n      switch (action.type) {\n\n        case actionTypes[event].ADD: {\n          this.$tableResultBody.insertAdjacentHTML('beforeend', GenericTable._getRowHTML(data));\n\n          const $allRows = this.$tableResultBody.querySelectorAll('.table-row');\n          const $lastRow = $allRows[$allRows.length - 1];\n\n          const $newSelects = $lastRow.querySelectorAll('select');\n\n          this.cache.tasksToComplete += $newSelects.length;\n\n          Array.from($newSelects).forEach(($select) => {\n            this.cache.tasks.push({ answered: false });\n            const taskNumber = this.cache.tasks.length - 1;\n\n            $select.addEventListener('change', () => {\n              if (this.cache.tasks[taskNumber].answered === false) {\n                this.cache.tasksCompleted += 1;\n                this.cache.tasks[taskNumber].answered = true;\n              }\n              if (this.cache.tasksToComplete === this.cache.tasksCompleted) {\n                // show OK button or feedback\n                this.showFeedback();\n              }\n            });\n          });\n          break;\n        }\n        case actionTypes[event].DELETE: {\n          const $row = document.getElementById(`${data.id}_table`);\n          __remove($row);\n          this.cache.tasksToComplete -= $row.querySelectorAll('select').length;\n          this.cache.tasksCompleted -= $row.querySelectorAll('select').length;\n\n          if (this.cache.tasksToComplete <= this.cache.tasksCompleted) {\n            // show OK button or feedback\n            this.showFeedback();\n          }\n\n          break;\n        }\n        default:\n          break;\n      }\n\n    });\n\n  }\n\n\n}\n\nGenericTable.defaults = {};\n\n// data.data.text: editor text name\n// data.data.vyraz selected text option text value\nGenericTable._getRowHTML = (data) => {\n  const tableRowTemplate = `\n    <div class=\"table-row\" id=\"${data.id}_table\">\n      <div class=\"cell\">${data.data.text}</div>\n      <div class=\"cell\">${data.data.vyraz}</div>\n      <div class=\"cell\">\n        <select id=\"${data.id}-select-osoba\" name=\"osoba\" data-save=\"value\">\n          <option>Vyberte osobu</option>\n          <option>já</option>\n          <option>ty</option>\n          <option>on/ona/ono</option>\n          <option>my</option>\n          <option>vy</option>\n          <option>oni/ony/ona</option>\n          <option>infinitiv</option>\n        </select>\n      </div>\n      <div class=\"cell\">\n        <select id=\"${data.id}-select-zpusob\" name=\"zpusob\" data-save=\"value\">\n          <option>Vyberte způsob</option>\n          <option>oznamovací</option>\n          <option>podmiňovací</option>\n          <option>rozkazovací</option>\n          <option id=\"select-zpusob-infinitiv\">infinitiv</option>\n        </select>\n      </div>\n    </div>\n  `;\n\n  return tableRowTemplate;\n\n};\n","// [data-fullscreen]\nimport Component from './component';\n\nclass Fullscreen extends Component {\n  constructor($element) {\n    super($element);\n\n    this.$fullscreen = document.querySelector('[data-fullscreen=\"target\"]');\n    this.$fullscreenImage = this.$fullscreen.querySelector('[data-fullscreen=\"image\"]');\n\n    this.window = {};\n    this.image = {};\n\n    this.window.width = window.innerWidth;\n    this.window.height = window.innerHeight;\n    this.window.ratio = this.window.width / this.window.height;\n\n    this.$fullscreenImage.onload = () => {\n      this.image.width = this.$fullscreenImage.naturalWidth;\n      this.image.height = this.$fullscreenImage.naturalHeight;\n      this.image.ratio = this.image.width / this.image.height;\n\n      if (this.image.ratio >= this.window.ratio) {\n        this.$fullscreenImage.style.width = '100%';\n        this.$fullscreenImage.style.height = 'auto';\n      } else {\n        this.$fullscreenImage.style.width = 'auto';\n        this.$fullscreenImage.style.height = `${this.window.height}px`;\n      }\n    };\n\n  }\n}\n\nexport default class FullscreenToggle extends Fullscreen {\n  constructor($element) {\n    super($element);\n\n    this.target.addEventListener('click', (event) => {\n      this.$fullscreenImage.src = this.target.nextElementSibling.src;\n      this.$fullscreen.classList.toggle('hidden');\n\n      this.showFeedback();\n\n      event.preventDefault();\n      event.stopPropagation();\n    }, false);\n\n  }\n}\n","import Component from './component';\n\nexport default class UserText extends Component {\n  constructor($element) {\n    super($element);\n    this.$userTexts = this.$slide.querySelectorAll('[data-textarea-target]');\n\n    this.lengthExpected = {\n      min: parseInt(this.target.getAttribute('minlength') === '0' ? 1 : this.target.getAttribute('minlength'), 10),\n      avg: null,\n      max: parseInt(this.target.getAttribute('maxlength') / 2, 10),\n    };\n    this.lengthExpected.avg = Math.floor((this.lengthExpected.max - this.lengthExpected.min) / 4 + this.lengthExpected.min);\n\n    this.cache = {\n      answersCorrect: 0,\n      colors: [\n        'color-red',\n        'color-orange',\n        'color-green',\n      ],\n      questions: [],\n    };\n\n    this.sendFeedback();\n  }\n\n  sendFeedback() {\n    this.target.addEventListener('keyup', (event) => {\n      event.stopPropagation();\n\n      const valueLength = this.target.value.length;\n\n      // CONDITION: type three chars at least\n      // TODO: should be variable, a paramater from JSON\n      this.$buttonFeedback.classList.remove(...this.cache.colors);\n      if (valueLength < this.lengthExpected.min) {\n        this.$buttonFeedback.classList.add(this.cache.colors[0]);\n        this.$buttonFeedbackText.innerText = 'Napiš něco!';\n      } else {\n\n        if (valueLength <= this.lengthExpected.avg) {\n          this.$buttonFeedback.classList.add(this.cache.colors[1]);\n          this.$buttonFeedbackText.innerText = 'Není toho moc.';\n        }\n        else if (valueLength > this.lengthExpected.avg) {\n          this.$buttonFeedback.classList.add(this.cache.colors[2]);\n          this.$buttonFeedbackText.innerText = 'Mám hotovo!';\n        }\n\n        this.target.setAttribute('data-textarea-target', 'success');\n        // check if all conditions of the same component on the same slide are met\n        const conditionAll = Array.from(this.$userTexts).find($userText => ($userText.getAttribute('data-textarea-target') !== 'success'));\n\n        if (conditionAll === undefined) {\n          // show OK button or feedback\n          this.showFeedback();\n        }\n      }\n    });\n  }\n}\n","import Component from '../component';\n\nexport default class AudioPlayerNormal extends Component {\n\n  constructor($element) {\n    super($element);\n\n    this.$playButton = this.target.querySelector('[data-player-control]');\n    this.$loadWave = this.target.querySelector('[data-audio-wave]');\n    this.$leftTime = this.target.querySelector('[data-audio-time-left]');\n    this.$audioDuration = this.target.querySelector('[data-audio-time-duration]');\n\n    this.wavesurfer = WaveSurfer.create({\n      container: this.$loadWave,\n      waveColor: '#A77977',\n      progressColor: '#FCE4E3',\n      height: 80,\n      responsive: true,\n      barWidth: 2,\n    });\n    this.wavesurfer.load(this.$loadWave.dataset.src);\n\n    this.initWave();\n  }\n\n  initWave() {\n    this.wavesurfer.on('ready', () => {\n      this.$leftTime.textContent = '0:00';\n      const duration = this.wavesurfer.getDuration();\n      const minutes = Math.floor((duration % 3600) / 60);\n      const seconds = (`00${Math.floor(duration % 60)}`).slice(-2);\n      this.$audioDuration.textContent = `${minutes}:${seconds}`;\n\n      this.addListenerAfterReady();\n    });\n  }\n\n  addListenerAfterReady() {\n    this.wavesurfer.on('audioprocess', (time) => {\n      const minutes = Math.floor((time % 3600) / 60);\n      const seconds = (`00${Math.floor(time % 60)}`).slice(-2);\n      this.$leftTime.textContent = `${minutes}:${seconds}`;\n    });\n\n    this.wavesurfer.on('finish', () => {\n      this.$playButton.setAttribute('data-player-control', 'paused');\n    });\n\n    this.$playButton.addEventListener('click', () => {\n      this.wavesurfer.playPause();\n\n      if (this.$playButton.getAttribute('data-player-control') === 'paused') {\n        this.$playButton.setAttribute('data-player-control', 'playing');\n      } else {\n        this.$playButton.setAttribute('data-player-control', 'paused');\n      }\n\n      this.showFeedback();\n    });\n\n    // stop audio prehravac kdyz se zapne dalsi slajd\n    const $nextSlides = document.querySelectorAll('[data-nav-button]');\n    Array.from($nextSlides).forEach(($nextSlide) => {\n      $nextSlide.addEventListener('click', () => {\n        if (this.$playButton.getAttribute('data-player-control') === 'playing') {\n          this.wavesurfer.playPause();\n          this.$playButton.setAttribute('data-player-control', 'paused');\n        }\n      });\n    });\n\n  }\n\n}\n","import AudioPlayer from './audio-player';\nimport { getSecondsMinutesFormat } from './media';\n\nexport default class AudioPlayerSimple extends AudioPlayer {\n  constructor($element) {\n    super($element);\n\n    this.$audio = this.target.querySelector('audio');\n    this.$timeLeft = this.target.querySelector('[data-audio-time-left]');\n    this.$duration = this.target.querySelector('[data-audio-time-duration]');\n\n    this.$duration.innerText = `/${getSecondsMinutesFormat(this.$audio.duration)}`;\n\n    AudioPlayer.addEventListeners(this.target, this.showFeedback);\n  }\n}\n","import Component from './component';\n\nexport default class FakeMap extends Component {\n  constructor($element) {\n    super($element);\n\n    this.$buttons = this.target.querySelectorAll('[data-fake-map=\"toggle\"]');\n    this.$maps = this.target.querySelectorAll('[data-fake-map=\"map\"]');\n    this.lastActiveIndex = 0;\n\n    this.addEventListenerToButtons();\n  }\n\n  switchMap($button, index) {\n    this.$maps[this.lastActiveIndex].classList.remove('active');\n    this.$buttons[this.lastActiveIndex].classList.remove('active');\n\n    this.$maps[index].classList.add('active');\n    $button.classList.add('active');\n\n    this.lastActiveIndex = index;\n  }\n\n  addEventListenerToButtons() {\n    this.$buttons.forEach(($button, index) => {\n\n      $button.addEventListener('click', (event) => {\n        this.switchMap($button, index);\n        this.showFeedback();\n\n        event.preventDefault();\n      });\n\n    });\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport Component from '../component';\nimport { getSecondsMinutesFormat, mediaEvents } from './media';\n\nexport default class VideoPlayer extends Component {\n  constructor($element, options) {\n    super($element);\n\n    this.$media = this.target.querySelector('video');\n    this.options = Object(options);\n    this.prefix = this.options.prefix || 'media';\n    this.lang = Object(this.options.lang);\n    // lang.currentTime\n    // lang.play\n    // lang.pause\n    // lang.minutes\n    // lang.seconds\n    // lang.leaveFullscreen\n    // lang.enterFullscreen\n\n    this.paused = null;\n    this.currentTime = null;\n    this.duration = null;\n    this.interval = null;\n\n    this.$document = this.target.ownerDocument;\n    this.$controls = this.target.querySelector('.media-player-controls');\n    // play/pause toggle\n    this.$play = this.$controls.querySelector('[data-player-control]');\n    this.$playSymbol = this.$play.querySelector('.media-play-symbol');\n    this.$pauseSymbol = this.$play.querySelector('.media-pause-symbol');\n    // time slider\n    this.$time = this.$controls.querySelector('[data-video-time-progress]');\n    this.$timeMeter = this.$time.querySelector('.media-meter.media-time-meter');\n    this.$timeRange = this.$time.querySelector('.media-range.media-time-range');\n\n    // current time text\n    this.$currentTimeText = this.$document.createTextNode('');\n    this.$currentTime = this.$controls.querySelector('[data-video-time-left]');\n    this.$currentTime.appendChild(this.$currentTimeText);\n\n    // duration time text\n    this.durationTime = this.$media.duration;\n    this.$durationTime = this.$controls.querySelector('[data-video-time-duration]');\n    this.$durationTime.innerText = getSecondsMinutesFormat(this.durationTime);\n    this.$durationTime.setAttribute(\n      'title',\n      `${VideoPlayer.timeToAural(\n        this.durationTime,\n        this.lang.minutes || 'minutes',\n        this.lang.seconds || 'seconds',\n      )}`,\n    );\n\n    // fullscreen button\n    this.$fullscreen = this.$controls.querySelector(\n      '.fullscreen-toggle',\n    );\n    this.$enterFullscreenSymbol = this.$fullscreen.querySelector(\n      '.media-enterFullscreen-symbol',\n    );\n    this.$leaveFullscreenSymbol = this.$fullscreen.querySelector(\n      '.media-leaveFullscreen-symbol',\n    );\n\n    // fullscreen api\n    this._fullscreenchange = 'onfullscreenchange' in this.target\n      ? 'fullscreenchange'\n      : 'onwebkitfullscreenchange' in this.target\n        ? 'webkitfullscreenchange'\n        : 'onMSFullscreenChange' in this.target\n          ? 'MSFullscreenChange'\n          : 'fullscreenchange';\n\n    this._requestFullscreen = this.target.requestFullscreen\n    || this.target.webkitRequestFullscreen\n    // || this.target.mozRequestFullScreen\n    || this.target.msRequestFullscreen;\n\n    this.onCanPlayStart = this.onCanPlayStart.bind(this);\n    this.onLoadStart = this.onLoadStart.bind(this);\n    this.onLoadedData = this.onLoadedData.bind(this);\n    this.onPlayChange = this.onPlayChange.bind(this);\n    this.onTimeChange = this.onTimeChange.bind(this);\n    this.onPlayClick = this.onPlayClick.bind(this);\n    this.onTimeKeydown = this.onTimeKeydown.bind(this);\n    this.onTimeClick = this.onTimeClick.bind(this);\n    this.onTimeKeydown = this.onTimeKeydown.bind(this);\n    this.onFullscreenClick = this.onFullscreenClick.bind(this);\n    this.onFullscreenChange = this.onFullscreenChange.bind(this);\n\n    // add event listeners\n    this.$media.addEventListener('canplaythrough', this.onCanPlayStart);\n    this.$media.addEventListener('loadstart', this.onLoadStart);\n    this.$media.addEventListener('loadeddata', this.onLoadedData);\n    this.$media.addEventListener('pause', this.onPlayChange);\n    this.$media.addEventListener('play', this.onPlayChange);\n    this.$media.addEventListener('timeupdate', this.onTimeChange);\n    this.$controls.addEventListener('click', this.onPlayClick, false);\n    // this.$play.addEventListener('click', this.onPlayClick, false);\n    this.$play.addEventListener('keydown', this.onTimeKeydown);\n    this.$time.addEventListener('click', this.onTimeClick, false);\n    this.$time.addEventListener('keydown', this.onTimeKeydown);\n    this.$fullscreen.addEventListener('click', this.onFullscreenClick, false);\n    // listen for fullscreen changes\n    document.addEventListener(\n      this._fullscreenchange,\n      this.onFullscreenChange,\n    );\n\n    // pointer events from time control\n    VideoPlayer.onDrag(this.$time, this.$timeRange, (percentage) => {\n      this.$media.currentTime = this.duration * Math.max(0, Math.min(1, percentage));\n\n      this.onTimeChange();\n    });\n\n    this.onLoadStart();\n  }\n\n  static _fullscreenElement() {\n    return document.fullscreenElement\n    || document.webkitFullscreenElement\n    // || document.mozFullScreenElement\n    || document.msFullscreenElement;\n  }\n\n  static _exitFullscreen() {\n    return document.exitFullscreen\n    || document.webkitCancelFullScreen\n    // || document.mozCancelFullScreen\n    || document.msExitFullscreen;\n  }\n\n  // when the play state changes\n  onPlayChange() {\n    if (this.paused !== this.$media.paused) {\n      this.paused = this.$media.paused;\n\n      this.$play.setAttribute(\n        'aria-label',\n        this.paused ? this.lang.play || 'play' : this.lang.pause || 'pause',\n      );\n      this.target.setAttribute(\n        'data-player-state',\n        this.paused ? 'paused' : 'playing',\n      );\n      this.$playSymbol.setAttribute('aria-hidden', !this.paused);\n      this.$pauseSymbol.setAttribute('aria-hidden', this.paused);\n\n      clearInterval(this.interval);\n\n      if (!this.paused) {\n        // listen for time changes every 30th of a second\n        this.interval = setInterval(this.onTimeChange, 34);\n      }\n\n      // dispatch new \"playchange\" event\n      this.$media.dispatchEvent(mediaEvents.playchange);\n    }\n  }\n\n  // when the time changes\n  onTimeChange() {\n    if (\n      this.currentTime !== this.$media.currentTime\n      || this.duration !== this.$media.duration\n    ) {\n      this.currentTime = this.$media.currentTime;\n      this.duration = this.$media.duration || 0;\n\n      const currentTimePercentage = this.currentTime / this.duration;\n      // const currentTimeCode = VideoPlayer.timeToTimecode(this.currentTime);\n      const currentTimeCode = getSecondsMinutesFormat(this.currentTime);\n      // const remainingTimeCode = VideoPlayer.timeToTimecode(\n      //   this.duration - Math.floor(this.currentTime),\n      // );\n\n      if (currentTimeCode !== this.$currentTimeText.nodeValue) {\n        this.$currentTimeText.nodeValue = currentTimeCode;\n\n        this.$currentTime.setAttribute(\n          'title',\n          `${VideoPlayer.timeToAural(\n            this.currentTime,\n            this.lang.minutes || 'minutes',\n            this.lang.seconds || 'seconds',\n          )}`,\n        );\n      }\n\n      // if (remainingTimeCode !== this.$remainingTimeText.nodeValue) {\n      //   this.$remainingTimeText.nodeValue = remainingTimeCode;\n\n      //   $(this.$remainingTime, {\n      //     title: `${VideoPlayer.timeToAural(\n      //       this.duration - this.currentTime,\n      //       this.lang.minutes || 'minutes',\n      //       this.lang.seconds || 'seconds',\n      //     )}`,\n      //   });\n      // }\n\n      this.$time.setAttribute('aria-valuenow', this.currentTime);\n      this.$time.setAttribute('aria-valuemin', 0);\n      this.$time.setAttribute('aria-valuemax', this.duration);\n\n      this.$timeMeter.style.width = `${currentTimePercentage * 100}%`;\n\n      // dispatch new \"timechange\" event\n      this.$media.dispatchEvent(mediaEvents.timechange);\n    }\n  }\n\n  // when media loads for the first time\n  onLoadStart() {\n    this.$media.removeEventListener('canplaythrough', this.onCanPlayStart);\n    this.$media.addEventListener('canplaythrough', this.onCanPlayStart);\n\n    this.onPlayChange();\n    this.onFullscreenChange();\n    this.onTimeChange();\n  }\n\n  // when the immediate current playback position is available\n  onLoadedData() {\n    this.onTimeChange();\n  }\n\n  // when the media can play\n  onCanPlayStart() {\n    this.$media.removeEventListener('canplaythrough', this.nCanPlayStart);\n\n    // dispatch new \"canplaystart\" event\n    this.$media.dispatchEvent(mediaEvents.canplaystart);\n\n\n    if (!this.paused || this.$media.autoplay) {\n      this.$media.play();\n    }\n  }\n\n  onFullscreenChange() {\n    const isFullscreen = this.target === VideoPlayer._fullscreenElement();\n\n    this.$fullscreen.setAttribute(\n      'aria-label',\n      isFullscreen\n        ? this.lang.leaveFullscreen || 'leave full screen'\n        : this.lang.enterFullscreen || 'enter full screen',\n    );\n    this.$enterFullscreenSymbol.setAttribute('aria-hidden', isFullscreen);\n    this.$leaveFullscreenSymbol.setAttribute('aria-hidden', !isFullscreen);\n  }\n\n  // when the play control is clicked\n  onPlayClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.$media[this.$media.paused ? 'play' : 'pause']();\n  }\n\n  // when the time control\n  onTimeClick(event) {\n    event.stopPropagation();\n\n    // handle click if clicked without pointer\n    if (!event.pointerType && !event.detail) {\n      this.onPlayClick(event);\n    }\n  }\n\n  // click from fullscreen control\n  onFullscreenClick(event) {\n    event.stopPropagation();\n\n    if (this._requestFullscreen) {\n      if (this.target === VideoPlayer._fullscreenElement()) {\n        // exit fullscreen\n        VideoPlayer._exitFullscreen().call(document);\n      } else {\n        // enter fullscreen\n        this._requestFullscreen.call(this.target);\n\n        // maintain focus in internet explorer\n        this.$fullscreen.focus();\n\n        // maintain focus in safari\n        setTimeout(() => {\n          this.$fullscreen.focus();\n        }, 200);\n      }\n    } else if (this.$media.webkitSupportsFullscreen) {\n      // iOS allows fullscreen of the video itself\n      if (this.$media.webkitDisplayingFullscreen) {\n        // exit ios fullscreen\n        this.$media.webkitExitFullscreen();\n      } else {\n        // enter ios fullscreen\n        this.$media.webkitEnterFullscreen();\n      }\n\n      this.onFullscreenChange();\n    }\n  }\n\n  // keydown from play control or current time control\n  onTimeKeydown(event) {\n    const { keyCode, shiftKey } = event;\n\n    // 37: LEFT, 38: UP, 39: RIGHT, 40: DOWN\n    if (keyCode >= 37 && keyCode <= 40) {\n      event.preventDefault();\n\n      const offset = keyCode === 37 || keyCode === 39 ? keyCode - 38 : keyCode - 39;\n\n      this.$media.currentTime = Math.max(\n        0,\n        Math.min(\n          this.$media.duration,\n          this.$media.currentTime + offset * (shiftKey ? 10 : 1),\n        ),\n      );\n\n      this.onTimeChange();\n    }\n  }\n\n  // Handle Drag Ranges\n  static onDrag(target, innerTarget, listener) {\n    // eslint-disable-line max-params\n    const hasPointerEvent = undefined !== target.onpointerup;\n    const hasTouchEvent = undefined !== target.ontouchstart;\n    const pointerDown = hasPointerEvent\n      ? 'pointerdown'\n      : hasTouchEvent\n        ? 'touchstart'\n        : 'mousedown';\n    const pointerMove = hasPointerEvent\n      ? 'pointermove'\n      : hasTouchEvent\n        ? 'touchmove'\n        : 'mousemove';\n    const pointerUp = hasPointerEvent\n      ? 'pointerup'\n      : hasTouchEvent\n        ? 'touchend'\n        : 'mouseup';\n\n    // ...\n    const axisProp = 'clientX';\n\n    let window;\n    let start;\n    let end;\n\n    function onpointermove(event) {\n      // prevent browser actions on this event\n      event.preventDefault();\n\n      // the pointer coordinate\n      const position = axisProp in event\n        ? event[axisProp]\n        : (event.touches && event.touches[0] && event.touches[0][axisProp])\n            || 0;\n\n      // the percentage of the pointer along the container\n      const percentage = (position - start) / (end - start);\n\n      // call the listener with percentage\n      listener(percentage);\n    }\n\n    function onpointerdown(event) {\n      // window\n      window = target.ownerDocument.defaultView;\n\n      // client boundaries\n      const rect = innerTarget.getBoundingClientRect();\n\n      // the container start and end coordinates\n      start = rect.left;\n      end = rect.right;\n\n      onpointermove(event);\n\n      window.addEventListener(pointerMove, onpointermove);\n      window.addEventListener(pointerUp, onpointerup);\n    }\n\n    function onpointerup() {\n      window.removeEventListener(pointerMove, onpointermove);\n      window.removeEventListener(pointerUp, onpointerup);\n    }\n\n    // on pointer down\n    target.addEventListener(pointerDown, onpointerdown);\n  }\n\n  // Time To Timecode\n  // DEPRECATED (media.util)\n  // static timeToTimecode(time) {\n  //   return `${`0${Math.floor(time / 60)}`.slice(-2)}:${`0${Math.floor(\n  //     time % 60,\n  //   )}`.slice(-2)}`;\n  // }\n\n  // Time To Aural\n  // DEPRECATED (media.util)\n  static timeToAural(time, langMinutes, langSeconds) {\n    return `${Math.floor(time / 60)} ${langMinutes}, ${Math.floor(\n      time % 60,\n    )} ${langSeconds}`;\n  }\n}\n","import domLoadComponents from './dom-load';\nimport windowLoadComponents from './window-load';\n\n// The DOMContentLoaded event fires when parsing of the current page is complete. DOMContentLoaded is a great event to use to hookup UI functionality to complex web pages.\ndocument.addEventListener('DOMContentLoaded', domLoadComponents, false);\n\n// The load event fires when all files have finished loading from all resources, including ads and images.\nwindow.addEventListener('load', windowLoadComponents, false);\n","\nconst domLoadComponents = () => {\n  console.log('domLoad:components');\n\n  // instantiate\n\n  // run\n\n};\n\nexport default domLoadComponents;\n","/* eslint-disable no-unused-vars */\nimport MagnifyingGlass from './magnifying-glass';\nimport PhotoDetail from './photo-detail';\nimport Sortable from './sortable';\nimport SVG from './svg';\nimport SVGRadialMenu from './svg-lib/svg-radial-menu';\nimport Editor from './editor/editor';\nimport AnalyticalTable from './analytical-table';\nimport Keywords from './keywords';\nimport EditorTagsPlaceholder from './editor-tags-placeholder';\nimport TestQuiz from './test-quiz';\nimport GenericTable from './generic-table';\nimport FullscreenToggle from './fullscreen';\nimport UserText from './user-text';\nimport AudioPlayerNormal from './media/audio-player-normal';\nimport AudioPlayerSimple from './media/audio-player-simple';\nimport FakeMap from './fake-map';\nimport { stopPlayingVideoPlayers } from './media/media';\nimport VideoPlayer from './media/video';\n// import actionTypes from '../store/store-constants';\n// import storeGlobal from '../store/store-global';\n\nconst windowLoadComponents = () => {\n  console.log('windowLoad:components');\n\n  // Video player - normal\n  const $videoPlayers = Array.from(\n    document.querySelectorAll('[data-player-video]'),\n  );\n  if ($videoPlayers.length > 0) {\n    $videoPlayers.forEach(($videoPlayer) => {\n      // console.log('$videoPlayer', $videoPlayer);\n      const videoPlayer = new VideoPlayer($videoPlayer);\n    });\n\n    document.addEventListener('slide.change', () => {\n      stopPlayingVideoPlayers($videoPlayers);\n    });\n  }\n\n  // Audio player - normal\n  const $audioPlayerNormals = Array.from(\n    document.querySelectorAll('[data-player-audio=\"normal\"]'),\n  );\n  if ($audioPlayerNormals.length > 0) {\n    $audioPlayerNormals.forEach(($audioPlayerNormal) => {\n      const audioPlayerNormal = new AudioPlayerNormal($audioPlayerNormal);\n    });\n\n    // TODO > audio-player-normal.js#61\n    // document.addEventListener('slide.change', () => {\n    //   stopPlayingVideoPlayers($audioPlayerNormals);\n    // });\n  }\n\n  // Audio player — simple\n  const $audioPlayerSimples = Array.from(document.querySelectorAll(\n    '[data-player-audio=\"simple\"]',\n  ));\n  if ($audioPlayerSimples.length > 0) {\n    $audioPlayerSimples.forEach(($audioPlayerSimple) => {\n      const audioPlayerSimple = new AudioPlayerSimple($audioPlayerSimple);\n    });\n\n    document.addEventListener('slide.change', () => {\n      stopPlayingVideoPlayers($audioPlayerSimples);\n    });\n  }\n\n  // Fullscreen\n  const $fullscreenToggles = document.querySelectorAll(\n    '[data-fullscreen=\"toggle\"]',\n  );\n  if ($fullscreenToggles.length > 0) {\n    Array.from($fullscreenToggles).forEach(($fullscreenToggle) => {\n      const fullscreenToggle = new FullscreenToggle($fullscreenToggle);\n    });\n  }\n\n  // Magnifying glass\n  const $magnifyingGlass = document.querySelectorAll('[data-lupa-target]');\n  if ($magnifyingGlass.length > 0) {\n    for (let i = 0; i < $magnifyingGlass.length; i += 1) {\n      const magnifyingGlass = new MagnifyingGlass($magnifyingGlass[i]);\n    }\n  }\n\n  // Photo detail\n  const $photoDetails = document.querySelectorAll('[data-photo-detail-target]');\n  if ($photoDetails.length > 0) {\n    for (let i = 0; i < $photoDetails.length; i += 1) {\n      const photoDetail = new PhotoDetail($photoDetails[i]);\n    }\n  }\n\n  // Fake Map\n  const $fakeMaps = document.querySelectorAll('[data-fake-map=\"target\"]');\n  if ($fakeMaps.length > 0) {\n    for (let i = 0; i < $fakeMaps.length; i += 1) {\n      const fakeMap = new FakeMap($fakeMaps[i]);\n    }\n  }\n\n  //\n  // load those only in working mode\n  if (HISTORYLAB.import.done !== true) {\n    // User texts\n    const $userTexts = document.querySelectorAll('[data-textarea-target=\"\"]');\n    if ($userTexts.length > 0) {\n      Array.from($userTexts).forEach(($userText) => {\n        const userText = new UserText($userText);\n      });\n    }\n\n    // Editor\n    const $editors = document.querySelectorAll('[data-editor]');\n    if ($editors.length > 0) {\n      Array.from($editors).forEach(($editor) => {\n        const editor = new Editor($editor);\n      });\n    }\n\n    // Test Quizes\n    const $testQuizs = document.querySelectorAll('[data-target-test-quiz]');\n    if ($testQuizs.length > 0) {\n      Array.from($testQuizs).forEach(($testQuiz) => {\n        const settings = document.querySelector(\n          `[data-test-quiz-id-reference=\"${$testQuiz.getAttribute(\n            'data-test-quiz-id',\n          )}\"]`,\n        );\n\n        const testQuiz = new TestQuiz(\n          $testQuiz.getAttribute('data-test-quiz-id'),\n          $testQuiz,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        testQuiz.init();\n      });\n    }\n\n    // Analytical tables\n    const $analyticalTables = document.querySelectorAll(\n      '[data-target-analytical-table]',\n    );\n\n    if ($analyticalTables.length > 0) {\n      Array.from($analyticalTables).forEach(($analyticalTable) => {\n        const settings = document.querySelector(\n          `[data-analytical-table-id-reference=\"${$analyticalTable.getAttribute(\n            'data-analytical-table-id',\n          )}\"]`,\n        );\n        const analyticalTable = new AnalyticalTable(\n          $analyticalTable.getAttribute('data-analytical-table-id'),\n          $analyticalTable,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        analyticalTable.init();\n      });\n    }\n\n    // Generic tables\n    const $genericTables = document.querySelectorAll(\n      '[data-target-generic-table]',\n    );\n    if ($genericTables.length > 0) {\n      Array.from($genericTables).forEach(($genericTable) => {\n        const settings = document.querySelector(\n          `[data-generic-table-id-reference=\"${$genericTable.id}\"]`,\n        );\n        const genericTable = new GenericTable(\n          $genericTable,\n          JSON.parse(settings.getAttribute('data-module-settings')),\n        );\n        genericTable.init();\n      });\n    }\n\n    // SVG + Radial menu\n    const $svgs = document.querySelectorAll('[data-svg-target]');\n    if ($svgs.length > 0) {\n      // radial menu\n      const $radialMenu = document.querySelector('[data-radial-menu]');\n      if ($radialMenu) {\n        const radialMenu = new SVGRadialMenu($radialMenu, $svgs);\n      }\n\n      // svgs\n      for (let i = 0; i < $svgs.length; i += 1) {\n        const svg = new SVG($svgs[i]);\n      }\n    }\n\n    // Sortable\n    const $sortables = document.querySelectorAll('[data-sortable-target]');\n    if ($sortables.length > 0) {\n      for (let i = 0; i < $sortables.length; i += 1) {\n        const sortable = new Sortable($sortables[i]);\n      }\n    }\n\n    // Keywords selection\n    const $keywords = document.querySelectorAll('[data-keywords]');\n    if ($keywords.length > 0) {\n      Array.from($keywords).forEach(($keyword) => {\n        const settings = $keyword.hasAttribute('data-module-settings')\n          ? $keyword.getAttribute('data-module-settings')\n          : {};\n        const keywords = new Keywords($keyword, JSON.parse(settings));\n        keywords.init();\n      });\n    }\n\n    // Editor tags placeholders\n    const $editorTagsPlaceholders = document.querySelectorAll(\n      '.editor-tags-placeholder',\n    );\n    if ($editorTagsPlaceholders.length > 0) {\n      Array.from($editorTagsPlaceholders).forEach((item) => {\n        const editorTagsPlaceholder = new EditorTagsPlaceholder(item);\n        editorTagsPlaceholder.init();\n      });\n    }\n  }\n};\n\nexport default windowLoadComponents;\n"],"names":["Component","$element","target","$slide","this","closest","$buttonFeedback","querySelector","$buttonFeedbackText","showFeedback","bind","classList","contains","remove","MagnifyingGlass","document","$canvas","ctx","_this","getContext","_onStart","_onMove","_onEnd","_update","_onResize","zoomGlassSize","targetBCR","zoomed","targetZoomed","x","y","trackingTouch","_addEventListeners","_initCanvas","window","requestAnimationFrame","width","height","dPR","devicePixelRation","style","scale","getBoundingClientRect","event","preventDefault","pageX","touches","pageY","TAU","Math","PI","radius","ratioX","max","min","left","ratioY","top","scaledTargetWidth","scaledTargetHeight","platform","os","family","indexOf","name","shadowColor","shadowBlur","shadowOffsetY","clearRect","fillStyle","beginPath","arc","closePath","fill","save","clip","drawImage","restore","transform","addEventListener","__createNewCustomEvent","options","data","properties","Object","assign","bubbles","CustomEvent","detail","__dispatchEvent","type","payload","dispatchEvent","__isObject","item","_typeof","Array","isArray","__insertBefore","newNode","referenceNode","parentNode","insertBefore","__remove","el","removeChild","__getHTML","node","tagName","outerHTML","wrapper","createElement","appendChild","cloneNode","innerHTML","__localPosition","container","pos","d3","mouse","format","__positionTranslated","curTransform","WebKitCSSMatrix","getComputedStyle","webkitTransform","body","pageYOffset","scrollTop","pageXOffset","scrollLeft","offsetLeft","m41","offsetTop","m42","__position","elAttibutes","__toggleClass","element","cls","__hasClass","__removeClass","__addClass","className","elements","classes","_elements","_classes","querySelectorAll","split","i","length","add","j","console","log","replace","RegExp","PhotoDetail","zoomIntensity","targetContainer","parentElement","_onClick","_getImageDimensions","clientX","clientY","positionY","positionX","mediaEvents","playchange","timechange","canplaystart","stopPlayingVideoPlayers","$players","forEach","$player","$media","paused","pause","setAttribute","getSecondsMinutesFormat","seconds","duration","floor","minutes","toString","slice","AudioPlayer","$item","$audio","$playButton","$timeLeft","getAttribute","from","play","stopPropagation","innerText","currentTime","Sortable","items","droppables","placeholder","direction","before","after","x0","y0","x1","y1","dragged","clone","posRel","rect","size","siblings","prev","next","hasAttribute","offsetWidth","offsetHeight","_addPlaceholder","_onOver","right","_onDrop","bottom","_removePlaceholder","_getReference","_addEventListenerToItem","addEventListeners","minHeight","src","img","nextElementSibling","previousElementSibling","SVGDragNDrop","select","raise","classed","diff","attr","toFixed","SVGDraw","$svg","callback","sourceEvent","nodeName","line","curve","curveLinear","d","subject","id","active","append","datum","on","dx","dy","push","$thisPath","svg","task","contextMenu","pathEventsManager","d3svg","localPosition","circleEventsManager","elementPosition","selection","selectAll","nodes","call","drag","start","oldXCoordinate","oldYCoordinate","taskType","end","SVG","removeCloneConnectionManager","SVGText","maxLength","minLength","svgID","svgGroup","$radialMenu","hash","orientation","foreignObject","textarea","focus","textEventsManager","$node","isCreated","firstWrite","oldText","value","childNodes","updateTextareaHeight","$target","wrongBool","isWrong","removeItem","scrollHeight","toDuplicate","init","svgSpecificActions","_initPath","_initCircle","_setSize","_initComicBubbles","_getEvents","viewbox","maxWidth","warning","_this2","p","renderPath","createCircle","_this3","comicBubbles","oldID","idParts","join","svgDuplicateSources","e","includes","$templateNode","localNodeID","_this4","_generateNewID","$localNode","_clonePath","color","_cloneTextField","_cloneCircle","selected","isRadial","$parent","allActiveSvgs","deactivate","pop","SVGRadialMenu","$svgs","$radialMenuItems","$colorItems","$textItems","$createTextItem","$removeItem","$tooltip","initialSetUp","menuRadius","parseInt","getPropertyValue","itemRadius","setUpRadialMenuItems","addEventListenersToRadialMenu","activate","deselectItem","filterMenuButtons","showRadialMenu","addEventListenersToRadialMenuItem","$items","_itemsLength","_menuRadius","_itemRadius","_menuOffset","_centerOffset","index","angle","sin","cos","onMouseLeave","hideRadialMenu","action","createText","changeColor","currentTarget","display","$activeSVG","globalPosition","__globalPosition","$activeRadialMenuItem","positionRadialMenuItems","setTimeout","_this5","mouseLeaveDelay","_this6","clearTimeout","clickedItem","$colorItem","$textItem","selectItem","$selected","Observer","_events","events","fn","_split","filter","current_fn","args","actionTypes","editor","ADD_TAG","DELETE_TAG","UPDATE_TAG","CHANGE","keywords","testQuiz","ADD_ANSWER","REMOVE_ANSWER","UPDATE_ANSWER","textOptions","ADD","DELETE","UPDATE","store","_data","tags","tagId","tagExists","tagContainer","_checkTagExists","Error","undefined","userSelectedNodeItems","trigger","splice","editorId","opts","key","selectedTags","objectExists","_checkExists","selectedObjs","Editor","$editor","settings","JSON","parse","__mergeDeep","source","output","keys","defaults","models","passive","interactive","withMenu","totalTagId","hasMenu","lastSelectionSettings","isCollapsed","savedSelectionRange","selectionAttributes","dummyRangeElement","selectionMouseDown","selectionDirection","hasEditableContentChanged","lastPressedKey","hasToolbar","toolbar","originalContent","currentContent","_handlers","wrapLastDeletesTimeoutClass","wrapLastDeletesTimeoutFunction","wrapLastAdditionsTimeoutClass","wrapLastAdditionsTimeoutFunction","isWrappingLastText","isWriting","$groupDeleted","cache","_hasMenu","$menu","getElementsByClassName","menuClass","$menuActions","$menuClose","error","_hasToolbar","canvasClass","funkce","html","text","_generateNewTagGroupClass","$btnReset","registerEditableHandlers","initPreHighlightedTextOptions","handlerFocus","keycode","getSelection","keyCode","which","keyName","rangeCount","range","getRangeAt","cloneRange","setStart","startContainer","startOffset","collapse","setEnd","endContainer","endOffset","addedFragmentString","cloneContents","textContent","trim","dummyElementInner","surroundContents","removeAllRanges","addRange","dummyElement","contentEditable","newGeneratedId","_generateNewTagId","$btnClose","closeBtnClass","$nodeElement","_removeNodeKeepTextContent","getElementById","wrapLastDeletesTimeout","textToAddElement","insertNode","setStartAfter","groupDeletedId","$groupInnerDeleted","$groupInnerAdded","$groupAdded","registerMenuHandler","confirm","len","handlerMenuActions","handlerMenuClose","$textOptionsElements","$textOption","selectedClass","storeGlobal","tag","_setmenuDimensions","leftDimensions","topDimensions","menuDimensions","translated","clonedElement","visibility","nextSibling","elDimensions","elPosition","__getRealDimensions","parentTranslatedPosition","parentDimensions","isOverflowAt","menuMargin","toggleMenu","$el","command","commandName","setSelection","anchorOffset","focusOffset","_setSelectionPosition","selectionPosition","selectionDimension","$domEl","extractContents","newTagId","addTag","createTextNode","parentEl","$elClose","toggleClass","clickHandler","$closeBtn","removeEventListener","commentRef","deleteTag","nodePosition","commentMargin","commentTemplate","div","commentDiv","nodeRef","commentNewTextarea","commentDivButtonSubmit","getElementsByTagName","commentCommentsContainer","calculatedCommentPosition","_calculateCommentPosition","commentItem","_createCommentForNode","closeBtn","_createCloseBtnForElement","comments","_addCommentHandlerForElement","commentsClass","_extractAndSaveContents","showCommentsOnInit","click","resetBtnClass","nodeSelectedClass","enable","animatedClass","deselectedClass","menu","AnalyticalTable","isAdvanced","rowIndex","tableResult","tableResultBody","tableSelectedItems","tableSelectedItemsBody","activeDragged","_getRowHTML","_getAdvancedRowHTML","_registerStoreHandlers","_registerHandlers","addedTagContainer","casti","sloupce","insertAdjacentHTML","letSecondCaseRunIfSame","_handlerDraggable","prototype","_handlerDrop","dataTransfer","setData","dropEffect","opacity","localName","background","nodeHTML","keywordsId","newItems","newItemsHTML","itemsHTML","Keywords","$controls","$itemsContainer","itemsContainerClassName","inherit","isInherited","itemClassName","_getHTMLFromItems","change","_getItemsFromHTML","_getItemsHTML","onInit","_regenerateItemsContainerFromInherited","_changeSizeOfKeywordItem","skala","maxLevel","setNewLevelValue","$keyword","number","feedback","oldValue","newValue","abs","$control","tempContent","temp","renameItemsIds","_eventHandler","_getItemFromDOMElement","itemsClassName","itemsArray","_getDOMElementFromItem","newDiv","contentHTML","oldId","newId","expString","EditorTagsPlaceholder","commandNames","itemSubscribeAttributeClassName","getTagsBy","content","TestQuiz","$questions","itemClass","answersCorrect","colors","questions","zpetnaVazba","map","barva","$question","questionIndex","answered","answerCorrect","$answers","optionClass","$answer","answerIndex","$answerCurrent","$answersItem","feedbackActual","find","podminka","question","GenericTable","$tableResultBody","dataSettings","tasksToComplete","tasksCompleted","tasks","subscribe","$allRows","$newSelects","$select","taskNumber","$row","vyraz","Fullscreen","$fullscreen","$fullscreenImage","image","innerWidth","innerHeight","ratio","onload","naturalWidth","naturalHeight","FullscreenToggle","toggle","UserText","$userTexts","lengthExpected","avg","sendFeedback","valueLength","$userText","AudioPlayerNormal","$loadWave","$leftTime","$audioDuration","wavesurfer","WaveSurfer","create","waveColor","progressColor","responsive","barWidth","load","dataset","initWave","getDuration","addListenerAfterReady","time","playPause","$nextSlides","$nextSlide","AudioPlayerSimple","$duration","FakeMap","$buttons","$maps","lastActiveIndex","addEventListenerToButtons","$button","switchMap","VideoPlayer","prefix","lang","interval","$document","ownerDocument","$play","$playSymbol","$pauseSymbol","$time","$timeMeter","$timeRange","$currentTimeText","$currentTime","durationTime","$durationTime","timeToAural","$enterFullscreenSymbol","$leaveFullscreenSymbol","_fullscreenchange","_requestFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","onCanPlayStart","onLoadStart","onLoadedData","onPlayChange","onTimeChange","onPlayClick","onTimeKeydown","onTimeClick","onFullscreenClick","onFullscreenChange","onDrag","percentage","clearInterval","setInterval","currentTimePercentage","currentTimeCode","nodeValue","nCanPlayStart","autoplay","isFullscreen","_fullscreenElement","leaveFullscreen","enterFullscreen","pointerType","_exitFullscreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitExitFullscreen","webkitEnterFullscreen","shiftKey","offset","fullscreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","webkitCancelFullScreen","msExitFullscreen","innerTarget","listener","hasPointerEvent","onpointerup","hasTouchEvent","ontouchstart","pointerDown","pointerMove","pointerUp","axisProp","onpointermove","position","defaultView","langMinutes","langSeconds","$videoPlayers","$videoPlayer","$audioPlayerNormals","$audioPlayerNormal","$audioPlayerSimples","$audioPlayerSimple","$fullscreenToggles","$fullscreenToggle","$magnifyingGlass","$photoDetails","$fakeMaps","HISTORYLAB","done","$editors","$testQuizs","$testQuiz","$analyticalTables","$analyticalTable","$genericTables","$genericTable","$sortables","$keywords","$editorTagsPlaceholders"],"mappings":"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"}