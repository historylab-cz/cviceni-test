!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(){function e(a){t(this,e),this.target=a,this.$slide=this.target.closest(".slide"),this.lang=document.documentElement.getAttribute("lang"),this.$slide&&(this.$buttonFeedback=this.$slide.querySelector("[data-feedback-button]"),this.$buttonFeedbackText=this.$buttonFeedback.querySelector("span")),this.showFeedback=this.showFeedback.bind(this)}return n(e,[{key:"showFeedback",value:function(){this.$buttonFeedback&&this.$buttonFeedback.classList.contains("button-hidden")&&this.$buttonFeedback.classList.remove("button-hidden")}},{key:"hideFeedback",value:function(){this.$buttonFeedback.classList.add("button-hidden")}}]),e}(),g=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$element=document.querySelector("[data-lupa]"),n.$canvas=document.querySelector("[data-lupa-canvas]"),n.ctx=n.$canvas.getContext("2d"),n._onStart=n._onStart.bind(l(n)),n._onMove=n._onMove.bind(l(n)),n._onEnd=n._onEnd.bind(l(n)),n._update=n._update.bind(l(n)),n._onResize=n._onResize.bind(l(n)),n.zoomGlassSize=230,n.targetBCR=null,n.zoomed=0,n.targetZoomed=0,n.x=0,n.y=0,n.trackingTouch=!1,n._addEventListeners(),n._initCanvas(),n._onResize(),window.requestAnimationFrame(n._update),n}return r(a,e),n(a,[{key:"_initCanvas",value:function(){var e=this.zoomGlassSize,t=this.zoomGlassSize,a=window.devicePixelRation||1;this.$canvas.width=e*a,this.$canvas.height=t*a,this.$canvas.style.width="".concat(e,"px"),this.$canvas.style.height="".concat(t,"px"),this.ctx.scale(a,a)}},{key:"_onResize",value:function(){this.targetBCR=this.target.getBoundingClientRect()}},{key:"_onStart",value:function(e){e.target===this.target&&(e.preventDefault(),this.x=e.pageX||e.touches[0].pageX,this.y=e.pageY||e.touches[0].pageY,this.trackingTouch=!0,this.targetZoomed=1,this.zoomed=0,window.requestAnimationFrame(this._update))}},{key:"_onMove",value:function(e){this.trackingTouch&&(this.x=e.pageX||e.touches[0].pageX,this.y=e.pageY||e.touches[0].pageY)}},{key:"_onEnd",value:function(){this.targetZoomed&&this.showFeedback(),this.targetZoomed=0,this.trackingTouch=!1}},{key:"_update",value:function(){var e=2*Math.PI,t=100*this.zoomed;this.targetBCR=this.target.getBoundingClientRect();var a=Math.max(0,Math.min(1,(this.x-this.targetBCR.left)/this.targetBCR.width)),n=Math.max(0,Math.min(1,(this.y-this.targetBCR.top)/this.targetBCR.height)),i=2.5*this.targetBCR.width,s=2.5*this.targetBCR.height;platform.os.family.indexOf("Windows")>-1&&platform.name.indexOf("Firefox")>-1||(this.ctx.shadowColor="rgba(0,0,0,0.4)",this.ctx.shadowBlur=12,this.ctx.shadowOffsetY=8),this.ctx.clearRect(0,0,this.zoomGlassSize,this.zoomGlassSize),this.ctx.fillStyle="#fff",this.ctx.beginPath(),this.ctx.arc(this.zoomGlassSize/2,this.zoomGlassSize-10-t,t,0,e),this.ctx.closePath(),this.ctx.fill(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.zoomGlassSize/2,this.zoomGlassSize-10-(t+1),1.03*t,0,e),this.ctx.clip(),this.ctx.closePath(),this.ctx.drawImage(this.target,-a*i+this.zoomGlassSize/2,-n*s+this.zoomGlassSize/2,i,s),this.ctx.restore(),this.$element.style.transform="translate(".concat(this.x,"px, ").concat(this.y,"px)"),this.zoomed+=(this.targetZoomed-this.zoomed)/4,this.zoomed>.001?window.requestAnimationFrame(this._update):this.zoomed=0}},{key:"_addEventListeners",value:function(){document.addEventListener("touchstart",this._onStart),document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onEnd),document.addEventListener("mousedown",this._onStart),document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onEnd),window.addEventListener("resize",this._onResize)}}]),a}(h);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object.assign({bubbles:!0},t);return new CustomEvent(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({detail:a},n))}function v(e,t,a,n){var i=m(t,a,n);e.dispatchEvent(i)}function f(t){return t&&"object"===e(t)&&!Array.isArray(t)}function p(e,t){t.parentNode.insertBefore(e,t)}function y(e){e.parentNode.removeChild(e)}function b(e){if(e&&e.tagName){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}}function k(e){var t=d3.mouse(e);return{x:d3.format(".0f")(t[0]),y:d3.format(".0f")(t[1])}}function E(e){var t=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform),a=document.body;window.pageYOffset||a.scrollTop,window.pageXOffset||a.scrollLeft;return{left:e.offsetLeft+t.m41,top:e.offsetTop+t.m42}}function w(e){var t=e.getBoundingClientRect(),a=document.body,n=window.pageYOffset||a.scrollTop,i=window.pageXOffset||a.scrollLeft;return{left:t.left+i,top:t.top+n,height:t.height,width:t.width}}function C(e,t){x(e,t)?$(e,t):A(e,t)}function x(e,t){return!(!e||!t)&&(e.classList?e.classList.contains(t):"".concat(e.className," ").indexOf("".concat(t," "))>-1)}function A(e,t){var a=e,n=t;if(a&&n)if("string"==typeof a?a=document.querySelectorAll(a):a.tagName&&(a=[a]),"string"==typeof n){n=n.split(" ");for(var i=0;i<a.length;i+=1){var s;if(a[i].classList)(s=a[i].classList).add.apply(s,u(n));else if(!x.apply(void 0,[a[i]].concat(u(n))))for(var r=0;r<n.length;r+=1)a[i].classes+=" ".concat(n[r])}}else console.log("Class argument must be string with spaces in between class names.")}function $(e,t){var a=e,n=t;if(a&&n)if("string"==typeof a?a=document.querySelectorAll(a):a.tagName&&(a=[a]),"string"==typeof n){n=n.split(" ");for(var i=0;i<a.length;i+=1){var s;if(a[i].classList)(s=a[i].classList).remove.apply(s,u(n));else for(var r=0;r<n.length;r+=1)a[i].className=a[i].className.replace(new RegExp("\\b".concat(t[r],"\\b"),"g"),"")}}else console.log("Class argument must be string with spaces in between class names.")}var T={playchange:m("playchange"),timechange:m("timechange"),canplaystart:m("canplaystart")};function _(e){e.forEach((function(e){var t=e.querySelector("audio")||e.querySelector("video");t&&!t.paused&&(t.pause(),e.querySelector("[data-player-control]").setAttribute("data-player-control","paused"))}))}function S(e){var t={seconds:Math.floor(e),minutes:Math.floor(e/60)};return t.seconds=(t.seconds-60*t.minutes).toString(10),"".concat(t.minutes,":").concat("0".concat(t.seconds).slice(-2))}var L=function(e){function a(e){return t(this,a),d(this,o(a).call(this,e))}return r(a,e),n(a,null,[{key:"addEventListeners",value:function(e,t){var a=document.querySelectorAll("[data-player-audio]"),n=e.querySelector("audio"),i=e.querySelector("[data-player-control]"),s=e.querySelector("[data-audio-time-left]");i.addEventListener("click",(function(e){"paused"===i.getAttribute("data-player-control")?(_(Array.from(a)),n.play(),i.setAttribute("data-player-control","playing")):(n.pause(),i.setAttribute("data-player-control","paused")),t(),e.stopPropagation()}),!1),i.addEventListener("mousedown",(function(e){e.stopPropagation()}),!1),n.addEventListener("timeupdate",(function(){s.innerText=S(n.currentTime)})),n.addEventListener("ended",(function(){i.setAttribute("data-player-control","paused")}))}}]),a}(h),N=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$settings=document.querySelector('[data-sortable-id-reference="'.concat(n.target.id,'"]')),n.feedback=JSON.parse(n.$settings.getAttribute("data-module-zpetnavazba")),n.container=n.target,n.$items=Array.from(n.target.querySelectorAll("[data-sortable-drag]")),n.$droppables=n.target.querySelectorAll("[data-sortable-drop]"),n.$placeholder=function(){return document.querySelector("#sortable-placeholder")},n.$players=Array.from(n.container.querySelectorAll("[data-player-audio]")),n.direction=n.target.getAttribute("data-sortable-target"),n.trackingTouch=!1,n.before=!1,n.after=!1,n.evaluation=void 0,n.mouse={x:function(e){return e.clientX||e.touches[0].clientX},y:function(e){return e.clientY||e.touches[0].clientY},x0:0,y0:0,x1:0,y1:0},n.dragged={el:null,clone:null,posRel:{},rect:function(){return n.dragged.el.getBoundingClientRect()},size:{}},n.siblings={prev:null,next:null},n._onStart=n._onStart.bind(l(n)),n._onMove=n._onMove.bind(l(n)),n._onEnd=n._onEnd.bind(l(n)),n._update=n._update.bind(l(n)),n._addEventListeners(),n.cache={answersCorrect:0,colors:[]},n.feedback&&(n.cache.colors=n.feedback.map((function(e){return e.barva}))),n}return r(a,e),n(a,[{key:"_onStart",value:function(e){e.target.hasAttribute("data-sortable-drag")&&(this.$players.length>0&&_(this.$players),this.trackingTouch=!0,this.dragged.el=e.target,this.dragged.clone=this.dragged.el.cloneNode(!0),this.dragged.posRel.top=this.dragged.el.offsetTop,this.dragged.posRel.left=this.dragged.el.offsetLeft,this.dragged.size.width=this.dragged.el.offsetWidth,this.dragged.size.height=this.dragged.el.offsetHeight,this.dragged.el.style.top="".concat(this.dragged.posRel.top,"px"),this.dragged.el.style.left="".concat(this.dragged.posRel.left,"px"),this.dragged.el.style.width="".concat(this.dragged.size.width,"px"),this.dragged.el.style.height="".concat(this.dragged.size.height,"px"),this.dragged.el.classList.add("is-dragged"),this.container.classList.add("is-dragged"),this._addPlaceholder(this.dragged.el),this._onOver(),this.mouse.x0=this.mouse.x(e),this.mouse.y0=this.mouse.y(e),e.preventDefault())}},{key:"_onMove",value:function(e){this.trackingTouch&&(this.mouse.x1=this.mouse.x(e)-this.mouse.x0,this.mouse.y1=this.mouse.y(e)-this.mouse.y0,window.requestAnimationFrame(this._update),this._onOver())}},{key:"_onEnd",value:function(e){if(this.trackingTouch){this.trackingTouch=!1,this.container.classList.remove("is-dragged"),this.dragged.el.classList.remove("is-dragged"),this.dragged.el.style.top="",this.dragged.el.style.left="",this.dragged.el.style.width="",this.dragged.el.style.height="",this.dragged.el.style.transform="";var t=this.$placeholder().getBoundingClientRect();switch(this.direction){case"horizontal":t.left<=this.mouse.x(e)<=t.right&&this._onDrop();break;case"vertical":t.top<=this.mouse.y(e)<=t.bottom&&this._onDrop()}this._removePlaceholder(),this._dispatchEvent(),this._checkAndResolveFeedback()}}},{key:"_onOver",value:function(){if(this.before=!1,this.after=!1,this._getReference(),this.siblings.next&&this.siblings.next.hasAttribute("data-sortable-drop")){var e=this.siblings.next.getBoundingClientRect();switch(this.direction){case"horizontal":this.dragged.rect().right>e.left+e.width/1.5&&(this.after=!0,this._addPlaceholder(this.siblings.next));break;case"vertical":this.dragged.rect().bottom>e.top+e.height/1.5&&(this.after=!0,this._addPlaceholder(this.siblings.next))}}if(this.siblings.prev&&this.siblings.prev.hasAttribute("data-sortable-drop")){var t=this.siblings.prev.getBoundingClientRect();switch(this.direction){case"horizontal":this.dragged.rect().left<t.right-t.width/1.5&&(this.before=!0,this._addPlaceholder(this.siblings.prev));break;case"vertical":this.dragged.rect().top<t.bottom-t.height/1.5&&(this.before=!0,this._addPlaceholder(this.siblings.prev))}}}},{key:"_onDrop",value:function(){var e=this.$placeholder();this._addEventListenerToItem(this.dragged.clone),this.dragged.clone.querySelector("[data-player-audio]")&&L.addEventListeners(this.dragged.clone,this.showFeedback),this.container.insertBefore(this.dragged.clone,e),this.dragged.el.parentElement.removeChild(this.dragged.el)}},{key:"_update",value:function(){this.dragged.el.style.transform="translate3d(".concat(this.mouse.x1,"px, ").concat(this.mouse.y1,"px, 0) rotate(5deg)")}},{key:"_addPlaceholder",value:function(e){this._removePlaceholder();var t=document.createElement("div");if(t.classList.add("sortable-item","sortable-placeholder"),t.setAttribute("id","sortable-placeholder"),t.style.minHeight="".concat(this.dragged.size.height,"px"),this.dragged.el.querySelector("img")){var a=this.dragged.el.querySelector("img").getAttribute("src"),n=document.createElement("img");n.setAttribute("src",a),t.appendChild(n)}this.after?this.container.insertBefore(t,e.nextElementSibling):(this.before,this.container.insertBefore(t,e))}},{key:"_removePlaceholder",value:function(){var e=this.$placeholder();e&&e.parentElement.removeChild(e)}},{key:"_getReference",value:function(){var e=this.$placeholder();this.siblings.prev=e.previousElementSibling===this.dragged.el?this.dragged.el.previousElementSibling:e.previousElementSibling,this.siblings.next=e.nextElementSibling===this.dragged.el?this.dragged.el.nextElementSibling:e.nextElementSibling}},{key:"_addEventListenerToItem",value:function(e){e.addEventListener("touchstart",this._onStart,!1),e.addEventListener("mousedown",this._onStart,!1)}},{key:"_addEventListeners",value:function(){var e=this;document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onEnd),document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onEnd),this.$items.forEach((function(t){e._addEventListenerToItem(t)}))}},{key:"_checkAndResolveFeedback",value:function(){var e=this;if(this.feedback){var t;this.cache.answersCorrect=0,this.target.querySelectorAll("[data-sortable-drag]").forEach((function(t,a){var n=t.getAttribute("data-sortable-spravnaodpoved");parseInt(n,10)===a+1&&(e.cache.answersCorrect+=1)}));var a=this.feedback.find((function(t){return t.podminka.includes(e.cache.answersCorrect)}));(t=this.$buttonFeedback.classList).remove.apply(t,u(this.cache.colors)),this.$buttonFeedback.classList.add(a.barva),this.$buttonFeedbackText.innerText=a.text,this.evaluation=a.splneno}this.showFeedback()}},{key:"_dispatchEvent",value:function(){var e=Array.from(this.target.querySelectorAll("[data-sortable-drag]")).map((function(e){return{id:e.id}}));v(this.target,"sortable.change",{},{id:this.target.id,evaluation:this.evaluation,items:e})}}]),a}(h),M=function(){function e(){t(this,e)}return n(e,null,[{key:"start",value:function(e){d3.select(e).raise().classed("is-dragged",!0)}},{key:"dragged",value:function(e,t){d3.select(e).attr("x",(d3.event.x-t.x).toFixed()).attr("y",(d3.event.y-t.y).toFixed())}},{key:"end",value:function(e,t,a){d3.select(e).attr("x",(d3.event.x-a.x).toFixed()).attr("y",(d3.event.y-a.y).toFixed()).classed("is-dragged",!1)}}]),e}(),I=function(){function e(){t(this,e)}return n(e,null,[{key:"renderPath",value:function(t,a){if("image"===d3.event.sourceEvent.target.nodeName){var n=d3.line().curve(d3.curveLinear),i=d3.format(".0f"),s=d3.event.subject,r=i(d3.event.x),o=i(d3.event.y),c="".concat(t.id,"_path-").concat(r,"-").concat(o),l=d3.select("#".concat(t.id," .svg-view")).append("svg:path").attr("data-svg-path","").attr("class","svg-path").attr("id",c).datum(s);d3.event.on("drag",(function(){var e=i(d3.event.x),t=i(d3.event.y),a=e-r,c=t-o;a*a+c*c>300?s.push([r=e,o=t]):s[s.length-1]=[e,t],l.attr("d",n)})).on("end",(function(){var e=d3.select("#".concat(c));e&&(e.attr("d")?e.attr("d").length<40?e.remove():v(document,"svg.change",{},{svg:{id:t.id,task:"create",node:e.node(),nodeName:e.node().nodeName,contextMenu:!1}}):e.attr("d")||e.remove()),a()})),e.pathEventsManager(t,d3.select("#".concat(c)).node())}}},{key:"createCircle",value:function(t){var a=d3.select("#".concat(t.id," .svg-view")),n=k(t),i="".concat(t.id,"_circle-").concat(n.x,"-").concat(n.y),s=(a.append("svg:foreignObject").attr("data-svg-circle","").attr("id",i).attr("x",n.x).attr("y",n.y).attr("width",1).attr("height",1).append("xhtml:div").attr("class","svg-circle blue"),document.querySelector("#".concat(i)));e.circleEventsManager(t,s),v(document,"svg.change",{},{svg:{id:t.id,task:"create",node:s,nodeName:s.nodeName,contextMenu:!1}})}},{key:"pathEventsManager",value:function(e,t){d3.select("#".concat(t.id)).on("click",(function(){v(document,"svg.change",{},{svg:{id:e.id,task:"remove",node:d3.event.target,nodeName:d3.event.target.nodeName,contextMenu:!1}}),d3.select("#".concat(t.id)).remove(),d3.event.preventDefault()}),!1)}},{key:"circleEventsManager",value:function(e,t){var a=document.querySelector("#".concat(e.id," .svg-view")),n=[t.getAttribute("x"),t.getAttribute("y")],i={},s=d3.selectAll("#".concat(t.id," > div"));d3.select(s.nodes()[0]).on("click",(function(){v(document,"svg.change",{},{svg:{id:e.id,task:"remove",node:t,nodeName:t.nodeName,contextMenu:!1}}),d3.select(d3.event.target.parentNode).remove()})).call(d3.drag().container(a).subject(t).on("start",(function(){i={x:d3.event.x-n[0],y:d3.event.y-n[1]},M.start(t)})).on("drag",(function(){M.dragged(t,i)})).on("end",(function(){var a=n[0],s=n[1],r="move";M.end(t,"circle",i),n=[t.getAttribute("x"),t.getAttribute("y")],F.removeCloneConnectionManager(t)&&(r="create"),n[0]===a&&n[1]===s||v(document,"svg.change",{},{svg:{id:e.id,task:r,node:t,nodeName:t.nodeName,contextMenu:!1}})})))}}]),e}(),D=function(){function e(){t(this,e)}return n(e,null,[{key:"createText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:333,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=document.querySelector('[data-svg-active="true"]'),i=n.id,s=d3.select(n).select(".svg-view"),r=document.querySelector("[data-radial-menu]"),o={x:r.getAttribute("data-local-x"),y:r.getAttribute("data-local-y")},c="".concat(i,"_svg-text-").concat(o.x,"-").concat(o.y),l="#".concat(c),d={x:s.attr("width")-o.x>320?"right":"left",y:s.attr("height")-o.y>60?"bottom":"top"},u=s.append("svg:foreignObject").attr("class","svg-text orientation-".concat(d.x," orientation-").concat(d.y)).attr("data-svg-text","").attr("x",o.x).attr("y",o.y).attr("width",1).attr("height",1);u.append("xhtml:div").attr("class","svg-circle svg-circle-text");var h=u.append("xhtml:textarea").attr("maxlength",t).attr("tabindex","-1").attr("id",c).attr("class","svg-textarea").attr("data-save","").attr("data-svg-textarea-target",i);n.querySelector("".concat(l)).focus(),e.textEventsManager(n,h.node(),!0,a)}},{key:"textEventsManager",value:function(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=t.querySelector(".svg-view"),r="#".concat(a.id),o=n,c=a.value,l=t.querySelector(r).parentElement,d=[l.getAttribute("x"),l.getAttribute("y")],u={};d3.select("".concat(r)).call(d3.drag().container(s).subject(l).on("start",(function(){u={x:d3.event.x-d[0],y:d3.event.y-d[1]},M.start(l)})).on("drag",(function(){M.dragged(l,u)})).on("end",(function(){var e=d[0],a=d[1],n="move";M.end(l,"text",u),d=[l.getAttribute("x"),l.getAttribute("y")],o||d[0]===e&&d[1]===a||(F.removeCloneConnectionManager(l.childNodes[1])&&(n="create"),v(document,"svg.change",{},{svg:{id:t.id,task:n,node:l.childNodes[1],nodeName:l.childNodes[1].nodeName,contextMenu:!1}}))}))).on("keyup",(function(){e.updateTextareaHeight(d3.event.target)})).on("blur",(function(){var e,a=d3.event.target,n=a.value,s=!1;0!==n.length?(n.length<i?(A(a,"is-wrong"),s=!0):n.length>=i&&x(a,"is-wrong")&&($(a,"is-wrong"),s=!1),c!==n&&(o?(e="create",o=!1):e="change",c=n,F.removeCloneConnectionManager(a)&&(e="create"),v(document,"svg.change",{},{svg:{id:t.id,task:e,node:a,nodeName:a.nodeName,isWrong:s,contextMenu:!1}})),c=n):F.removeItem(!1,r)})).on("focus",(function(){d3.select(l).raise()}))}},{key:"updateTextareaHeight",value:function(e){e.style.height="1px",e.style.height="".concat(22+e.scrollHeight,"px")}},{key:"comicBubblesEventsManager",value:function(t,a){var n=!0,i=a.value;d3.select(a).on("keyup",(function(){e.updateTextareaHeight(d3.event.target)})).on("blur",(function(){var e,a=d3.event.target,s=a.value;i!==s&&(n?(e="create",n=!1):(e="change",0===s.length&&(n=!0)),i=s,F.removeCloneConnectionManager(a)&&(e="create"),v(document,"svg.change",{},{svg:{id:t.id,task:e,node:a,nodeName:a.nodeName,isBubble:!0,contextMenu:!1}})),i=s}))}}]),e}(),F=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e)))._setSize(),HISTORYLAB.import.done||n.init(),n}return r(a,e),n(a,[{key:"init",value:function(){this.toDuplicate=this.target.getAttribute("data-duplicate-svg");for(var e=this.target.getAttribute("data-svg-target").split(" "),t=0;t<e.length;t+=1)"kresleni"===e[t]?this._initPath(this.showFeedback):"znacky"===e[t]&&this._initCircle(this.showFeedback);this._initComicBubbles(),this._getEvents()}},{key:"_setSize",value:function(){var e=this.target.getAttribute("viewBox").split(" "),t=this.target.getBoundingClientRect().height,a=t/e[3];this.target.style.maxWidth=a?"".concat(e[2]*a,"px"):"",t||console.warn("Wrong `max-width` SVG calculation;")}},{key:"_initPath",value:function(e){var t=this;d3.select(this.target).call(d3.drag().container((function(){return t.target})).subject((function(){var e=[d3.event.x.toFixed(),d3.event.y.toFixed()];return[e,e]})).on("start",(function(){I.renderPath(t.target,e)})))}},{key:"_initCircle",value:function(e){var t=this;d3.select(this.target).on("click",(function(){"image"===d3.event.target.nodeName&&(I.createCircle(t.target),e(),d3.event.preventDefault())}),!1)}},{key:"_initComicBubbles",value:function(){var e=this,t=Array.from(this.target.querySelectorAll(".svg-komiks .svg-textarea"));t&&t.forEach((function(t){D.comicBubblesEventsManager(e.target,t)}))}},{key:"_generateNewID",value:function(e){var t=e.split("_");return t.length<2?(console.log("Svg ID error!",e),e):(t[t.length-1]!=="clone-".concat(t[0])&&t.push("clone-".concat(t[0])),t[0]=this.target.id,t.join("_"))}},{key:"_getEvents",value:function(){var e=this,t=this.toDuplicate?this.toDuplicate.split(" "):[];t[0]&&document.addEventListener("svg.change",(function(a){if(t.includes(a.detail.svg.id)){var n,i=a.detail.svg.node,s=a.detail.svg.nodeName,r=e._generateNewID(i.id),o=e.target.querySelector("#".concat(r));if(!o&&"create"!==a.detail.svg.task)return;if(n=a.detail.svg.task,"path"===s)switch(n){case"create":e._clonePath(i,r);break;case"color":$(o,"red blue"),A(o,a.detail.svg.color);break;case"remove":o.remove();break;default:console.log("Nondefinated path events task. :(")}else if("TEXTAREA"===s)if(a.detail.svg.isBubble)switch(n){case"create":e._cloneComicBubbles(i,r);break;case"change":0!==i.value.length?(o.value=i.value,o.style.height!==i.style.height&&(o.style.height=i.style.height)):o.parentElement.remove();break;default:console.log("Nondefinated comicBubble events task. :(")}else switch(n){case"create":e._cloneTextField(a.detail.svg.isWrong,i,r);break;case"change":o.value=i.value,a.detail.svg.isWrong?A(o,"is-wrong"):$(o,"is-wrong"),o.style.height!==i.style.height&&(o.style.height=i.style.height);break;case"color":$(o=o.parentElement.childNodes[0],"red blue"),A(o,a.detail.svg.color);break;case"move":o&&o.parentElement.remove(),e._cloneTextField(a.detail.svg.isWrong,i,r);break;case"remove":o.parentElement.remove();break;default:console.log("Nondefinated textField events task. :(")}else if("foreignObject"===s)switch(n){case"create":e._cloneCircle(i,r);break;case"color":$(o=o.childNodes[0],"red blue"),A(o,a.detail.svg.color);break;case"move":o&&o.remove(),e._cloneCircle(i,r);break;case"remove":o.remove();break;default:console.log("Nondefinated circle events task. :(")}else console.log("Nondefinated events nodeName. :(",s)}}))}},{key:"_clonePath",value:function(e,t){var a=e.cloneNode(!0);a.id=t,this.target.appendChild(a),I.pathEventsManager(this.target,a)}},{key:"_cloneTextField",value:function(e,t,a){var n=t.parentElement.cloneNode(!0);n.childNodes[1].id=a,this.target.appendChild(n),e?A(n,"is-wrong"):$(n,"is-wrong"),D.textEventsManager(this.target,n.childNodes[1],!1)}},{key:"_cloneCircle",value:function(e,t){var a=e.cloneNode(!0);a.id=t,this.target.appendChild(a),I.circleEventsManager(this.target,a)}},{key:"_cloneComicBubbles",value:function(e,t){var a=e.parentElement.cloneNode(!0);a.childNodes[1].id=t,this.target.appendChild(a),D.comicBubblesEventsManager(this.target,a.childNodes[1])}}],[{key:"selectItem",value:function(e){e.setAttribute("data-svg-selected","true")}},{key:"deselectItem",value:function(){for(var e=document.querySelectorAll('[data-svg-selected="true"]'),t=0;t<e.length;t+=1)e[t].setAttribute("data-svg-selected","false")}},{key:"removeItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'[data-svg-selected="true"]',a=document.querySelector(t),n=a.nodeName,i=a.parentElement;switch(n){case"path":case"TEXTAREA":break;case"DIV":n=(a=i.childNodes[1]?i.childNodes[1]:i).nodeName;break;default:console.log("Nondefinated node type. :(",n)}var s=a.id.split("_")[0];v(document,"svg.change",{},{svg:{id:s,task:"remove",node:a,nodeName:n,contextMenu:e}}),"foreignObject"===i.nodeName?d3.select(i).remove():d3.select(a).remove()}},{key:"deactivate",value:function(){for(var e=document.querySelectorAll('[data-svg-active="true"]'),t=0;t<e.length;t+=1)e[t].setAttribute("data-svg-active","false")}},{key:"activate",value:function(e){a.deactivate(),e.setAttribute("data-svg-active","true")}},{key:"removeCloneConnectionManager",value:function(e){var t=e.id.split("_");return!!t[t.length-1].includes("clone")&&(t.pop(),e.id=t.join("_"),!0)}}]),a}(h),R=function(){function e(a,n){t(this,e),this.$radialMenu=a,this.$radialMenuItems=this.$radialMenu.querySelectorAll("[data-radial-menu-item]"),this.$colorItems=this.$radialMenu.querySelectorAll(".radial-menu-color"),this.$textItems=this.$radialMenu.querySelectorAll(".radial-menu-text"),this.$createTextItem=this.$radialMenu.querySelector("#create-text"),this.$removeItem=this.$radialMenu.querySelector("#remove-content"),this.$tooltip=this.$radialMenu.querySelector("[data-radial-menu-tooltip]"),this.$svgs=n,this.initialSetUp=!0,this.menuRadius=parseInt(window.getComputedStyle(this.$radialMenu.querySelector(".radial-menu-wrapper"),null).getPropertyValue("width"),10)/2,this.itemRadius=parseInt(window.getComputedStyle(this.$radialMenu.querySelector(".radial-menu-item"),null).getPropertyValue("width"),10)/2,this.init()}return n(e,[{key:"init",value:function(){var e=this;this.setUpRadialMenuItems(),this.addEventListenersToRadialMenu(),Array.from(this.$svgs).forEach((function(t){d3.select(t).on("contextmenu",(function(){F.activate(t),F.deselectItem(),e.filterMenuButtons(d3.event.target),e.showRadialMenu(t,d3.event),d3.event.preventDefault()}))})),this.initialSetUp=!1}},{key:"setUpRadialMenuItems",value:function(){var e=this;Array.from(this.$radialMenuItems).forEach((function(t){e.addEventListenersToRadialMenuItem(t)}))}},{key:"positionRadialMenuItems",value:function(e){var t=e.length,a=this.menuRadius,n=this.itemRadius,i=a-n,s=.6283185307*t/2-.31415926535;Array.from(e).forEach((function(e,t){var n=Math.PI+.6283185307*t*-1+s,r=a*Math.sin(n)+i,o=a*Math.cos(n)+i;e.style.left="".concat(r.toFixed(1),"px"),e.style.top="".concat(o.toFixed(1),"px")}))}},{key:"addEventListenersToRadialMenu",value:function(){var e=this;this.onMouseLeave(),this.$radialMenu.addEventListener("click",(function(t){e.hideRadialMenu(e.$radialMenu),t.preventDefault()})),this.$radialMenu.addEventListener("contextmenu",(function(t){e.hideRadialMenu(e.$radialMenu),t.preventDefault()}))}},{key:"addEventListenersToRadialMenuItem",value:function(t){var a=this,n=t,i=n.getAttribute("data-radial-menu-item");"remove-content"===i?n.addEventListener("click",(function(){F.removeItem(!0),a.hideRadialMenu()}),!1):"create-text"===i?d3.select(n).on("click",(function(){D.createText(),a.hideRadialMenu()}),!1):"color-point-blue"===i?n.addEventListener("click",(function(){e.changeColor("blue"),a.hideRadialMenu()}),!1):"color-point-red"===i?n.addEventListener("click",(function(){e.changeColor("red"),a.hideRadialMenu()}),!1):"color-point-red"===i&&n.addEventListener("click",(function(){e.changeColor("red"),a.hideRadialMenu()}),!1),n.addEventListener("mouseenter",(function(e){a.$tooltip.innerHTML=e.currentTarget.getAttribute("data-radial-menu-item-tooltip"),a.$tooltip.style.display="block"}),!1),n.addEventListener("mouseleave",(function(){a.$tooltip.innerHTML="",a.$tooltip.style.display="none"}),!1)}},{key:"showRadialMenu",value:function(e,t){var a=e||document.querySelector('[data-svg-active="true"]'),n=function(e){return{x:e.pageX,y:e.pageY}}(t),i=k(a);this.$radialMenu.setAttribute("data-local-x",i.x),this.$radialMenu.setAttribute("data-local-y",i.y),this.$radialMenu.style.top="".concat(n.y-7,"px"),this.$radialMenu.style.left="".concat(n.x-7,"px");var s=this.$radialMenu.querySelectorAll(".is-active");this.positionRadialMenuItems(s),A(this.$radialMenu,"is-active")}},{key:"hideRadialMenu",value:function(){var e=this;$(this.$radialMenu,"is-active"),F.deactivate(),F.deselectItem(),setTimeout((function(){x(e.$radialMenu,"is-active")||Array.from(e.$radialMenuItems).forEach((function(e){$(e,"is-active")}))}),150)}},{key:"onMouseLeave",value:function(){var e,t=this;this.$radialMenu.addEventListener("mouseleave",(function(){e=setTimeout((function(){t.hideRadialMenu(t.$radialMenu)}),500)})),this.$radialMenu.addEventListener("mouseenter",(function(){clearTimeout(e)}))}},{key:"filterMenuButtons",value:function(e){(x(e,"svg-path")||"path"===e.nodeName)&&(A(this.$createTextItem,"is-active"),Array.from(this.$colorItems).forEach((function(e){A(e,"is-active")})),Array.from(this.$textItems).forEach((function(e){$(e,"is-active")}))),x(e,"svg-circle")&&(A(this.$createTextItem,"is-active"),Array.from(this.$colorItems).forEach((function(e){A(e,"is-active")})),Array.from(this.$textItems).forEach((function(e){$(e,"is-active")}))),x(e,"svg-textarea")&&($(this.$createTextItem,"is-active"),x(e,"do-not-remove")||(Array.from(this.$colorItems).forEach((function(e){$(e,"is-active")})),Array.from(this.$textItems).forEach((function(e){A(e,"is-active")})))),"image"===e.nodeName?(A(this.$createTextItem,"is-active"),$(this.$removeItem,"is-active"),Array.from(this.$colorItems).forEach((function(e){$(e,"is-active")})),Array.from(this.$textItems).forEach((function(e){$(e,"is-active")}))):(x(e,"do-not-remove")?$(this.$removeItem,"is-active"):A(this.$removeItem,"is-active"),F.selectItem(e))}}],[{key:"changeColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'[data-svg-selected="true"]',a=document.querySelector(t),n=a.nodeName,i="color";switch($(a,"red blue"),A(a,e),n){case"path":break;case"DIV":n=(a=a.parentElement.childNodes[1]?a.parentElement.childNodes[1]:a.parentElement).nodeName;break;default:console.log("Nondefinated node type. :(",n)}F.removeCloneConnectionManager(a)&&(i="create");var s=a.id.split("_")[0];v(document,"svg.change",{},{svg:{id:s,task:i,node:a,nodeName:n,contextMenu:!0,color:e}})}}]),e}(),q=function(){function e(){t(this,e),this._events=[]}return n(e,[{key:"on",value:function(e,t){var a=this;(e=this._split(e)).forEach((function(e){a._events[e]||(a._events[e]=[]),a._events[e].push(t)}))}},{key:"off",value:function(e,t){var a=this;(e=this._split(e)).forEach((function(e){a._events[e]&&(a.events[e]=a._events[e].filter((function(e){return e!==t})))}))}},{key:"trigger",value:function(e,t){var a=this;(e=this._split(e)).forEach((function(e){a._events[e]&&a._events[e].forEach((function(n){n.call(a,e,t)}))}))}},{key:"_split",value:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)}}]),e}(),O={editor:{id:"editor",ADD_TAG:"editor:ADD_TAG",DELETE_TAG:"editor:DELETE_TAG",UPDATE_TAG:"editor:UPDATE_TAG",CHANGE:"editor:CHANGE"},keywords:{id:"keywords",CHANGE:"keywords:CHANGE"},testQuiz:{id:"testQuiz",ADD_ANSWER:"testQuiz:ADD_ANSWER",REMOVE_ANSWER:"testQuiz:REMOVE_ANSWER",UPDATE_ANSWER:"testQuiz:UPDATE_ANSWER",CHANGE:"testQuiz:CHANGE"},textOptions:{id:"textOptions",ADD:"textOptions:ADD",DELETE:"textOptions:DELETE",UPDATE:"textOptions:UPDATE",CHANGE:"textOptions:CHANGE"},store:{id:"store",ADD:"ADD",DELETE:"DELETE",UPDATE:"UPDATE",CHANGE:"CHANGE"}},B=new(function(e){function a(){var e;return t(this,a),(e=d(this,o(a).call(this)))._data={},e._data.tags=[],e}return r(a,e),n(a,[{key:"_checkTagExists",value:function(e){var t=!1;return this._data.tags.forEach((function(a,n){a.id===e&&(t={item:a,index:n})})),t}},{key:"addTag",value:function(e){if(0!==this._data.tags.length&&this._checkTagExists(e.id))throw new Error("Tag already exists! Will not add it.");void 0===e.data.userSelectedNodeItems&&(e.data.userSelectedNodeItems=[]),this._data.tags.push(e),B.trigger(O.editor.CHANGE,{action:{id:O.editor.id,type:O.editor.ADD_TAG,data:{tagContainer:e}}})}},{key:"deleteTag",value:function(e){var t=this._checkTagExists(e.id);if(!1!==t)return this._data.tags.splice(t.index,1),B.trigger(O.editor.CHANGE,{action:{id:O.editor.id,type:O.editor.DELETE_TAG,data:{tagContainer:{editorId:e.editorId,id:e.id,tagName:e.tagName,data:{}}}}}),!0;throw new Error("Tag does not exist! Will not delete it.")}},{key:"getAllTags",value:function(e){return void 0!==e&&e.editorId?this._data.tags.filter((function(t){return t.editorId===e.editorId})):this._data.tags}},{key:"getTagsBy",value:function(e){return void 0!==e&&(-1!==["editorId","id","tagName"].indexOf(e.key)&&(Array.isArray(e.value)||(e.value=[e.value]),this._data.tags.filter((function(t){return t[e.key]===e.value[0]||t[e.key]===e.value[1]}))))}},{key:"getLastTag",value:function(e){if(void 0===e||!e.editorId)return this._data.tags[this._data.tags.length-1];var t=this._data.tags.filter((function(t){return t.editorId===e.editorId}));return t[t.length-1]}}]),a}(q)),z=new(function(e){function a(){var e;return t(this,a),(e=d(this,o(a).call(this)))._data=[],e}return r(a,e),n(a,[{key:"_checkExists",value:function(e){var t=!1;return this._data.forEach((function(a,n){a.id===e&&(t={item:a,index:n})})),t}},{key:"add",value:function(e){if(0!==this._data.length&&this._checkExists(e.id))throw new Error("Object already exists! Will not add it.");this._data.push(e),z.trigger(O.textOptions.id,{action:{type:O.textOptions.ADD},data:e})}},{key:"delete",value:function(e){var t=this._checkExists(e.id);if(!1!==t)return this._data.splice(t.index,1),z.trigger(O.textOptions.id,{action:{type:O.textOptions.DELETE},data:e}),!0;throw new Error("Tag does not exist! Will not delete it.")}},{key:"getAll",value:function(e){return void 0!==e&&e.editor?this._data.filter((function(t){return t.id===e.id})):this._data}},{key:"getBy",value:function(e){return void 0!==e&&-1!==["id"].indexOf(e.key)&&(Array.isArray(e.value)||(e.value=[e.value]),this._data.filter((function(t){return t[e.key]===e.value[0]||t[e.key]===e.value[1]})))}},{key:"getLast",value:function(e){if(void 0===e||!e.editor)return this._data[this._data.length-1];var t=this._data.filter((function(t){return t.id===e.id}));return t[t.length-1]}}]),a}(q)),H=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$editor=n.target,n.id=n.$editor.id,n.settings=JSON.parse(document.querySelector('[data-editor-id-reference="'.concat(n.id,'"]')).getAttribute("data-module-settings")),n.opts=function e(t,a){var n=Object.assign({},t);return f(t)&&f(a)&&Object.keys(a).forEach((function(s){f(a[s])&&s in t?n[s]=e(t[s],a[s]):Object.assign(n,i({},s,a[s]))})),n}(a.defaults,n.settings),n.models={passive:["cteni"],interactive:["predznaceny","zvyraznovani","komentáře","psani"],withMenu:["predznaceny","zvyraznovani","komentáře"]},n.totalTagId=0,n.hasMenu=!0,n.selection=null,n.lastSelectionSettings={},n.isCollapsed=null,n.savedSelectionRange=null,n.selectionAttributes=null,n.dummyRangeElement=null,n.selectionMouseDown=!1,n.selectionDirection=null,n.hasEditableContentChanged=!1,n.lastPressedKey=null,n.hasToolbar=!1,n.toolbar={},n.originalContent={},n.currentContent={},n._handlers=[],n.wrapLastDeletesTimeoutClass="",n.wrapLastDeletesTimeoutFunction=function(){},n.wrapLastAdditionsTimeoutClass="",n.wrapLastAdditionsTimeoutFunction=function(){},n.isWrappingLastText=!1,n.isWriting=!1,n.$groupDeleted=null,n.cache={body:document.body,window:window},n.init(),n}return r(a,e),n(a,[{key:"init",value:function(){if(a._hasMenu(this.opts))try{this.$menu=this.$editor.getElementsByClassName(this.opts.menuClass)[0],this.$menuActions=this.$menu.getElementsByClassName("menu")[0].getElementsByClassName("menu-item"),this.$menuClose=this.$menu.getElementsByClassName("close")[0]}catch(e){this.hasMenu=!1}else this.hasMenu=!1;a._hasToolbar(this.opts)&&(this.hasToolbar=!0),this.$canvas=this.$editor.getElementsByClassName(this.opts.canvasClass)[0],"cteni"!==this.opts.funkce&&(A(this.$menu,"hidden"),"psani"===this.opts.funkce&&(this.originalContent.html=this.$canvas.innerHTML,this.originalContent.text=this.$canvas.innerText,this.currentContent.html=this.$canvas.innerHTML,this.currentContent.text=this.$canvas.innerText,this.wrapLastDeletesTimeoutClass=this._generateNewTagGroupClass(),this.wrapLastAdditionsTimeoutClass=this._generateNewTagGroupClass()),this.hasToolbar&&(this.toolbar.$element=this.$editor.getElementsByClassName("editor-toolbar")[0],this.toolbar.$btnReset=this.toolbar.$element.getElementsByClassName("editor-toolbar-action-reset")[0]),this.registerEditableHandlers()),"predznaceny"===this.opts.funkce&&this.initPreHighlightedTextOptions()}},{key:"_generateNewTagId",value:function(){return this.totalTagId=this.totalTagId+1,"".concat(this.id,"-").concat(this.totalTagId)}},{key:"_generateNewTagGroupClass",value:function(){return this.totalTagId=this.totalTagId+1,"group-".concat(this.id,"-").concat(this.totalTagId)}},{key:"registerEditableHandlers",value:function(){var e=this;this.$canvas.addEventListener("mousedown",this.handlerFocus.bind(this),!1),this.$canvas.addEventListener("focusout ",this.handlerFocus.bind(this),!1),this.cache.body.addEventListener("mouseup",this.handlerFocus.bind(this),!1),"psani"===this.opts.funkce&&this.$canvas.addEventListener("keydown",(function(t){var a,n=window.getSelection(),i=t.which||t.keyCode,s=t.key;if(e.showFeedback(),"Backspace"===s||"Delete"===s){if(n.rangeCount){window.clearTimeout(e.wrapLastDeletesTimeoutFunction);var r=n.getRangeAt(0),o=r.cloneRange();if(e.lastSelectionSettings.isCollapsed)try{o.setStart(r.startContainer,r.startOffset-1)}catch(t){o.setStart(r.startContainer,r.startOffset),o.collapse(!0)}else o.setStart(r.startContainer,r.startOffset);o.setEnd(r.endContainer,r.endOffset);var c=o.cloneContents().textContent.trim();if(""!==c&&"&nbsp;"!==c||e.isWrappingLastText){var l=document.createElement("span");l.className="user-removed-text-inner ".concat(e.wrapLastDeletesTimeoutClass),o.surroundContents(l),n.removeAllRanges(),n.addRange(r),e.wrapLastDeletesTimeoutFunction=setTimeout((function(){e.isWrappingLastText=!1;var t=document.createElement("span");t.contentEditable=!1,t.className="user-removed-text";var a=e._generateNewTagId();t.id=a;var n=Array.from(document.getElementsByClassName(e.wrapLastDeletesTimeoutClass));p(t,n[0]),n.forEach((function(e,a){t.appendChild(e)}));var i=document.createElement("span");i.className=e.opts.closeBtnClass;i.addEventListener("click",function(t){var a=t.currentTarget.parentNode;e._removeNodeKeepTextContent(a),t.stopPropagation()}.bind(e)),document.getElementById(a).appendChild(i),e.wrapLastDeletesTimeout=!0,e.wrapLastDeletesTimeoutClass=e._generateNewTagGroupClass()}),700),e.isWrappingLastText=!0,t.preventDefault()}else{if(!e.isWrappingLastText)return;t.preventDefault()}}}else if((a=i)>47&&a<58||32==a||13==a||a>64&&a<91||a>95&&a<112||a>185&&a<193||a>218&&a<223)if(e.lastSelectionSettings.isCollapsed){if(32===i){if(!e.isWrappingLastText)return;s=" "}if(n.rangeCount){window.clearTimeout(e.wrapLastAdditionsTimeoutFunction);var d=n.getRangeAt(0),u=d.cloneRange();u.setStart(d.startContainer,d.startOffset),u.setEnd(d.endContainer,d.endOffset);var h=document.createElement("span");h.contentEditable=!1,h.className="user-inserted-text-inner ".concat(e.wrapLastAdditionsTimeoutClass),h.innerHTML=s,u.insertNode(h),d.setStartAfter(h),n.removeAllRanges(),n.addRange(d),e.wrapLastAdditionsTimeoutFunction=setTimeout((function(){e.isWrappingLastText=!1;var t=document.createElement("span");t.contentEditable=!1,t.className="user-inserted-text";var a=e._generateNewTagId();t.id=a;var n=Array.from(document.getElementsByClassName(e.wrapLastAdditionsTimeoutClass));p(t,n[0]),n.forEach((function(e,a){t.appendChild(e)}));var i=document.createElement("span");i.className=e.opts.closeBtnClass;i.addEventListener("click",function(e){y(e.currentTarget.parentNode),e.stopPropagation()}.bind(e)),document.getElementById(a).appendChild(i),e.wrapLastAdditionsTimeoutClass=e._generateNewTagGroupClass()}),700),e.isWrappingLastText=!0}!1===e.hasEditableContentChanged&&(e.hasEditableContentChanged=!0),t.preventDefault()}else{window.clearTimeout(e.wrapLastAdditionsTimeoutFunction);var g=n.getRangeAt(0),m=g.cloneRange();if(m.setStart(g.startContainer,g.startOffset),m.setEnd(g.endContainer,g.endOffset),!1===e.isWriting&&n.toString().length>0){e.$groupDeleted=document.createElement("span"),e.$groupDeleted.contentEditable=!1,e.$groupDeleted.className="user-removed-text";var v=e._generateNewTagId();e.$groupDeleted.id=v;var f=document.createElement("span");f.className="user-removed-text-inner",e.$groupDeleted.appendChild(f),m.surroundContents(e.$groupDeleted);var b=document.createElement("span");b.className=e.opts.closeBtnClass;b.addEventListener("click",function(t){var a=t.currentTarget.parentNode;e._removeNodeKeepTextContent(a),t.stopPropagation()}.bind(e)),e.$groupDeleted.appendChild(b)}e.isWriting=!0;var k=document.createElement("span");k.contentEditable=!1,k.className="user-inserted-text-inner ".concat(e.wrapLastAdditionsTimeoutClass),k.innerHTML="".concat(s),p(k,e.$groupDeleted),g.setStartAfter(k),n.removeAllRanges(),n.addRange(g),e.wrapLastAdditionsTimeoutFunction=setTimeout((function(){e.isWriting=!1;var t=document.createElement("span");t.contentEditable=!1,t.className="user-inserted-text";var a=e._generateNewTagId();t.id=a;var n=Array.from(document.getElementsByClassName(e.wrapLastAdditionsTimeoutClass));p(t,n[0]),n.forEach((function(e,a){t.appendChild(e)}));var i=document.createElement("span");i.className=e.opts.closeBtnClass;i.addEventListener("click",function(e){y(e.currentTarget.parentNode),e.stopPropagation()}.bind(e)),document.getElementById(a).appendChild(i),e.wrapLastAdditionsTimeoutClass=e._generateNewTagGroupClass()}),700),t.preventDefault()}})),this.hasMenu&&this.registerMenuHandler(),this.hasToolbar&&this.toolbar.$btnReset.addEventListener("click",(function(){confirm("Opravdu chcete vrátit text do původní podoby? Vaše změny se tímto ztratí.")&&(e.$canvas.innerHTML=e.originalContent.html)}))}},{key:"registerMenuHandler",value:function(){for(var e=0,t=this.$menuActions.length;e<t;e+=1)this.$menuActions[e].addEventListener("click",this.handlerMenuActions.bind(this),!1);this.$menuClose.addEventListener("click",this.handlerMenuClose.bind(this),!1)}},{key:"initPreHighlightedTextOptions",value:function(){var e=this;this.$textOptionsElements=this.$editor.querySelectorAll("[".concat("data-text-option","]")),Array.from(this.$textOptionsElements).forEach((function(t){t.addEventListener("click",(function(){C(t,e.opts.textOptions.selectedClass),x(t,e.opts.textOptions.selectedClass)?z.add({editor:e.id,id:t.id,tag:t,data:JSON.parse(t.getAttribute("data-text-option"))}):z.delete({editor:e.id,id:t.id}),e.showFeedback()}))}))}},{key:"toggleMenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==e&&!0!==this.selectionMouseDown?x(this.$menu,"hidden")&&!1===this.selectionMouseDown&&(this._setmenuDimensions(),$(this.$menu,"hidden")):A(this.$menu,"hidden")}},{key:"_setmenuDimensions",value:function(){var e,t,a=function(e){var t,a,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.cloneNode(!0);i.style.visibility="hidden",i.style.display="block",t=i,(a=e).parentNode.insertBefore(t,a.nextSibling);var s=i.getBoundingClientRect(),r=n?E(i):w(i);return y(i),{width:s.width,height:s.height,top:r.top,left:r.left}}(this.$menu),n=E(this.$editor),i=w(this.$editor),s=this.selectionAttributes.left+this.selectionAttributes.width+a.width+this.opts.menuMargin.x>n.left+i.width,r=this.selectionAttributes.top-a.height-this.opts.menuMargin.y<n.top;this.selectionAttributes.top,this.selectionAttributes.height,a.height,this.opts.menuMargin.y,n.top,i.height;e=s?this.selectionAttributes.left-a.width-this.opts.menuMargin.x:this.selectionAttributes.left+this.selectionAttributes.width+this.opts.menuMargin.x,t=r?this.selectionAttributes.top+a.height+this.opts.menuMargin.y:this.selectionAttributes.top-a.height-this.opts.menuMargin.y,this.$menu.style.left="".concat(e,"px"),this.$menu.style.top="".concat(t,"px")}},{key:"handlerMenuClose",value:function(e){this.toggleMenu(!0),e.preventDefault()}},{key:"handlerMenuActions",value:function(e){var t=e.currentTarget,a=t.getAttribute("data-command"),n=t.getAttribute("data-command-name"),i=JSON.parse(t.getAttribute("data-command-options"));this.setSelection(a,n,i),e.preventDefault()}},{key:"handlerFocus",value:function(e){3===e.which||x(e.target,"node-close")||x(e.target,"node-selected")||("mousedown"===e.type&&(this.selectionMouseDown=!0,!0===this.hasMenu&&this.toggleMenu()),"mouseup"===e.type&&this.selectionMouseDown&&(this.lastSelectionSettings={},this.selection=window.getSelection(),this.isCollapsed=this.lastSelectionSettings.isCollapsed=this.selection.isCollapsed,this.savedSelectionRange=this.selection.getRangeAt(0),this.selectionMouseDown=!1,this.lastSelectionSettings.anchorOffset=this.selection.anchorOffset,this.lastSelectionSettings.focusOffset=this.selection.focusOffset,this.lastSelectionSettings.text=this.savedSelectionRange.toString(),!1===this.selection.isCollapsed&&""!==this.savedSelectionRange.toString().trim()&&(this.selectionDirection=this.selection.anchorOffset<=this.selection.focusOffset?"right":"left",!0===this.hasMenu&&(this._setSelectionPosition(),this.toggleMenu()))))}},{key:"_setSelectionPosition",value:function(){var e=document.createElement("span");e.className="dummy-range-element",this.savedSelectionRange.surroundContents(e);var t=E(e),a=w(e);this.selectionAttributes={left:t.left,top:t.top,width:a.width,height:a.height},$(e,"dummy-range-element"),this._removeNodeKeepTextContent(e)}},{key:"_extractAndSaveContents",value:function(e){e.appendChild(this.savedSelectionRange.extractContents()),this.savedSelectionRange.insertNode(e);var t=e.getAttribute("data-command-name"),a=this._generateNewTagId();e.setAttribute("data-tag-id",a),B.addTag({editor:this.id,id:a,tag:e,tagName:t,data:{}})}},{key:"_removeNodeKeepTextContent",value:function(e){var t=e.textContent;e.parentNode.insertBefore(document.createTextNode(t),e),y(e)}},{key:"_createCloseBtnForElement",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("span");n.setAttribute("class",a.class);a.toggleClass.split(" ");var i=function e(a){var n=a.currentTarget,i=n.parentNode;n.removeEventListener("click",e),i.removeChild(n),void 0!==i.commentRef&&(t.$editor.removeChild(i.commentRef),i.commentRef=null),t._removeNodeKeepTextContent(i);var s=i.getAttribute("data-command-name");B.deleteTag({editor:t.id,id:i.getAttribute("data-tag-id"),tag:i,tagName:s,data:{}}),a.stopPropagation()};n.addEventListener("click",i.bind(this)),e.appendChild(n)}},{key:"_calculateCommentPosition",value:function(e){var t=E(e);return{left:"".concat(t.left+parseInt(e.offsetWidth,10)+this.opts.commentMargin.x,"px"),top:"".concat(t.top+this.opts.commentMargin.y,"px")}}},{key:"_createCommentForNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.getElementById("comment-template").innerHTML,n=document.createElement("div");n.innerHTML=a;var i=n.childNodes[1];i.data={},i.data.nodeRef=e;var s=i.getElementsByClassName("comment-new-text")[0],r=i.getElementsByTagName("button")[0],o=i.getElementsByClassName("comments-container")[0],c=this._calculateCommentPosition(e);i.style.left=c.left,i.style.top=c.top,A(i,t.class),i.addEventListener("click",(function(t){x(t.target,"close")&&(A(i,"hidden"),$(e,"active"))})),r.addEventListener("click",(function(e){if(""!==s.value){var t=document.createElement("div");t.className="comment-item",t.innerText=s.value,o.appendChild(t),s.value=""}})),this.$editor.append(i),A(e,"comment-created"),e.commentRef=i}},{key:"_addCommentHandlerForElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function a(a){if(!x(a.target,"node-close")){if(x(e,"comment-created")){var n=this._calculateCommentPosition(e);e.commentRef.style.left=n.left,e.commentRef.style.top=n.top,$(e.commentRef,"hidden")}else this._createCommentForNode(e,t);x(e,"active")?($(e,"active"),A(e.commentRef,"hidden")):A(e,"active")}a.stopPropagation()}A(e,"has-comments"),e.addEventListener("click",a.bind(this))}},{key:"setSelection",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.selection){if("toggle-class"===e){var n=document.createElement("span");n.setAttribute("class",a.toggleClass),n.setAttribute("data-command-name",t),!0===a.closeBtn&&this._createCloseBtnForElement(n,{class:"node-close",toggleClass:a.toggleClass}),!0===a.comments&&this._addCommentHandlerForElement(n,{class:a.commentsClass}),this._extractAndSaveContents(n),!0===a.showCommentsOnInit&&n.click()}this.toggleMenu(!0),this.showFeedback()}}}]),a}(h);H.defaults={menuClass:"contextual-menu-component",canvasClass:"canvas",resetBtnClass:"reset",closeBtnClass:"node-close",nodeSelectedClass:"node-selected",commentMargin:{x:50,y:0},menuMargin:{x:15,y:15},textOptions:{enable:!1,animatedClass:"active",selectedClass:"selected",deselectedClass:"deselected"}},H._hasMenu=function(e){return"cteni"!==e.funkce&&"psani"!==e.funkce&&!1!==e.menu&&void 0!==e.menu},H._hasToolbar=function(e){return"psani"===e.funkce||!1!==e.toolbar&&void 0!==e.toolbar};var P=function(e){function a(e,n,i){var s;return t(this,a),(s=d(this,o(a).call(this,n))).id=e,s.opts=Object.assign({},a.defaults,i),s.isAdvanced=s.opts.isAdvanced,s.rowIndex=0,s.tableResult=s.target.getElementsByClassName("table-result")[0],s.tableResultBody=s.tableResult.getElementsByClassName("table-body")[0],s.tableSelectedItems=s.target.getElementsByClassName("table-selected-items")[0],s.tableSelectedItemsBody=s.tableSelectedItems.getElementsByClassName("table-body")[0],s.activeDragged=null,s._getRowHTML=s.isAdvanced?a._getAdvancedRowHTML:a._getRowHTML,s}return r(a,e),n(a,[{key:"init",value:function(){this._registerStoreHandlers(this.tableResultBody,this.tableSelectedItemsBody),this._registerHandlers()}},{key:"_registerStoreHandlers",value:function(e,t){var a=this;B.on(O.editor.CHANGE,(function(n,i){var s,r,o=i.action;switch(o.type){case O.editor.ADD_TAG:switch((s=o.data.tagContainer).tagName){case a.opts.casti[1].sloupce[0].tag:if(e.insertAdjacentHTML("beforeend",a._getRowHTML(b(s.tag),s.id)),!a.opts.letSecondCaseRunIfSame&&a.opts.casti[1].sloupce[0].tag!==a.opts.casti[1].sloupce[1].tag)break;case a.opts.casti[1].sloupce[1].tag:(r=s.tag.cloneNode(!0)).setAttribute("draggable",!0),r.addEventListener("click",a._handlerDraggable.bind(a),!1),r.addEventListener("dragstart",a._handlerDraggable.bind(a),!1),r.addEventListener("dragend",a._handlerDraggable.bind(a),!1),r.addEventListener("drag",a._handlerDraggable.bind(a),!1),t.appendChild(r)}break;case O.editor.DELETE_TAG:s=o.data.tagContainer,Array.prototype.forEach.call(document.querySelectorAll('[data-tag-id="'.concat(s.id,'"]')),(function(e){x(e.parentNode,"cell-read-only")?y(e.parentNode.parentNode):y(e)}))}}))}},{key:"_registerHandlers",value:function(){this.target.addEventListener("dragover",this._handlerDrop.bind(this),!1),this.target.addEventListener("dragleave",this._handlerDrop.bind(this),!1),this.target.addEventListener("drop",this._handlerDrop.bind(this),!1)}},{key:"_handlerDraggable",value:function(e){return"dragstart"===e.type&&(e.dataTransfer.setData("text/plain","node"),e.dataTransfer.dropEffect="",e.target.style.opacity=.5,this.activeDragged=e.target.cloneNode(!0)),"dragend"===e.type&&(e.target.style.opacity=1,this.showFeedback()),!1}},{key:"_handlerDrop",value:function(e){return"input"==e.target.localName&&("dragover"===e.type&&(e.preventDefault(),e.dataTransfer.dropEffect="none"),"drop"===e.type&&e.preventDefault()),x(e.target,"dashboard-canvas-widget-content")&&("dragover"===e.type&&(e.preventDefault(),e.dataTransfer.dropEffect="",e.target.style.background="#eee"),"dragleave"===e.type&&(e.target.style.background="#fff"),"drop"===e.type&&(e.preventDefault(),e.target.style.background="#fff",this.activeDragged.style.opacity=1,this.activeDragged.addEventListener("click",(function(e){x(e.target,"node-close")&&e.target.parentNode.remove()})),e.target.appendChild(this.activeDragged))),!1}}]),a}(h);P.defaults={isAdvanced:!1},P._getRowHTML=function(e){return'\n    <div class="table-row">\n      <div class="cell cell-read-only cell-border-right">'.concat(e,'</div>\n      <div class="cell dashboard-canvas-widget-content"></div>\n    </div>\n  ')},P._getAdvancedRowHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a='\n    <div class="table-row">\n      <div class="cell cell-read-only cell-border-right">'.concat(e,'</div>\n      <div class="cell dashboard-canvas-widget-content cell-border-right"></div>\n      <div class="cell table-input">\n        <input id="table-akteri-vztahy-input-').concat(t,'" data-input-target="" data-save="value" type="text" placeholder="Vztah aktérů…" tabindex="-1">\n      </div>\n    </div>\n  ');return a};var j=new(function(e){function a(){var e;return t(this,a),(e=d(this,o(a).call(this)))._data={},e}return r(a,e),n(a,[{key:"change",value:function(e,t,a){this._data[e]||(this._data[e]={}),this._data[e].items=t,this._data[e].itemsHTML=a,j.trigger(O.keywords.CHANGE,{action:{id:O.keywords.id,type:O.keywords.CHANGE,data:{keywordsId:e,newItems:t,newItemsHTML:a}}})}},{key:"export",value:function(){return this._data}}]),a}(q)),G=function(e){function a(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,a),(n=d(this,o(a).call(this,e))).id=n.target.id,n.function=n.target.getAttribute("data-keywords")||"selekce",n.$controls=Array.from(n.target.querySelectorAll("[data-keywords-control]")),n.opts=Object.assign({},a.defaults,i),n.$itemsContainer=n.target.getElementsByClassName(n.opts.itemsContainerClassName)[0],n.opts.inherit&&n.opts.inherit.from.length>0?n.isInherited=!0:n.$items=n.target.getElementsByClassName(n.opts.itemClassName),n}return r(a,e),n(a,[{key:"init",value:function(){switch(this.function){case"selekce":this.opts.import&&this.opts.import.length>0&&(this.$itemsContainer.innerHTML=a._getHTMLFromItems(this.opts.import)),j.change(this.id,a._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),a._getItemsHTML(this.$itemsContainer)),this.isInherited&&(this.opts.inherit.onInit&&this._regenerateItemsContainerFromInherited(),this._registerStoreHandlers()),this._registerHandlers();break;case"wordcloud":Array.from(this.$items).forEach((function(e){e.setAttribute("data-keywords-item",0)})),this._changeSizeOfKeywordItem(this.opts.skala)}}},{key:"_changeSizeOfKeywordItem",value:function(e){var t=this;function a(t,a,n){var i=parseInt(t.getAttribute("data-keywords-item"),10),s=i+a,r=Math.abs(s)>e?i:s;t.setAttribute("data-keywords-item",r),n()}e=e?parseInt(e,10):4,this.$controls.forEach((function(e){var n=e.parentElement.parentElement;switch(e.getAttribute("data-keywords-control")){case"minus":e.addEventListener("click",(function(e){a(n,-1,t.showFeedback),e.preventDefault()}));break;case"plus":e.addEventListener("click",(function(e){a(n,1,t.showFeedback),e.preventDefault()}))}}))}},{key:"_regenerateItemsContainerFromInherited",value:function(){var e=this,t="";this.opts.inherit.from.forEach((function(n){var i=document.getElementById(n).getElementsByClassName(e.opts.itemsContainerClassName)[0].innerHTML;t+=a.renameItemsIds(n,e.id,i)})),this.$itemsContainer.innerHTML=t,this.$items=this.target.getElementsByClassName(this.opts.itemClassName),j.change(this.id,a._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),a._getItemsHTML(this.$itemsContainer))}},{key:"_registerHandlers",value:function(){var e=this;Array.from(this.target.getElementsByClassName(this.opts.itemClassName)).forEach((function(t){t.addEventListener("click",e._eventHandler.bind(e),!0)}))}},{key:"_registerStoreHandlers",value:function(){var e=this;j.on(O.keywords.CHANGE,(function(t,a){var n=a.action,i=a.action.data;switch(n.type){case O.keywords.CHANGE:e.opts.inherit.from.indexOf(i.keywordsId)>-1&&(e._regenerateItemsContainerFromInherited(),e._registerHandlers())}}))}},{key:"_eventHandler",value:function(e){"click"===e.type&&(C(e.currentTarget,"disabled"),j.change(this.id,a._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),a._getItemsHTML(this.$itemsContainer)),this.showFeedback())}}]),a}(h);G._getItemFromDOMElement=function(e){return{class:e.className,id:e.getAttribute("id"),text:e.innerText}},G._getItemsHTML=function(e){return e.innerHTML},G._getItemsFromHTML=function(e,t){var a=e.getElementsByClassName(t),n=[];return Array.from(a).forEach((function(e){n.push(G._getItemFromDOMElement(e))})),n},G._getDOMElementFromItem=function(e){var t=document.createElement("div");return t.setAttribute("class",e.class),t.setAttribute("id",e.id),t.innerHTML=e.text,b(t)},G._getHTMLFromItems=function(e){var t="";return e.forEach((function(e){t+=G._getDOMElementFromItem(e)})),t},G.renameItemsIds=function(e,t,a){var n=new RegExp(e,"g");return a.replace(n,t)},G.defaults={itemsContainerClassName:"keywords-items-container",itemClassName:"keywords-item"};var W=function(){function e(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.$element=a,this.id=this.$element.getAttribute("id"),this.opts=Object.assign({},e.defaults,n),this.commandNames=JSON.parse(this.$element.getAttribute(this.opts.itemSubscribeAttributeClassName)),this.$itemsContainer=this.$element.getElementsByClassName(this.opts.itemsContainerClassName)[0]}return n(e,[{key:"init",value:function(){this._registerStoreHandlers()}},{key:"_registerStoreHandlers",value:function(){var e=this;B.on(O.editor.CHANGE,(function(t,a){a.action;var n=a.action.data.tagContainer;if(e.commandNames.indexOf(n.tagName)>-1){var i=B.getTagsBy({key:"tagName",value:e.commandNames}),s="";i.forEach((function(e){s+=b(e.tag)})),e.$itemsContainer.innerHTML=s}}))}}]),e}();W.defaults={itemsContainerClassName:"editor-tags-placeholder-content",itemSubscribeAttributeClassName:"data-placeholder-editor-subscribe"};var V=function(e){function a(e,n,i){var s;return t(this,a),(s=d(this,o(a).call(this,n))).id=e,s.opts=Object.assign({},a.defaults,i),s.$questions=s.target.getElementsByClassName(s.opts.itemClass),s.cache={answersCorrect:0,colors:[],questions:[]},s.opts.zpetnaVazba&&(s.cache.colors=s.opts.zpetnaVazba.map((function(e){return e.barva}))),s}return r(a,e),n(a,[{key:"init",value:function(){this._registerHandlers()}},{key:"_registerHandlers",value:function(){var e=this;Array.from(this.$questions).forEach((function(t,a){e.cache.questions.push({answered:!1});var n=parseInt(t.getAttribute("data-module-answer"),10),i=Array.from(t.getElementsByClassName(e.opts.optionClass));i.forEach((function(t,s){t.addEventListener("click",(function(){var r=t;if(!r.classList.contains("selected")){if(i.forEach((function(t){return $(t,e.opts.selectedClass)})),C(r,e.opts.selectedClass),e.opts.zpetnaVazba){var o;s===n?e.cache.answersCorrect+=1:0!==e.cache.answersCorrect&&!0===e.cache.questions[a].answered&&(e.cache.answersCorrect-=1);var c=e.opts.zpetnaVazba.find((function(t){return t.podminka.includes(e.cache.answersCorrect)}));(o=e.$buttonFeedback.classList).remove.apply(o,u(e.cache.colors)),e.$buttonFeedback.classList.add(c.barva),e.$buttonFeedbackText.innerText=c.text}e.cache.questions[a].answered=!0,void 0===e.cache.questions.find((function(e){return!e.answered}))&&e.showFeedback()}}),!1)}))}))}}]),a}(h);V.defaults={itemClass:"test-quiz-item",optionClass:"option",selectedClass:"selected"};var K=function(e){function a(e,n){var i;return t(this,a),(i=d(this,o(a).call(this,e))).id=i.target.id,i.opts=Object.assign({},a.defaults,n),i.rowIndex=0,i.$tableResultBody=i.target.getElementsByClassName("table-body")[0],i.dataSettings=i.opts.data,i.cache={tasksToComplete:0,tasksCompleted:0,tasks:[]},i}return r(a,e),n(a,[{key:"init",value:function(){"store"===this.dataSettings.source&&this._registerStoreHandlers()}},{key:"_registerStoreHandlers",value:function(){var e=this;z.on(this.dataSettings.subscribe.join(" "),(function(t,n){var i=n.action,s=n.data;switch(i.type){case O[t].ADD:e.$tableResultBody.insertAdjacentHTML("beforeend",a._getRowHTML(s));var r=e.$tableResultBody.querySelectorAll(".table-row"),o=r[r.length-1].querySelectorAll("select");e.cache.tasksToComplete+=o.length,Array.from(o).forEach((function(t){e.cache.tasks.push({answered:!1});var a=e.cache.tasks.length-1;t.addEventListener("change",(function(){!1===e.cache.tasks[a].answered&&(e.cache.tasksCompleted+=1,e.cache.tasks[a].answered=!0),e.cache.tasksToComplete===e.cache.tasksCompleted&&e.showFeedback()}))}));break;case O[t].DELETE:var c=document.getElementById("".concat(s.id,"_table"));y(c),e.cache.tasksToComplete-=c.querySelectorAll("select").length,e.cache.tasksCompleted-=c.querySelectorAll("select").length,e.cache.tasksToComplete<=e.cache.tasksCompleted&&e.showFeedback()}}))}}]),a}(h);K.defaults={},K._getRowHTML=function(e){return'\n    <div class="table-row" id="'.concat(e.id,'_table">\n      <div class="cell">').concat(e.data.text,'</div>\n      <div class="cell">').concat(e.data.vyraz,'</div>\n      <div class="cell">\n        <select id="').concat(e.id,'-select-osoba" name="osoba" data-save="value">\n          <option>Vyberte osobu</option>\n          <option>já</option>\n          <option>ty</option>\n          <option>on/ona/ono</option>\n          <option>my</option>\n          <option>vy</option>\n          <option>oni/ony/ona</option>\n          <option>infinitiv</option>\n        </select>\n      </div>\n      <div class="cell">\n        <select id="').concat(e.id,'-select-zpusob" name="zpusob" data-save="value">\n          <option>Vyberte způsob</option>\n          <option>oznamovací</option>\n          <option>podmiňovací</option>\n          <option>rozkazovací</option>\n          <option id="select-zpusob-infinitiv">infinitiv</option>\n        </select>\n      </div>\n    </div>\n  ')};var U=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).target.addEventListener("click",(function(e){n.$fullscreenImage.src=n.target.nextElementSibling.src,n.$fullscreen.classList.toggle("hidden"),n.showFeedback(),e.preventDefault(),e.stopPropagation()}),!1),n}return r(a,e),a}(function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$fullscreen=document.querySelector('[data-fullscreen="target"]'),n.$fullscreenImage=n.$fullscreen.querySelector('[data-fullscreen="image"]'),n.window={},n.image={},n.window.width=window.innerWidth,n.window.height=window.innerHeight,n.window.ratio=n.window.width/n.window.height,n.$fullscreenImage.onload=function(){n.image.width=n.$fullscreenImage.naturalWidth,n.image.height=n.$fullscreenImage.naturalHeight,n.image.ratio=n.image.width/n.image.height,n.image.ratio>=n.window.ratio?(n.$fullscreenImage.style.width="100%",n.$fullscreenImage.style.height="auto"):(n.$fullscreenImage.style.width="auto",n.$fullscreenImage.style.height="".concat(n.window.height,"px"))},n}return r(a,e),a}(h)),Y=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$userTexts=n.$slide.querySelectorAll("[data-textarea-target]"),n.$counter=n.target.nextElementSibling.querySelector("[data-usertext-counter]"),n.$wrapper=n.$counter.parentElement,n.feedback=JSON.parse(n.target.getAttribute("data-feedback")),n.lengthExpected={min:parseInt("0"===n.target.getAttribute("minlength")?1:n.target.getAttribute("minlength"),10),avg:null,max:parseInt(n.target.getAttribute("maxlength")/2,10)},n.lengthExpected.avg=Math.floor((n.lengthExpected.max-n.lengthExpected.min)/4+n.lengthExpected.min),n.cache={answersCorrect:0,colors:["color-red","color-orange","color-green"],questions:[]},n.lastValue="",n.hadData=n.target.value&&n.target.value.length>0,n.wasUsed=!1,n.hadData&&n.updateCharacterCounter(),HISTORYLAB.import.done||(n.toDuplicate=n.target.getAttribute("data-duplicate-text"),n.textDuplicateSources=n.toDuplicate?n.toDuplicate.split(" "):[],n.getEvents(),n.addEventListeners()),n}return r(a,e),n(a,[{key:"updateCharacterCounter",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target.value.length;(e=this.$wrapper.classList).remove.apply(e,u(this.cache.colors)),t<this.lengthExpected.min?this.$wrapper.classList.add(this.cache.colors[0]):t<=this.lengthExpected.avg?this.$wrapper.classList.add(this.cache.colors[1]):t>this.lengthExpected.avg&&this.$wrapper.classList.add(this.cache.colors[2]),this.$counter.innerText=t,this.target.classList.add("is-used",!this.wasUsed),this.wasUsed=!0}},{key:"updateFeedback",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target.value.length;if((e=this.$buttonFeedback.classList).remove.apply(e,u(this.cache.colors)),t<this.lengthExpected.min)this.$buttonFeedback.classList.add(this.cache.colors[0]),this.$buttonFeedbackText.innerText=this.feedback.none;else{t<=this.lengthExpected.avg?(this.$buttonFeedback.classList.add(this.cache.colors[1]),this.$buttonFeedbackText.innerText=this.feedback.short):t>this.lengthExpected.avg&&(this.$buttonFeedback.classList.add(this.cache.colors[2]),this.$buttonFeedbackText.innerText=this.feedback.ok),this.target.setAttribute("data-textarea-target","success");var a=Array.from(this.$userTexts).find((function(e){return"success"!==e.getAttribute("data-textarea-target")}));void 0===a&&this.showFeedback()}}},{key:"addEventListeners",value:function(){var e=this;this.target.addEventListener("blur",(function(t){if(e.updateCharacterCounter(),t.target.value!==e.lastValue){var a=""===e.lastValue?"create":"change";e.lastValue=t.target.value,v(document,"text.change",{},{text:{id:t.target.id,task:a,text:t.target.value}}),e.textDuplicateSources=[]}})),this.target.addEventListener("keyup",(function(t){t.stopPropagation();var a=e.target.value.length;e.updateCharacterCounter(a),e.updateFeedback(a)}))}},{key:"getEvents",value:function(){var e=this;this.textDuplicateSources[0]&&document.addEventListener("text.change",(function(t){if(e.textDuplicateSources.includes(t.detail.text.id)){var a=""===e.target.value?"create":"change";switch(t.detail.text.task){case"create":case"change":""!==e.target.value&&(e.target.value+="\n"),1===e.textDuplicateSources.length?e.target.value=t.detail.text.text:e.target.value+="".concat(t.detail.text.text,"\n"),v(document,"text.change",{},{text:{id:e.target.id,task:a,text:e.target.value}}),e.lastValue=e.target.value,e.updateCharacterCounter();break;default:console.log("Nondefinated text events task. :(")}}}))}}]),a}(h),J=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$playButton=n.target.querySelector("[data-player-control]"),n.$loadWave=n.target.querySelector("[data-audio-wave]"),n.$leftTime=n.target.querySelector("[data-audio-time-left]"),n.$audioDuration=n.target.querySelector("[data-audio-time-duration]"),n.wavesurfer=WaveSurfer.create({container:n.$loadWave,waveColor:"#A77977",progressColor:"#FCE4E3",height:80,responsive:!0,barWidth:2}),n.wavesurfer.load(n.$loadWave.dataset.src),n.initWave(),n}return r(a,e),n(a,[{key:"initWave",value:function(){var e=this;this.wavesurfer.on("ready",(function(){e.$leftTime.textContent="0:00";var t=e.wavesurfer.getDuration(),a=Math.floor(t%3600/60),n="00".concat(Math.floor(t%60)).slice(-2);e.$audioDuration.textContent="".concat(a,":").concat(n),e.addListenerAfterReady()}))}},{key:"addListenerAfterReady",value:function(){var e=this;this.wavesurfer.on("audioprocess",(function(t){var a=Math.floor(t%3600/60),n="00".concat(Math.floor(t%60)).slice(-2);e.$leftTime.textContent="".concat(a,":").concat(n)})),this.wavesurfer.on("finish",(function(){e.$playButton.setAttribute("data-player-control","paused")})),this.$playButton.addEventListener("click",(function(){e.wavesurfer.playPause(),"paused"===e.$playButton.getAttribute("data-player-control")?e.$playButton.setAttribute("data-player-control","playing"):e.$playButton.setAttribute("data-player-control","paused"),e.showFeedback()}));var t=document.querySelectorAll("[data-nav-button]");Array.from(t).forEach((function(t){t.addEventListener("click",(function(){"playing"===e.$playButton.getAttribute("data-player-control")&&(e.wavesurfer.playPause(),e.$playButton.setAttribute("data-player-control","paused"))}))}))}}]),a}(h),X=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$audio=n.target.querySelector("audio"),n.$timeLeft=n.target.querySelector("[data-audio-time-left]"),n.$duration=n.target.querySelector("[data-audio-time-duration]"),n.$duration.innerText="/".concat(S(n.$audio.duration)),L.addEventListeners(n.target,n.showFeedback),n}return r(a,e),a}(L),Q=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$buttons=Array.from(n.target.querySelectorAll('[data-fake-map="toggle"]')),n.$maps=Array.from(n.target.querySelectorAll('[data-fake-map="map"]')),n.lastActiveIndex=0,n.addEventListenerToButtons(),n}return r(a,e),n(a,[{key:"switchMap",value:function(e,t){this.$maps[this.lastActiveIndex].classList.remove("active"),this.$buttons[this.lastActiveIndex].classList.remove("active"),this.$maps[t].classList.add("active"),e.classList.add("active"),this.lastActiveIndex=t}},{key:"addEventListenerToButtons",value:function(){var e=this;this.$buttons.forEach((function(t,a){t.addEventListener("click",(function(n){e.switchMap(t,a),e.showFeedback(),n.preventDefault()}))}))}}]),a}(h),Z=function(e){function a(e,n){var i;return t(this,a),(i=d(this,o(a).call(this,e))).$media=i.target.querySelector("video"),i.options=Object(n),i.prefix=i.options.prefix||"media",i.lang=Object(i.options.lang),i.paused=null,i.currentTime=null,i.duration=null,i.interval=null,i.$document=i.target.ownerDocument,i.$controls=i.target.querySelector(".media-player-controls"),i.$play=i.$controls.querySelector("[data-player-control]"),i.$playSymbol=i.$play.querySelector(".media-play-symbol"),i.$pauseSymbol=i.$play.querySelector(".media-pause-symbol"),i.$time=i.$controls.querySelector("[data-video-time-progress]"),i.$timeMeter=i.$time.querySelector(".media-meter.media-time-meter"),i.$timeRange=i.$time.querySelector(".media-range.media-time-range"),i.$currentTimeText=i.$document.createTextNode(""),i.$currentTime=i.$controls.querySelector("[data-video-time-left]"),i.$currentTime.appendChild(i.$currentTimeText),i.durationTime=i.$media.duration,i.$durationTime=i.$controls.querySelector("[data-video-time-duration]"),i.$durationTime.innerText=S(i.durationTime),i.$durationTime.setAttribute("title","".concat(a.timeToAural(i.durationTime,i.lang.minutes||"minutes",i.lang.seconds||"seconds"))),i.$fullscreen=i.$controls.querySelector(".fullscreen-toggle"),i.$enterFullscreenSymbol=i.$fullscreen.querySelector(".media-enterFullscreen-symbol"),i.$leaveFullscreenSymbol=i.$fullscreen.querySelector(".media-leaveFullscreen-symbol"),i._fullscreenchange="onfullscreenchange"in i.target?"fullscreenchange":"onwebkitfullscreenchange"in i.target?"webkitfullscreenchange":"onMSFullscreenChange"in i.target?"MSFullscreenChange":"fullscreenchange",i._requestFullscreen=i.target.requestFullscreen||i.target.webkitRequestFullscreen||i.target.msRequestFullscreen,i.onCanPlayStart=i.onCanPlayStart.bind(l(i)),i.onLoadStart=i.onLoadStart.bind(l(i)),i.onLoadedData=i.onLoadedData.bind(l(i)),i.onPlayChange=i.onPlayChange.bind(l(i)),i.onTimeChange=i.onTimeChange.bind(l(i)),i.onPlayClick=i.onPlayClick.bind(l(i)),i.onTimeKeydown=i.onTimeKeydown.bind(l(i)),i.onTimeClick=i.onTimeClick.bind(l(i)),i.onTimeKeydown=i.onTimeKeydown.bind(l(i)),i.onFullscreenClick=i.onFullscreenClick.bind(l(i)),i.onFullscreenChange=i.onFullscreenChange.bind(l(i)),i.$media.addEventListener("canplaythrough",i.onCanPlayStart),i.$media.addEventListener("loadstart",i.onLoadStart),i.$media.addEventListener("loadeddata",i.onLoadedData),i.$media.addEventListener("pause",i.onPlayChange),i.$media.addEventListener("play",i.onPlayChange),i.$media.addEventListener("timeupdate",i.onTimeChange),i.$controls.addEventListener("click",i.onPlayClick,!1),i.$play.addEventListener("keydown",i.onTimeKeydown),i.$time.addEventListener("click",i.onTimeClick,!1),i.$time.addEventListener("keydown",i.onTimeKeydown),i.$fullscreen.addEventListener("click",i.onFullscreenClick,!1),document.addEventListener(i._fullscreenchange,i.onFullscreenChange),a.onDrag(i.$time,i.$timeRange,(function(e){i.$media.currentTime=i.duration*Math.max(0,Math.min(1,e)),i.onTimeChange()})),i.onLoadStart(),i}return r(a,e),n(a,[{key:"onPlayChange",value:function(){this.paused!==this.$media.paused&&(this.paused=this.$media.paused,this.$play.setAttribute("aria-label",this.paused?this.lang.play||"play":this.lang.pause||"pause"),this.target.setAttribute("data-player-state",this.paused?"paused":"playing"),this.$playSymbol.setAttribute("aria-hidden",!this.paused),this.$pauseSymbol.setAttribute("aria-hidden",this.paused),clearInterval(this.interval),this.paused||(this.interval=setInterval(this.onTimeChange,34)),this.$media.dispatchEvent(T.playchange))}},{key:"onTimeChange",value:function(){if(this.currentTime!==this.$media.currentTime||this.duration!==this.$media.duration){this.currentTime=this.$media.currentTime,this.duration=this.$media.duration||0;var e=this.currentTime/this.duration,t=S(this.currentTime);t!==this.$currentTimeText.nodeValue&&(this.$currentTimeText.nodeValue=t,this.$currentTime.setAttribute("title","".concat(a.timeToAural(this.currentTime,this.lang.minutes||"minutes",this.lang.seconds||"seconds")))),this.$time.setAttribute("aria-valuenow",this.currentTime),this.$time.setAttribute("aria-valuemin",0),this.$time.setAttribute("aria-valuemax",this.duration),this.$timeMeter.style.width="".concat(100*e,"%"),this.$media.dispatchEvent(T.timechange)}}},{key:"onLoadStart",value:function(){this.$media.removeEventListener("canplaythrough",this.onCanPlayStart),this.$media.addEventListener("canplaythrough",this.onCanPlayStart),this.onPlayChange(),this.onFullscreenChange(),this.onTimeChange()}},{key:"onLoadedData",value:function(){this.onTimeChange()}},{key:"onCanPlayStart",value:function(){this.$media.removeEventListener("canplaythrough",this.nCanPlayStart),this.$media.dispatchEvent(T.canplaystart),this.paused&&!this.$media.autoplay||this.$media.play()}},{key:"onFullscreenChange",value:function(){var e=this.target===a._fullscreenElement();this.$fullscreen.setAttribute("aria-label",e?this.lang.leaveFullscreen||"leave full screen":this.lang.enterFullscreen||"enter full screen"),this.$enterFullscreenSymbol.setAttribute("aria-hidden",e),this.$leaveFullscreenSymbol.setAttribute("aria-hidden",!e)}},{key:"onPlayClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.$media[this.$media.paused?"play":"pause"]()}},{key:"onTimeClick",value:function(e){e.stopPropagation(),e.pointerType||e.detail||this.onPlayClick(e)}},{key:"onFullscreenClick",value:function(e){var t=this;e.stopPropagation(),this._requestFullscreen?this.target===a._fullscreenElement()?a._exitFullscreen().call(document):(this._requestFullscreen.call(this.target),this.$fullscreen.focus(),setTimeout((function(){t.$fullscreen.focus()}),200)):this.$media.webkitSupportsFullscreen&&(this.$media.webkitDisplayingFullscreen?this.$media.webkitExitFullscreen():this.$media.webkitEnterFullscreen(),this.onFullscreenChange())}},{key:"onTimeKeydown",value:function(e){var t=e.keyCode,a=e.shiftKey;if(t>=37&&t<=40){e.preventDefault();var n=37===t||39===t?t-38:t-39;this.$media.currentTime=Math.max(0,Math.min(this.$media.duration,this.$media.currentTime+n*(a?10:1))),this.onTimeChange()}}}],[{key:"_fullscreenElement",value:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement}},{key:"_exitFullscreen",value:function(){return document.exitFullscreen||document.webkitCancelFullScreen||document.msExitFullscreen}},{key:"onDrag",value:function(e,t,a){var n,i,s,r=void 0!==e.onpointerup,o=void 0!==e.ontouchstart,c=r?"pointerdown":o?"touchstart":"mousedown",l=r?"pointermove":o?"touchmove":"mousemove",d=r?"pointerup":o?"touchend":"mouseup",u="clientX";function h(e){e.preventDefault();var t=u in e?e[u]:e.touches&&e.touches[0]&&e.touches[0][u]||0;a((t-i)/(s-i))}function g(){n.removeEventListener(l,h),n.removeEventListener(d,g)}e.addEventListener(c,(function(a){n=e.ownerDocument.defaultView;var r=t.getBoundingClientRect();i=r.left,s=r.right,h(a),n.addEventListener(l,h),n.addEventListener(d,g)}))}},{key:"timeToAural",value:function(e,t,a){return"".concat(Math.floor(e/60)," ").concat(t,", ").concat(Math.floor(e%60)," ").concat(a)}}]),a}(h),ee=function(e){function a(e){var n;return t(this,a),(n=d(this,o(a).call(this,e))).$settings=document.querySelector('[data-selectable-id-reference="'.concat(n.target.id,'"]')),n.feedback=JSON.parse(n.$settings.getAttribute("data-module-zpetnavazba")),n.settings=JSON.parse(n.$settings.getAttribute("data-module-settings")),n.$items=Array.from(n.target.querySelectorAll(".selectable-item")),n.$inputs=Array.from(n.target.querySelectorAll("input")),n.$inputs.forEach((function(e){n._changeClassIfChecked(e),n._addEventListeners(e)})),n.cache={answersCorrect:0,zpetnaVazba:!1,colors:[],checkedInput:0},n.feedback&&(n.cache.zpetnaVazba=!0,n.cache.colors=n.feedback.map((function(e){return e.barva}))),n}return r(a,e),n(a,[{key:"_addEventListeners",value:function(e){var t=this;e.addEventListener("change",(function(){t.$inputs.forEach((function(e){t._changeClassIfChecked(e)})),t._checkAndResolveFeedback()}),!1)}},{key:"_changeClassIfChecked",value:function(e){e.parentNode.classList.toggle("is-checked",!0===e.checked)}},{key:"_checkAndResolveFeedback",value:function(){var e=this;if(this.cache.answersCorrect=0,this.settings.viceOdpovedi?this.$items.forEach((function(t,a){e.$inputs[a].checked&&(e.cache.checkedInput+=1),e.$inputs[a].checked&&t.hasAttribute("data-select-spravnaodpoved")&&(e.cache.answersCorrect+=1),e.$inputs[a].checked||t.hasAttribute("data-select-spravnaodpoved")||(e.cache.answersCorrect+=1)})):this.$items.forEach((function(t,a){e.$inputs[a].checked&&(e.cache.checkedInput+=1),e.$inputs[a].checked&&t.hasAttribute("data-select-spravnaodpoved")&&(e.cache.answersCorrect+=1)})),0===this.cache.checkedInput&&!this.settings.vybrano||this.cache.checkedInput===this.$inputs.length&&this.settings.vybrano)this.hideFeedback();else{if(this.cache.zpetnaVazba){var t,a=this.feedback.find((function(t){return t.podminka.includes(e.cache.answersCorrect)}));(t=this.$buttonFeedback.classList).remove.apply(t,u(this.cache.colors)),this.$buttonFeedback.classList.add(a.barva),this.$buttonFeedbackText.innerText=a.text}this.showFeedback()}this.cache.checkedInput=0,this._dispatchEvent()}},{key:"_dispatchEvent",value:function(){var e=Array.from(this.$inputs).map((function(e){return{checked:e.checked,id:e.id}}));v(this.target,"selection.change",{},{id:this.target.id,items:e})}}]),a}(h);document.addEventListener("DOMContentLoaded",(function(){console.log("domLoad:components")}),!1),window.addEventListener("load",(function(){console.log("windowLoad:components");var e=Array.from(document.querySelectorAll("[data-player-video]"));e.length>0&&(e.forEach((function(e){new Z(e)})),document.addEventListener("slide.change",(function(){_(e)})));var t=Array.from(document.querySelectorAll('[data-player-audio="normal"]'));t.length>0&&t.forEach((function(e){new J(e)}));var a=Array.from(document.querySelectorAll('[data-player-audio="simple"]'));a.length>0&&(a.forEach((function(e){new X(e)})),document.addEventListener("slide.change",(function(){_(a)})));var n=document.querySelectorAll('[data-fullscreen="toggle"]');n.length>0&&Array.from(n).forEach((function(e){new U(e)}));var i=document.querySelectorAll("[data-lupa-target]");if(i.length>0)for(var s=0;s<i.length;s+=1)new g(i[s]);var r=document.querySelectorAll('[data-fake-map="target"]');if(r.length>0)for(var o=0;o<r.length;o+=1)new Q(r[o]);var c=document.querySelectorAll('[data-textarea-target=""]');c.length>0&&Array.from(c).forEach((function(e){new Y(e)}));var l=document.querySelectorAll("[data-svg-target]");if(l.length>0){if(!0!==HISTORYLAB.import.done){var d=document.querySelector("[data-radial-menu]");if(d)new R(d,l)}Array.from(l).forEach((function(e){new F(e)}))}if(!0!==HISTORYLAB.import.done){var u=document.querySelectorAll("[data-editor]");u.length>0&&Array.from(u).forEach((function(e){new H(e)}));var h=document.querySelectorAll("[data-target-test-quiz]");h.length>0&&Array.from(h).forEach((function(e){var t=document.querySelector('[data-test-quiz-id-reference="'.concat(e.getAttribute("data-test-quiz-id"),'"]'));new V(e.getAttribute("data-test-quiz-id"),e,JSON.parse(t.getAttribute("data-module-settings"))).init()}));var m=document.querySelectorAll("[data-target-analytical-table]");m.length>0&&Array.from(m).forEach((function(e){var t=document.querySelector('[data-analytical-table-id-reference="'.concat(e.getAttribute("data-analytical-table-id"),'"]'));new P(e.getAttribute("data-analytical-table-id"),e,JSON.parse(t.getAttribute("data-module-settings"))).init()}));var v=document.querySelectorAll("[data-target-generic-table]");v.length>0&&Array.from(v).forEach((function(e){var t=document.querySelector('[data-generic-table-id-reference="'.concat(e.id,'"]'));new K(e,JSON.parse(t.getAttribute("data-module-settings"))).init()}));var f=document.querySelectorAll("[data-sortable-target]");f.length>0&&Array.from(f).forEach((function(e){new N(e)}));var p=document.querySelectorAll("[data-selectable-target]");p.length>0&&Array.from(p).forEach((function(e){new ee(e)}));var y=document.querySelectorAll("[data-keywords]");y.length>0&&Array.from(y).forEach((function(e){var t=e.hasAttribute("data-module-settings")?e.getAttribute("data-module-settings"):{};new G(e,JSON.parse(t)).init()}));var b=document.querySelectorAll(".editor-tags-placeholder");b.length>0&&Array.from(b).forEach((function(e){new W(e).init()}))}}),!1)}();
//# sourceMappingURL=components.build.js.map
