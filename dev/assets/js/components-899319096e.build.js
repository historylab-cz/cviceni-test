!function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(){function t(n){e(this,t),this.target=n,this.$slide=this.target.closest(".slide"),this.$slide&&(this.$buttonFeedback=this.$slide.querySelector("[data-feedback-button]"),this.$buttonFeedbackText=this.$buttonFeedback.querySelector("span")),this.showFeedback=this.showFeedback.bind(this)}return a(t,[{key:"showFeedback",value:function(){this.$buttonFeedback&&this.$buttonFeedback.classList.contains("button-hidden")&&this.$buttonFeedback.classList.remove("button-hidden")}}]),t}(),h=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$element=document.querySelector("[data-lupa]"),a.$canvas=document.querySelector("[data-lupa-canvas]"),a.ctx=a.$canvas.getContext("2d"),a._onStart=a._onStart.bind(l(a)),a._onMove=a._onMove.bind(l(a)),a._onEnd=a._onEnd.bind(l(a)),a._update=a._update.bind(l(a)),a._onResize=a._onResize.bind(l(a)),a.zoomGlassSize=230,a.targetBCR=null,a.zoomed=0,a.targetZoomed=0,a.x=0,a.y=0,a.trackingTouch=!1,a._addEventListeners(),a._initCanvas(),a._onResize(),window.requestAnimationFrame(a._update),a}return s(n,u),a(n,[{key:"_initCanvas",value:function(){var t=this.zoomGlassSize,e=this.zoomGlassSize,n=window.devicePixelRation||1;this.$canvas.width=t*n,this.$canvas.height=e*n,this.$canvas.style.width="".concat(t,"px"),this.$canvas.style.height="".concat(e,"px"),this.ctx.scale(n,n)}},{key:"_onResize",value:function(){this.targetBCR=this.target.getBoundingClientRect()}},{key:"_onStart",value:function(t){t.target===this.target&&(t.preventDefault(),this.x=t.pageX||t.touches[0].pageX,this.y=t.pageY||t.touches[0].pageY,this.trackingTouch=!0,this.targetZoomed=1,this.zoomed=0,window.requestAnimationFrame(this._update))}},{key:"_onMove",value:function(t){this.trackingTouch&&(this.x=t.pageX||t.touches[0].pageX,this.y=t.pageY||t.touches[0].pageY)}},{key:"_onEnd",value:function(){this.targetZoomed&&this.showFeedback(),this.targetZoomed=0,this.trackingTouch=!1}},{key:"_update",value:function(){var t=2*Math.PI,e=100*this.zoomed;this.targetBCR=this.target.getBoundingClientRect();var n=Math.max(0,Math.min(1,(this.x-this.targetBCR.left)/this.targetBCR.width)),a=Math.max(0,Math.min(1,(this.y-this.targetBCR.top)/this.targetBCR.height)),i=2.5*this.targetBCR.width,s=2.5*this.targetBCR.height;platform.os.family.indexOf("Windows")>-1&&platform.name.indexOf("Firefox")>-1||(this.ctx.shadowColor="rgba(0,0,0,0.4)",this.ctx.shadowBlur=12,this.ctx.shadowOffsetY=8),this.ctx.clearRect(0,0,this.zoomGlassSize,this.zoomGlassSize),this.ctx.fillStyle="#fff",this.ctx.beginPath(),this.ctx.arc(this.zoomGlassSize/2,this.zoomGlassSize-10-e,e,0,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.zoomGlassSize/2,this.zoomGlassSize-10-(e+1),1.03*e,0,t),this.ctx.clip(),this.ctx.closePath(),this.ctx.drawImage(this.target,-n*i+this.zoomGlassSize/2,-a*s+this.zoomGlassSize/2,i,s),this.ctx.restore(),this.$element.style.transform="translate(".concat(this.x,"px, ").concat(this.y,"px)"),this.zoomed+=(this.targetZoomed-this.zoomed)/4,this.zoomed>.001?window.requestAnimationFrame(this._update):this.zoomed=0}},{key:"_addEventListeners",value:function(){document.addEventListener("touchstart",this._onStart),document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onEnd),document.addEventListener("mousedown",this._onStart),document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onEnd),window.addEventListener("resize",this._onResize)}}]),n}();function g(e){return e&&"object"===t(e)&&!Array.isArray(e)}function m(t,e){e.parentNode.insertBefore(t,e)}function v(t){t.parentNode.removeChild(t)}function f(t){if(t&&t.tagName){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}}function p(t){var e=d3.mouse(t);return{x:d3.format(".0f")(e[0]),y:d3.format(".0f")(e[1])}}function y(t){var e=new WebKitCSSMatrix(window.getComputedStyle(t).webkitTransform),n=document.body;window.pageYOffset||n.scrollTop,window.pageXOffset||n.scrollLeft;return{left:t.offsetLeft+e.m41,top:t.offsetTop+e.m42}}function b(t){var e=t.getBoundingClientRect(),n=document.body,a=window.pageYOffset||n.scrollTop,i=window.pageXOffset||n.scrollLeft;return{left:e.left+i,top:e.top+a,height:e.height,width:e.width}}function E(t,e){w(t,e)?x(t,e):k(t,e)}function w(t,e){return!(!t||!e)&&(t.classList?t.classList.contains(e):"".concat(t.className," ").indexOf("".concat(e," "))>-1)}function k(t,e){var n=t,a=e;if(n&&a)if("string"==typeof n?n=document.querySelectorAll(n):n.tagName&&(n=[n]),"string"==typeof a){a=a.split(" ");for(var i=0;i<n.length;i+=1){var s;if(n[i].classList)(s=n[i].classList).add.apply(s,d(a));else if(!w.apply(void 0,[n[i]].concat(d(a))))for(var o=0;o<a.length;o+=1)n[i].classes+=" ".concat(a[o])}}else console.log("Class argument must be string with spaces in between class names.")}function x(t,e){var n=t,a=e;if(n&&a)if("string"==typeof n?n=document.querySelectorAll(n):n.tagName&&(n=[n]),"string"==typeof a){a=a.split(" ");for(var i=0;i<n.length;i+=1){var s;if(n[i].classList)(s=n[i].classList).remove.apply(s,d(a));else for(var o=0;o<a.length;o+=1)n[i].className=n[i].className.replace(new RegExp("\\b".concat(e[o],"\\b"),"g"),"")}}else console.log("Class argument must be string with spaces in between class names.")}var A=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).zoomIntensity=3,a.targetContainer=a.target.parentElement,a._onClick=a._onClick.bind(l(a)),a._onMove=a._onMove.bind(l(a)),a._onResize=a._onResize.bind(l(a)),a._getImageDimensions(),a._addEventListeners(),a}return s(n,u),a(n,[{key:"_getImageDimensions",value:function(){this.targetBCR=this.target.getBoundingClientRect(),this.targetContainer.style.height="".concat(this.targetBCR.height,"px")}},{key:"_onResize",value:function(){this.targetBCR=this.target.getBoundingClientRect()}},{key:"_onClick",value:function(t){t.target===this.target&&(t.preventDefault(),w(this.target,"enlarged")?(w(this.target,"detail-move")&&x(this.target,"detail-move"),x(this.target,"enlarged"),this.target.style.left="",this.target.style.top=""):(this._onResize(),k(this.target,"enlarged"),this.x=t.clientX||t.touches[0].pageX,this.y=t.clientY||t.touches[0].pageY,this.target.style.top="".concat(this.positionY,"%"),this.target.style.left="".concat(this.positionX,"%")))}},{key:"_onMove",value:function(t){t.target===this.target&&w(this.target,"enlarged")&&w(this.target,"enlarged")&&(w(this.target,"detail-move")||k(this.target,"detail-move"),this.x=t.clientX||t.touches[0].pageX,this.y=t.clientY||t.touches[0].pageY,this.target.style.top="".concat(this.positionY,"%"),this.target.style.left="".concat(this.positionX,"%"))}},{key:"_addEventListeners",value:function(){document.addEventListener("touchstart",this._onClick),document.addEventListener("touchmove",this._onMove),document.addEventListener("mousedown",this._onClick),document.addEventListener("mousemove",this._onMove)}}],[{key:"positionY",get:function(){return(this.y-this.targetBCR.top)/this.targetBCR.height*-100*(this.zoomIntensity-1)}},{key:"positionX",get:function(){return(this.x-this.targetBCR.left)/this.targetBCR.width*-100*(this.zoomIntensity-1)}}]),n}(),C=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$navButtons=Array.from(document.querySelectorAll("[data-nav-button]")),a.$navButtons.forEach(function(t){t.addEventListener("click",function(){n.stopPlayingAudioPlayers()})}),a}return s(n,u),a(n,null,[{key:"addEventListeners",value:function(t,e){var a=t.querySelector("audio"),i=t.querySelector("[data-player-control]"),s=t.querySelector("[data-audio-time-left]");i.addEventListener("click",function(t){"paused"===i.getAttribute("data-player-control")?(n.stopPlayingAudioPlayers(),a.play(),i.setAttribute("data-player-control","playing")):n.stopPlayingAudioPlayers(),e(),t.stopPropagation()},!1),i.addEventListener("mousedown",function(t){t.stopPropagation()},!1),a.addEventListener("timeupdate",function(){s.innerText=n.getSecondsMinutesFormat(a.currentTime)}),a.addEventListener("ended",function(){i.setAttribute("data-player-control","paused")})}},{key:"stopPlayingAudioPlayers",value:function(){var t=document.querySelectorAll("[data-player-audio]");t.length>0&&Array.from(t).forEach(function(t){var e=t.querySelector("audio");e&&!e.paused&&(e.pause(),t.querySelector("[data-player-control]").setAttribute("data-player-control","paused"))})}},{key:"getSecondsMinutesFormat",value:function(t){var e={seconds:Math.floor(t),minutes:Math.floor(t/60)};return e.seconds=(e.seconds-60*e.minutes).toString(10),"".concat(e.minutes,":").concat("0".concat(e.seconds).slice(-2))}}]),n}(),_=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).container=a.target,a.items=t.querySelectorAll("[data-sortable-drag]"),a.droppables=t.querySelectorAll("[data-sortable-drop]"),a.placeholder=function(){return document.querySelector("#sortable-placeholder")},a.direction=a.target.getAttribute("data-sortable-target"),a.trackingTouch=!1,a.before=!1,a.after=!1,a.mouse={x:function(t){return t.clientX||t.touches[0].clientX},y:function(t){return t.clientY||t.touches[0].clientY},x0:0,y0:0,x1:0,y1:0},a.dragged={el:null,clone:null,posRel:{},rect:function(){return a.dragged.el.getBoundingClientRect()},size:{}},a.siblings={prev:null,next:null},a._onStart=a._onStart.bind(l(a)),a._onMove=a._onMove.bind(l(a)),a._onEnd=a._onEnd.bind(l(a)),a._update=a._update.bind(l(a)),a._addEventListeners(),a}return s(n,u),a(n,[{key:"_onStart",value:function(t){t.target.hasAttribute("data-sortable-drag")&&(C.stopPlayingAudioPlayers(),this.trackingTouch=!0,this.dragged.el=t.target,this.dragged.clone=this.dragged.el.cloneNode(!0),this.dragged.posRel.top=this.dragged.el.offsetTop,this.dragged.posRel.left=this.dragged.el.offsetLeft,this.dragged.size.width=this.dragged.el.offsetWidth,this.dragged.size.height=this.dragged.el.offsetHeight,this.dragged.el.style.top="".concat(this.dragged.posRel.top,"px"),this.dragged.el.style.left="".concat(this.dragged.posRel.left,"px"),this.dragged.el.style.width="".concat(this.dragged.size.width,"px"),this.dragged.el.style.height="".concat(this.dragged.size.height,"px"),this.dragged.el.classList.add("is-dragged"),this.container.classList.add("is-dragged"),this._addPlaceholder(this.dragged.el),this._onOver(t),this.mouse.x0=this.mouse.x(t),this.mouse.y0=this.mouse.y(t),t.preventDefault())}},{key:"_onMove",value:function(t){this.trackingTouch&&(this.mouse.x1=this.mouse.x(t)-this.mouse.x0,this.mouse.y1=this.mouse.y(t)-this.mouse.y0,window.requestAnimationFrame(this._update),this._onOver(t))}},{key:"_onEnd",value:function(t){if(this.trackingTouch){this.trackingTouch=!1,this.container.classList.remove("is-dragged"),this.dragged.el.classList.remove("is-dragged"),this.dragged.el.style.top="",this.dragged.el.style.left="",this.dragged.el.style.width="",this.dragged.el.style.height="",this.dragged.el.style.transform="";var e=this.placeholder().getBoundingClientRect();switch(this.direction){case"horizontal":e.left<=this.mouse.x(t)<=e.right&&this._onDrop();break;case"vertical":e.top<=this.mouse.y(t)<=e.bottom&&this._onDrop()}this._removePlaceholder()}}},{key:"_onOver",value:function(t){if(this.before=!1,this.after=!1,this._getReference(),this.siblings.next&&this.siblings.next.hasAttribute("data-sortable-drop")){var e=this.siblings.next.getBoundingClientRect();switch(this.direction){case"horizontal":this.dragged.rect().right>e.left+e.width/1.5&&(this.after=!0,this._addPlaceholder(this.siblings.next));break;case"vertical":this.dragged.rect().bottom>e.top+e.height/1.5&&(this.after=!0,this._addPlaceholder(this.siblings.next))}}if(this.siblings.prev&&this.siblings.prev.hasAttribute("data-sortable-drop")){var n=this.siblings.prev.getBoundingClientRect();switch(this.direction){case"horizontal":this.dragged.rect().left<n.right-n.width/1.5&&(this.before=!0,this._addPlaceholder(this.siblings.prev));break;case"vertical":this.dragged.rect().top<n.bottom-n.height/1.5&&(this.before=!0,this._addPlaceholder(this.siblings.prev))}}}},{key:"_onDrop",value:function(){var t=this.placeholder();this._addEventListenerToItem(this.dragged.clone),this.dragged.clone.querySelector("[data-player-audio]")&&C.addEventListeners(this.dragged.clone,this.showFeedback),this.container.insertBefore(this.dragged.clone,t),this.dragged.el.parentNode.removeChild(this.dragged.el),this.showFeedback()}},{key:"_update",value:function(){this.dragged.el.style.transform="translate3d(".concat(this.mouse.x1,"px, ").concat(this.mouse.y1,"px, 0) rotate(5deg)")}},{key:"_addPlaceholder",value:function(t){this._removePlaceholder();var e=document.createElement("div");if(e.classList.add("sortable-item","sortable-placeholder"),e.setAttribute("id","sortable-placeholder"),e.style.minHeight="".concat(this.dragged.size.height,"px"),this.dragged.el.querySelector("img")){var n=this.dragged.el.querySelector("img").getAttribute("src"),a=document.createElement("img");a.setAttribute("src",n),e.appendChild(a)}this.after?this.container.insertBefore(e,t.nextElementSibling):(this.before,this.container.insertBefore(e,t))}},{key:"_removePlaceholder",value:function(){var t=this.placeholder();t&&t.parentNode.removeChild(t)}},{key:"_getReference",value:function(){var t=this.placeholder();this.siblings.prev=t.previousElementSibling===this.dragged.el?this.dragged.el.previousElementSibling:t.previousElementSibling,this.siblings.next=t.nextElementSibling===this.dragged.el?this.dragged.el.nextElementSibling:t.nextElementSibling}},{key:"_addEventListenerToItem",value:function(t){t.addEventListener("touchstart",this._onStart,!1),t.addEventListener("mousedown",this._onStart,!1)}},{key:"_addEventListeners",value:function(){document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onEnd),document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onEnd);for(var t=0;t<this.items.length;t+=1)this._addEventListenerToItem(this.items[t])}}]),n}(),T=function(){function t(){e(this,t)}return a(t,null,[{key:"start",value:function(t){d3.select(t).raise().classed("is-dragged",!0)}},{key:"dragged",value:function(t,e){d3.select(t).attr("x",(d3.event.x-e.x).toFixed()).attr("y",(d3.event.y-e.y).toFixed())}},{key:"end",value:function(t,e,n){d3.select(t).attr("x",(d3.event.x-n.x).toFixed()).attr("y",(d3.event.y-n.y).toFixed()).classed("is-dragged",!1)}}]),t}(),S=function(){function t(){e(this,t)}return a(t,null,[{key:"renderPath",value:function(t,e){if("image"===d3.event.sourceEvent.target.nodeName){var n=d3.line().curve(d3.curveLinear),a=d3.format(".0f"),i=d3.event.subject,s=a(d3.event.x),o=a(d3.event.y),r="path-".concat(s,"-").concat(o),l=d3.select("#".concat(t.id," .svg-view")).append("svg:path").attr("data-svg-path","").attr("class","svg-path").attr("id",r).datum(i);d3.event.on("drag",function(){var t=a(d3.event.x),e=a(d3.event.y),r=t-s,c=e-o;r*r+c*c>300?i.push([s=t,o=e]):i[i.length-1]=[t,e],l.attr("d",n)}).on("end",function(){var t=d3.select("#".concat(r));t&&(t.attr("d")?t.attr("d").length<40&&t.remove():t.attr("d")||t.remove()),e()}),d3.select("#".concat(r)).on("click",function(){d3.select("#".concat(r)).remove(),d3.event.preventDefault()},!1)}}},{key:"createCircle",value:function(t){var e=d3.select("#".concat(t.id," .svg-view")),n=document.querySelector("#".concat(t.id," .svg-view")),a=p(t),i="circle-".concat(a.x,"-").concat(a.y),s="#".concat(i),o=e.append("svg:foreignObject").attr("data-svg-circle","").attr("id",i).attr("x",a.x).attr("y",a.y).attr("width",1).attr("height",1),r=document.querySelector(s),l=[r.getAttribute("x"),r.getAttribute("y")],c={};o.append("xhtml:div").attr("class","svg-circle").on("click",function(){d3.select(d3.event.target.parentNode).remove()}).call(d3.drag().container(n).subject(r).on("start",function(){c={x:d3.event.x-l[0],y:d3.event.y-l[1]},T.start(s)}).on("drag",function(){T.dragged(s,c)}).on("end",function(){T.end(s,"circle",c),l=[r.getAttribute("x"),r.getAttribute("y")]}))}}]),t}(),L=function(){function t(){e(this,t)}return a(t,null,[{key:"createText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:333,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=document.querySelector('[data-svg-active="true"]'),i=a.id,s=d3.select(a).select(".svg-view"),o=a.querySelector(".svg-view"),r=document.querySelector("[data-radial-menu]"),l={x:r.getAttribute("data-local-x"),y:r.getAttribute("data-local-y")},c="svg-text-".concat(l.x,"-").concat(l.y),d="#".concat(c),u={x:s.attr("width")-l.x>320?"right":"left",y:s.attr("height")-l.y>60?"bottom":"top"},h=s.append("svg:foreignObject").attr("class","svg-text orientation-".concat(u.x," orientation-").concat(u.y)).attr("data-svg-text","").attr("x",l.x).attr("y",l.y).attr("width",1).attr("height",1);h.append("xhtml:div").attr("class","svg-circle svg-circle-text");h.append("xhtml:textarea").attr("maxlength",e).attr("tabindex","-1").attr("id",c).attr("class","svg-textarea").attr("data-save","").attr("data-svg-textarea-target",i);document.querySelector("".concat(d)).focus();var g=document.querySelector(d).parentNode,m=[g.getAttribute("x"),g.getAttribute("y")],v={};d3.select("".concat(d)).call(d3.drag().container(o).subject(g).on("start",function(){v={x:d3.event.x-m[0],y:d3.event.y-m[1]},T.start(g)}).on("drag",function(){T.dragged(g,v)}).on("end",function(){T.end(g,"text",v),m=[g.getAttribute("x"),g.getAttribute("y")]})).on("keyup",function(){t.updateTextareaHeight(d3.event.target)}).on("blur",function(){var t=d3.event.target,e=t.value;0!==e.length?e.length<n?k(t,"is-wrong"):e.length>=n&&w(t,"is-wrong")&&x(t,"is-wrong"):SVG.removeItem(d)}).on("focus",function(){d3.select(g).raise()})}},{key:"updateTextareaHeight",value:function(t){t.style.height="1px",t.style.height="".concat(22+t.scrollHeight,"px")}}]),t}(),$=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).init(),a}return s(n,u),a(n,[{key:"init",value:function(){for(var t=this.target.getAttribute("data-svg-target").split(" "),e=0;e<t.length;e+=1)"kresleni"===t[e]?this._initPath(this.showFeedback):"znacky"===t[e]&&this._initCircle(this.showFeedback);this._setSize(),this._initComicBubbles()}},{key:"_setSize",value:function(){var t=this.target.getAttribute("viewBox").split(" "),e=this.target.getBoundingClientRect().height/t[3];this.target.style.maxWidth="".concat(t[2]*e,"px")}},{key:"_initPath",value:function(t){var e=this;d3.select(this.target).call(d3.drag().container(function(){return e.target}).subject(function(){var t=[d3.event.x.toFixed(),d3.event.y.toFixed()];return[t,t]}).on("start",function(){S.renderPath(e.target,t)}))}},{key:"_initCircle",value:function(t){var e=this;d3.select(this.target).on("click",function(){"image"===d3.event.target.nodeName&&(S.createCircle(e.target),t(),d3.event.preventDefault())},!1)}},{key:"_initComicBubbles",value:function(){var t=this.target.querySelectorAll(".svg-komiks .svg-textarea");t&&d3.selectAll(t).on("keyup",function(){L.updateTextareaHeight(d3.event.target)})}}],[{key:"selectItem",value:function(t){t.setAttribute("data-svg-selected","true")}},{key:"deselectItem",value:function(){for(var t=document.querySelectorAll('[data-svg-selected="true"]'),e=0;e<t.length;e+=1)t[e].setAttribute("data-svg-selected","false")}},{key:"removeItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-svg-selected="true"]',e=document.querySelector(t).parentNode;"foreignObject"===e.nodeName?d3.select(e).remove():d3.select(t).remove()}},{key:"deactivate",value:function(){for(var t=document.querySelectorAll('[data-svg-active="true"]'),e=0;e<t.length;e+=1)t[e].setAttribute("data-svg-active","false")}},{key:"activate",value:function(t){n.deactivate(),t.setAttribute("data-svg-active","true")}}]),n}(),M=function(){function t(n,a){e(this,t),this.$radialMenu=n,this.$radialMenuItems=this.$radialMenu.querySelectorAll("[data-radial-menu-item]"),this.$colorItems=this.$radialMenu.querySelectorAll(".radial-menu-color"),this.$textItems=this.$radialMenu.querySelectorAll(".radial-menu-text"),this.$createTextItem=this.$radialMenu.querySelector("#create-text"),this.$removeItem=this.$radialMenu.querySelector("#remove-content"),this.$tooltip=this.$radialMenu.querySelector("[data-radial-menu-tooltip]"),this.$svgs=a,this.initialSetUp=!0,this.menuRadius=parseInt(window.getComputedStyle(this.$radialMenu.querySelector(".radial-menu-wrapper"),null).getPropertyValue("width"),10)/2,this.itemRadius=parseInt(window.getComputedStyle(this.$radialMenu.querySelector(".radial-menu-item"),null).getPropertyValue("width"),10)/2,this.init()}return a(t,[{key:"init",value:function(){var t=this;this.setUpRadialMenuItems(),this.addEventListenersToRadialMenu(),Array.from(this.$svgs).forEach(function(e){d3.select(e).on("contextmenu",function(){$.activate(e),$.deselectItem(),t.filterMenuButtons(d3.event.target),t.showRadialMenu(e,d3.event),d3.event.preventDefault()})}),this.initialSetUp=!1}},{key:"setUpRadialMenuItems",value:function(){var t=this;Array.from(this.$radialMenuItems).forEach(function(e){t.addEventListenersToRadialMenuItem(e)})}},{key:"positionRadialMenuItems",value:function(t){var e=t.length,n=this.menuRadius,a=this.itemRadius,i=n-a,s=.6283185307*e/2-.31415926535;Array.from(t).forEach(function(t,e){var a=Math.PI+.6283185307*e*-1+s,o=n*Math.sin(a)+i,r=n*Math.cos(a)+i;t.style.left="".concat(o.toFixed(1),"px"),t.style.top="".concat(r.toFixed(1),"px")})}},{key:"addEventListenersToRadialMenu",value:function(){var t=this;this.onMouseLeave(),this.$radialMenu.addEventListener("click",function(e){t.hideRadialMenu(t.$radialMenu),e.preventDefault()}),this.$radialMenu.addEventListener("contextmenu",function(e){t.hideRadialMenu(t.$radialMenu),e.preventDefault()})}},{key:"addEventListenersToRadialMenuItem",value:function(e){var n=this,a=e,i=a.getAttribute("data-radial-menu-item");"remove-content"===i?a.addEventListener("click",function(){$.removeItem(),n.hideRadialMenu()},!1):"create-text"===i?d3.select(a).on("click",function(){L.createText(),n.hideRadialMenu()},!1):"color-point-blue"===i?a.addEventListener("click",function(){t.changeColor("blue"),n.hideRadialMenu()},!1):"color-point-red"===i?a.addEventListener("click",function(){t.changeColor("red"),n.hideRadialMenu()},!1):"color-point-red"===i&&a.addEventListener("click",function(){t.changeColor("red"),n.hideRadialMenu()},!1),a.addEventListener("mouseenter",function(t){n.$tooltip.innerHTML=t.currentTarget.getAttribute("data-radial-menu-item-tooltip"),n.$tooltip.style.display="block"},!1),a.addEventListener("mouseleave",function(){n.$tooltip.innerHTML="",n.$tooltip.style.display="none"},!1)}},{key:"showRadialMenu",value:function(t,e){var n=t||document.querySelector('[data-svg-active="true"]'),a=function(t){return{x:t.pageX,y:t.pageY}}(e),i=p(n);this.$radialMenu.setAttribute("data-local-x",i.x),this.$radialMenu.setAttribute("data-local-y",i.y),this.$radialMenu.style.top="".concat(a.y-7,"px"),this.$radialMenu.style.left="".concat(a.x-7,"px");var s=this.$radialMenu.querySelectorAll(".is-active");this.positionRadialMenuItems(s),k(this.$radialMenu,"is-active")}},{key:"hideRadialMenu",value:function(){var t=this;x(this.$radialMenu,"is-active"),$.deactivate(),$.deselectItem(),setTimeout(function(){w(t.$radialMenu,"is-active")||Array.from(t.$radialMenuItems).forEach(function(t){x(t,"is-active")})},150)}},{key:"onMouseLeave",value:function(){var t,e=this;this.$radialMenu.addEventListener("mouseleave",function(){t=setTimeout(function(){e.hideRadialMenu(e.$radialMenu)},500)}),this.$radialMenu.addEventListener("mouseenter",function(){clearTimeout(t)})}},{key:"filterMenuButtons",value:function(t){(w(t,"svg-path")||"path"===t.nodeName)&&(k(this.$createTextItem,"is-active"),Array.from(this.$colorItems).forEach(function(t){k(t,"is-active")}),Array.from(this.$textItems).forEach(function(t){x(t,"is-active")})),w(t,"svg-circle")&&(k(this.$createTextItem,"is-active"),Array.from(this.$colorItems).forEach(function(t){k(t,"is-active")}),Array.from(this.$textItems).forEach(function(t){x(t,"is-active")})),w(t,"svg-textarea")&&(x(this.$createTextItem,"is-active"),w(t,"do-not-remove")||(Array.from(this.$colorItems).forEach(function(t){x(t,"is-active")}),Array.from(this.$textItems).forEach(function(t){k(t,"is-active")}))),"image"===t.nodeName?(k(this.$createTextItem,"is-active"),x(this.$removeItem,"is-active"),Array.from(this.$colorItems).forEach(function(t){x(t,"is-active")}),Array.from(this.$textItems).forEach(function(t){x(t,"is-active")})):(w(t,"do-not-remove")?x(this.$removeItem,"is-active"):k(this.$removeItem,"is-active"),$.selectItem(t))}}],[{key:"changeColor",value:function(t){var e=document.querySelector('[data-svg-selected="true"]');x(e,"red blue"),k(e,t)}}]),t}(),N=function(){function t(){e(this,t),this._events=[]}return a(t,[{key:"on",value:function(t,e){var n=this;(t=this._split(t)).forEach(function(t){n._events[t]||(n._events[t]=[]),n._events[t].push(e)})}},{key:"off",value:function(t,e){var n=this;(t=this._split(t)).forEach(function(t){n._events[t]&&(n.events[t]=n._events[t].filter(function(t){return t!==e}))})}},{key:"trigger",value:function(t,e){var n=this;(t=this._split(t)).forEach(function(t){n._events[t]&&n._events[t].forEach(function(a){a.call(n,t,e)})})}},{key:"_split",value:function(t){return t.replace(/^\s+|\s+$/g,"").split(/\s+/)}}]),t}(),I={editor:{id:"editor",ADD_TAG:"editor:ADD_TAG",DELETE_TAG:"editor:DELETE_TAG",UPDATE_TAG:"editor:UPDATE_TAG",CHANGE:"editor:CHANGE"},keywords:{id:"keywords",CHANGE:"keywords:CHANGE"},testQuiz:{id:"testQuiz",ADD_ANSWER:"testQuiz:ADD_ANSWER",REMOVE_ANSWER:"testQuiz:REMOVE_ANSWER",UPDATE_ANSWER:"testQuiz:UPDATE_ANSWER",CHANGE:"testQuiz:CHANGE"},textOptions:{id:"textOptions",ADD:"textOptions:ADD",DELETE:"textOptions:DELETE",UPDATE:"textOptions:UPDATE",CHANGE:"textOptions:CHANGE"},store:{id:"store",ADD:"ADD",DELETE:"DELETE",UPDATE:"UPDATE",CHANGE:"CHANGE"}},R=new(function(t){function n(){var t;return e(this,n),(t=c(this,o(n).call(this)))._data={},t._data.tags=[],t}return s(n,N),a(n,[{key:"_checkTagExists",value:function(t){var e=!1;return this._data.tags.forEach(function(n,a){n.id===t&&(e={item:n,index:a})}),e}},{key:"addTag",value:function(t){if(0!==this._data.tags.length&&this._checkTagExists(t.id))throw new Error("Tag already exists! Will not add it.");void 0===t.data.userSelectedNodeItems&&(t.data.userSelectedNodeItems=[]),this._data.tags.push(t),R.trigger(I.editor.CHANGE,{action:{id:I.editor.id,type:I.editor.ADD_TAG,data:{tagContainer:t}}})}},{key:"deleteTag",value:function(t){var e=this._checkTagExists(t.id);if(!1!==e)return this._data.tags.splice(e.index,1),R.trigger(I.editor.CHANGE,{action:{id:I.editor.id,type:I.editor.DELETE_TAG,data:{tagContainer:{editorId:t.editorId,id:t.id,tagName:t.tagName,data:{}}}}}),!0;throw new Error("Tag does not exist! Will not delete it.")}},{key:"getAllTags",value:function(t){return void 0!==t&&t.editorId?this._data.tags.filter(function(e){return e.editorId===t.editorId}):this._data.tags}},{key:"getTagsBy",value:function(t){return void 0!==t&&(-1!==["editorId","id","tagName"].indexOf(t.key)&&(Array.isArray(t.value)||(t.value=[t.value]),this._data.tags.filter(function(e){return e[t.key]===t.value[0]||e[t.key]===t.value[1]})))}},{key:"getLastTag",value:function(t){if(void 0===t||!t.editorId)return this._data.tags[this._data.tags.length-1];var e=this._data.tags.filter(function(e){return e.editorId===t.editorId});return e[e.length-1]}}]),n}()),D=new(function(t){function n(){var t;return e(this,n),(t=c(this,o(n).call(this)))._data=[],t}return s(n,N),a(n,[{key:"_checkExists",value:function(t){var e=!1;return this._data.forEach(function(n,a){n.id===t&&(e={item:n,index:a})}),e}},{key:"add",value:function(t){if(0!==this._data.length&&this._checkExists(t.id))throw new Error("Object already exists! Will not add it.");this._data.push(t),D.trigger(I.textOptions.id,{action:{type:I.textOptions.ADD},data:t})}},{key:"delete",value:function(t){var e=this._checkExists(t.id);if(!1!==e)return this._data.splice(e.index,1),D.trigger(I.textOptions.id,{action:{type:I.textOptions.DELETE},data:t}),!0;throw new Error("Tag does not exist! Will not delete it.")}},{key:"getAll",value:function(t){return void 0!==t&&t.editor?this._data.filter(function(e){return e.id===t.id}):this._data}},{key:"getBy",value:function(t){return void 0!==t&&-1!==["id"].indexOf(t.key)&&(Array.isArray(t.value)||(t.value=[t.value]),this._data.filter(function(e){return e[t.key]===t.value[0]||e[t.key]===t.value[1]}))}},{key:"getLast",value:function(t){if(void 0===t||!t.editor)return this._data[this._data.length-1];var e=this._data.filter(function(e){return e.id===t.id});return e[e.length-1]}}]),n}()),B=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$editor=a.target,a.id=a.$editor.id,a.settings=JSON.parse(document.querySelector('[data-editor-id-reference="'.concat(a.id,'"]')).getAttribute("data-module-settings")),a.opts=function t(e,n){var a=Object.assign({},e);return g(e)&&g(n)&&Object.keys(n).forEach(function(s){g(n[s])&&s in e?a[s]=t(e[s],n[s]):Object.assign(a,i({},s,n[s]))}),a}(n.defaults,a.settings),a.models={passive:["cteni"],interactive:["predznaceny","zvyraznovani","komentáře","psani"],withMenu:["predznaceny","zvyraznovani","komentáře"]},a.totalTagId=0,a.hasMenu=!0,a.selection=null,a.lastSelectionSettings={},a.isCollapsed=null,a.savedSelectionRange=null,a.selectionAttributes=null,a.dummyRangeElement=null,a.selectionMouseDown=!1,a.selectionDirection=null,a.hasEditableContentChanged=!1,a.lastPressedKey=null,a.hasToolbar=!1,a.toolbar={},a.originalContent={},a.currentContent={},a._handlers=[],a.wrapLastDeletesTimeoutClass="",a.wrapLastDeletesTimeoutFunction=function(){},a.wrapLastAdditionsTimeoutClass="",a.wrapLastAdditionsTimeoutFunction=function(){},a.isWrappingLastText=!1,a.isWriting=!1,a.$groupDeleted=null,a.cache={body:document.body,window:window},a.init(),a}return s(n,u),a(n,[{key:"init",value:function(){if(n._hasMenu(this.opts))try{this.$menu=this.$editor.getElementsByClassName(this.opts.menuClass)[0],this.$menuActions=this.$menu.getElementsByClassName("menu")[0].getElementsByClassName("menu-item"),this.$menuClose=this.$menu.getElementsByClassName("close")[0]}catch(t){this.hasMenu=!1}else this.hasMenu=!1;n._hasToolbar(this.opts)&&(this.hasToolbar=!0),this.$canvas=this.$editor.getElementsByClassName(this.opts.canvasClass)[0],"cteni"!==this.opts.funkce&&(k(this.$menu,"hidden"),"psani"===this.opts.funkce&&(this.originalContent.html=this.$canvas.innerHTML,this.originalContent.text=this.$canvas.innerText,this.currentContent.html=this.$canvas.innerHTML,this.currentContent.text=this.$canvas.innerText,this.wrapLastDeletesTimeoutClass=this._generateNewTagGroupClass(),this.wrapLastAdditionsTimeoutClass=this._generateNewTagGroupClass()),this.hasToolbar&&(this.toolbar.$element=this.$editor.getElementsByClassName("editor-toolbar")[0],this.toolbar.$btnReset=this.toolbar.$element.getElementsByClassName("editor-toolbar-action-reset")[0]),this.registerEditableHandlers()),"predznaceny"===this.opts.funkce&&this.initPreHighlightedTextOptions()}},{key:"_generateNewTagId",value:function(){return this.totalTagId=this.totalTagId+1,"".concat(this.id,"-").concat(this.totalTagId)}},{key:"_generateNewTagGroupClass",value:function(){return this.totalTagId=this.totalTagId+1,"group-".concat(this.id,"-").concat(this.totalTagId)}},{key:"registerEditableHandlers",value:function(){var t=this;this.$canvas.addEventListener("mousedown",this.handlerFocus.bind(this),!1),this.$canvas.addEventListener("focusout ",this.handlerFocus.bind(this),!1),this.cache.body.addEventListener("mouseup",this.handlerFocus.bind(this),!1),"psani"===this.opts.funkce&&this.$canvas.addEventListener("keydown",function(e){var n,a=window.getSelection(),i=e.which||e.keyCode,s=e.key;if(t.showFeedback(),"Backspace"===s||"Delete"===s){if(a.rangeCount){window.clearTimeout(t.wrapLastDeletesTimeoutFunction);var o=a.getRangeAt(0),r=o.cloneRange();if(t.lastSelectionSettings.isCollapsed)try{r.setStart(o.startContainer,o.startOffset-1)}catch(e){r.setStart(o.startContainer,o.startOffset),r.collapse(!0)}else r.setStart(o.startContainer,o.startOffset);r.setEnd(o.endContainer,o.endOffset);var l=r.cloneContents().textContent.trim();if(""!==l&&"&nbsp;"!==l||t.isWrappingLastText){var c=document.createElement("span");c.className="user-removed-text-inner ".concat(t.wrapLastDeletesTimeoutClass),r.surroundContents(c),a.removeAllRanges(),a.addRange(o),t.wrapLastDeletesTimeoutFunction=setTimeout(function(){t.isWrappingLastText=!1;var e=document.createElement("span");e.contentEditable=!1,e.className="user-removed-text";var n=t._generateNewTagId();e.id=n;var a=Array.from(document.getElementsByClassName(t.wrapLastDeletesTimeoutClass));m(e,a[0]),a.forEach(function(t,n){e.appendChild(t)});var i=document.createElement("span");i.className=t.opts.closeBtnClass;i.addEventListener("click",function(e){var n=e.currentTarget.parentNode;t._removeNodeKeepTextContent(n),e.stopPropagation()}.bind(t)),document.getElementById(n).appendChild(i),t.wrapLastDeletesTimeout=!0,t.wrapLastDeletesTimeoutClass=t._generateNewTagGroupClass()},700),t.isWrappingLastText=!0,e.preventDefault()}else{if(!t.isWrappingLastText)return;e.preventDefault()}}}else if((n=i)>47&&n<58||32==n||13==n||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223)if(t.lastSelectionSettings.isCollapsed){if(32===i){if(!t.isWrappingLastText)return;s=" "}if(a.rangeCount){window.clearTimeout(t.wrapLastAdditionsTimeoutFunction);var d=a.getRangeAt(0),u=d.cloneRange();u.setStart(d.startContainer,d.startOffset),u.setEnd(d.endContainer,d.endOffset);var h=document.createElement("span");h.contentEditable=!1,h.className="user-inserted-text-inner ".concat(t.wrapLastAdditionsTimeoutClass),h.innerHTML=s,u.insertNode(h),d.setStartAfter(h),a.removeAllRanges(),a.addRange(d),t.wrapLastAdditionsTimeoutFunction=setTimeout(function(){t.isWrappingLastText=!1;var e=document.createElement("span");e.contentEditable=!1,e.className="user-inserted-text";var n=t._generateNewTagId();e.id=n;var a=Array.from(document.getElementsByClassName(t.wrapLastAdditionsTimeoutClass));m(e,a[0]),a.forEach(function(t,n){e.appendChild(t)});var i=document.createElement("span");i.className=t.opts.closeBtnClass;i.addEventListener("click",function(t){v(t.currentTarget.parentNode),t.stopPropagation()}.bind(t)),document.getElementById(n).appendChild(i),t.wrapLastAdditionsTimeoutClass=t._generateNewTagGroupClass()},700),t.isWrappingLastText=!0}!1===t.hasEditableContentChanged&&(t.hasEditableContentChanged=!0),e.preventDefault()}else{window.clearTimeout(t.wrapLastAdditionsTimeoutFunction);var g=a.getRangeAt(0),f=g.cloneRange();if(f.setStart(g.startContainer,g.startOffset),f.setEnd(g.endContainer,g.endOffset),!1===t.isWriting&&a.toString().length>0){t.$groupDeleted=document.createElement("span"),t.$groupDeleted.contentEditable=!1,t.$groupDeleted.className="user-removed-text";var p=t._generateNewTagId();t.$groupDeleted.id=p;var y=document.createElement("span");y.className="user-removed-text-inner",t.$groupDeleted.appendChild(y),f.surroundContents(t.$groupDeleted);var b=document.createElement("span");b.className=t.opts.closeBtnClass;b.addEventListener("click",function(e){var n=e.currentTarget.parentNode;t._removeNodeKeepTextContent(n),e.stopPropagation()}.bind(t)),t.$groupDeleted.appendChild(b)}t.isWriting=!0;var E=document.createElement("span");E.contentEditable=!1,E.className="user-inserted-text-inner ".concat(t.wrapLastAdditionsTimeoutClass),E.innerHTML="".concat(s),m(E,t.$groupDeleted),g.setStartAfter(E),a.removeAllRanges(),a.addRange(g),t.wrapLastAdditionsTimeoutFunction=setTimeout(function(){t.isWriting=!1;var e=document.createElement("span");e.contentEditable=!1,e.className="user-inserted-text";var n=t._generateNewTagId();e.id=n;var a=Array.from(document.getElementsByClassName(t.wrapLastAdditionsTimeoutClass));m(e,a[0]),a.forEach(function(t,n){e.appendChild(t)});var i=document.createElement("span");i.className=t.opts.closeBtnClass;i.addEventListener("click",function(t){v(t.currentTarget.parentNode),t.stopPropagation()}.bind(t)),document.getElementById(n).appendChild(i),t.wrapLastAdditionsTimeoutClass=t._generateNewTagGroupClass()},700),e.preventDefault()}}),this.hasMenu&&this.registerMenuHandler(),this.hasToolbar&&this.toolbar.$btnReset.addEventListener("click",function(){confirm("Opravdu chcete vrátit text do původní podoby? Vaše změny se tímto ztratí.")&&(t.$canvas.innerHTML=t.originalContent.html)})}},{key:"registerMenuHandler",value:function(){for(var t=0,e=this.$menuActions.length;t<e;t+=1)this.$menuActions[t].addEventListener("click",this.handlerMenuActions.bind(this),!1);this.$menuClose.addEventListener("click",this.handlerMenuClose.bind(this),!1)}},{key:"initPreHighlightedTextOptions",value:function(){var t=this;this.$textOptionsElements=this.$editor.querySelectorAll("[".concat("data-text-option","]")),Array.from(this.$textOptionsElements).forEach(function(e){e.addEventListener("click",function(){E(e,t.opts.textOptions.selectedClass),w(e,t.opts.textOptions.selectedClass)?D.add({editor:t.id,id:e.id,tag:e,data:JSON.parse(e.getAttribute("data-text-option"))}):D.delete({editor:t.id,id:e.id}),t.showFeedback()})})}},{key:"toggleMenu",value:function(){!0!==(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!0!==this.selectionMouseDown?w(this.$menu,"hidden")&&!1===this.selectionMouseDown&&(this._setmenuDimensions(),x(this.$menu,"hidden")):k(this.$menu,"hidden")}},{key:"_setmenuDimensions",value:function(){var t,e,n=function(t){var e,n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.cloneNode(!0);i.style.visibility="hidden",i.style.display="block",e=i,(n=t).parentNode.insertBefore(e,n.nextSibling);var s=i.getBoundingClientRect(),o=a?y(i):b(i);return v(i),{width:s.width,height:s.height,top:o.top,left:o.left}}(this.$menu),a=y(this.$editor),i=b(this.$editor),s=this.selectionAttributes.left+this.selectionAttributes.width+n.width+this.opts.menuMargin.x>a.left+i.width,o=this.selectionAttributes.top-n.height-this.opts.menuMargin.y<a.top;this.selectionAttributes.top,this.selectionAttributes.height,n.height,this.opts.menuMargin.y,a.top,i.height;t=s?this.selectionAttributes.left-n.width-this.opts.menuMargin.x:this.selectionAttributes.left+this.selectionAttributes.width+this.opts.menuMargin.x,e=o?this.selectionAttributes.top+n.height+this.opts.menuMargin.y:this.selectionAttributes.top-n.height-this.opts.menuMargin.y,this.$menu.style.left="".concat(t,"px"),this.$menu.style.top="".concat(e,"px")}},{key:"handlerMenuClose",value:function(t){this.toggleMenu(!0),t.preventDefault()}},{key:"handlerMenuActions",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-command"),a=e.getAttribute("data-command-name"),i=JSON.parse(e.getAttribute("data-command-options"));this.setSelection(n,a,i),t.preventDefault()}},{key:"handlerFocus",value:function(t){3===t.which||w(t.target,"node-close")||w(t.target,"node-selected")||("mousedown"===t.type&&(this.selectionMouseDown=!0,!0===this.hasMenu&&this.toggleMenu()),"mouseup"===t.type&&this.selectionMouseDown&&(this.lastSelectionSettings={},this.selection=window.getSelection(),this.isCollapsed=this.lastSelectionSettings.isCollapsed=this.selection.isCollapsed,this.savedSelectionRange=this.selection.getRangeAt(0),this.selectionMouseDown=!1,this.lastSelectionSettings.anchorOffset=this.selection.anchorOffset,this.lastSelectionSettings.focusOffset=this.selection.focusOffset,this.lastSelectionSettings.text=this.savedSelectionRange.toString(),!1===this.selection.isCollapsed&&""!==this.savedSelectionRange.toString().trim()&&(this.selectionDirection=this.selection.anchorOffset<=this.selection.focusOffset?"right":"left",!0===this.hasMenu&&(this._setSelectionPosition(),this.toggleMenu()))))}},{key:"_setSelectionPosition",value:function(){var t=document.createElement("span");t.className="dummy-range-element",this.savedSelectionRange.surroundContents(t);var e=y(t),n=b(t);this.selectionAttributes={left:e.left,top:e.top,width:n.width,height:n.height},x(t,"dummy-range-element"),this._removeNodeKeepTextContent(t)}},{key:"_extractAndSaveContents",value:function(t){t.appendChild(this.savedSelectionRange.extractContents()),this.savedSelectionRange.insertNode(t);var e=t.getAttribute("data-command-name"),n=this._generateNewTagId();t.setAttribute("data-tag-id",n),R.addTag({editor:this.id,id:n,tag:t,tagName:e,data:{}})}},{key:"_removeNodeKeepTextContent",value:function(t){var e=t.textContent;t.parentNode.insertBefore(document.createTextNode(e),t),v(t)}},{key:"_createCloseBtnForElement",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElement("span");a.setAttribute("class",n.class);n.toggleClass.split(" ");a.addEventListener("click",function t(n){var a=n.currentTarget,i=a.parentNode;a.removeEventListener("click",t),i.removeChild(a),void 0!==i.commentRef&&(e.$editor.removeChild(i.commentRef),i.commentRef=null),e._removeNodeKeepTextContent(i);var s=i.getAttribute("data-command-name");R.deleteTag({editor:e.id,id:i.getAttribute("data-tag-id"),tag:i,tagName:s,data:{}}),n.stopPropagation()}.bind(this)),t.appendChild(a)}},{key:"_calculateCommentPosition",value:function(t){var e=y(t);return{left:"".concat(e.left+parseInt(t.offsetWidth,10)+this.opts.commentMargin.x,"px"),top:"".concat(e.top+this.opts.commentMargin.y,"px")}}},{key:"_createCommentForNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById("comment-template").innerHTML,a=document.createElement("div");a.innerHTML=n;var i=a.childNodes[1];i.data={},i.data.nodeRef=t;var s=i.getElementsByClassName("comment-new-text")[0],o=i.getElementsByTagName("button")[0],r=i.getElementsByClassName("comments-container")[0],l=this._calculateCommentPosition(t);i.style.left=l.left,i.style.top=l.top,k(i,e.class),i.addEventListener("click",function(e){w(e.target,"close")&&(k(i,"hidden"),x(t,"active"))}),o.addEventListener("click",function(t){if(""!==s.value){var e=document.createElement("div");e.className="comment-item",e.innerText=s.value,r.appendChild(e),s.value=""}}),this.$editor.append(i),k(t,"comment-created"),t.commentRef=i}},{key:"_addCommentHandlerForElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(t,"has-comments"),t.addEventListener("click",function(n){if(!w(n.target,"node-close")){if(w(t,"comment-created")){var a=this._calculateCommentPosition(t);t.commentRef.style.left=a.left,t.commentRef.style.top=a.top,x(t.commentRef,"hidden")}else this._createCommentForNode(t,e);w(t,"active")?(x(t,"active"),k(t.commentRef,"hidden")):k(t,"active")}n.stopPropagation()}.bind(this))}},{key:"setSelection",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.selection){if("toggle-class"===t){var a=document.createElement("span");a.setAttribute("class",n.toggleClass),a.setAttribute("data-command-name",e),!0===n.closeBtn&&this._createCloseBtnForElement(a,{class:"node-close",toggleClass:n.toggleClass}),!0===n.comments&&this._addCommentHandlerForElement(a,{class:n.commentsClass}),this._extractAndSaveContents(a),!0===n.showCommentsOnInit&&a.click()}this.toggleMenu(!0),this.showFeedback()}}}]),n}();B.defaults={menuClass:"contextual-menu-component",canvasClass:"canvas",resetBtnClass:"reset",closeBtnClass:"node-close",nodeSelectedClass:"node-selected",commentMargin:{x:50,y:0},menuMargin:{x:15,y:15},textOptions:{enable:!1,animatedClass:"active",selectedClass:"selected",deselectedClass:"deselected"}},B._hasMenu=function(t){return"cteni"!==t.funkce&&"psani"!==t.funkce&&!1!==t.menu&&void 0!==t.menu},B._hasToolbar=function(t){return"psani"===t.funkce||!1!==t.toolbar&&void 0!==t.toolbar};var q=function(t){function n(t,a,i){var s;return e(this,n),(s=c(this,o(n).call(this,a))).id=t,s.opts=Object.assign({},n.defaults,i),s.isAdvanced=s.opts.isAdvanced,s.rowIndex=0,s.tableResult=s.target.getElementsByClassName("table-result")[0],s.tableResultBody=s.tableResult.getElementsByClassName("table-body")[0],s.tableSelectedItems=s.target.getElementsByClassName("table-selected-items")[0],s.tableSelectedItemsBody=s.tableSelectedItems.getElementsByClassName("table-body")[0],s.activeDragged=null,s._getRowHTML=s.isAdvanced?n._getAdvancedRowHTML:n._getRowHTML,s}return s(n,u),a(n,[{key:"init",value:function(){this._registerStoreHandlers(this.tableResultBody,this.tableSelectedItemsBody),this._registerHandlers()}},{key:"_registerStoreHandlers",value:function(t,e){var n=this;R.on(I.editor.CHANGE,function(a,i){var s,o,r=i.action;switch(r.type){case I.editor.ADD_TAG:switch((s=r.data.tagContainer).tagName){case n.opts.casti[1].sloupce[0].tag:if(t.insertAdjacentHTML("beforeend",n._getRowHTML(f(s.tag),s.id)),!n.opts.letSecondCaseRunIfSame&&n.opts.casti[1].sloupce[0].tag!==n.opts.casti[1].sloupce[1].tag)break;case n.opts.casti[1].sloupce[1].tag:(o=s.tag.cloneNode(!0)).setAttribute("draggable",!0),o.addEventListener("click",n._handlerDraggable.bind(n),!1),o.addEventListener("dragstart",n._handlerDraggable.bind(n),!1),o.addEventListener("dragend",n._handlerDraggable.bind(n),!1),o.addEventListener("drag",n._handlerDraggable.bind(n),!1),e.appendChild(o)}break;case I.editor.DELETE_TAG:s=r.data.tagContainer,Array.prototype.forEach.call(document.querySelectorAll('[data-tag-id="'.concat(s.id,'"]')),function(t){w(t.parentNode,"cell-read-only")?v(t.parentNode.parentNode):v(t)})}})}},{key:"_registerHandlers",value:function(){this.target.addEventListener("dragover",this._handlerDrop.bind(this),!1),this.target.addEventListener("dragleave",this._handlerDrop.bind(this),!1),this.target.addEventListener("drop",this._handlerDrop.bind(this),!1)}},{key:"_handlerDraggable",value:function(t){return"dragstart"===t.type&&(t.dataTransfer.setData("text/plain","node"),t.dataTransfer.dropEffect="",t.target.style.opacity=.5,this.activeDragged=t.target.cloneNode(!0)),"dragend"===t.type&&(t.target.style.opacity=1,this.showFeedback()),!1}},{key:"_handlerDrop",value:function(t){return w(t.target,"dashboard-canvas-widget-content")&&("dragover"===t.type&&(t.preventDefault(),t.dataTransfer.dropEffect="",t.target.style.background="#eee"),"dragleave"===t.type&&(t.target.style.background="#fff"),"drop"===t.type&&(t.preventDefault(),t.target.style.background="#fff",this.activeDragged.style.opacity=1,this.activeDragged.addEventListener("click",function(t){w(t.target,"node-close")&&t.target.parentNode.remove()}),t.target.appendChild(this.activeDragged))),!1}}]),n}();q.defaults={isAdvanced:!1},q._getRowHTML=function(t){return'\n    <div class="table-row">\n      <div class="cell cell-read-only cell-border-right">'.concat(t,'</div>\n      <div class="cell dashboard-canvas-widget-content"></div>\n    </div>\n  ')},q._getAdvancedRowHTML=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return'\n    <div class="table-row">\n      <div class="cell cell-read-only cell-border-right">'.concat(t,'</div>\n      <div class="cell dashboard-canvas-widget-content cell-border-right"></div>\n      <div class="cell table-input">\n        <input id="table-akteri-vztahy-input-').concat(e,'" data-input-target="" data-save="value" type="text" placeholder="Vztah aktérů…" tabindex="-1">\n      </div>\n    </div>\n  ')};var z=new(function(t){function n(){var t;return e(this,n),(t=c(this,o(n).call(this)))._data={},t}return s(n,N),a(n,[{key:"change",value:function(t,e,n){this._data[t]||(this._data[t]={}),this._data[t].items=e,this._data[t].itemsHTML=n,z.trigger(I.keywords.CHANGE,{action:{id:I.keywords.id,type:I.keywords.CHANGE,data:{keywordsId:t,newItems:e,newItemsHTML:n}}})}},{key:"export",value:function(){return this._data}}]),n}()),H=function(t){function n(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,n),(a=c(this,o(n).call(this,t))).id=a.target.id,a.function=a.target.getAttribute("data-keywords")||"selekce",a.$controls=Array.from(a.target.querySelectorAll("[data-keywords-control]")),a.opts=Object.assign({},n.defaults,i),a.$itemsContainer=a.target.getElementsByClassName(a.opts.itemsContainerClassName)[0],a.opts.inherit&&a.opts.inherit.from.length>0?a.isInherited=!0:a.$items=a.target.getElementsByClassName(a.opts.itemClassName),a}return s(n,u),a(n,[{key:"init",value:function(){switch(this.function){case"selekce":this.opts.import&&this.opts.import.length>0&&(this.$itemsContainer.innerHTML=n._getHTMLFromItems(this.opts.import)),z.change(this.id,n._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),n._getItemsHTML(this.$itemsContainer)),this.isInherited&&(this.opts.inherit.onInit&&this._regenerateItemsContainerFromInherited(),this._registerStoreHandlers()),this._registerHandlers();break;case"wordcloud":Array.from(this.$items).forEach(function(t){t.setAttribute("data-keywords-item",0)}),this._changeSizeOfKeywordItem(this.opts.skala)}}},{key:"_changeSizeOfKeywordItem",value:function(t){var e=this;function n(e,n,a){var i=parseInt(e.getAttribute("data-keywords-item"),10),s=i+n,o=Math.abs(s)>t?i:s;e.setAttribute("data-keywords-item",o),a()}t=t?parseInt(t,10):4,this.$controls.forEach(function(t){var a=t.parentElement.parentElement;switch(t.getAttribute("data-keywords-control")){case"minus":t.addEventListener("click",function(t){n(a,-1,e.showFeedback),t.preventDefault()});break;case"plus":t.addEventListener("click",function(t){n(a,1,e.showFeedback),t.preventDefault()})}})}},{key:"_regenerateItemsContainerFromInherited",value:function(){var t=this,e="";this.opts.inherit.from.forEach(function(a){var i=document.getElementById(a).getElementsByClassName(t.opts.itemsContainerClassName)[0].innerHTML;e+=n.renameItemsIds(a,t.id,i)}),this.$itemsContainer.innerHTML=e,this.$items=this.target.getElementsByClassName(this.opts.itemClassName),z.change(this.id,n._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),n._getItemsHTML(this.$itemsContainer))}},{key:"_registerHandlers",value:function(){var t=this;Array.from(this.target.getElementsByClassName(this.opts.itemClassName)).forEach(function(e){e.addEventListener("click",t._eventHandler.bind(t),!0)})}},{key:"_registerStoreHandlers",value:function(){var t=this;z.on(I.keywords.CHANGE,function(e,n){var a=n.action,i=n.action.data;switch(a.type){case I.keywords.CHANGE:t.opts.inherit.from.indexOf(i.keywordsId)>-1&&(t._regenerateItemsContainerFromInherited(),t._registerHandlers())}})}},{key:"_eventHandler",value:function(t){"click"===t.type&&(E(t.currentTarget,"disabled"),z.change(this.id,n._getItemsFromHTML(this.$itemsContainer,this.opts.itemClassName),n._getItemsHTML(this.$itemsContainer)),this.showFeedback())}}]),n}();H._getItemFromDOMElement=function(t){return{class:t.className,id:t.getAttribute("id"),text:t.innerText}},H._getItemsHTML=function(t){return t.innerHTML},H._getItemsFromHTML=function(t,e){var n=t.getElementsByClassName(e),a=[];return Array.from(n).forEach(function(t){a.push(H._getItemFromDOMElement(t))}),a},H._getDOMElementFromItem=function(t){var e=document.createElement("div");return e.setAttribute("class",t.class),e.setAttribute("id",t.id),e.innerHTML=t.text,f(e)},H._getHTMLFromItems=function(t){var e="";return t.forEach(function(t){e+=H._getDOMElementFromItem(t)}),e},H.renameItemsIds=function(t,e,n){var a=new RegExp(t,"g");return n.replace(a,e)},H.defaults={itemsContainerClassName:"keywords-items-container",itemClassName:"keywords-item"};var O=function(){function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.$element=n,this.id=this.$element.getAttribute("id"),this.opts=Object.assign({},t.defaults,a),this.commandNames=JSON.parse(this.$element.getAttribute(this.opts.itemSubscribeAttributeClassName)),this.$itemsContainer=this.$element.getElementsByClassName(this.opts.itemsContainerClassName)[0]}return a(t,[{key:"init",value:function(){this._registerStoreHandlers()}},{key:"_registerStoreHandlers",value:function(){var t=this;R.on(I.editor.CHANGE,function(e,n){n.action;var a=n.action.data.tagContainer;if(t.commandNames.indexOf(a.tagName)>-1){var i=R.getTagsBy({key:"tagName",value:t.commandNames}),s="";i.forEach(function(t){s+=f(t.tag)}),t.$itemsContainer.innerHTML=s}})}}]),t}();O.defaults={itemsContainerClassName:"editor-tags-placeholder-content",itemSubscribeAttributeClassName:"data-placeholder-editor-subscribe"};var F=function(t){function n(t,a,i){var s;return e(this,n),(s=c(this,o(n).call(this,a))).id=t,s.opts=Object.assign({},n.defaults,i),s.$questions=s.target.getElementsByClassName(s.opts.itemClass),s.cache={answersCorrect:0,colors:[],questions:[]},s.opts.zpetnaVazba&&(s.cache.colors=s.opts.zpetnaVazba.map(function(t){return t.barva})),s}return s(n,u),a(n,[{key:"init",value:function(){this._registerHandlers()}},{key:"_registerHandlers",value:function(){var t=this;Array.from(this.$questions).forEach(function(e,n){t.cache.questions.push({answered:!1});var a=parseInt(e.getAttribute("data-module-answer"),10),i=Array.from(e.getElementsByClassName(t.opts.optionClass));i.forEach(function(e,s){e.addEventListener("click",function(){var o=e;if(!o.classList.contains("selected")){if(i.forEach(function(e){return x(e,t.opts.selectedClass)}),E(o,t.opts.selectedClass),t.opts.zpetnaVazba){var r;s===a?t.cache.answersCorrect+=1:0!==t.cache.answersCorrect&&!0===t.cache.questions[n].answered&&(t.cache.answersCorrect-=1);var l=t.opts.zpetnaVazba.find(function(e){return e.podminka.includes(t.cache.answersCorrect)});(r=t.$buttonFeedback.classList).remove.apply(r,d(t.cache.colors)),t.$buttonFeedback.classList.add(l.barva),t.$buttonFeedbackText.innerText=l.text}t.cache.questions[n].answered=!0,void 0===t.cache.questions.find(function(t){return!t.answered})&&t.showFeedback()}},!1)})})}}]),n}();F.defaults={itemClass:"test-quiz-item",optionClass:"option",selectedClass:"selected"};var P=function(t){function n(t,a){var i;return e(this,n),(i=c(this,o(n).call(this,t))).id=i.target.id,i.opts=Object.assign({},n.defaults,a),i.rowIndex=0,i.$tableResultBody=i.target.getElementsByClassName("table-body")[0],i.dataSettings=i.opts.data,i.cache={tasksToComplete:0,tasksCompleted:0,tasks:[]},i}return s(n,u),a(n,[{key:"init",value:function(){"store"===this.dataSettings.source&&this._registerStoreHandlers()}},{key:"_registerStoreHandlers",value:function(){var t=this;D.on(this.dataSettings.subscribe.join(" "),function(e,a){var i=a.action,s=a.data;switch(i.type){case I[e].ADD:t.$tableResultBody.insertAdjacentHTML("beforeend",n._getRowHTML(s));var o=t.$tableResultBody.querySelectorAll(".table-row"),r=o[o.length-1].querySelectorAll("select");t.cache.tasksToComplete+=r.length,Array.from(r).forEach(function(e){t.cache.tasks.push({answered:!1});var n=t.cache.tasks.length-1;e.addEventListener("change",function(){!1===t.cache.tasks[n].answered&&(t.cache.tasksCompleted+=1,t.cache.tasks[n].answered=!0),t.cache.tasksToComplete===t.cache.tasksCompleted&&t.showFeedback()})});break;case I[e].DELETE:var l=document.getElementById("".concat(s.id,"_table"));v(l),t.cache.tasksToComplete-=l.querySelectorAll("select").length,t.cache.tasksCompleted-=l.querySelectorAll("select").length,t.cache.tasksToComplete<=t.cache.tasksCompleted&&t.showFeedback()}})}}]),n}();P.defaults={},P._getRowHTML=function(t){return'\n    <div class="table-row" id="'.concat(t.id,'_table">\n      <div class="cell">').concat(t.data.text,'</div>\n      <div class="cell">').concat(t.data.vyraz,'</div>\n      <div class="cell">\n        <select id="').concat(t.id,'-select-osoba" name="osoba" data-save="value">\n          <option>Vyberte osobu</option>\n          <option>já</option>\n          <option>ty</option>\n          <option>on/ona/ono</option>\n          <option>my</option>\n          <option>vy</option>\n          <option>oni/ony/ona</option>\n          <option>infinitiv</option>\n        </select>\n      </div>\n      <div class="cell">\n        <select id="').concat(t.id,'-select-zpusob" name="zpusob" data-save="value">\n          <option>Vyberte způsob</option>\n          <option>oznamovací</option>\n          <option>podmiňovací</option>\n          <option>rozkazovací</option>\n          <option id="select-zpusob-infinitiv">infinitiv</option>\n        </select>\n      </div>\n    </div>\n  ')};var G=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$fullscreen=document.querySelector('[data-fullscreen="target"]'),a.$fullscreenImage=a.$fullscreen.querySelector('[data-fullscreen="image"]'),a.window={},a.image={},a.window.width=window.innerWidth,a.window.height=window.innerHeight,a.window.ratio=a.window.width/a.window.height,a.$fullscreenImage.onload=function(){a.image.width=a.$fullscreenImage.naturalWidth,a.image.height=a.$fullscreenImage.naturalHeight,a.image.ratio=a.image.width/a.image.height,a.image.ratio>=a.window.ratio?(a.$fullscreenImage.style.width="100%",a.$fullscreenImage.style.height="auto"):(a.$fullscreenImage.style.width="auto",a.$fullscreenImage.style.height="".concat(a.window.height,"px"))},a}return s(n,u),n}(),W=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).target.addEventListener("click",function(t){a.$fullscreenImage.src=a.target.nextElementSibling.src,a.$fullscreen.classList.toggle("hidden"),a.showFeedback(),t.preventDefault()}),a}return s(n,G),n}(),j=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$userTexts=a.$slide.querySelectorAll("[data-textarea-target]"),a.lengthExpected={min:parseInt("0"===a.target.getAttribute("minlength")?1:a.target.getAttribute("minlength"),10),avg:null,max:parseInt(a.target.getAttribute("maxlength")/2,10)},a.lengthExpected.avg=Math.floor((a.lengthExpected.max-a.lengthExpected.min)/4+a.lengthExpected.min),a.cache={answersCorrect:0,colors:["color-red","color-orange","color-green"],questions:[]},a.sendFeedback(),a}return s(n,u),a(n,[{key:"sendFeedback",value:function(){var t=this;this.target.addEventListener("keyup",function(e){var n;e.stopPropagation();var a=t.target.value.length;((n=t.$buttonFeedback.classList).remove.apply(n,d(t.cache.colors)),a<t.lengthExpected.min)?(t.$buttonFeedback.classList.add(t.cache.colors[0]),t.$buttonFeedbackText.innerText="Napiš něco!"):(a<=t.lengthExpected.avg?(t.$buttonFeedback.classList.add(t.cache.colors[1]),t.$buttonFeedbackText.innerText="Není toho moc."):a>t.lengthExpected.avg&&(t.$buttonFeedback.classList.add(t.cache.colors[2]),t.$buttonFeedbackText.innerText="Mám hotovo!"),t.target.setAttribute("data-textarea-target","success"),void 0===Array.from(t.$userTexts).find(function(t){return"success"!==t.getAttribute("data-textarea-target")})&&t.showFeedback())})}}]),n}(),Y=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$playButton=a.target.querySelector("[data-player-control]"),a.$loadWave=a.target.querySelector("[data-audio-wave]"),a.$leftTime=a.target.querySelector("[data-audio-time-left]"),a.$audioDuration=a.target.querySelector("[data-audio-time-duration]"),a.wavesurfer=WaveSurfer.create({container:a.$loadWave,waveColor:"#A77977",progressColor:"#FCE4E3",height:80,responsive:!0,barWidth:2}),a.wavesurfer.load(a.$loadWave.dataset.src),a.initWave(),a}return s(n,u),a(n,[{key:"initWave",value:function(){var t=this;this.wavesurfer.on("ready",function(){t.$leftTime.textContent="0:00";var e=t.wavesurfer.getDuration(),n=Math.floor(e%3600/60),a="00".concat(Math.floor(e%60)).slice(-2);t.$audioDuration.textContent="".concat(n,":").concat(a),t.addListenerAfterReady()})}},{key:"addListenerAfterReady",value:function(){var t=this;this.wavesurfer.on("audioprocess",function(e){var n=Math.floor(e%3600/60),a="00".concat(Math.floor(e%60)).slice(-2);t.$leftTime.textContent="".concat(n,":").concat(a)}),this.wavesurfer.on("finish",function(){t.$playButton.setAttribute("data-player-control","paused")}),this.$playButton.addEventListener("click",function(){t.wavesurfer.playPause(),"paused"===t.$playButton.getAttribute("data-player-control")?t.$playButton.setAttribute("data-player-control","playing"):t.$playButton.setAttribute("data-player-control","paused"),t.showFeedback()});var e=document.querySelectorAll("[data-nav-button]");Array.from(e).forEach(function(e){e.addEventListener("click",function(){"playing"===t.$playButton.getAttribute("data-player-control")&&(t.wavesurfer.playPause(),t.$playButton.setAttribute("data-player-control","paused"))})})}}]),n}(),X=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$audio=a.target.querySelector("audio"),a.$timeLeft=a.target.querySelector("[data-audio-time-left]"),a.$duration=a.target.querySelector("[data-audio-time-duration]"),a.$duration.innerText="/".concat(C.getSecondsMinutesFormat(a.$audio.duration)),C.addEventListeners(a.target,a.showFeedback),a}return s(n,C),n}(),V=function(t){function n(t){var a;return e(this,n),(a=c(this,o(n).call(this,t))).$buttons=a.target.querySelectorAll('[data-fake-map="toggle"]'),a.$maps=a.target.querySelectorAll('[data-fake-map="map"]'),a.lastActiveIndex=0,a.addEventListenerToButtons(),a}return s(n,u),a(n,[{key:"switchMap",value:function(t,e){this.$maps[this.lastActiveIndex].classList.remove("active"),this.$buttons[this.lastActiveIndex].classList.remove("active"),this.$maps[e].classList.add("active"),t.classList.add("active"),this.lastActiveIndex=e}},{key:"addEventListenerToButtons",value:function(){var t=this;this.$buttons.forEach(function(e,n){e.addEventListener("click",function(a){t.switchMap(e,n),t.showFeedback(),a.preventDefault()})})}}]),n}();document.addEventListener("DOMContentLoaded",function(){console.log("domLoad:components")},!1),window.addEventListener("load",function(){console.log("windowLoad:components");var t=document.querySelectorAll('[data-player-audio="normal"]');t.length>0&&Array.from(t).forEach(function(t){new Y(t)});var e=document.querySelectorAll('[data-player-audio="simple"]');e.length>0&&Array.from(e).forEach(function(t){new X(t)});var n=document.querySelectorAll('[data-fullscreen="toggle"]');n.length>0&&Array.from(n).forEach(function(t){new W(t)});var a=document.querySelectorAll("[data-lupa-target]");if(a.length>0)for(var i=0;i<a.length;i+=1)new h(a[i]);var s=document.querySelectorAll("[data-photo-detail-target]");if(s.length>0)for(var o=0;o<s.length;o+=1)new A(s[o]);var r=document.querySelectorAll('[data-fake-map="target"]');if(r.length>0)for(var l=0;l<r.length;l+=1)new V(r[l]);if(!0!==HISTORYLAB.import.done){var c=document.querySelectorAll('[data-textarea-target=""]');c.length>0&&Array.from(c).forEach(function(t){new j(t)});var d=document.querySelectorAll("[data-editor]");d.length>0&&Array.from(d).forEach(function(t){new B(t)});var u=document.querySelectorAll("[data-target-test-quiz]");u.length>0&&Array.from(u).forEach(function(t){var e=document.querySelector('[data-test-quiz-id-reference="'.concat(t.getAttribute("data-test-quiz-id"),'"]'));new F(t.getAttribute("data-test-quiz-id"),t,JSON.parse(e.getAttribute("data-module-settings"))).init()});var g=document.querySelectorAll("[data-target-analytical-table]");g.length>0&&Array.from(g).forEach(function(t){var e=document.querySelector('[data-analytical-table-id-reference="'.concat(t.getAttribute("data-analytical-table-id"),'"]'));new q(t.getAttribute("data-analytical-table-id"),t,JSON.parse(e.getAttribute("data-module-settings"))).init()});var m=document.querySelectorAll("[data-target-generic-table]");m.length>0&&Array.from(m).forEach(function(t){var e=document.querySelector('[data-generic-table-id-reference="'.concat(t.id,'"]'));new P(t,JSON.parse(e.getAttribute("data-module-settings"))).init()});var v=document.querySelectorAll("[data-svg-target]");if(v.length>0){var f=document.querySelector("[data-radial-menu]");f&&new M(f,v);for(var p=0;p<v.length;p+=1)new $(v[p])}var y=document.querySelectorAll("[data-sortable-target]");if(y.length>0)for(var b=0;b<y.length;b+=1)new _(y[b]);var E=document.querySelectorAll("[data-keywords]");E.length>0&&Array.from(E).forEach(function(t){var e=t.hasAttribute("data-module-settings")?t.getAttribute("data-module-settings"):{};new H(t,JSON.parse(e)).init()});var w=document.querySelectorAll(".editor-tags-placeholder");w.length>0&&Array.from(w).forEach(function(t){new O(t).init()})}},!1)}();
//# sourceMappingURL=components.build.js.map
